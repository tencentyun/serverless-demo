import { EventEmitter } from "events";
import { SandboxConnector, SandboxConnectorConfig, SandboxConnectionInfo } from "./sandbox-connector";
export interface BrowserInstanceConfig extends SandboxConnectorConfig {
    maxInstances?: number;
    instanceTtl?: number;
    cleanupInterval?: number;
}
export interface BrowserInstanceInfo {
    sessionId: string;
    connector: SandboxConnector;
    connectionInfo: SandboxConnectionInfo;
    createdAt: Date;
    lastUsed: Date;
    isActive: boolean;
}
/**
 * BrowserInstanceManager provides multi-instance isolation and lifecycle management
 * Supports concurrent users with isolated browser environments
 */
export declare class BrowserInstanceManager extends EventEmitter {
    private config;
    private instances;
    private cleanupTimer?;
    constructor(config: BrowserInstanceConfig);
    /**
     * Create or get existing browser instance for session
     */
    getInstance(sessionId: string): Promise<BrowserInstanceInfo>;
    /**
     * Get existing instance without creating new one
     */
    getExistingInstance(sessionId: string): BrowserInstanceInfo | undefined;
    /**
     * Remove and cleanup specific instance
     */
    removeInstance(sessionId: string): Promise<void>;
    /**
     * Get all active instances
     */
    getActiveInstances(): BrowserInstanceInfo[];
    /**
     * Get instance count
     */
    getInstanceCount(): number;
    /**
     * Health check for specific instance
     */
    checkInstanceHealth(sessionId: string): Promise<boolean>;
    /**
     * Cleanup expired instances
     */
    cleanupExpiredInstances(): Promise<void>;
    /**
     * Cleanup all instances
     */
    cleanup(): Promise<void>;
    /**
     * Setup event handlers for connector
     */
    private setupConnectorEvents;
    /**
     * Start cleanup timer
     */
    private startCleanupTimer;
    /**
     * Stop cleanup timer
     */
    private stopCleanupTimer;
    /**
     * Get statistics
     */
    getStatistics(): {
        totalInstances: number;
        activeInstances: number;
        oldestInstance?: Date;
        newestInstance?: Date;
    };
}
//# sourceMappingURL=browser-instance-manager.d.ts.map