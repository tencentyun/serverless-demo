import { BaseFileOperator } from "../base-operator";
import { TransactionFileOperator } from "./transaction-operator";
/**
 * 事务执行器 - 提供便捷的事务操作方法
 */
export declare class TransactionExecutor {
    private transactionOperator;
    private operations;
    constructor(baseOperator: BaseFileOperator);
    /**
     * 获取事务操作器
     */
    getOperator(): TransactionFileOperator;
    /**
     * 添加文件写入操作
     */
    writeFile(path: string, data: string | Buffer, options?: any): TransactionExecutor;
    /**
     * 添加目录创建操作
     */
    mkdir(path: string, options?: any): TransactionExecutor;
    /**
     * 添加自定义操作
     */
    custom(operation: (op: TransactionFileOperator) => Promise<void>): TransactionExecutor;
    /**
     * 执行所有操作
     */
    execute(): Promise<{
        success: boolean;
        error?: Error;
    }>;
    /**
     * 在事务中执行操作
     * @param operation 要执行的操作函数
     * @returns 操作结果
     */
    executeInTransaction<T>(operation: (operator: TransactionFileOperator) => Promise<T>): Promise<T>;
    /**
     * 手动控制的事务 - 返回事务控制器
     */
    createTransaction(): Promise<TransactionController>;
}
/**
 * 事务控制器 - 用于手动控制事务的提交和回滚
 */
export declare class TransactionController {
    private transactionOperator;
    private isCompleted;
    constructor(transactionOperator: TransactionFileOperator);
    /**
     * 获取事务操作器
     */
    getOperator(): TransactionFileOperator;
    /**
     * 提交事务
     */
    commit(): Promise<void>;
    /**
     * 回滚事务
     */
    rollback(): Promise<void>;
    /**
     * 检查事务是否已完成
     */
    isTransactionCompleted(): boolean;
    /**
     * 获取事务操作历史
     */
    getOperationHistory(): readonly any[];
}
/**
 * 创建事务执行器的便捷函数
 */
export declare function createTransactionExecutor(baseOperator: BaseFileOperator): TransactionExecutor;
/**
 * 直接在事务中执行操作的便捷函数
 */
export declare function withTransaction<T>(baseOperator: BaseFileOperator, operation: (operator: TransactionFileOperator) => Promise<T>): Promise<T>;
//# sourceMappingURL=transaction-utils.d.ts.map