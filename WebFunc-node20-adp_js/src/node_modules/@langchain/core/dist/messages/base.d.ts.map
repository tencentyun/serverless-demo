{"version":3,"file":"base.d.ts","names":["Serializable","SerializedConstructor","ContentBlock","$InferMessageContent","$InferResponseMetadata","MessageStructure","MessageType","Message","MessageStringFormat","MESSAGE_SYMBOL","StoredMessageData","Record","StoredMessage","StoredGeneration","StoredMessageV1","MessageContent","Array","FunctionCall","BaseMessageFields","TStructure","TRole","Pick","Standard","OpenAIToolCall","Partial","mergeContent","_mergeStatus","BaseMessage","NonNullable","Symbol","toStringTag","isOpenAIToolCallArray","DEFAULT_MERGE_IGNORE_KEYS","MergeDictsOptions","_mergeDicts","_mergeLists","Content","_mergeObj","T","BaseMessageChunk","MessageFieldWithRole","_isMessageFieldWithRole","BaseMessageLike","isBaseMessage","isBaseMessageChunk"],"sources":["../../src/messages/base.d.ts"],"sourcesContent":["import { Serializable, SerializedConstructor } from \"../load/serializable.js\";\nimport { ContentBlock } from \"./content/index.js\";\nimport { $InferMessageContent, $InferResponseMetadata, MessageStructure, MessageType, Message } from \"./message.js\";\nimport { type MessageStringFormat } from \"./format.js\";\n/** @internal */\ndeclare const MESSAGE_SYMBOL: unique symbol;\nexport interface StoredMessageData {\n    content: string;\n    role: string | undefined;\n    name: string | undefined;\n    tool_call_id: string | undefined;\n    additional_kwargs?: Record<string, any>;\n    /** Response metadata. For example: response headers, logprobs, token counts, model name. */\n    response_metadata?: Record<string, any>;\n    id?: string;\n}\nexport interface StoredMessage {\n    type: string;\n    data: StoredMessageData;\n}\nexport interface StoredGeneration {\n    text: string;\n    message?: StoredMessage;\n}\nexport interface StoredMessageV1 {\n    type: string;\n    role: string | undefined;\n    text: string;\n}\nexport type MessageContent = string | Array<ContentBlock>;\nexport interface FunctionCall {\n    /**\n     * The arguments to call the function with, as generated by the model in JSON\n     * format. Note that the model does not always generate valid JSON, and may\n     * hallucinate parameters not defined by your function schema. Validate the\n     * arguments in your code before calling your function.\n     */\n    arguments: string;\n    /**\n     * The name of the function to call.\n     */\n    name: string;\n}\nexport type BaseMessageFields<TStructure extends MessageStructure = MessageStructure, TRole extends MessageType = MessageType> = Pick<Message, \"id\" | \"name\"> & {\n    content?: $InferMessageContent<TStructure, TRole>;\n    contentBlocks?: Array<ContentBlock.Standard>;\n    /** @deprecated */\n    additional_kwargs?: {\n        /**\n         * @deprecated Use \"tool_calls\" field on AIMessages instead\n         */\n        function_call?: FunctionCall;\n        /**\n         * @deprecated Use \"tool_calls\" field on AIMessages instead\n         */\n        tool_calls?: OpenAIToolCall[];\n        [key: string]: unknown;\n    };\n    response_metadata?: Partial<$InferResponseMetadata<TStructure, TRole>>;\n};\nexport declare function mergeContent(firstContent: MessageContent, secondContent: MessageContent): MessageContent;\n/**\n * 'Merge' two statuses. If either value passed is 'error', it will return 'error'. Else\n * it will return 'success'.\n *\n * @param {\"success\" | \"error\" | undefined} left The existing value to 'merge' with the new value.\n * @param {\"success\" | \"error\" | undefined} right The new value to 'merge' with the existing value\n * @returns {\"success\" | \"error\"} The 'merged' value.\n */\nexport declare function _mergeStatus(left?: \"success\" | \"error\", right?: \"success\" | \"error\"): \"success\" | \"error\" | undefined;\n/**\n * Base class for all types of messages in a conversation. It includes\n * properties like `content`, `name`, and `additional_kwargs`. It also\n * includes methods like `toDict()` and `_getType()`.\n */\nexport declare abstract class BaseMessage<TStructure extends MessageStructure = MessageStructure, TRole extends MessageType = MessageType> extends Serializable implements Message<TStructure, TRole> {\n    lc_namespace: string[];\n    lc_serializable: boolean;\n    get lc_aliases(): Record<string, string>;\n    readonly [MESSAGE_SYMBOL]: true;\n    abstract readonly type: TRole;\n    id?: string;\n    /** @inheritdoc */\n    name?: string;\n    content: $InferMessageContent<TStructure, TRole>;\n    additional_kwargs: NonNullable<BaseMessageFields<TStructure, TRole>[\"additional_kwargs\"]>;\n    response_metadata: NonNullable<BaseMessageFields<TStructure, TRole>[\"response_metadata\"]>;\n    /**\n     * @deprecated Use .getType() instead or import the proper typeguard.\n     * For example:\n     *\n     * ```ts\n     * import { isAIMessage } from \"@langchain/core/messages\";\n     *\n     * const message = new AIMessage(\"Hello!\");\n     * isAIMessage(message); // true\n     * ```\n     */\n    _getType(): MessageType;\n    /**\n     * @deprecated Use .type instead\n     * The type of the message.\n     */\n    getType(): MessageType;\n    constructor(arg: $InferMessageContent<TStructure, TRole> | BaseMessageFields<TStructure, TRole>);\n    /** Get text content of the message. */\n    get text(): string;\n    get contentBlocks(): Array<ContentBlock.Standard>;\n    toDict(): StoredMessage;\n    static lc_name(): string;\n    get _printableFields(): Record<string, unknown>;\n    static isInstance(obj: unknown): obj is BaseMessage;\n    _updateId(value: string | undefined): void;\n    get [Symbol.toStringTag](): any;\n    toFormattedString(format?: MessageStringFormat): string;\n}\n/**\n * @deprecated Use \"tool_calls\" field on AIMessages instead\n */\nexport type OpenAIToolCall = {\n    /**\n     * The ID of the tool call.\n     */\n    id: string;\n    /**\n     * The function that the model called.\n     */\n    function: FunctionCall;\n    /**\n     * The type of the tool. Currently, only `function` is supported.\n     */\n    type: \"function\";\n    index?: number;\n};\nexport declare function isOpenAIToolCallArray(value?: unknown): value is OpenAIToolCall[];\n/**\n * Default keys that should be preserved (not merged) when concatenating message chunks.\n * These are identification and timestamp fields that shouldn't be summed or concatenated.\n */\nexport declare const DEFAULT_MERGE_IGNORE_KEYS: readonly string[];\n/**\n * Options for controlling merge behavior in `_mergeDicts`.\n */\nexport interface MergeDictsOptions {\n    /**\n     * Keys to ignore during merging. When a key is in this list:\n     * - For numeric values: the original value is preserved (not summed)\n     * - For string values: the original value is preserved (not concatenated)\n     *\n     * Defaults to `DEFAULT_MERGE_IGNORE_KEYS` which includes 'index', 'created', 'timestamp'.\n     *\n     * @example\n     * // Extend defaults with custom keys\n     * { ignoreKeys: [...DEFAULT_MERGE_IGNORE_KEYS, 'role', 'customField'] }\n     */\n    ignoreKeys?: readonly string[];\n}\nexport declare function _mergeDicts(\n/**\n * The left dictionary to merge.\n */\nleft: Record<string, any> | undefined, \n/**\n * The right dictionary to merge.\n * @type {Record<string, any>}\n */\nright: Record<string, any> | undefined, \n/**\n * The options for the merge.\n */\noptions?: MergeDictsOptions): Record<string, any> | undefined;\nexport declare function _mergeLists<Content extends ContentBlock>(left?: Content[], right?: Content[], options?: MergeDictsOptions): Content[] | undefined;\nexport declare function _mergeObj<T = any>(left: T | undefined, right: T | undefined, options?: MergeDictsOptions): T | undefined;\n/**\n * Represents a chunk of a message, which can be concatenated with other\n * message chunks. It includes a method `_merge_kwargs_dict()` for merging\n * additional keyword arguments from another `BaseMessageChunk` into this\n * one. It also overrides the `__add__()` method to support concatenation\n * of `BaseMessageChunk` instances.\n */\nexport declare abstract class BaseMessageChunk<TStructure extends MessageStructure = MessageStructure, TRole extends MessageType = MessageType> extends BaseMessage<TStructure, TRole> {\n    abstract concat(chunk: BaseMessageChunk): BaseMessageChunk<TStructure, TRole>;\n    static isInstance(obj: unknown): obj is BaseMessageChunk;\n}\nexport type MessageFieldWithRole = {\n    role: MessageType;\n    content: MessageContent;\n    name?: string;\n} & Record<string, unknown>;\nexport declare function _isMessageFieldWithRole(x: BaseMessageLike): x is MessageFieldWithRole;\nexport type BaseMessageLike = BaseMessage | MessageFieldWithRole | [MessageType, MessageContent] | string\n/**\n * @deprecated Specifying \"type\" is deprecated and will be removed in 0.4.0.\n */\n | ({\n    type: MessageType | \"user\" | \"assistant\" | \"placeholder\";\n} & BaseMessageFields & Record<string, unknown>) | SerializedConstructor;\n/**\n * @deprecated Use {@link BaseMessage.isInstance} instead\n */\nexport declare function isBaseMessage(messageLike?: unknown): messageLike is BaseMessage;\n/**\n * @deprecated Use {@link BaseMessageChunk.isInstance} instead\n */\nexport declare function isBaseMessageChunk(messageLike?: unknown): messageLike is BaseMessageChunk;\nexport {};\n//# sourceMappingURL=base.d.ts.map"],"mappings":";;;;;;;cAKcS;AAAAA,UACGC,iBAAAA,CAD0B;EAC1BA,OAAAA,EAAAA,MAAAA;EAUAE,IAAAA,EAAAA,MAAAA,GAAAA,SAAa;EAIbC,IAAAA,EAAAA,MAAAA,GAAAA,SAAgB;EAIhBC,YAAAA,EAAAA,MAAe,GAAA,SAAA;EAKpBC,iBAAc,CAAA,EAlBFJ,MAkBE,CAAA,MAAkBT,EAAAA,GAAAA,CAAAA;EAC3Be;EAaLC,iBAAAA,CAAAA,EA9BYP,MA8BK,CAAAQ,MAAAA,EAAAA,GAAAA,CAAAC;EAAoBf,EAAAA,CAAAA,EAAAA,MAAAA;;AAAmDC,UA3BnFM,aAAAA,CA2BmFN;EAAcA,IAAAA,EAAAA,MAAAA;EAAoBC,IAAAA,EAzB5HG,iBAyB4HH;;AACnGY,UAxBlBN,gBAAAA,CAwBkBM;EAAYC,IAAAA,EAAAA,MAAAA;EAAjCjB,OAAAA,CAAAA,EAtBAS,aAsBAT;;AACMa,UArBHF,eAAAA,CAqBGE;EAMIC,IAAAA,EAAAA,MAAAA;EAIHM,IAAAA,EAAAA,MAAAA,GAAAA,SAAAA;EAGkCJ,IAAAA,EAAAA,MAAAA;;AAAvBf,KA7BpBW,cAAAA,GA6BoBX,MAAAA,GA7BMY,KA6BNZ,CA7BYF,YA6BZE,CAAAA;AAARoB,UA5BPP,YAAAA,CA4BOO;EAAO;AAE/B;;;;AAAiH;EASzFE,SAAAA,EAAAA,MAAY;EAMNC;;;EAAkFrB,IAAAA,EAAAA,MAAAA;;AAAmEa,KAhCvKD,iBAgCuKC,CAAAA,mBAhClId,gBAgCkIc,GAhC/Gd,gBAgC+Gc,EAAAA,cAhC/Eb,WAgC+Ea,GAhCjEb,WAgCiEa,CAAAA,GAhClDE,IAgCkDF,CAhC7CZ,OAgC6CY,EAAAA,IAAAA,GAAAA,MAAAA,CAAAA,GAAAA;EAAYC,OAAAA,CAAAA,EA/BjLjB,oBA+BiLiB,CA/B5JD,UA+B4JC,EA/BhJA,KA+BgJA,CAAAA;EAGzKT,aAAAA,CAAAA,EAjCFK,KAiCEL,CAjCIT,YAAAA,CAAaoB,QAiCjBX,CAAAA;EACRF;EACcW,iBAAAA,CAAAA,EAAAA;IAIMD;;;IACmBA,aAAAA,CAAAA,EAlC7BF,YAkC6BE;IAAYC;;;IACZD,UAAAA,CAAAA,EA/BhCI,cA+BgCJ,EAAAA;IAAYC,CAAAA,GAAAA,EAAAA,MAAAA,CAAAA,EAAAA,OAAAA;EAA9BF,CAAAA;EAAZU,iBAAAA,CAAAA,EA5BCJ,OA4BDI,CA5BSxB,sBA4BTwB,CA5BgCT,UA4BhCS,EA5B4CR,KA4B5CQ,CAAAA,CAAAA;CAYPtB;AAKDA,iBA3CSmB,YAAAA,CA2CTnB,YAAAA,EA3CoCS,cA2CpCT,EAAAA,aAAAA,EA3CmES,cA2CnET,CAAAA,EA3CoFS,cA2CpFT;;;;;;;;;AAKDM,iBAvCUc,YAAAA,CAuCVd,IAAAA,CAAAA,EAAAA,SAAAA,GAAAA,OAAAA,EAAAA,KAAAA,CAAAA,EAAAA,SAAAA,GAAAA,OAAAA,CAAAA,EAAAA,SAAAA,GAAAA,OAAAA,GAAAA,SAAAA;;;;;;AAjC6JL,uBAA7IoB,WAA6IpB,CAAAA,mBAA9GF,gBAA8GE,GAA3FF,gBAA2FE,EAAAA,cAA3DD,WAA2DC,GAA7CD,WAA6CC,CAAAA,SAAxBP,YAAAA,YAAwBO,OAAAA,CAAQY,UAARZ,EAAoBa,KAApBb,CAAAA,CAAAA;EAAO,YAAA,EAAA,MAAA,EAAA;EA4CtKgB,eAAAA,EAAc,OAAA;EAeFQ,IAAAA,UAAAA,CAAAA,CAAAA,EAxDFpB,MAwDuB,CAAA,MAAA,EAAA,MAA4BY,CAAAA;EAKpDS,UA5DPvB,cAAAA,CA4DOuB,EAAAA,IAA4C;EAIhDC,kBAAAA,IAAiB,EA/DNb,KA+DM;EAcVc,EAAAA,CAAAA,EAAAA,MAAAA;EAIlBvB;EAKCA,IAAAA,CAAAA,EAAAA,MAAAA;EAIGsB,OAAAA,EAtFG9B,oBAsFH8B,CAtFwBd,UAsFxBc,EAtFoCb,KAsFpCa,CAAAA;EAAoBtB,iBAAAA,EArFPiB,WAqFOjB,CArFKO,iBAqFLP,CArFuBQ,UAqFvBR,EArFmCS,KAqFnCT,CAAAA,CAAAA,mBAAAA,CAAAA,CAAAA;EAAM,iBAAA,EApFbiB,WAoFa,CApFDV,iBAoFC,CApFiBC,UAoFjB,EApF6BC,KAoF7B,CAAA,CAAA,mBAAA,CAAA,CAAA;EACZe;;;;;;AAAoH;AAC5I;;;;EAAoHG,QAAAA,CAAAA,CAAAA,EA1EpGhC,WA0EoGgC;EAAC;AAQrH;;;EAAqHhC,OAAAA,CAAAA,CAAAA,EA7EtGA,WA6EsGA;EAAcA,WAAAA,CAAAA,GAAAA,EA5E9GH,oBA4E8GG,CA5EzFa,UA4EyFb,EA5E7Ec,KA4E6Ed,CAAAA,GA5EpEY,iBA4EoEZ,CA5ElDa,UA4EkDb,EA5EtCc,KA4EsCd,CAAAA;EAAiCa;EAAYC,IAAAA,IAAAA,CAAAA,CAAAA,EAAAA,MAAAA;EACrJmB,IAAAA,aAAAA,CAAAA,CAAAA,EA1EFvB,KA0EEuB,CA1EIrC,YAAAA,CAAaoB,QA0EjBiB,CAAAA;EAAoCpB,MAAAA,CAAAA,CAAAA,EAzEjDP,aAyEiDO;EAAYC,OAAAA,OAAAA,CAAAA,CAAAA,EAAAA,MAAAA;EAA7BmB,IAAAA,gBAAAA,CAAAA,CAAAA,EAvElB5B,MAuEkB4B,CAAAA,MAAAA,EAAAA,OAAAA,CAAAA;EACFA,OAAAA,UAAAA,CAAAA,GAAAA,EAAAA,OAAAA,CAAAA,EAAAA,GAAAA,IAvEAZ,WAuEAY;EAF4GZ,SAAAA,CAAAA,KAAAA,EAAAA,MAAAA,GAAAA,SAAAA,CAAAA,EAAAA,IAAAA;EAAW,KAnE1JE,MAAAA,CAAOC,WAAAA,GAmEmJ,EAAA,GAAA;EAIvJU,iBAAAA,CAAAA,MAAoB,CAAA,EAtEDhC,mBAsEC,CAAA,EAAA,MAAA;;;;AAItB;AACciC,KAtEZlB,cAAAA,GAsEYkB;EACZC;;;EAAwDpC,EAAAA,EAAAA,MAAAA;EAAaS;;;EAMzDJ,QAAAA,EArEVM,YAqEUN;EAA2BV;AAAqB;AAIxE;EAIwB2C,IAAAA,EAAAA,UAAAA;;;iBAtEAb,qBAAAA,4BAAiDR;;;;;cAKpDS;;;;UAIJC,iBAAAA;;;;;;;;;;;;;;iBAcOC,WAAAA;;;;MAIlBvB;;;;;OAKCA;;;;UAIGsB,oBAAoBtB;iBACNwB,4BAA4BjC,qBAAqBkC,mBAAmBA,qBAAqBH,oBAAoBG;iBAC7GC,yBAAyBC,sBAAsBA,yBAAyBL,oBAAoBK;;;;;;;;uBAQtFC,oCAAoClC,mBAAmBA,gCAAgCC,cAAcA,qBAAqBqB,YAAYR,YAAYC;yBACrJmB,mBAAmBA,iBAAiBpB,YAAYC;0CAC/BmB;;KAEhCC,oBAAAA;QACFlC;WACGS;;IAETJ;iBACoB8B,uBAAAA,IAA2BC,uBAAuBF;KAC9DE,eAAAA,GAAkBf,cAAca,wBAAwBlC,aAAaS;;;;QAKvET;IACNY,oBAAoBP,2BAA2BV;;;;iBAI3B0C,aAAAA,wCAAqDhB;;;;iBAIrDiB,kBAAAA,wCAA0DL"}