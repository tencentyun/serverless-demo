// src/types.ts
import { z } from "zod";
var FunctionCallSchema = z.object({
  name: z.string(),
  arguments: z.string()
});
var ToolCallSchema = z.object({
  id: z.string(),
  type: z.literal("function"),
  function: FunctionCallSchema
});
var BaseMessageSchema = z.object({
  id: z.string(),
  role: z.string(),
  content: z.string().optional(),
  name: z.string().optional()
});
var TextInputContentSchema = z.object({
  type: z.literal("text"),
  text: z.string()
});
var BinaryInputContentObjectSchema = z.object({
  type: z.literal("binary"),
  mimeType: z.string(),
  id: z.string().optional(),
  url: z.string().optional(),
  data: z.string().optional(),
  filename: z.string().optional()
});
var ensureBinaryPayload = (value, ctx) => {
  if (!value.id && !value.url && !value.data) {
    ctx.addIssue({
      code: z.ZodIssueCode.custom,
      message: "BinaryInputContent requires at least one of id, url, or data.",
      path: ["id"]
    });
  }
};
var BinaryInputContentSchema = BinaryInputContentObjectSchema.superRefine((value, ctx) => {
  ensureBinaryPayload(value, ctx);
});
var InputContentBaseSchema = z.discriminatedUnion("type", [
  TextInputContentSchema,
  BinaryInputContentObjectSchema
]);
var InputContentSchema = InputContentBaseSchema.superRefine((value, ctx) => {
  if (value.type === "binary") {
    ensureBinaryPayload(value, ctx);
  }
});
var DeveloperMessageSchema = BaseMessageSchema.extend({
  role: z.literal("developer"),
  content: z.string()
});
var SystemMessageSchema = BaseMessageSchema.extend({
  role: z.literal("system"),
  content: z.string()
});
var AssistantMessageSchema = BaseMessageSchema.extend({
  role: z.literal("assistant"),
  content: z.string().optional(),
  toolCalls: z.array(ToolCallSchema).optional()
});
var UserMessageSchema = BaseMessageSchema.extend({
  role: z.literal("user"),
  content: z.union([z.string(), z.array(InputContentSchema)])
});
var ToolMessageSchema = z.object({
  id: z.string(),
  content: z.string(),
  role: z.literal("tool"),
  toolCallId: z.string(),
  error: z.string().optional()
});
var ActivityMessageSchema = z.object({
  id: z.string(),
  role: z.literal("activity"),
  activityType: z.string(),
  content: z.record(z.any())
});
var MessageSchema = z.discriminatedUnion("role", [
  DeveloperMessageSchema,
  SystemMessageSchema,
  AssistantMessageSchema,
  UserMessageSchema,
  ToolMessageSchema,
  ActivityMessageSchema
]);
var RoleSchema = z.union([
  z.literal("developer"),
  z.literal("system"),
  z.literal("assistant"),
  z.literal("user"),
  z.literal("tool"),
  z.literal("activity")
]);
var ContextSchema = z.object({
  description: z.string(),
  value: z.string()
});
var ToolSchema = z.object({
  name: z.string(),
  description: z.string(),
  parameters: z.any()
  // JSON Schema for the tool parameters
});
var RunAgentInputSchema = z.object({
  threadId: z.string(),
  runId: z.string(),
  parentRunId: z.string().optional(),
  state: z.any(),
  messages: z.array(MessageSchema),
  tools: z.array(ToolSchema),
  context: z.array(ContextSchema),
  forwardedProps: z.any()
});
var StateSchema = z.any();
var AGUIError = class extends Error {
  constructor(message) {
    super(message);
  }
};
var AGUIConnectNotImplementedError = class extends AGUIError {
  constructor() {
    super("Connect not implemented. This method is not supported by the current agent.");
  }
};

// src/events.ts
import { z as z2 } from "zod";
var TextMessageRoleSchema = z2.union([
  z2.literal("developer"),
  z2.literal("system"),
  z2.literal("assistant"),
  z2.literal("user")
]);
var EventType = /* @__PURE__ */ ((EventType2) => {
  EventType2["TEXT_MESSAGE_START"] = "TEXT_MESSAGE_START";
  EventType2["TEXT_MESSAGE_CONTENT"] = "TEXT_MESSAGE_CONTENT";
  EventType2["TEXT_MESSAGE_END"] = "TEXT_MESSAGE_END";
  EventType2["TEXT_MESSAGE_CHUNK"] = "TEXT_MESSAGE_CHUNK";
  EventType2["THINKING_TEXT_MESSAGE_START"] = "THINKING_TEXT_MESSAGE_START";
  EventType2["THINKING_TEXT_MESSAGE_CONTENT"] = "THINKING_TEXT_MESSAGE_CONTENT";
  EventType2["THINKING_TEXT_MESSAGE_END"] = "THINKING_TEXT_MESSAGE_END";
  EventType2["TOOL_CALL_START"] = "TOOL_CALL_START";
  EventType2["TOOL_CALL_ARGS"] = "TOOL_CALL_ARGS";
  EventType2["TOOL_CALL_END"] = "TOOL_CALL_END";
  EventType2["TOOL_CALL_CHUNK"] = "TOOL_CALL_CHUNK";
  EventType2["TOOL_CALL_RESULT"] = "TOOL_CALL_RESULT";
  EventType2["THINKING_START"] = "THINKING_START";
  EventType2["THINKING_END"] = "THINKING_END";
  EventType2["STATE_SNAPSHOT"] = "STATE_SNAPSHOT";
  EventType2["STATE_DELTA"] = "STATE_DELTA";
  EventType2["MESSAGES_SNAPSHOT"] = "MESSAGES_SNAPSHOT";
  EventType2["ACTIVITY_SNAPSHOT"] = "ACTIVITY_SNAPSHOT";
  EventType2["ACTIVITY_DELTA"] = "ACTIVITY_DELTA";
  EventType2["RAW"] = "RAW";
  EventType2["CUSTOM"] = "CUSTOM";
  EventType2["RUN_STARTED"] = "RUN_STARTED";
  EventType2["RUN_FINISHED"] = "RUN_FINISHED";
  EventType2["RUN_ERROR"] = "RUN_ERROR";
  EventType2["STEP_STARTED"] = "STEP_STARTED";
  EventType2["STEP_FINISHED"] = "STEP_FINISHED";
  return EventType2;
})(EventType || {});
var BaseEventSchema = z2.object({
  type: z2.nativeEnum(EventType),
  timestamp: z2.number().optional(),
  rawEvent: z2.any().optional()
});
var TextMessageStartEventSchema = BaseEventSchema.extend({
  type: z2.literal("TEXT_MESSAGE_START" /* TEXT_MESSAGE_START */),
  messageId: z2.string(),
  role: TextMessageRoleSchema.default("assistant")
});
var TextMessageContentEventSchema = BaseEventSchema.extend({
  type: z2.literal("TEXT_MESSAGE_CONTENT" /* TEXT_MESSAGE_CONTENT */),
  messageId: z2.string(),
  delta: z2.string().refine((s) => s.length > 0, "Delta must not be an empty string")
});
var TextMessageEndEventSchema = BaseEventSchema.extend({
  type: z2.literal("TEXT_MESSAGE_END" /* TEXT_MESSAGE_END */),
  messageId: z2.string()
});
var TextMessageChunkEventSchema = BaseEventSchema.extend({
  type: z2.literal("TEXT_MESSAGE_CHUNK" /* TEXT_MESSAGE_CHUNK */),
  messageId: z2.string().optional(),
  role: TextMessageRoleSchema.optional(),
  delta: z2.string().optional()
});
var ThinkingTextMessageStartEventSchema = BaseEventSchema.extend({
  type: z2.literal("THINKING_TEXT_MESSAGE_START" /* THINKING_TEXT_MESSAGE_START */)
});
var ThinkingTextMessageContentEventSchema = TextMessageContentEventSchema.omit({
  messageId: true,
  type: true
}).extend({
  type: z2.literal("THINKING_TEXT_MESSAGE_CONTENT" /* THINKING_TEXT_MESSAGE_CONTENT */)
});
var ThinkingTextMessageEndEventSchema = BaseEventSchema.extend({
  type: z2.literal("THINKING_TEXT_MESSAGE_END" /* THINKING_TEXT_MESSAGE_END */)
});
var ToolCallStartEventSchema = BaseEventSchema.extend({
  type: z2.literal("TOOL_CALL_START" /* TOOL_CALL_START */),
  toolCallId: z2.string(),
  toolCallName: z2.string(),
  parentMessageId: z2.string().optional()
});
var ToolCallArgsEventSchema = BaseEventSchema.extend({
  type: z2.literal("TOOL_CALL_ARGS" /* TOOL_CALL_ARGS */),
  toolCallId: z2.string(),
  delta: z2.string()
});
var ToolCallEndEventSchema = BaseEventSchema.extend({
  type: z2.literal("TOOL_CALL_END" /* TOOL_CALL_END */),
  toolCallId: z2.string()
});
var ToolCallResultEventSchema = BaseEventSchema.extend({
  messageId: z2.string(),
  type: z2.literal("TOOL_CALL_RESULT" /* TOOL_CALL_RESULT */),
  toolCallId: z2.string(),
  content: z2.string(),
  role: z2.literal("tool").optional()
});
var ToolCallChunkEventSchema = BaseEventSchema.extend({
  type: z2.literal("TOOL_CALL_CHUNK" /* TOOL_CALL_CHUNK */),
  toolCallId: z2.string().optional(),
  toolCallName: z2.string().optional(),
  parentMessageId: z2.string().optional(),
  delta: z2.string().optional()
});
var ThinkingStartEventSchema = BaseEventSchema.extend({
  type: z2.literal("THINKING_START" /* THINKING_START */),
  title: z2.string().optional()
});
var ThinkingEndEventSchema = BaseEventSchema.extend({
  type: z2.literal("THINKING_END" /* THINKING_END */)
});
var StateSnapshotEventSchema = BaseEventSchema.extend({
  type: z2.literal("STATE_SNAPSHOT" /* STATE_SNAPSHOT */),
  snapshot: StateSchema
});
var StateDeltaEventSchema = BaseEventSchema.extend({
  type: z2.literal("STATE_DELTA" /* STATE_DELTA */),
  delta: z2.array(z2.any())
  // JSON Patch (RFC 6902)
});
var MessagesSnapshotEventSchema = BaseEventSchema.extend({
  type: z2.literal("MESSAGES_SNAPSHOT" /* MESSAGES_SNAPSHOT */),
  messages: z2.array(MessageSchema)
});
var ActivitySnapshotEventSchema = BaseEventSchema.extend({
  type: z2.literal("ACTIVITY_SNAPSHOT" /* ACTIVITY_SNAPSHOT */),
  messageId: z2.string(),
  activityType: z2.string(),
  content: z2.record(z2.any()),
  replace: z2.boolean().optional().default(true)
});
var ActivityDeltaEventSchema = BaseEventSchema.extend({
  type: z2.literal("ACTIVITY_DELTA" /* ACTIVITY_DELTA */),
  messageId: z2.string(),
  activityType: z2.string(),
  patch: z2.array(z2.any())
});
var RawEventSchema = BaseEventSchema.extend({
  type: z2.literal("RAW" /* RAW */),
  event: z2.any(),
  source: z2.string().optional()
});
var CustomEventSchema = BaseEventSchema.extend({
  type: z2.literal("CUSTOM" /* CUSTOM */),
  name: z2.string(),
  value: z2.any()
});
var RunStartedEventSchema = BaseEventSchema.extend({
  type: z2.literal("RUN_STARTED" /* RUN_STARTED */),
  threadId: z2.string(),
  runId: z2.string(),
  parentRunId: z2.string().optional(),
  input: RunAgentInputSchema.optional()
});
var RunFinishedEventSchema = BaseEventSchema.extend({
  type: z2.literal("RUN_FINISHED" /* RUN_FINISHED */),
  threadId: z2.string(),
  runId: z2.string(),
  result: z2.any().optional()
});
var RunErrorEventSchema = BaseEventSchema.extend({
  type: z2.literal("RUN_ERROR" /* RUN_ERROR */),
  message: z2.string(),
  code: z2.string().optional()
});
var StepStartedEventSchema = BaseEventSchema.extend({
  type: z2.literal("STEP_STARTED" /* STEP_STARTED */),
  stepName: z2.string()
});
var StepFinishedEventSchema = BaseEventSchema.extend({
  type: z2.literal("STEP_FINISHED" /* STEP_FINISHED */),
  stepName: z2.string()
});
var EventSchemas = z2.discriminatedUnion("type", [
  TextMessageStartEventSchema,
  TextMessageContentEventSchema,
  TextMessageEndEventSchema,
  TextMessageChunkEventSchema,
  ThinkingStartEventSchema,
  ThinkingEndEventSchema,
  ThinkingTextMessageStartEventSchema,
  ThinkingTextMessageContentEventSchema,
  ThinkingTextMessageEndEventSchema,
  ToolCallStartEventSchema,
  ToolCallArgsEventSchema,
  ToolCallEndEventSchema,
  ToolCallChunkEventSchema,
  ToolCallResultEventSchema,
  StateSnapshotEventSchema,
  StateDeltaEventSchema,
  MessagesSnapshotEventSchema,
  ActivitySnapshotEventSchema,
  ActivityDeltaEventSchema,
  RawEventSchema,
  CustomEventSchema,
  RunStartedEventSchema,
  RunFinishedEventSchema,
  RunErrorEventSchema,
  StepStartedEventSchema,
  StepFinishedEventSchema
]);
export {
  AGUIConnectNotImplementedError,
  AGUIError,
  ActivityDeltaEventSchema,
  ActivityMessageSchema,
  ActivitySnapshotEventSchema,
  AssistantMessageSchema,
  BaseEventSchema,
  BaseMessageSchema,
  BinaryInputContentSchema,
  ContextSchema,
  CustomEventSchema,
  DeveloperMessageSchema,
  EventSchemas,
  EventType,
  FunctionCallSchema,
  InputContentSchema,
  MessageSchema,
  MessagesSnapshotEventSchema,
  RawEventSchema,
  RoleSchema,
  RunAgentInputSchema,
  RunErrorEventSchema,
  RunFinishedEventSchema,
  RunStartedEventSchema,
  StateDeltaEventSchema,
  StateSchema,
  StateSnapshotEventSchema,
  StepFinishedEventSchema,
  StepStartedEventSchema,
  SystemMessageSchema,
  TextInputContentSchema,
  TextMessageChunkEventSchema,
  TextMessageContentEventSchema,
  TextMessageEndEventSchema,
  TextMessageStartEventSchema,
  ThinkingEndEventSchema,
  ThinkingStartEventSchema,
  ThinkingTextMessageContentEventSchema,
  ThinkingTextMessageEndEventSchema,
  ThinkingTextMessageStartEventSchema,
  ToolCallArgsEventSchema,
  ToolCallChunkEventSchema,
  ToolCallEndEventSchema,
  ToolCallResultEventSchema,
  ToolCallSchema,
  ToolCallStartEventSchema,
  ToolMessageSchema,
  ToolSchema,
  UserMessageSchema
};
//# sourceMappingURL=index.mjs.map