{"version":3,"file":"types.d.cts","names":["InteropZodObject","InteropZodDefault","InteropZodOptional","InferInteropZodInput","InferInteropZodOutput","InteropZodToStateDefinition","AnnotationRoot","AIMessage","SystemMessage","ToolMessage","ToolCall","Command","ClientTool","ServerTool","JumpToTarget","Runtime","AgentBuiltInState","ModelRequest","PromiseOrValue","T","Promise","AnyAnnotationRoot","MiddlewareTypeConfig","TSchema","TContextSchema","TFullContext","TTools","DefaultMiddlewareTypeConfig","NormalizedSchemaInput","Record","MiddlewareResult","TState","ToolCallRequest","TContext","ToolCallHandler","WrapToolCallHook","WrapModelCallHandler","Omit","WrapModelCallHook","BeforeAgentHandler","Partial","BeforeAgentHook","BeforeModelHandler","BeforeModelHook","AfterModelHandler","AfterModelHook","AfterAgentHandler","AfterAgentHook","MIDDLEWARE_BRAND","AgentMiddleware","FilterPrivateProps","K","ResolveMiddlewareTypeConfig","Types","InferMiddlewareType","InferMiddlewareSchema","InferMiddlewareContextSchema","InferMiddlewareFullContext","InferMiddlewareToolsFromConfig","InferChannelType","ToAnnotationRoot","InferMiddlewareState","InferMiddlewareInputState","InferMiddlewareStates","First","Rest","InferMiddlewareInputStates","InferMergedState","InferMergedInputState","InferMiddlewareContext","InferMiddlewareContextInput","Inner","InferMiddlewareContexts","MergeContextTypes","A","B","InferMiddlewareContextInputs","InferContextInput","ContextSchema","InferSchemaInput"],"sources":["../../../src/agents/middleware/types.d.ts"],"sourcesContent":["import type { InteropZodObject, InteropZodDefault, InteropZodOptional, InferInteropZodInput, InferInteropZodOutput } from \"@langchain/core/utils/types\";\nimport type { InteropZodToStateDefinition } from \"@langchain/langgraph/zod\";\nimport type { AnnotationRoot } from \"@langchain/langgraph\";\nimport type { AIMessage, SystemMessage, ToolMessage } from \"@langchain/core/messages\";\nimport type { ToolCall } from \"@langchain/core/messages/tool\";\nimport type { Command } from \"@langchain/langgraph\";\nimport type { ClientTool, ServerTool } from \"@langchain/core/tools\";\nimport type { JumpToTarget } from \"../constants.js\";\nimport type { Runtime, AgentBuiltInState } from \"../runtime.js\";\nimport type { ModelRequest } from \"../nodes/types.js\";\ntype PromiseOrValue<T> = T | Promise<T>;\nexport type AnyAnnotationRoot = AnnotationRoot<any>;\n/**\n * Type bag that encapsulates all middleware type parameters.\n *\n * This interface bundles all the generic type parameters used throughout the middleware system\n * into a single configuration object. This pattern simplifies type signatures and makes\n * it easier to add new type parameters without changing multiple function signatures.\n *\n * @typeParam TSchema - The middleware state schema type. Can be an `InteropZodObject` or `undefined`.\n *\n * @typeParam TContextSchema - The middleware context schema type. Can be an `InteropZodObject`,\n *   `InteropZodDefault`, `InteropZodOptional`, or `undefined`.\n *\n * @typeParam TFullContext - The full context type available to middleware hooks.\n *\n * @typeParam TTools - The tools array type registered by the middleware.\n *\n * @example\n * ```typescript\n * // Define a type configuration\n * type MyMiddlewareTypes = MiddlewareTypeConfig<\n *   typeof myStateSchema,\n *   typeof myContextSchema,\n *   MyContextType,\n *   typeof myTools\n * >;\n * ```\n */\nexport interface MiddlewareTypeConfig<TSchema extends InteropZodObject | undefined = InteropZodObject | undefined, TContextSchema extends InteropZodObject | InteropZodDefault<InteropZodObject> | InteropZodOptional<InteropZodObject> | undefined = InteropZodObject | InteropZodDefault<InteropZodObject> | InteropZodOptional<InteropZodObject> | undefined, TFullContext = any, TTools extends readonly (ClientTool | ServerTool)[] = readonly (ClientTool | ServerTool)[]> {\n    /** The middleware state schema type */\n    Schema: TSchema;\n    /** The middleware context schema type */\n    ContextSchema: TContextSchema;\n    /** The full context type */\n    FullContext: TFullContext;\n    /** The tools array type */\n    Tools: TTools;\n}\n/**\n * Default type configuration for middleware.\n * Used when no explicit type parameters are provided.\n */\nexport type DefaultMiddlewareTypeConfig = MiddlewareTypeConfig;\nexport type NormalizedSchemaInput<TSchema extends InteropZodObject | undefined | never = any> = [TSchema] extends [never] ? AgentBuiltInState : TSchema extends InteropZodObject ? InferInteropZodOutput<TSchema> & AgentBuiltInState : TSchema extends Record<string, unknown> ? TSchema & AgentBuiltInState : AgentBuiltInState;\n/**\n * Result type for middleware functions.\n */\nexport type MiddlewareResult<TState> = (TState & {\n    jumpTo?: JumpToTarget;\n}) | void;\n/**\n * Represents a tool call request for the wrapToolCall hook.\n * Contains the tool call information along with the agent's current state and runtime.\n */\nexport interface ToolCallRequest<TState extends Record<string, unknown> = Record<string, unknown>, TContext = unknown> {\n    /**\n     * The tool call to be executed\n     */\n    toolCall: ToolCall;\n    /**\n     * The BaseTool instance being invoked.\n     * Provides access to tool metadata like name, description, schema, etc.\n     */\n    tool: ClientTool | ServerTool;\n    /**\n     * The current agent state (includes both middleware state and built-in state).\n     */\n    state: TState & AgentBuiltInState;\n    /**\n     * The runtime context containing metadata, signal, writer, interrupt, etc.\n     */\n    runtime: Runtime<TContext>;\n}\n/**\n * Handler function type for wrapping tool calls.\n * Takes a tool call request and returns the tool result or a command.\n */\nexport type ToolCallHandler<TSchema extends Record<string, unknown> = AgentBuiltInState, TContext = unknown> = (request: ToolCallRequest<TSchema, TContext>) => PromiseOrValue<ToolMessage | Command>;\n/**\n * Wrapper function type for the wrapToolCall hook.\n * Allows middleware to intercept and modify tool execution.\n */\nexport type WrapToolCallHook<TSchema extends InteropZodObject | undefined = undefined, TContext = unknown> = (request: ToolCallRequest<NormalizedSchemaInput<TSchema>, TContext>, handler: ToolCallHandler<NormalizedSchemaInput<TSchema>, TContext>) => PromiseOrValue<ToolMessage | Command>;\n/**\n * Handler function type for wrapping model calls.\n * Takes a model request and returns the AI message response.\n *\n * @param request - The model request containing model, messages, systemPrompt, tools, state, and runtime\n * @returns The AI message response from the model\n */\nexport type WrapModelCallHandler<TSchema extends InteropZodObject | undefined = undefined, TContext = unknown> = (request: Omit<ModelRequest<NormalizedSchemaInput<TSchema>, TContext>, \n/**\n * allow to reset the system prompt or system message\n */\n\"systemPrompt\" | \"systemMessage\"> & {\n    systemPrompt?: string;\n    systemMessage?: SystemMessage;\n}) => PromiseOrValue<AIMessage>;\n/**\n * Wrapper function type for the wrapModelCall hook.\n * Allows middleware to intercept and modify model execution.\n * This enables you to:\n * - Modify the request before calling the model (e.g., change system prompt, add/remove tools)\n * - Handle errors and retry with different parameters\n * - Post-process the response\n * - Implement custom caching, logging, or other cross-cutting concerns\n *\n * @param request - The model request containing all parameters needed for the model call\n * @param handler - The function that invokes the model. Call this with a ModelRequest to get the response\n * @returns The AI message response from the model (or a modified version)\n */\nexport type WrapModelCallHook<TSchema extends InteropZodObject | undefined = undefined, TContext = unknown> = (request: ModelRequest<NormalizedSchemaInput<TSchema>, TContext>, handler: WrapModelCallHandler<TSchema, TContext>) => PromiseOrValue<AIMessage>;\n/**\n * Handler function type for the beforeAgent hook.\n * Called once at the start of agent invocation before any model calls or tool executions.\n *\n * @param state - The current agent state (includes both middleware state and built-in state)\n * @param runtime - The runtime context containing metadata, signal, writer, interrupt, etc.\n * @returns A middleware result containing partial state updates or undefined to pass through\n */\ntype BeforeAgentHandler<TSchema, TContext> = (state: TSchema, runtime: Runtime<TContext>) => PromiseOrValue<MiddlewareResult<Partial<TSchema>>>;\n/**\n * Hook type for the beforeAgent lifecycle event.\n * Can be either a handler function or an object with a handler and optional jump targets.\n * This hook is called once at the start of the agent invocation.\n */\nexport type BeforeAgentHook<TSchema extends InteropZodObject | undefined = undefined, TContext = unknown> = BeforeAgentHandler<NormalizedSchemaInput<TSchema>, TContext> | {\n    hook: BeforeAgentHandler<NormalizedSchemaInput<TSchema>, TContext>;\n    canJumpTo?: JumpToTarget[];\n};\n/**\n * Handler function type for the beforeModel hook.\n * Called before the model is invoked and before the wrapModelCall hook.\n *\n * @param state - The current agent state (includes both middleware state and built-in state)\n * @param runtime - The runtime context containing metadata, signal, writer, interrupt, etc.\n * @returns A middleware result containing partial state updates or undefined to pass through\n */\ntype BeforeModelHandler<TSchema, TContext> = (state: TSchema, runtime: Runtime<TContext>) => PromiseOrValue<MiddlewareResult<Partial<TSchema>>>;\n/**\n * Hook type for the beforeModel lifecycle event.\n * Can be either a handler function or an object with a handler and optional jump targets.\n * This hook is called before each model invocation.\n */\nexport type BeforeModelHook<TSchema extends InteropZodObject | undefined = undefined, TContext = unknown> = BeforeModelHandler<NormalizedSchemaInput<TSchema>, TContext> | {\n    hook: BeforeModelHandler<NormalizedSchemaInput<TSchema>, TContext>;\n    canJumpTo?: JumpToTarget[];\n};\n/**\n * Handler function type for the afterModel hook.\n * Called after the model is invoked and before any tools are called.\n * Allows modifying the agent state after model invocation, e.g., to update tool call parameters.\n *\n * @param state - The current agent state (includes both middleware state and built-in state)\n * @param runtime - The runtime context containing metadata, signal, writer, interrupt, etc.\n * @returns A middleware result containing partial state updates or undefined to pass through\n */\ntype AfterModelHandler<TSchema, TContext> = (state: TSchema, runtime: Runtime<TContext>) => PromiseOrValue<MiddlewareResult<Partial<TSchema>>>;\n/**\n * Hook type for the afterModel lifecycle event.\n * Can be either a handler function or an object with a handler and optional jump targets.\n * This hook is called after each model invocation.\n */\nexport type AfterModelHook<TSchema extends InteropZodObject | undefined = undefined, TContext = unknown> = AfterModelHandler<NormalizedSchemaInput<TSchema>, TContext> | {\n    hook: AfterModelHandler<NormalizedSchemaInput<TSchema>, TContext>;\n    canJumpTo?: JumpToTarget[];\n};\n/**\n * Handler function type for the afterAgent hook.\n * Called once at the end of agent invocation after all model calls and tool executions are complete.\n *\n * @param state - The current agent state (includes both middleware state and built-in state)\n * @param runtime - The runtime context containing metadata, signal, writer, interrupt, etc.\n * @returns A middleware result containing partial state updates or undefined to pass through\n */\ntype AfterAgentHandler<TSchema, TContext> = (state: TSchema, runtime: Runtime<TContext>) => PromiseOrValue<MiddlewareResult<Partial<TSchema>>>;\n/**\n * Hook type for the afterAgent lifecycle event.\n * Can be either a handler function or an object with a handler and optional jump targets.\n * This hook is called once at the end of the agent invocation.\n */\nexport type AfterAgentHook<TSchema extends InteropZodObject | undefined = undefined, TContext = unknown> = AfterAgentHandler<NormalizedSchemaInput<TSchema>, TContext> | {\n    hook: AfterAgentHandler<NormalizedSchemaInput<TSchema>, TContext>;\n    canJumpTo?: JumpToTarget[];\n};\n/**\n * Unique symbol used to brand middleware instances.\n * This prevents functions from being accidentally assignable to AgentMiddleware\n * since functions have a 'name' property that would otherwise make them structurally compatible.\n */\nexport declare const MIDDLEWARE_BRAND: unique symbol;\n/**\n * Base middleware interface.\n *\n * @typeParam TSchema - The middleware state schema type\n * @typeParam TContextSchema - The middleware context schema type\n * @typeParam TFullContext - The full context type available to hooks\n * @typeParam TTools - The tools array type registered by the middleware\n *\n * @example\n * ```typescript\n * const middleware = createMiddleware({\n *   name: \"myMiddleware\",\n *   stateSchema: z.object({ count: z.number() }),\n *   tools: [myTool],\n * });\n * ```\n */\nexport interface AgentMiddleware<TSchema extends InteropZodObject | undefined = any, TContextSchema extends InteropZodObject | InteropZodDefault<InteropZodObject> | InteropZodOptional<InteropZodObject> | undefined = any, TFullContext = any, TTools extends readonly (ClientTool | ServerTool)[] = readonly (ClientTool | ServerTool)[]> {\n    /**\n     * Brand property to distinguish middleware instances from plain objects or functions.\n     * This is required and prevents accidental assignment of functions to middleware arrays.\n     */\n    readonly [MIDDLEWARE_BRAND]: true;\n    /**\n     * Type marker for extracting the MiddlewareTypeConfig from a middleware instance.\n     * This is a phantom property used only for type inference.\n     * @internal\n     */\n    readonly \"~middlewareTypes\"?: MiddlewareTypeConfig<TSchema, TContextSchema, TFullContext, TTools>;\n    /**\n     * The name of the middleware.\n     */\n    name: string;\n    /**\n     * The schema of the middleware state. Middleware state is persisted between multiple invocations. It can be either:\n     * - A Zod object\n     * - A Zod optional object\n     * - A Zod default object\n     * - Undefined\n     */\n    stateSchema?: TSchema;\n    /**\n     * The schema of the middleware context. Middleware context is read-only and not persisted between multiple invocations. It can be either:\n     * - A Zod object\n     * - A Zod optional object\n     * - A Zod default object\n     * - Undefined\n     */\n    contextSchema?: TContextSchema;\n    /**\n     * Additional tools registered by the middleware.\n     */\n    tools?: TTools;\n    /**\n     * Wraps tool execution with custom logic. This allows you to:\n     * - Modify tool call parameters before execution\n     * - Handle errors and retry with different parameters\n     * - Post-process tool results\n     * - Implement caching, logging, authentication, or other cross-cutting concerns\n     * - Return Command objects for advanced control flow\n     *\n     * The handler receives a ToolCallRequest containing the tool call, state, and runtime,\n     * along with a handler function to execute the actual tool.\n     *\n     * @param request - The tool call request containing toolCall, state, and runtime.\n     * @param handler - The function that executes the tool. Call this with a ToolCallRequest to get the result.\n     * @returns The tool result as a ToolMessage or a Command for advanced control flow.\n     *\n     * @example\n     * ```ts\n     * wrapToolCall: async (request, handler) => {\n     *   console.log(`Calling tool: ${request.tool.name}`);\n     *   console.log(`Tool description: ${request.tool.description}`);\n     *\n     *   try {\n     *     // Execute the tool\n     *     const result = await handler(request);\n     *     console.log(`Tool ${request.tool.name} succeeded`);\n     *     return result;\n     *   } catch (error) {\n     *     console.error(`Tool ${request.tool.name} failed:`, error);\n     *     // Could return a custom error message or retry\n     *     throw error;\n     *   }\n     * }\n     * ```\n     *\n     * @example Authentication\n     * ```ts\n     * wrapToolCall: async (request, handler) => {\n     *   // Check if user is authorized for this tool\n     *   if (!request.runtime.context.isAuthorized(request.tool.name)) {\n     *     return new ToolMessage({\n     *       content: \"Unauthorized to call this tool\",\n     *       tool_call_id: request.toolCall.id,\n     *     });\n     *   }\n     *   return handler(request);\n     * }\n     * ```\n     *\n     * @example Caching\n     * ```ts\n     * const cache = new Map();\n     * wrapToolCall: async (request, handler) => {\n     *   const cacheKey = `${request.tool.name}:${JSON.stringify(request.toolCall.args)}`;\n     *   if (cache.has(cacheKey)) {\n     *     return cache.get(cacheKey);\n     *   }\n     *   const result = await handler(request);\n     *   cache.set(cacheKey, result);\n     *   return result;\n     * }\n     * ```\n     */\n    wrapToolCall?: WrapToolCallHook<TSchema, TFullContext>;\n    /**\n     * Wraps the model invocation with custom logic. This allows you to:\n     * - Modify the request before calling the model\n     * - Handle errors and retry with different parameters\n     * - Post-process the response\n     * - Implement custom caching, logging, or other cross-cutting concerns\n     *\n     * @param request - The model request containing model, messages, systemPrompt, tools, state, and runtime.\n     * @param handler - The function that invokes the model. Call this with a ModelRequest to get the response.\n     * @returns The response from the model (or a modified version).\n     *\n     * @example\n     * ```ts\n     * wrapModelCall: async (request, handler) => {\n     *   // Modify request before calling\n     *   const modifiedRequest = { ...request, systemPrompt: \"You are helpful\" };\n     *\n     *   try {\n     *     // Call the model\n     *     return await handler(modifiedRequest);\n     *   } catch (error) {\n     *     // Handle errors and retry with fallback\n     *     const fallbackRequest = { ...request, model: fallbackModel };\n     *     return await handler(fallbackRequest);\n     *   }\n     * }\n     * ```\n     */\n    wrapModelCall?: WrapModelCallHook<TSchema, TFullContext>;\n    /**\n     * The function to run before the agent execution starts. This function is called once at the start of the agent invocation.\n     * It allows to modify the state of the agent before any model calls or tool executions.\n     *\n     * @param state - The middleware state\n     * @param runtime - The middleware runtime\n     * @returns The modified middleware state or undefined to pass through\n     */\n    beforeAgent?: BeforeAgentHook<TSchema, TFullContext>;\n    /**\n     * The function to run before the model call. This function is called before the model is invoked and before the `wrapModelCall` hook.\n     * It allows to modify the state of the agent.\n     *\n     * @param state - The middleware state\n     * @param runtime - The middleware runtime\n     * @returns The modified middleware state or undefined to pass through\n     */\n    beforeModel?: BeforeModelHook<TSchema, TFullContext>;\n    /**\n     * The function to run after the model call. This function is called after the model is invoked and before any tools are called.\n     * It allows to modify the state of the agent after the model is invoked, e.g. to update tool call parameters.\n     *\n     * @param state - The middleware state\n     * @param runtime - The middleware runtime\n     * @returns The modified middleware state or undefined to pass through\n     */\n    afterModel?: AfterModelHook<TSchema, TFullContext>;\n    /**\n     * The function to run after the agent execution completes. This function is called once at the end of the agent invocation.\n     * It allows to modify the final state of the agent after all model calls and tool executions are complete.\n     *\n     * @param state - The middleware state\n     * @param runtime - The middleware runtime\n     * @returns The modified middleware state or undefined to pass through\n     */\n    afterAgent?: AfterAgentHook<TSchema, TFullContext>;\n}\n/**\n * Helper type to filter out properties that start with underscore (private properties)\n */\ntype FilterPrivateProps<T> = {\n    [K in keyof T as K extends `_${string}` ? never : K]: T[K];\n};\n/**\n * Helper type to resolve a MiddlewareTypeConfig from either:\n * - A MiddlewareTypeConfig directly\n * - An AgentMiddleware instance (using `typeof middleware`)\n */\nexport type ResolveMiddlewareTypeConfig<T> = T extends {\n    \"~middlewareTypes\"?: infer Types;\n} ? Types extends MiddlewareTypeConfig ? Types : never : T extends MiddlewareTypeConfig ? T : never;\n/**\n * Helper type to extract any property from a MiddlewareTypeConfig or AgentMiddleware.\n *\n * @typeParam T - The MiddlewareTypeConfig or AgentMiddleware to extract from\n * @typeParam K - The property key to extract (\"Schema\" | \"ContextSchema\" | \"FullContext\" | \"Tools\")\n */\nexport type InferMiddlewareType<T, K extends keyof MiddlewareTypeConfig> = ResolveMiddlewareTypeConfig<T>[K];\n/**\n * Shorthand helper to extract the Schema type from a MiddlewareTypeConfig or AgentMiddleware.\n */\nexport type InferMiddlewareSchema<T> = InferMiddlewareType<T, \"Schema\">;\n/**\n * Shorthand helper to extract the ContextSchema type from a MiddlewareTypeConfig or AgentMiddleware.\n */\nexport type InferMiddlewareContextSchema<T> = InferMiddlewareType<T, \"ContextSchema\">;\n/**\n * Shorthand helper to extract the FullContext type from a MiddlewareTypeConfig or AgentMiddleware.\n */\nexport type InferMiddlewareFullContext<T> = InferMiddlewareType<T, \"FullContext\">;\n/**\n * Shorthand helper to extract the Tools type from a MiddlewareTypeConfig or AgentMiddleware.\n */\nexport type InferMiddlewareToolsFromConfig<T> = InferMiddlewareType<T, \"Tools\">;\nexport type InferChannelType<T extends AnyAnnotationRoot | InteropZodObject> = T extends AnyAnnotationRoot ? ToAnnotationRoot<T>[\"State\"] : T extends InteropZodObject ? InferInteropZodInput<T> : {};\n/**\n * Helper type to infer the state schema type from a middleware\n * This filters out private properties (those starting with underscore)\n */\nexport type InferMiddlewareState<T extends AgentMiddleware> = T extends AgentMiddleware<infer TSchema, any, any, any> ? TSchema extends InteropZodObject ? FilterPrivateProps<InferInteropZodOutput<TSchema>> : {} : {};\n/**\n * Helper type to infer the input state schema type from a middleware (all properties optional)\n * This filters out private properties (those starting with underscore)\n */\nexport type InferMiddlewareInputState<T extends AgentMiddleware> = T extends AgentMiddleware<infer TSchema, any, any, any> ? TSchema extends InteropZodObject ? FilterPrivateProps<InferInteropZodInput<TSchema>> : {} : {};\n/**\n * Helper type to infer merged state from an array of middleware (just the middleware states)\n */\nexport type InferMiddlewareStates<T = AgentMiddleware[]> = T extends readonly [] ? {} : T extends readonly [infer First, ...infer Rest] ? First extends AgentMiddleware ? Rest extends readonly AgentMiddleware[] ? InferMiddlewareState<First> & InferMiddlewareStates<Rest> : InferMiddlewareState<First> : {} : {};\n/**\n * Helper type to infer merged input state from an array of middleware (with optional defaults)\n */\nexport type InferMiddlewareInputStates<T extends readonly AgentMiddleware[]> = T extends readonly [] ? {} : T extends readonly [infer First, ...infer Rest] ? First extends AgentMiddleware ? Rest extends readonly AgentMiddleware[] ? InferMiddlewareInputState<First> & InferMiddlewareInputStates<Rest> : InferMiddlewareInputState<First> : {} : {};\n/**\n * Helper type to infer merged state from an array of middleware (includes built-in state)\n */\nexport type InferMergedState<T extends readonly AgentMiddleware[]> = InferMiddlewareStates<T> & AgentBuiltInState;\n/**\n * Helper type to infer merged input state from an array of middleware (includes built-in state)\n */\nexport type InferMergedInputState<T extends readonly AgentMiddleware[]> = InferMiddlewareInputStates<T> & AgentBuiltInState;\n/**\n * Helper type to infer the context schema type from a middleware\n */\nexport type InferMiddlewareContext<T extends AgentMiddleware> = T extends AgentMiddleware<any, infer TContextSchema, any, any> ? TContextSchema extends InteropZodObject ? InferInteropZodInput<TContextSchema> : {} : {};\n/**\n * Helper type to infer the input context schema type from a middleware (with optional defaults)\n */\nexport type InferMiddlewareContextInput<T extends AgentMiddleware> = T extends AgentMiddleware<any, infer TContextSchema, any, any> ? TContextSchema extends InteropZodOptional<infer Inner> ? InferInteropZodInput<Inner> | undefined : TContextSchema extends InteropZodObject ? InferInteropZodInput<TContextSchema> : {} : {};\n/**\n * Helper type to infer merged context from an array of middleware\n */\nexport type InferMiddlewareContexts<T extends readonly AgentMiddleware[]> = T extends readonly [] ? {} : T extends readonly [infer First, ...infer Rest] ? First extends AgentMiddleware ? Rest extends readonly AgentMiddleware[] ? InferMiddlewareContext<First> & InferMiddlewareContexts<Rest> : InferMiddlewareContext<First> : {} : {};\n/**\n * Helper to merge two context types, preserving undefined unions\n */\ntype MergeContextTypes<A, B> = [A] extends [undefined] ? [B] extends [undefined] ? undefined : B | undefined : [B] extends [undefined] ? A | undefined : [A] extends [B] ? A : [B] extends [A] ? B : A & B;\n/**\n * Helper type to infer merged input context from an array of middleware (with optional defaults)\n */\nexport type InferMiddlewareContextInputs<T extends readonly AgentMiddleware[]> = T extends readonly [] ? {} : T extends readonly [infer First, ...infer Rest] ? First extends AgentMiddleware ? Rest extends readonly AgentMiddleware[] ? MergeContextTypes<InferMiddlewareContextInput<First>, InferMiddlewareContextInputs<Rest>> : InferMiddlewareContextInput<First> : {} : {};\n/**\n * Helper type to extract input type from context schema (with optional defaults)\n */\nexport type InferContextInput<ContextSchema extends AnyAnnotationRoot | InteropZodObject> = ContextSchema extends InteropZodObject ? InferInteropZodInput<ContextSchema> : ContextSchema extends AnyAnnotationRoot ? ToAnnotationRoot<ContextSchema>[\"State\"] : {};\nexport type ToAnnotationRoot<A extends AnyAnnotationRoot | InteropZodObject> = A extends AnyAnnotationRoot ? A : A extends InteropZodObject ? AnnotationRoot<InteropZodToStateDefinition<A>> : never;\nexport type InferSchemaInput<A extends AnyAnnotationRoot | InteropZodObject | undefined> = A extends AnyAnnotationRoot | InteropZodObject ? ToAnnotationRoot<A>[\"State\"] : {};\nexport {};\n//# sourceMappingURL=types.d.ts.map"],"mappings":"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"}