import * as fs from "fs";
import type { Stats as MemfsStats } from "memfs/lib/node/Stats";
import { IWriteFileOptions } from "memfs/lib/node/types/options";
import { BaseFileOperator } from "../base-operator";
import { TransactionOperation } from "./snapshot-strategies";
export declare enum EOperatorType {
    LOCAL = "local",
    MEMORY = "memory",
    SANDBOX = "sandbox"
}
export interface ITransactionFileOperatorConfig {
    batchSize: number;
    maxConcurrency: number;
    enableLazyLoading: boolean;
}
export declare class TransactionFileOperator extends BaseFileOperator {
    private baseOperator;
    private operatorType;
    private snapshotStrategy;
    private isInTransaction;
    private transactionOperations;
    private fileStates;
    private config;
    constructor(baseOperator: BaseFileOperator, operatorType?: EOperatorType);
    private detectOperatorType;
    private createSnapshotStrategy;
    beginTransaction(): Promise<void>;
    commitTransaction(): Promise<void>;
    rollbackTransaction(): Promise<void>;
    resetTransactionState(): void;
    private saveFileState;
    private recordOperation;
    resolvePath(filePath: fs.PathLike): string;
    access(path: fs.PathLike): Promise<void>;
    readFile(path: fs.PathLike): Promise<Buffer>;
    readFile(path: fs.PathLike, encoding: BufferEncoding): Promise<string>;
    writeFile(path: fs.PathLike, data: string | NodeJS.ArrayBufferView, options?: fs.WriteFileOptions | IWriteFileOptions): Promise<void>;
    mkdir(path: fs.PathLike, options?: fs.MakeDirectoryOptions): Promise<string | undefined>;
    readdir(path: fs.PathLike): Promise<string[]>;
    readdir(path: fs.PathLike, options: {
        withFileTypes: true;
    }): Promise<fs.Dirent[]>;
    stat(path: fs.PathLike): Promise<fs.Stats | MemfsStats<number | bigint>>;
    exists(path: fs.PathLike): Promise<boolean>;
    unlink(path: fs.PathLike): Promise<void>;
    rmdir(path: fs.PathLike): Promise<void>;
    rename(oldPath: fs.PathLike, newPath: fs.PathLike): Promise<void>;
    isTransactionActive(): boolean;
    getTransactionOperations(): readonly TransactionOperation[];
    setConfig(config: Partial<ITransactionFileOperatorConfig>): void;
    getConfig(): ITransactionFileOperatorConfig;
}
//# sourceMappingURL=transaction-operator.d.ts.map