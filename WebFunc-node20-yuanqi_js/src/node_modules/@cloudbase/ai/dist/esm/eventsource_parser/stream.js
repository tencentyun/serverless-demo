var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
import { createParser } from './parse';
var EventSourceParserStream = (function (_super) {
    __extends(EventSourceParserStream, _super);
    function EventSourceParserStream() {
        var parser;
        return _super.call(this, {
            start: function (controller) {
                parser = createParser(function (event) {
                    if (event.type === 'event') {
                        controller.enqueue(event);
                    }
                });
            },
            transform: function (chunk) {
                parser.feed(chunk);
            },
        }) || this;
    }
    return EventSourceParserStream;
}(TransformStream));
export { EventSourceParserStream };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RyZWFtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2V2ZW50c291cmNlX3BhcnNlci9zdHJlYW0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLFNBQVMsQ0FBQTtBQWN0QztJQUE2QywyQ0FBb0M7SUFDL0U7UUFDRSxJQUFJLE1BQTBCLENBQUE7ZUFFOUIsa0JBQU07WUFDSixLQUFLLFlBQUMsVUFBVTtnQkFDZCxNQUFNLEdBQUcsWUFBWSxDQUFDLFVBQUMsS0FBSztvQkFDMUIsSUFBSSxLQUFLLENBQUMsSUFBSSxLQUFLLE9BQU8sRUFBRTt3QkFDMUIsVUFBVSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQTtxQkFDMUI7Z0JBQ0gsQ0FBQyxDQUFDLENBQUE7WUFDSixDQUFDO1lBQ0QsU0FBUyxZQUFDLEtBQUs7Z0JBQ2IsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQTtZQUNwQixDQUFDO1NBQ0YsQ0FBQztJQUNKLENBQUM7SUFDSCw4QkFBQztBQUFELENBQUMsQUFqQkQsQ0FBNkMsZUFBZSxHQWlCM0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEV2ZW50U291cmNlUGFyc2VyLCBQYXJzZWRFdmVudCB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyBjcmVhdGVQYXJzZXIgfSBmcm9tICcuL3BhcnNlJ1xuXG4vKipcbiAqIEEgVHJhbnNmb3JtU3RyZWFtIHRoYXQgaW5nZXN0cyBhIHN0cmVhbSBvZiBzdHJpbmdzIGFuZCBwcm9kdWNlcyBhIHN0cmVhbSBvZiBQYXJzZWRFdmVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogY29uc3QgZXZlbnRTdHJlYW0gPVxuICogICByZXNwb25zZS5ib2R5XG4gKiAgICAgLnBpcGVUaHJvdWdoKG5ldyBUZXh0RGVjb2RlclN0cmVhbSgpKVxuICogICAgIC5waXBlVGhyb3VnaChuZXcgRXZlbnRTb3VyY2VQYXJzZXJTdHJlYW0oKSlcbiAqIGBgYFxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgRXZlbnRTb3VyY2VQYXJzZXJTdHJlYW0gZXh0ZW5kcyBUcmFuc2Zvcm1TdHJlYW08c3RyaW5nLCBQYXJzZWRFdmVudD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBsZXQgcGFyc2VyITogRXZlbnRTb3VyY2VQYXJzZXJcblxuICAgIHN1cGVyKHtcbiAgICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgcGFyc2VyID0gY3JlYXRlUGFyc2VyKChldmVudCkgPT4ge1xuICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAnZXZlbnQnKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoZXZlbnQpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIHRyYW5zZm9ybShjaHVuaykge1xuICAgICAgICBwYXJzZXIuZmVlZChjaHVuaylcbiAgICAgIH0sXG4gICAgfSlcbiAgfVxufVxuXG5leHBvcnQgdHlwZSB7IFBhcnNlZEV2ZW50IH0gZnJvbSAnLi90eXBlcydcbiJdfQ==