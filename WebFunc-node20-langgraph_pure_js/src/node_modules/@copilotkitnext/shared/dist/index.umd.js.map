{"version":3,"file":"index.umd.js","sources":["../../../../../node_modules/.pnpm/uuid@11.1.0/node_modules/uuid/dist/esm-browser/stringify.js","../../../../../node_modules/.pnpm/uuid@11.1.0/node_modules/uuid/dist/esm-browser/rng.js","../../../../../node_modules/.pnpm/uuid@11.1.0/node_modules/uuid/dist/esm-browser/native.js","../../../../../node_modules/.pnpm/uuid@11.1.0/node_modules/uuid/dist/esm-browser/v4.js","../../../../../node_modules/.pnpm/partial-json@0.1.7/node_modules/partial-json/dist/options.js","../../../../../node_modules/.pnpm/partial-json@0.1.7/node_modules/partial-json/dist/index.js","../src/utils.ts","../src/logger.ts","../../../../../node_modules/.pnpm/@ag-ui+core@0.0.42/node_modules/@ag-ui/core/dist/index.mjs","../src/finalize-events.ts","../src/transcription-errors.ts","../src/constants.ts"],"sourcesContent":["import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","\"use strict\";\n/**\n * Sometimes you don't allow every type to be partially parsed.\n * For example, you may not want a partial number because it may increase its size gradually before it's complete.\n * In this case, you can use the `Allow` object to control what types you allow to be partially parsed.\n * @module\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Allow = exports.ALL = exports.COLLECTION = exports.ATOM = exports.SPECIAL = exports.INF = exports._INFINITY = exports.INFINITY = exports.NAN = exports.BOOL = exports.NULL = exports.OBJ = exports.ARR = exports.NUM = exports.STR = void 0;\n/**\n * allow partial strings like `\"hello \\u12` to be parsed as `\"hello \"`\n */\nexports.STR = 0b000000001;\n/**\n * allow partial numbers like `123.` to be parsed as `123`\n */\nexports.NUM = 0b000000010;\n/**\n * allow partial arrays like `[1, 2,` to be parsed as `[1, 2]`\n */\nexports.ARR = 0b000000100;\n/**\n * allow partial objects like `{\"a\": 1, \"b\":` to be parsed as `{\"a\": 1}`\n */\nexports.OBJ = 0b000001000;\n/**\n * allow `nu` to be parsed as `null`\n */\nexports.NULL = 0b000010000;\n/**\n * allow `tr` to be parsed as `true`, and `fa` to be parsed as `false`\n */\nexports.BOOL = 0b000100000;\n/**\n * allow `Na` to be parsed as `NaN`\n */\nexports.NAN = 0b001000000;\n/**\n * allow `Inf` to be parsed as `Infinity`\n */\nexports.INFINITY = 0b010000000;\n/**\n * allow `-Inf` to be parsed as `-Infinity`\n */\nexports._INFINITY = 0b100000000;\nexports.INF = exports.INFINITY | exports._INFINITY;\nexports.SPECIAL = exports.NULL | exports.BOOL | exports.INF | exports.NAN;\nexports.ATOM = exports.STR | exports.NUM | exports.SPECIAL;\nexports.COLLECTION = exports.ARR | exports.OBJ;\nexports.ALL = exports.ATOM | exports.COLLECTION;\n/**\n * Control what types you allow to be partially parsed.\n * The default is to allow all types to be partially parsed, which in most casees is the best option.\n * @example\n * If you don't want to allow partial objects, you can use the following code:\n * ```ts\n * import { Allow, parse } from \"partial-json\";\n * parse(`[{\"a\": 1, \"b\": 2}, {\"a\": 3,`, Allow.ARR); // [ { a: 1, b: 2 } ]\n * ```\n * Or you can use `~` to disallow a type:\n * ```ts\n * parse(`[{\"a\": 1, \"b\": 2}, {\"a\": 3,`, ~Allow.OBJ); // [ { a: 1, b: 2 } ]\n * ```\n * @example\n * If you don't want to allow partial strings, you can use the following code:\n * ```ts\n * import { Allow, parse } from \"partial-json\";\n * parse(`[\"complete string\", \"incompl`, ~Allow.STR); // [ 'complete string' ]\n * ```\n */\nexports.Allow = { STR: exports.STR, NUM: exports.NUM, ARR: exports.ARR, OBJ: exports.OBJ, NULL: exports.NULL, BOOL: exports.BOOL, NAN: exports.NAN, INFINITY: exports.INFINITY, _INFINITY: exports._INFINITY, INF: exports.INF, SPECIAL: exports.SPECIAL, ATOM: exports.ATOM, COLLECTION: exports.COLLECTION, ALL: exports.ALL };\nexports.default = exports.Allow;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Allow = exports.MalformedJSON = exports.PartialJSON = exports.parseJSON = exports.parse = void 0;\nconst options_1 = require(\"./options\");\nObject.defineProperty(exports, \"Allow\", { enumerable: true, get: function () { return options_1.Allow; } });\n__exportStar(require(\"./options\"), exports);\nclass PartialJSON extends Error {\n}\nexports.PartialJSON = PartialJSON;\nclass MalformedJSON extends Error {\n}\nexports.MalformedJSON = MalformedJSON;\n/**\n * Parse incomplete JSON\n * @param {string} jsonString Partial JSON to be parsed\n * @param {number} allowPartial Specify what types are allowed to be partial, see {@link Allow} for details\n * @returns The parsed JSON\n * @throws {PartialJSON} If the JSON is incomplete (related to the `allow` parameter)\n * @throws {MalformedJSON} If the JSON is malformed\n */\nfunction parseJSON(jsonString, allowPartial = options_1.Allow.ALL) {\n    if (typeof jsonString !== \"string\") {\n        throw new TypeError(`expecting str, got ${typeof jsonString}`);\n    }\n    if (!jsonString.trim()) {\n        throw new Error(`${jsonString} is empty`);\n    }\n    return _parseJSON(jsonString.trim(), allowPartial);\n}\nexports.parseJSON = parseJSON;\n;\nconst _parseJSON = (jsonString, allow) => {\n    const length = jsonString.length;\n    let index = 0;\n    const markPartialJSON = (msg) => {\n        throw new PartialJSON(`${msg} at position ${index}`);\n    };\n    const throwMalformedError = (msg) => {\n        throw new MalformedJSON(`${msg} at position ${index}`);\n    };\n    const parseAny = () => {\n        skipBlank();\n        if (index >= length)\n            markPartialJSON(\"Unexpected end of input\");\n        if (jsonString[index] === '\"')\n            return parseStr();\n        if (jsonString[index] === \"{\")\n            return parseObj();\n        if (jsonString[index] === \"[\")\n            return parseArr();\n        if (jsonString.substring(index, index + 4) === \"null\" || (options_1.Allow.NULL & allow && length - index < 4 && \"null\".startsWith(jsonString.substring(index)))) {\n            index += 4;\n            return null;\n        }\n        if (jsonString.substring(index, index + 4) === \"true\" || (options_1.Allow.BOOL & allow && length - index < 4 && \"true\".startsWith(jsonString.substring(index)))) {\n            index += 4;\n            return true;\n        }\n        if (jsonString.substring(index, index + 5) === \"false\" || (options_1.Allow.BOOL & allow && length - index < 5 && \"false\".startsWith(jsonString.substring(index)))) {\n            index += 5;\n            return false;\n        }\n        if (jsonString.substring(index, index + 8) === \"Infinity\" || (options_1.Allow.INFINITY & allow && length - index < 8 && \"Infinity\".startsWith(jsonString.substring(index)))) {\n            index += 8;\n            return Infinity;\n        }\n        if (jsonString.substring(index, index + 9) === \"-Infinity\" || (options_1.Allow._INFINITY & allow && 1 < length - index && length - index < 9 && \"-Infinity\".startsWith(jsonString.substring(index)))) {\n            index += 9;\n            return -Infinity;\n        }\n        if (jsonString.substring(index, index + 3) === \"NaN\" || (options_1.Allow.NAN & allow && length - index < 3 && \"NaN\".startsWith(jsonString.substring(index)))) {\n            index += 3;\n            return NaN;\n        }\n        return parseNum();\n    };\n    const parseStr = () => {\n        const start = index;\n        let escape = false;\n        index++; // skip initial quote\n        while (index < length && (jsonString[index] !== '\"' || (escape && jsonString[index - 1] === \"\\\\\"))) {\n            escape = jsonString[index] === \"\\\\\" ? !escape : false;\n            index++;\n        }\n        if (jsonString.charAt(index) == '\"') {\n            try {\n                return JSON.parse(jsonString.substring(start, ++index - Number(escape)));\n            }\n            catch (e) {\n                throwMalformedError(String(e));\n            }\n        }\n        else if (options_1.Allow.STR & allow) {\n            try {\n                return JSON.parse(jsonString.substring(start, index - Number(escape)) + '\"');\n            }\n            catch (e) {\n                // SyntaxError: Invalid escape sequence\n                return JSON.parse(jsonString.substring(start, jsonString.lastIndexOf(\"\\\\\")) + '\"');\n            }\n        }\n        markPartialJSON(\"Unterminated string literal\");\n    };\n    const parseObj = () => {\n        index++; // skip initial brace\n        skipBlank();\n        const obj = {};\n        try {\n            while (jsonString[index] !== \"}\") {\n                skipBlank();\n                if (index >= length && options_1.Allow.OBJ & allow)\n                    return obj;\n                const key = parseStr();\n                skipBlank();\n                index++; // skip colon\n                try {\n                    const value = parseAny();\n                    obj[key] = value;\n                }\n                catch (e) {\n                    if (options_1.Allow.OBJ & allow)\n                        return obj;\n                    else\n                        throw e;\n                }\n                skipBlank();\n                if (jsonString[index] === \",\")\n                    index++; // skip comma\n            }\n        }\n        catch (e) {\n            if (options_1.Allow.OBJ & allow)\n                return obj;\n            else\n                markPartialJSON(\"Expected '}' at end of object\");\n        }\n        index++; // skip final brace\n        return obj;\n    };\n    const parseArr = () => {\n        index++; // skip initial bracket\n        const arr = [];\n        try {\n            while (jsonString[index] !== \"]\") {\n                arr.push(parseAny());\n                skipBlank();\n                if (jsonString[index] === \",\") {\n                    index++; // skip comma\n                }\n            }\n        }\n        catch (e) {\n            if (options_1.Allow.ARR & allow) {\n                return arr;\n            }\n            markPartialJSON(\"Expected ']' at end of array\");\n        }\n        index++; // skip final bracket\n        return arr;\n    };\n    const parseNum = () => {\n        if (index === 0) {\n            if (jsonString === \"-\")\n                throwMalformedError(\"Not sure what '-' is\");\n            try {\n                return JSON.parse(jsonString);\n            }\n            catch (e) {\n                if (options_1.Allow.NUM & allow)\n                    try {\n                        return JSON.parse(jsonString.substring(0, jsonString.lastIndexOf(\"e\")));\n                    }\n                    catch (e) { }\n                throwMalformedError(String(e));\n            }\n        }\n        const start = index;\n        if (jsonString[index] === \"-\")\n            index++;\n        while (jsonString[index] && \",]}\".indexOf(jsonString[index]) === -1)\n            index++;\n        if (index == length && !(options_1.Allow.NUM & allow))\n            markPartialJSON(\"Unterminated number literal\");\n        try {\n            return JSON.parse(jsonString.substring(start, index));\n        }\n        catch (e) {\n            if (jsonString.substring(start, index) === \"-\")\n                markPartialJSON(\"Not sure what '-' is\");\n            try {\n                return JSON.parse(jsonString.substring(start, jsonString.lastIndexOf(\"e\")));\n            }\n            catch (e) {\n                throwMalformedError(String(e));\n            }\n        }\n    };\n    const skipBlank = () => {\n        while (index < length && \" \\n\\r\\t\".includes(jsonString[index])) {\n            index++;\n        }\n    };\n    return parseAny();\n};\nconst parse = parseJSON;\nexports.parse = parse;\n",null,null,"// src/types.ts\nimport { z } from \"zod\";\nvar FunctionCallSchema = z.object({\n  name: z.string(),\n  arguments: z.string()\n});\nvar ToolCallSchema = z.object({\n  id: z.string(),\n  type: z.literal(\"function\"),\n  function: FunctionCallSchema\n});\nvar BaseMessageSchema = z.object({\n  id: z.string(),\n  role: z.string(),\n  content: z.string().optional(),\n  name: z.string().optional()\n});\nvar TextInputContentSchema = z.object({\n  type: z.literal(\"text\"),\n  text: z.string()\n});\nvar BinaryInputContentObjectSchema = z.object({\n  type: z.literal(\"binary\"),\n  mimeType: z.string(),\n  id: z.string().optional(),\n  url: z.string().optional(),\n  data: z.string().optional(),\n  filename: z.string().optional()\n});\nvar ensureBinaryPayload = (value, ctx) => {\n  if (!value.id && !value.url && !value.data) {\n    ctx.addIssue({\n      code: z.ZodIssueCode.custom,\n      message: \"BinaryInputContent requires at least one of id, url, or data.\",\n      path: [\"id\"]\n    });\n  }\n};\nvar BinaryInputContentSchema = BinaryInputContentObjectSchema.superRefine((value, ctx) => {\n  ensureBinaryPayload(value, ctx);\n});\nvar InputContentBaseSchema = z.discriminatedUnion(\"type\", [\n  TextInputContentSchema,\n  BinaryInputContentObjectSchema\n]);\nvar InputContentSchema = InputContentBaseSchema.superRefine((value, ctx) => {\n  if (value.type === \"binary\") {\n    ensureBinaryPayload(value, ctx);\n  }\n});\nvar DeveloperMessageSchema = BaseMessageSchema.extend({\n  role: z.literal(\"developer\"),\n  content: z.string()\n});\nvar SystemMessageSchema = BaseMessageSchema.extend({\n  role: z.literal(\"system\"),\n  content: z.string()\n});\nvar AssistantMessageSchema = BaseMessageSchema.extend({\n  role: z.literal(\"assistant\"),\n  content: z.string().optional(),\n  toolCalls: z.array(ToolCallSchema).optional()\n});\nvar UserMessageSchema = BaseMessageSchema.extend({\n  role: z.literal(\"user\"),\n  content: z.union([z.string(), z.array(InputContentSchema)])\n});\nvar ToolMessageSchema = z.object({\n  id: z.string(),\n  content: z.string(),\n  role: z.literal(\"tool\"),\n  toolCallId: z.string(),\n  error: z.string().optional()\n});\nvar ActivityMessageSchema = z.object({\n  id: z.string(),\n  role: z.literal(\"activity\"),\n  activityType: z.string(),\n  content: z.record(z.any())\n});\nvar MessageSchema = z.discriminatedUnion(\"role\", [\n  DeveloperMessageSchema,\n  SystemMessageSchema,\n  AssistantMessageSchema,\n  UserMessageSchema,\n  ToolMessageSchema,\n  ActivityMessageSchema\n]);\nvar RoleSchema = z.union([\n  z.literal(\"developer\"),\n  z.literal(\"system\"),\n  z.literal(\"assistant\"),\n  z.literal(\"user\"),\n  z.literal(\"tool\"),\n  z.literal(\"activity\")\n]);\nvar ContextSchema = z.object({\n  description: z.string(),\n  value: z.string()\n});\nvar ToolSchema = z.object({\n  name: z.string(),\n  description: z.string(),\n  parameters: z.any()\n  // JSON Schema for the tool parameters\n});\nvar RunAgentInputSchema = z.object({\n  threadId: z.string(),\n  runId: z.string(),\n  parentRunId: z.string().optional(),\n  state: z.any(),\n  messages: z.array(MessageSchema),\n  tools: z.array(ToolSchema),\n  context: z.array(ContextSchema),\n  forwardedProps: z.any()\n});\nvar StateSchema = z.any();\nvar AGUIError = class extends Error {\n  constructor(message) {\n    super(message);\n  }\n};\nvar AGUIConnectNotImplementedError = class extends AGUIError {\n  constructor() {\n    super(\"Connect not implemented. This method is not supported by the current agent.\");\n  }\n};\n\n// src/events.ts\nimport { z as z2 } from \"zod\";\nvar TextMessageRoleSchema = z2.union([\n  z2.literal(\"developer\"),\n  z2.literal(\"system\"),\n  z2.literal(\"assistant\"),\n  z2.literal(\"user\")\n]);\nvar EventType = /* @__PURE__ */ ((EventType2) => {\n  EventType2[\"TEXT_MESSAGE_START\"] = \"TEXT_MESSAGE_START\";\n  EventType2[\"TEXT_MESSAGE_CONTENT\"] = \"TEXT_MESSAGE_CONTENT\";\n  EventType2[\"TEXT_MESSAGE_END\"] = \"TEXT_MESSAGE_END\";\n  EventType2[\"TEXT_MESSAGE_CHUNK\"] = \"TEXT_MESSAGE_CHUNK\";\n  EventType2[\"THINKING_TEXT_MESSAGE_START\"] = \"THINKING_TEXT_MESSAGE_START\";\n  EventType2[\"THINKING_TEXT_MESSAGE_CONTENT\"] = \"THINKING_TEXT_MESSAGE_CONTENT\";\n  EventType2[\"THINKING_TEXT_MESSAGE_END\"] = \"THINKING_TEXT_MESSAGE_END\";\n  EventType2[\"TOOL_CALL_START\"] = \"TOOL_CALL_START\";\n  EventType2[\"TOOL_CALL_ARGS\"] = \"TOOL_CALL_ARGS\";\n  EventType2[\"TOOL_CALL_END\"] = \"TOOL_CALL_END\";\n  EventType2[\"TOOL_CALL_CHUNK\"] = \"TOOL_CALL_CHUNK\";\n  EventType2[\"TOOL_CALL_RESULT\"] = \"TOOL_CALL_RESULT\";\n  EventType2[\"THINKING_START\"] = \"THINKING_START\";\n  EventType2[\"THINKING_END\"] = \"THINKING_END\";\n  EventType2[\"STATE_SNAPSHOT\"] = \"STATE_SNAPSHOT\";\n  EventType2[\"STATE_DELTA\"] = \"STATE_DELTA\";\n  EventType2[\"MESSAGES_SNAPSHOT\"] = \"MESSAGES_SNAPSHOT\";\n  EventType2[\"ACTIVITY_SNAPSHOT\"] = \"ACTIVITY_SNAPSHOT\";\n  EventType2[\"ACTIVITY_DELTA\"] = \"ACTIVITY_DELTA\";\n  EventType2[\"RAW\"] = \"RAW\";\n  EventType2[\"CUSTOM\"] = \"CUSTOM\";\n  EventType2[\"RUN_STARTED\"] = \"RUN_STARTED\";\n  EventType2[\"RUN_FINISHED\"] = \"RUN_FINISHED\";\n  EventType2[\"RUN_ERROR\"] = \"RUN_ERROR\";\n  EventType2[\"STEP_STARTED\"] = \"STEP_STARTED\";\n  EventType2[\"STEP_FINISHED\"] = \"STEP_FINISHED\";\n  return EventType2;\n})(EventType || {});\nvar BaseEventSchema = z2.object({\n  type: z2.nativeEnum(EventType),\n  timestamp: z2.number().optional(),\n  rawEvent: z2.any().optional()\n});\nvar TextMessageStartEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"TEXT_MESSAGE_START\" /* TEXT_MESSAGE_START */),\n  messageId: z2.string(),\n  role: TextMessageRoleSchema.default(\"assistant\")\n});\nvar TextMessageContentEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"TEXT_MESSAGE_CONTENT\" /* TEXT_MESSAGE_CONTENT */),\n  messageId: z2.string(),\n  delta: z2.string().refine((s) => s.length > 0, \"Delta must not be an empty string\")\n});\nvar TextMessageEndEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"TEXT_MESSAGE_END\" /* TEXT_MESSAGE_END */),\n  messageId: z2.string()\n});\nvar TextMessageChunkEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"TEXT_MESSAGE_CHUNK\" /* TEXT_MESSAGE_CHUNK */),\n  messageId: z2.string().optional(),\n  role: TextMessageRoleSchema.optional(),\n  delta: z2.string().optional()\n});\nvar ThinkingTextMessageStartEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"THINKING_TEXT_MESSAGE_START\" /* THINKING_TEXT_MESSAGE_START */)\n});\nvar ThinkingTextMessageContentEventSchema = TextMessageContentEventSchema.omit({\n  messageId: true,\n  type: true\n}).extend({\n  type: z2.literal(\"THINKING_TEXT_MESSAGE_CONTENT\" /* THINKING_TEXT_MESSAGE_CONTENT */)\n});\nvar ThinkingTextMessageEndEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"THINKING_TEXT_MESSAGE_END\" /* THINKING_TEXT_MESSAGE_END */)\n});\nvar ToolCallStartEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"TOOL_CALL_START\" /* TOOL_CALL_START */),\n  toolCallId: z2.string(),\n  toolCallName: z2.string(),\n  parentMessageId: z2.string().optional()\n});\nvar ToolCallArgsEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"TOOL_CALL_ARGS\" /* TOOL_CALL_ARGS */),\n  toolCallId: z2.string(),\n  delta: z2.string()\n});\nvar ToolCallEndEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"TOOL_CALL_END\" /* TOOL_CALL_END */),\n  toolCallId: z2.string()\n});\nvar ToolCallResultEventSchema = BaseEventSchema.extend({\n  messageId: z2.string(),\n  type: z2.literal(\"TOOL_CALL_RESULT\" /* TOOL_CALL_RESULT */),\n  toolCallId: z2.string(),\n  content: z2.string(),\n  role: z2.literal(\"tool\").optional()\n});\nvar ToolCallChunkEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"TOOL_CALL_CHUNK\" /* TOOL_CALL_CHUNK */),\n  toolCallId: z2.string().optional(),\n  toolCallName: z2.string().optional(),\n  parentMessageId: z2.string().optional(),\n  delta: z2.string().optional()\n});\nvar ThinkingStartEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"THINKING_START\" /* THINKING_START */),\n  title: z2.string().optional()\n});\nvar ThinkingEndEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"THINKING_END\" /* THINKING_END */)\n});\nvar StateSnapshotEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"STATE_SNAPSHOT\" /* STATE_SNAPSHOT */),\n  snapshot: StateSchema\n});\nvar StateDeltaEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"STATE_DELTA\" /* STATE_DELTA */),\n  delta: z2.array(z2.any())\n  // JSON Patch (RFC 6902)\n});\nvar MessagesSnapshotEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"MESSAGES_SNAPSHOT\" /* MESSAGES_SNAPSHOT */),\n  messages: z2.array(MessageSchema)\n});\nvar ActivitySnapshotEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"ACTIVITY_SNAPSHOT\" /* ACTIVITY_SNAPSHOT */),\n  messageId: z2.string(),\n  activityType: z2.string(),\n  content: z2.record(z2.any()),\n  replace: z2.boolean().optional().default(true)\n});\nvar ActivityDeltaEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"ACTIVITY_DELTA\" /* ACTIVITY_DELTA */),\n  messageId: z2.string(),\n  activityType: z2.string(),\n  patch: z2.array(z2.any())\n});\nvar RawEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"RAW\" /* RAW */),\n  event: z2.any(),\n  source: z2.string().optional()\n});\nvar CustomEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"CUSTOM\" /* CUSTOM */),\n  name: z2.string(),\n  value: z2.any()\n});\nvar RunStartedEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"RUN_STARTED\" /* RUN_STARTED */),\n  threadId: z2.string(),\n  runId: z2.string(),\n  parentRunId: z2.string().optional(),\n  input: RunAgentInputSchema.optional()\n});\nvar RunFinishedEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"RUN_FINISHED\" /* RUN_FINISHED */),\n  threadId: z2.string(),\n  runId: z2.string(),\n  result: z2.any().optional()\n});\nvar RunErrorEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"RUN_ERROR\" /* RUN_ERROR */),\n  message: z2.string(),\n  code: z2.string().optional()\n});\nvar StepStartedEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"STEP_STARTED\" /* STEP_STARTED */),\n  stepName: z2.string()\n});\nvar StepFinishedEventSchema = BaseEventSchema.extend({\n  type: z2.literal(\"STEP_FINISHED\" /* STEP_FINISHED */),\n  stepName: z2.string()\n});\nvar EventSchemas = z2.discriminatedUnion(\"type\", [\n  TextMessageStartEventSchema,\n  TextMessageContentEventSchema,\n  TextMessageEndEventSchema,\n  TextMessageChunkEventSchema,\n  ThinkingStartEventSchema,\n  ThinkingEndEventSchema,\n  ThinkingTextMessageStartEventSchema,\n  ThinkingTextMessageContentEventSchema,\n  ThinkingTextMessageEndEventSchema,\n  ToolCallStartEventSchema,\n  ToolCallArgsEventSchema,\n  ToolCallEndEventSchema,\n  ToolCallChunkEventSchema,\n  ToolCallResultEventSchema,\n  StateSnapshotEventSchema,\n  StateDeltaEventSchema,\n  MessagesSnapshotEventSchema,\n  ActivitySnapshotEventSchema,\n  ActivityDeltaEventSchema,\n  RawEventSchema,\n  CustomEventSchema,\n  RunStartedEventSchema,\n  RunFinishedEventSchema,\n  RunErrorEventSchema,\n  StepStartedEventSchema,\n  StepFinishedEventSchema\n]);\nexport {\n  AGUIConnectNotImplementedError,\n  AGUIError,\n  ActivityDeltaEventSchema,\n  ActivityMessageSchema,\n  ActivitySnapshotEventSchema,\n  AssistantMessageSchema,\n  BaseEventSchema,\n  BaseMessageSchema,\n  BinaryInputContentSchema,\n  ContextSchema,\n  CustomEventSchema,\n  DeveloperMessageSchema,\n  EventSchemas,\n  EventType,\n  FunctionCallSchema,\n  InputContentSchema,\n  MessageSchema,\n  MessagesSnapshotEventSchema,\n  RawEventSchema,\n  RoleSchema,\n  RunAgentInputSchema,\n  RunErrorEventSchema,\n  RunFinishedEventSchema,\n  RunStartedEventSchema,\n  StateDeltaEventSchema,\n  StateSchema,\n  StateSnapshotEventSchema,\n  StepFinishedEventSchema,\n  StepStartedEventSchema,\n  SystemMessageSchema,\n  TextInputContentSchema,\n  TextMessageChunkEventSchema,\n  TextMessageContentEventSchema,\n  TextMessageEndEventSchema,\n  TextMessageStartEventSchema,\n  ThinkingEndEventSchema,\n  ThinkingStartEventSchema,\n  ThinkingTextMessageContentEventSchema,\n  ThinkingTextMessageEndEventSchema,\n  ThinkingTextMessageStartEventSchema,\n  ToolCallArgsEventSchema,\n  ToolCallChunkEventSchema,\n  ToolCallEndEventSchema,\n  ToolCallResultEventSchema,\n  ToolCallSchema,\n  ToolCallStartEventSchema,\n  ToolMessageSchema,\n  ToolSchema,\n  UserMessageSchema\n};\n//# sourceMappingURL=index.mjs.map",null,null,null],"names":["byteToHex","i","push","toString","slice","getRandomValues","rnds8","Uint8Array","native","randomUUID","crypto","bind","v4","options","buf","offset","rnds","random","rng","Error","length","arr","toLowerCase","unsafeStringify","Object","defineProperty","exports","value","Allow","ALL","COLLECTION","ATOM","SPECIAL","_INFINITY","INFINITY","NAN","BOOL","OBJ","ARR","NUM","STR","NULL","INF","default","__createBinding","this","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","__exportStar","p","prototype","hasOwnProperty","call","MalformedJSON","PartialJSON","parseJSON","parse","options_1","require$$0","jsonString","allowPartial","TypeError","trim","_parseJSON","allow","index","markPartialJSON","msg","throwMalformedError","parseAny","skipBlank","parseStr","parseObj","parseArr","substring","startsWith","Infinity","NaN","parseNum","start","escape","charAt","JSON","Number","e","String","lastIndexOf","obj","key","indexOf","includes","uuidv4","logger","console","FunctionCallSchema","z","object","name","string","arguments","ToolCallSchema","id","type","literal","function","BaseMessageSchema","role","content","optional","TextInputContentSchema","text","BinaryInputContentObjectSchema","mimeType","url","data","filename","ensureBinaryPayload","ctx","addIssue","code","ZodIssueCode","custom","message","path","superRefine","InputContentSchema","discriminatedUnion","DeveloperMessageSchema","extend","SystemMessageSchema","AssistantMessageSchema","toolCalls","array","UserMessageSchema","union","ToolMessageSchema","toolCallId","error","ActivityMessageSchema","activityType","record","any","MessageSchema","ContextSchema","description","ToolSchema","parameters","RunAgentInputSchema","threadId","runId","parentRunId","state","messages","tools","context","forwardedProps","StateSchema","TextMessageRoleSchema","z2","EventType","EventType2","BaseEventSchema","nativeEnum","timestamp","number","rawEvent","TextMessageStartEventSchema","messageId","TextMessageContentEventSchema","delta","refine","s","TextMessageEndEventSchema","TextMessageChunkEventSchema","ThinkingTextMessageStartEventSchema","ThinkingTextMessageContentEventSchema","omit","ThinkingTextMessageEndEventSchema","ToolCallStartEventSchema","toolCallName","parentMessageId","ToolCallArgsEventSchema","ToolCallEndEventSchema","ToolCallResultEventSchema","ToolCallChunkEventSchema","ThinkingStartEventSchema","title","ThinkingEndEventSchema","StateSnapshotEventSchema","snapshot","StateDeltaEventSchema","MessagesSnapshotEventSchema","ActivitySnapshotEventSchema","replace","boolean","ActivityDeltaEventSchema","patch","RawEventSchema","event","source","CustomEventSchema","RunStartedEventSchema","input","RunFinishedEventSchema","result","RunErrorEventSchema","StepStartedEventSchema","stepName","StepFinishedEventSchema","defaultStopMessage","TranscriptionErrorCode","TranscriptionErrors","serviceNotConfigured","SERVICE_NOT_CONFIGURED","retryable","invalidAudioFormat","format","supported","INVALID_AUDIO_FORMAT","join","invalidRequest","details","INVALID_REQUEST","rateLimited","RATE_LIMITED","authFailed","AUTH_FAILED","providerError","PROVIDER_ERROR","networkError","NETWORK_ERROR","audioTooLong","AUDIO_TOO_LONG","audioTooShort","AUDIO_TOO_SHORT","events","stopRequested","interruptionMessage","resolvedStopMessage","resolvedAbruptMessage","appended","openMessageIds","Set","openToolCalls","Map","TEXT_MESSAGE_START","add","TEXT_MESSAGE_END","delete","TOOL_CALL_START","set","hasEnd","hasResult","TOOL_CALL_END","info","TOOL_CALL_RESULT","hasRunFinished","some","RUN_FINISHED","hasRunError","RUN_ERROR","terminalEventMissing","endEvent","resultEvent","stringify","status","reason","finishedEvent","errorEvent","json","PartialJSON.parse"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,8]}