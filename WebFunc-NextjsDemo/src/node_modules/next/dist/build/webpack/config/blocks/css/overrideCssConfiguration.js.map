{"version":3,"sources":["../../../../../../build/webpack/config/blocks/css/overrideCssConfiguration.ts"],"names":["__overrideCssConfiguration","rootDirectory","isProduction","config","postCssPlugins","patch","rule","options","plugins","Array","isArray","oneOf","forEach","use","u","module","rules","entry"],"mappings":"mGACA,kCAEO,cAAeA,CAAAA,0BAAf,CACLC,aADK,CAELC,YAFK,CAGLC,MAHK,CAIL,yCACA,KAAMC,CAAAA,cAAc,CAAG,KAAM,+BAAkBH,aAAlB,CAAiCC,YAAjC,CAA7B,CAEA,QAASG,CAAAA,KAAT,CAAeC,IAAf,CAAkC,CAChC,GACEA,IAAI,CAACC,OAAL,EACA,MAAOD,CAAAA,IAAI,CAACC,OAAZ,GAAwB,QADxB,EAEAD,IAAI,CAACC,OAAL,CAAa,OAAb,IAA0B,kBAH5B,CAIE,CACAD,IAAI,CAACC,OAAL,CAAaC,OAAb,CAAuBJ,cAAvB,CACD,CAND,IAMO,IAAIK,KAAK,CAACC,OAAN,CAAcJ,IAAI,CAACK,KAAnB,CAAJ,CAA+B,CACpCL,IAAI,CAACK,KAAL,CAAWC,OAAX,CAAmBP,KAAnB,EACD,CAFM,IAEA,IAAII,KAAK,CAACC,OAAN,CAAcJ,IAAI,CAACO,GAAnB,CAAJ,CAA6B,CAClCP,IAAI,CAACO,GAAL,CAASD,OAAT,CAAkBE,CAAD,EAAO,CACtB,GAAI,MAAOA,CAAAA,CAAP,GAAa,QAAjB,CAA2B,CACzBT,KAAK,CAACS,CAAD,CAAL,CACD,CACF,CAJD,EAKD,CACF,CAED,gBAAAX,MAAM,CAACY,MAAP,oDAAeC,KAAf,oCAAsBJ,OAAtB,CAA+BK,KAAD,EAAW,CACvCZ,KAAK,CAACY,KAAD,CAAL,CACD,CAFD,EAGD","sourcesContent":["import { Configuration, RuleSetRule } from 'webpack'\nimport { getPostCssPlugins } from './plugins'\n\nexport async function __overrideCssConfiguration(\n  rootDirectory: string,\n  isProduction: boolean,\n  config: Configuration\n) {\n  const postCssPlugins = await getPostCssPlugins(rootDirectory, isProduction)\n\n  function patch(rule: RuleSetRule) {\n    if (\n      rule.options &&\n      typeof rule.options === 'object' &&\n      rule.options['ident'] === '__nextjs_postcss'\n    ) {\n      rule.options.plugins = postCssPlugins\n    } else if (Array.isArray(rule.oneOf)) {\n      rule.oneOf.forEach(patch)\n    } else if (Array.isArray(rule.use)) {\n      rule.use.forEach((u) => {\n        if (typeof u === 'object') {\n          patch(u)\n        }\n      })\n    }\n  }\n\n  config.module?.rules?.forEach((entry) => {\n    patch(entry)\n  })\n}\n"]}