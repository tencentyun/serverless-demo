var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lib$2={},driver$1={},lib$1={},error={},json$3={},objectUtil$2={},__isBrokenObject__=(Object.defineProperty(objectUtil$2,"__esModule",{value:!0}),objectUtil$2.getBrokenObjectReason=objectUtil$2.isBrokenObject=objectUtil$2.createBrokenObject=void 0,"__isBrokenObject__"),__reason__="__reason__";function createBrokenObject(r,e){void 0===e&&(e={});function n(){throw r}return new Proxy(e,{get:function(e,t){return t===__isBrokenObject__||(t===__reason__?r:void("toJSON"!==t&&n()))},set:n,apply:n,construct:n,defineProperty:n,deleteProperty:n,getOwnPropertyDescriptor:n,getPrototypeOf:n,has:n,isExtensible:n,ownKeys:n,preventExtensions:n,setPrototypeOf:n})}function isBrokenObject(e){return null!==e&&"object"==typeof e&&!0===e[__isBrokenObject__]}function getBrokenObjectReason(e){return e[__reason__]}objectUtil$2.createBrokenObject=createBrokenObject,objectUtil$2.isBrokenObject=isBrokenObject,objectUtil$2.getBrokenObjectReason=getBrokenObjectReason,Object.defineProperty(json$3,"__esModule",{value:!0}),json$3.stringify=void 0;var object_util_1=objectUtil$2;function stringify(e,t){return JSON.stringify(e,function(e,r){return(0,object_util_1.isBrokenObject)(r)?{__isBrokenObject__:!0,__reason__:(0,object_util_1.getBrokenObjectReason)(r)}:"bigint"==typeof r?"".concat(r,"n"):!0!==(null==t?void 0:t.sortedElements)||"object"!=typeof r||Array.isArray(r)?!0!==(null==t?void 0:t.useCustomToString)||"object"!=typeof r||Array.isArray(r)||"function"!=typeof r.toString||r.toString===Object.prototype.toString?r:null==r?void 0:r.toString():Object.keys(r).sort().reduce(function(e,t){return e[t]=r[t],e},{})})}json$3.stringify=stringify;var gqlConstants={},__extends$S=(!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.rawPolyfilledDiagnosticRecord=void 0,e.rawPolyfilledDiagnosticRecord={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"},Object.freeze(e.rawPolyfilledDiagnosticRecord)}(gqlConstants),commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__createBinding$d=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),__setModuleDefault$d=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$d=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$d(t,e,r);return __setModuleDefault$d(t,e),t},json$2=(Object.defineProperty(error,"__esModule",{value:!0}),error.PROTOCOL_ERROR=error.SESSION_EXPIRED=error.SERVICE_UNAVAILABLE=error.GQLError=error.Neo4jError=error.isRetriableError=error.newGQLError=error.newError=void 0,__importStar$d(json$3)),gql_constants_1$1=gqlConstants,errorClassification={DATABASE_ERROR:"DATABASE_ERROR",CLIENT_ERROR:"CLIENT_ERROR",TRANSIENT_ERROR:"TRANSIENT_ERROR",UNKNOWN:"UNKNOWN"},classifications=(Object.freeze(errorClassification),Object.values(errorClassification)),SERVICE_UNAVAILABLE$6="ServiceUnavailable",SESSION_EXPIRED$2=(error.SERVICE_UNAVAILABLE=SERVICE_UNAVAILABLE$6,"SessionExpired"),PROTOCOL_ERROR$6=(error.SESSION_EXPIRED=SESSION_EXPIRED$2,"ProtocolError"),NOT_AVAILABLE$1=(error.PROTOCOL_ERROR=PROTOCOL_ERROR$6,"N/A"),GQLError=function(a){function s(e,t,r,n,o){var i=this;return(i=a.call(this,e,null!=o?{cause:o}:void 0)||this).constructor=s,i.__proto__=s.prototype,i.cause=null!=o?o:void 0,i.gqlStatus=t,i.gqlStatusDescription=r,i.diagnosticRecord=n,i.classification=_extractClassification(i.diagnosticRecord),i.rawClassification=null!=(e=null==n?void 0:n._classification)?e:void 0,i.name="GQLError",i}return __extends$S(s,a),Object.defineProperty(s.prototype,"diagnosticRecordAsJsonString",{get:function(){return json$2.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),s}(Error),Neo4jError=function(a){function s(e,t,r,n,o,i){e=a.call(this,e,r,n,o,i)||this;return e.constructor=s,e.__proto__=s.prototype,e.code=t,e.name="Neo4jError",e.retriable=_isRetriableCode(t),e}return __extends$S(s,a),s.isRetriable=function(e){return null!=e&&e instanceof s&&e.retriable},s}(error.GQLError=GQLError);function newError(e,t,r,n,o,i){return new Neo4jError(e,null!=t?t:NOT_AVAILABLE$1,null!=n?n:"50N42",null!=o?o:"error: general processing exception - unexpected error. "+e,null!=i?i:gql_constants_1$1.rawPolyfilledDiagnosticRecord,r)}function newGQLError(e,t,r,n,o){return new GQLError(e,null!=r?r:"50N42",null!=n?n:"error: general processing exception - unexpected error. "+e,null!=o?o:gql_constants_1$1.rawPolyfilledDiagnosticRecord,t)}error.Neo4jError=Neo4jError,error.newError=newError,error.newGQLError=newGQLError;var isRetriableError=Neo4jError.isRetriable;function _isRetriableCode(e){return e===SERVICE_UNAVAILABLE$6||e===SESSION_EXPIRED$2||_isAuthorizationExpired(e)||_isTransientError(e)}function _isTransientError(e){return!0===(null==e?void 0:e.includes("TransientError"))}function _isAuthorizationExpired(e){return"Neo.ClientError.Security.AuthorizationExpired"===e}function _extractClassification(e){return void 0!==e&&void 0!==e._classification&&classifications.includes(e._classification)?null==e?void 0:e._classification:"UNKNOWN"}error.isRetriableError=isRetriableError;var integer={},error_1$d=(Object.defineProperty(integer,"__esModule",{value:!0}),integer.toString=integer.toNumber=integer.inSafeRange=integer.isInt=integer.int=void 0,error),INT_CACHE=new Map,Integer=function(){function _(e,t){this.low=null!=e?e:0,this.high=null!=t?t:0}return _.prototype.inSafeRange=function(){return this.greaterThanOrEqual(_.MIN_SAFE_VALUE)&&this.lessThanOrEqual(_.MAX_SAFE_VALUE)},_.prototype.toInt=function(){return this.low},_.prototype.toNumber=function(){return this.high*TWO_PWR_32_DBL+(this.low>>>0)},_.prototype.toBigInt=function(){var e;return this.isZero()?BigInt(0):this.isPositive()?BigInt(this.high>>>0)*BigInt(TWO_PWR_32_DBL)+BigInt(this.low>>>0):(e=this.negate(),BigInt(-1)*(BigInt(e.high>>>0)*BigInt(TWO_PWR_32_DBL)+BigInt(e.low>>>0)))},_.prototype.toNumberOrInfinity=function(){return this.lessThan(_.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(_.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},_.prototype.toString=function(e){if((e=null!=e?e:10)<2||36<e)throw RangeError("radix out of range: "+e.toString());if(this.isZero())return"0";var t,r,n;if(this.isNegative())return this.equals(_.MIN_VALUE)?(t=_.fromNumber(e),n=(r=this.div(t)).multiply(t).subtract(this),r.toString(e)+n.toInt().toString(e)):"-"+this.negate().toString(e);for(var o=_.fromNumber(Math.pow(e,6)),i=(n=this,"");;){var a=n.div(o),s=(n.subtract(a.multiply(o)).toInt()>>>0).toString(e);if((n=a).isZero())return s+i;for(;s.length<6;)s="0"+s;i=""+s+i}},_.prototype.valueOf=function(){return this.toBigInt()},_.prototype.getHighBits=function(){return this.high},_.prototype.getLowBits=function(){return this.low},_.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(_.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!==this.high?this.high:this.low,t=0,t=31;0<t&&0==(e&1<<t);t--);return 0!==this.high?t+33:t+1},_.prototype.isZero=function(){return 0===this.high&&0===this.low},_.prototype.isNegative=function(){return this.high<0},_.prototype.isPositive=function(){return 0<=this.high},_.prototype.isOdd=function(){return 1==(1&this.low)},_.prototype.isEven=function(){return 0==(1&this.low)},_.prototype.equals=function(e){e=_.fromValue(e);return this.high===e.high&&this.low===e.low},_.prototype.notEquals=function(e){return!this.equals(e)},_.prototype.lessThan=function(e){return this.compare(e)<0},_.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0},_.prototype.greaterThan=function(e){return 0<this.compare(e)},_.prototype.greaterThanOrEqual=function(e){return 0<=this.compare(e)},_.prototype.compare=function(e){e=_.fromValue(e);if(this.equals(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r||(t||!r)&&this.subtract(e).isNegative()?-1:1},_.prototype.negate=function(){return this.equals(_.MIN_VALUE)?_.MIN_VALUE:this.not().add(_.ONE)},_.prototype.add=function(e){var e=_.fromValue(e),t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,i=e.high>>>16,a=65535&e.high,s=e.low>>>16,u=0,c=0,l=0,f=0;return c+=(l=l+((f+=o+(65535&e.low))>>>16)+(n+s))>>>16,_.fromBits((l&=65535)<<16|(f&=65535),((u+=(c+=r+a)>>>16)+(t+i)&65535)<<16|(c&=65535))},_.prototype.subtract=function(e){e=_.fromValue(e);return this.add(e.negate())},_.prototype.multiply=function(e){if(this.isZero())return _.ZERO;e=_.fromValue(e);if(e.isZero())return _.ZERO;if(this.equals(_.MIN_VALUE))return e.isOdd()?_.MIN_VALUE:_.ZERO;if(e.equals(_.MIN_VALUE))return this.isOdd()?_.MIN_VALUE:_.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(TWO_PWR_24)&&e.lessThan(TWO_PWR_24))return _.fromNumber(this.toNumber()*e.toNumber());var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,i=e.high>>>16,a=65535&e.high,s=e.low>>>16,e=65535&e.low,u=0,c=0,l=0,f=(f=0)+((c=c+((l+=o*e)>>>16)+n*e)>>>16)+((c=(c&65535)+o*s)>>>16);return _.fromBits((c&=65535)<<16|(l&=65535),((u+=(f+=r*e)>>>16)+((f=(f&65535)+n*s)>>>16)+((f=(f&65535)+o*a)>>>16)+(t*e+r*s+n*a+o*i)&65535)<<16|(f&=65535))},_.prototype.div=function(e){var t,r,n,o=_.fromValue(e);if(o.isZero())throw(0,error_1$d.newError)("division by zero");if(this.isZero())return _.ZERO;{if(this.equals(_.MIN_VALUE))return o.equals(_.ONE)||o.equals(_.NEG_ONE)?_.MIN_VALUE:o.equals(_.MIN_VALUE)?_.ONE:(n=this.shiftRight(1).div(o).shiftLeft(1)).equals(_.ZERO)?o.isNegative()?_.ONE:_.NEG_ONE:(t=this.subtract(o.multiply(n)),n.add(t.div(o)));if(o.equals(_.MIN_VALUE))return _.ZERO}if(this.isNegative())return o.isNegative()?this.negate().div(o.negate()):this.negate().div(o).negate();if(o.isNegative())return this.div(o.negate()).negate();for(r=_.ZERO,t=this;t.greaterThanOrEqual(o);){n=Math.max(1,Math.floor(t.toNumber()/o.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),a=i<=48?1:Math.pow(2,i-48),s=_.fromNumber(n),u=s.multiply(o);u.isNegative()||u.greaterThan(t);)u=(s=_.fromNumber(n-=a)).multiply(o);s.isZero()&&(s=_.ONE),r=r.add(s),t=t.subtract(u)}return r},_.prototype.modulo=function(e){e=_.fromValue(e);return this.subtract(this.div(e).multiply(e))},_.prototype.not=function(){return _.fromBits(~this.low,~this.high)},_.prototype.and=function(e){e=_.fromValue(e);return _.fromBits(this.low&e.low,this.high&e.high)},_.prototype.or=function(e){e=_.fromValue(e);return _.fromBits(this.low|e.low,this.high|e.high)},_.prototype.xor=function(e){e=_.fromValue(e);return _.fromBits(this.low^e.low,this.high^e.high)},_.prototype.shiftLeft=function(e){e=_.toNumber(e);return 0==(e&=63)?_.ZERO:e<32?_.fromBits(this.low<<e,this.high<<e|this.low>>>32-e):_.fromBits(0,this.low<<e-32)},_.prototype.shiftRight=function(e){var t=_.toNumber(e),e=_.toNumber(e);return 0==(t&=63)?_.ZERO:e<32?_.fromBits(this.low>>>t|this.high<<32-t,this.high>>t):_.fromBits(this.high>>t-32,0<=this.high?0:-1)},_.isInteger=function(e){return!0===(null==e?void 0:e.__isInteger__)},_.fromInt=function(e){if(-128<=(e|=0)&&e<128&&null!=(t=INT_CACHE.get(e)))return t;var t=new _(e,e<0?-1:0);return-128<=e&&e<128&&INT_CACHE.set(e,t),t},_.fromBits=function(e,t){return new _(e,t)},_.fromNumber=function(e){return isNaN(e)||!isFinite(e)?_.ZERO:e<=-TWO_PWR_63_DBL?_.MIN_VALUE:TWO_PWR_63_DBL<=e+1?_.MAX_VALUE:e<0?_.fromNumber(-e).negate():new _(e%TWO_PWR_32_DBL|0,e/TWO_PWR_32_DBL|0)},_.fromString=function(e,t,r){var n=(void 0===r?{}:r).strictStringValidation;if(0===e.length)throw(0,error_1$d.newError)("number format error: empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return _.ZERO;if((t=null!=t?t:10)<2||36<t)throw(0,error_1$d.newError)("radix out of range: "+t.toString());if(0<(r=e.indexOf("-")))throw(0,error_1$d.newError)('number format error: interior "-" character: '+e);if(0===r)return _.fromString(e.substring(1),t).negate();for(var o=_.fromNumber(Math.pow(t,8)),i=_.ZERO,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),u=e.substring(a,a+s),c=parseInt(u,t);if(!0===n&&!_isValidNumberFromString(u,c,t))throw(0,error_1$d.newError)('number format error: "'.concat(u,'" is NaN in radix ').concat(t,": ").concat(e));i=s<8?(u=_.fromNumber(Math.pow(t,s)),i.multiply(u).add(_.fromNumber(c))):(i=i.multiply(o)).add(_.fromNumber(c))}return i},_.fromValue=function(e,t){return void 0===t&&(t={}),e instanceof _?e:"number"==typeof e?(!0===t.ceilFloat&&(e=Math.ceil(e)),_.fromNumber(e)):"string"==typeof e?_.fromString(e,void 0,t):"bigint"==typeof e?_.fromString(e.toString()):new _(e.low,e.high)},_.toNumber=function(e){switch(typeof e){case"number":return e;case"bigint":return Number(e);default:return _.fromValue(e).toNumber()}},_.toString=function(e,t){return _.fromValue(e).toString(t)},_.inSafeRange=function(e){return _.fromValue(e).inSafeRange()},_.ZERO=_.fromInt(0),_.ONE=_.fromInt(1),_.NEG_ONE=_.fromInt(-1),_.MAX_VALUE=_.fromBits(-1,2147483647),_.MIN_VALUE=_.fromBits(0,-2147483648),_.MIN_SAFE_VALUE=_.fromBits(1,-2097152),_.MAX_SAFE_VALUE=_.fromBits(-1,2097151),_.__isInteger__=!0,_}();function _convertNumberToString(e,t,r){e=e.toString(t),t=Math.max(r-e.length,0),r="0".repeat(t);return"".concat(r).concat(e)}function _isValidNumberFromString(e,t,r){return!Number.isNaN(e)&&!Number.isNaN(t)&&_convertNumberToString(t,r,e.length)===e.toLowerCase()}Object.defineProperty(Integer.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=Integer.fromInt(TWO_PWR_24_DBL),int=Integer.fromValue,isInt=(integer.int=int,Integer.isInteger),inSafeRange=(integer.isInt=isInt,Integer.inSafeRange),toNumber$1=(integer.inSafeRange=inSafeRange,Integer.toNumber),toString=(integer.toNumber=toNumber$1,Integer.toString),temporalTypes=(integer.toString=toString,integer.default=Integer,{}),temporalUtil$1={},util$4={},__createBinding$c=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),__setModuleDefault$c=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$c=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$c(t,e,r);return __setModuleDefault$c(t,e),t},__values$d=commonjsGlobal&&commonjsGlobal.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},integer_1$2=(Object.defineProperty(util$4,"__esModule",{value:!0}),util$4.ENCRYPTION_OFF=util$4.ENCRYPTION_ON=util$4.equals=util$4.validateQueryAndParameters=util$4.toNumber=util$4.assertValidDate=util$4.assertNumberOrInteger=util$4.assertNumber=util$4.assertString=util$4.assertObject=util$4.isString=util$4.isObject=util$4.isEmptyObjectOrNull=void 0,__importStar$c(integer)),json_1$3=json$3,ENCRYPTION_ON$2="ENCRYPTION_ON",ENCRYPTION_OFF$2=(util$4.ENCRYPTION_ON=ENCRYPTION_ON$2,"ENCRYPTION_OFF");function isEmptyObjectOrNull(e){if(null===e)return!0;if(!isObject(e))return!1;for(var t in e)if(void 0!==e[t])return!1;return!0}function isObject(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function validateQueryAndParameters(e,t,r){var n="",t=null!=t?t:{},r=null!=(r=null==r?void 0:r.skipAsserts)&&r;return"string"==typeof e?n=e:e instanceof String?n=e.toString():"object"==typeof e&&null!=e.text&&(n=e.text,t=null!=(e=e.parameters)?e:{}),r||(assertCypherQuery(n),assertQueryParameters(t)),{validatedQuery:n,params:t}}function assertObject(e,t){if(isObject(e))return e;throw new TypeError(t+" expected to be an object but was: "+(0,json_1$3.stringify)(e))}function assertString$1(e,t){if(isString$1(e))return e;throw new TypeError((0,json_1$3.stringify)(t)+" expected to be string but was: "+(0,json_1$3.stringify)(e))}function assertNumber(e,t){if("number"!=typeof e)throw new TypeError(t+" expected to be a number but was: "+(0,json_1$3.stringify)(e));return e}function assertNumberOrInteger(e,t){if("number"==typeof e||"bigint"==typeof e||(0,integer_1$2.isInt)(e))return e;throw new TypeError(t+" expected to be either a number or an Integer object but was: "+(0,json_1$3.stringify)(e))}function assertValidDate(e,t){if("[object Date]"!==Object.prototype.toString.call(e))throw new TypeError(t+" expected to be a standard JavaScript Date but was: "+(0,json_1$3.stringify)(e));if(Number.isNaN(e.getTime()))throw new TypeError(t+" expected to be valid JavaScript Date but its time was NaN: "+(0,json_1$3.stringify)(e));return e}function assertCypherQuery(e){if(assertString$1(e,"Cypher query"),0===e.trim().length)throw new TypeError("Cypher query is expected to be a non-empty string.")}function assertQueryParameters(e){var t;if(!isObject(e))throw t=null!=e.constructor?" "+e.constructor.name:"",new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(t," ").concat(JSON.stringify(e)))}function isString$1(e){return"[object String]"===Object.prototype.toString.call(e)}function equals$1(e,t){var r,n;if(e===t)return!0;if(null===e||null===t)return!1;if("object"!=typeof e||"object"!=typeof t)return!1;var o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;try{for(var a=__values$d(o),s=a.next();!s.done;s=a.next()){var u=s.value;if(!equals$1(e[u],t[u]))return!1}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return!0}function toNumber(e){return e instanceof integer_1$2.default?e.toNumber():"bigint"==typeof e?(0,integer_1$2.int)(e).toNumber():e}util$4.ENCRYPTION_OFF=ENCRYPTION_OFF$2,util$4.isEmptyObjectOrNull=isEmptyObjectOrNull,util$4.isObject=isObject,util$4.validateQueryAndParameters=validateQueryAndParameters,util$4.assertObject=assertObject,util$4.assertString=assertString$1,util$4.assertNumber=assertNumber,util$4.assertNumberOrInteger=assertNumberOrInteger,util$4.assertValidDate=assertValidDate,util$4.isString=isString$1,util$4.equals=equals$1,util$4.toNumber=toNumber,function(s){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},u=(Object.defineProperty(s,"__esModule",{value:!0}),s.floorMod=s.floorDiv=s.assertValidZoneId=s.assertValidNanosecond=s.assertValidSecond=s.assertValidMinute=s.assertValidHour=s.assertValidDay=s.assertValidMonth=s.assertValidYear=s.timeZoneOffsetInSeconds=s.totalNanoseconds=s.newDate=s.toStandardDate=s.isoStringToStandardDate=s.dateToIsoString=s.timeZoneOffsetToIsoString=s.timeToIsoString=s.durationToIsoString=s.dateToEpochDay=s.localDateTimeToEpochSecond=s.localTimeToNanoOfDay=s.normalizeNanosecondsForDuration=s.normalizeSecondsForDuration=s.SECONDS_PER_DAY=s.DAYS_PER_400_YEAR_CYCLE=s.DAYS_0000_TO_1970=s.NANOS_PER_HOUR=s.NANOS_PER_MINUTE=s.NANOS_PER_MILLISECOND=s.NANOS_PER_SECOND=s.SECONDS_PER_HOUR=s.SECONDS_PER_MINUTE=s.MINUTES_PER_HOUR=s.NANOSECOND_OF_SECOND_RANGE=s.SECOND_OF_MINUTE_RANGE=s.MINUTE_OF_HOUR_RANGE=s.HOUR_OF_DAY_RANGE=s.DAY_OF_MONTH_RANGE=s.MONTH_OF_YEAR_RANGE=s.YEAR_RANGE=void 0,e(integer)),i=error,a=util$4,e=(t.prototype.contains=function(e){var t;return(0,u.isInt)(e)&&e instanceof u.default?e.greaterThanOrEqual(this._minInteger)&&e.lessThanOrEqual(this._maxInteger):"bigint"==typeof e?(t=(0,u.int)(e)).greaterThanOrEqual(this._minInteger)&&t.lessThanOrEqual(this._maxInteger):e>=this._minNumber&&e<=this._maxNumber},t.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},t);function t(e,t){this._minNumber=e,this._maxNumber=t,this._minInteger=(0,u.int)(e),this._maxInteger=(0,u.int)(t)}function c(e,t,r){e=(0,u.int)(e),t=(0,u.int)(t),r=(0,u.int)(r);var n=e.multiply(365);return n=(n=(n=e.greaterThanOrEqual(0)?n.add(e.add(3).div(4).subtract(e.add(99).div(100)).add(e.add(399).div(400))):n.subtract(e.div(-4).subtract(e.div(-100)).add(e.div(-400)))).add(t.multiply(367).subtract(362).div(12))).add(r.subtract(1)),t.greaterThan(2)&&(n=n.subtract(1),function(e){if((e=(0,u.int)(e)).modulo(4).equals(0))return!e.modulo(100).equals(0)||!!e.modulo(400).equals(0)}(e)||(n=n.subtract(1))),n.subtract(s.DAYS_0000_TO_1970)}function l(e,t){return 1===e?t%400==0||t%4==0&&t%100!=0?29:28:[0,2,4,6,7,9,11].includes(e)?31:30}s.YEAR_RANGE=new e(-999999999,999999999),s.MONTH_OF_YEAR_RANGE=new e(1,12),s.DAY_OF_MONTH_RANGE=new e(1,31),s.HOUR_OF_DAY_RANGE=new e(0,23),s.MINUTE_OF_HOUR_RANGE=new e(0,59),s.SECOND_OF_MINUTE_RANGE=new e(0,59),s.NANOSECOND_OF_SECOND_RANGE=new e(0,999999999),s.MINUTES_PER_HOUR=60,s.SECONDS_PER_MINUTE=60,s.SECONDS_PER_HOUR=s.SECONDS_PER_MINUTE*s.MINUTES_PER_HOUR,s.NANOS_PER_SECOND=1e9,s.NANOS_PER_MILLISECOND=1e6,s.NANOS_PER_MINUTE=s.NANOS_PER_SECOND*s.SECONDS_PER_MINUTE,s.NANOS_PER_HOUR=s.NANOS_PER_MINUTE*s.MINUTES_PER_HOUR,s.DAYS_0000_TO_1970=719528,s.DAYS_PER_400_YEAR_CYCLE=146097,s.SECONDS_PER_DAY=86400,s.normalizeSecondsForDuration=function(e,t){return(0,u.int)(e).add(p(t,s.NANOS_PER_SECOND))},s.normalizeNanosecondsForDuration=function(e){return d(e,s.NANOS_PER_SECOND)},s.localTimeToNanoOfDay=function(e,t,r,n){return e=(0,u.int)(e),t=(0,u.int)(t),r=(0,u.int)(r),n=(0,u.int)(n),(e=(e=(e=e.multiply(s.NANOS_PER_HOUR)).add(t.multiply(s.NANOS_PER_MINUTE))).add(r.multiply(s.NANOS_PER_SECOND))).add(n)},s.localDateTimeToEpochSecond=function(e,t,r,n,o,i,a){return e=c(e,t,r),t=function(e,t,r){e=(0,u.int)(e),t=(0,u.int)(t),r=(0,u.int)(r);e=e.multiply(s.SECONDS_PER_HOUR);return(e=e.add(t.multiply(s.SECONDS_PER_MINUTE))).add(r)}(n,o,i),e.multiply(s.SECONDS_PER_DAY).add(t)},s.dateToEpochDay=c,s.durationToIsoString=function(e,t,r,n){return e=m(e),t=m(t),r=function(e,t){e=(0,u.int)(e),t=(0,u.int)(t);var r,n=e.isNegative(),o=t.greaterThan(0);e=n&&o?e.equals(-1)?"-0":e.add(1).toString():e.toString();o&&(r=b((n?t.negate().add(2*s.NANOS_PER_SECOND):t.add(s.NANOS_PER_SECOND)).modulo(s.NANOS_PER_SECOND)));return null!=r?e+r:e}(r,n),"P".concat(e,"M").concat(t,"DT").concat(r,"S")},s.timeToIsoString=function(e,t,r,n){return e=m(e,2),t=m(t,2),r=m(r,2),n=b(n),"".concat(e,":").concat(t,":").concat(r).concat(n)},s.timeZoneOffsetToIsoString=function(e){if((e=(0,u.int)(e)).equals(0))return"Z";var t=(r=e.isNegative())?"-":"+",r=m((e=r?e.multiply(-1):e).div(s.SECONDS_PER_HOUR),2),n=m(e.div(s.SECONDS_PER_MINUTE).modulo(s.MINUTES_PER_HOUR),2);return null!=(e=(e=e.modulo(s.SECONDS_PER_MINUTE)).equals(0)?null:m(e,2))?"".concat(t).concat(r,":").concat(n,":").concat(e):"".concat(t).concat(r,":").concat(n)},s.dateToIsoString=function(e,t,r){return e=function(e){e=(0,u.int)(e);if(e.isNegative()||e.greaterThan(9999))return m(e,6,{usePositiveSign:!0});return m(e,4)}(e),t=m(t,2),r=m(r,2),"".concat(e,"-").concat(t,"-").concat(r)},s.isoStringToStandardDate=function(e){return new Date(e)},s.toStandardDate=function(e){return new Date(e)},s.newDate=function(e){return new Date(e)},s.totalNanoseconds=function(e,t){return t=null!=t?t:0,e=e.getMilliseconds()*s.NANOS_PER_MILLISECOND,t instanceof u.default?t.add(e):"bigint"==typeof t?t+BigInt(e):t+e},s.timeZoneOffsetInSeconds=function(e){var t=e.getSeconds()-e.getUTCSeconds(),r=e.getMinutes()-e.getUTCMinutes(),n=e.getHours()-e.getUTCHours(),e=(e=e).getMonth()===e.getUTCMonth()?e.getDate()-e.getUTCDate():e.getFullYear()>e.getUTCFullYear()||e.getMonth()>e.getUTCMonth()&&e.getFullYear()===e.getUTCFullYear()?e.getDate()+l(e.getUTCMonth(),e.getUTCFullYear())-e.getUTCDate():e.getDate()-(e.getUTCDate()+l(e.getMonth(),e.getFullYear()));return n*s.SECONDS_PER_HOUR+r*s.SECONDS_PER_MINUTE+t+e*s.SECONDS_PER_DAY},s.assertValidYear=function(e){return r(e,s.YEAR_RANGE,"Year")},s.assertValidMonth=function(e){return r(e,s.MONTH_OF_YEAR_RANGE,"Month")},s.assertValidDay=function(e){return r(e,s.DAY_OF_MONTH_RANGE,"Day")},s.assertValidHour=function(e){return r(e,s.HOUR_OF_DAY_RANGE,"Hour")},s.assertValidMinute=function(e){return r(e,s.MINUTE_OF_HOUR_RANGE,"Minute")},s.assertValidSecond=function(e){return r(e,s.SECOND_OF_MINUTE_RANGE,"Second")},s.assertValidNanosecond=function(e){return r(e,s.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")};function f(e,t){return(0,i.newError)("".concat(t,' is expected to be a valid ZoneId but was: "').concat(e,'"'))}var _=new Map;function r(e,t,r){if((0,a.assertNumberOrInteger)(e,r),t.contains(e))return e;throw(0,i.newError)("".concat(r," is expected to be in range ").concat(t.toString()," but was: ").concat(e.toString()))}function p(e,t){e=(0,u.int)(e),t=(0,u.int)(t);var r=e.div(t);return r=e.isPositive()!==t.isPositive()&&r.multiply(t).notEquals(e)?r.subtract(1):r}function d(e,t){return e=(0,u.int)(e),t=(0,u.int)(t),e.subtract(p(e,t).multiply(t))}function b(e){return(e=(0,u.int)(e)).equals(0)?"":"."+m(e,9)}function m(e,t,r){var n=(e=(0,u.int)(e)).isNegative(),o=(e=n?e.negate():e).toString();if(null!=t)for(;o.length<t;)o="0"+o;return n?"-"+o:!0===(null==r?void 0:r.usePositiveSign)?"+"+o:o}s.assertValidZoneId=function(t,r){var e=_.get(r);if(!0!==e){if(!1===e)throw f(r,t);try{Intl.DateTimeFormat(void 0,{timeZone:r}),_.set(r,!0)}catch(e){throw _.set(r,!1),f(r,t)}}},s.floorDiv=p,s.floorMod=d}(temporalUtil$1);var __createBinding$b=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),__setModuleDefault$b=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$b=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$b(t,e,r);return __setModuleDefault$b(t,e),t},__read$x=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},util$3=(Object.defineProperty(temporalTypes,"__esModule",{value:!0}),temporalTypes.isDateTime=temporalTypes.DateTime=temporalTypes.isLocalDateTime=temporalTypes.LocalDateTime=temporalTypes.isDate=temporalTypes.Date=temporalTypes.isTime=temporalTypes.Time=temporalTypes.isLocalTime=temporalTypes.LocalTime=temporalTypes.isDuration=temporalTypes.Duration=void 0,__importStar$b(temporalUtil$1)),util_1$7=util$4,error_1$c=error,integer_1$1=__importStar$b(integer),IDENTIFIER_PROPERTY_ATTRIBUTES$1={value:!0,enumerable:!1,configurable:!1,writable:!1},DURATION_IDENTIFIER_PROPERTY="__isDuration__",LOCAL_TIME_IDENTIFIER_PROPERTY="__isLocalTime__",TIME_IDENTIFIER_PROPERTY="__isTime__",DATE_IDENTIFIER_PROPERTY="__isDate__",LOCAL_DATE_TIME_IDENTIFIER_PROPERTY="__isLocalDateTime__",DATE_TIME_IDENTIFIER_PROPERTY="__isDateTime__",Duration=function(){function e(e,t,r,n){this.months=(0,util_1$7.assertNumberOrInteger)(e,"Months"),this.days=(0,util_1$7.assertNumberOrInteger)(t,"Days"),(0,util_1$7.assertNumberOrInteger)(r,"Seconds"),(0,util_1$7.assertNumberOrInteger)(n,"Nanoseconds"),this.seconds=util$3.normalizeSecondsForDuration(r,n),this.nanoseconds=util$3.normalizeNanosecondsForDuration(n),Object.freeze(this)}return e.prototype.toString=function(){return util$3.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},e}();function isDuration(e){return hasIdentifierProperty$1(e,DURATION_IDENTIFIER_PROPERTY)}temporalTypes.Duration=Duration,Object.defineProperty(Duration.prototype,DURATION_IDENTIFIER_PROPERTY,IDENTIFIER_PROPERTY_ATTRIBUTES$1),temporalTypes.isDuration=isDuration;var LocalTime=function(){function r(e,t,r,n){this.hour=util$3.assertValidHour(e),this.minute=util$3.assertValidMinute(t),this.second=util$3.assertValidSecond(r),this.nanosecond=util$3.assertValidNanosecond(n),Object.freeze(this)}return r.fromStandardDate=function(e,t){verifyStandardDateAndNanos(e,t);t=util$3.totalNanoseconds(e,t);return new r(e.getHours(),e.getMinutes(),e.getSeconds(),t instanceof integer_1$1.default?t.toInt():"bigint"==typeof t?(0,integer_1$1.int)(t).toInt():t)},r.prototype.toString=function(){return util$3.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},r}();function isLocalTime(e){return hasIdentifierProperty$1(e,LOCAL_TIME_IDENTIFIER_PROPERTY)}temporalTypes.LocalTime=LocalTime,Object.defineProperty(LocalTime.prototype,LOCAL_TIME_IDENTIFIER_PROPERTY,IDENTIFIER_PROPERTY_ATTRIBUTES$1),temporalTypes.isLocalTime=isLocalTime;var Time=function(){function r(e,t,r,n,o){this.hour=util$3.assertValidHour(e),this.minute=util$3.assertValidMinute(t),this.second=util$3.assertValidSecond(r),this.nanosecond=util$3.assertValidNanosecond(n),this.timeZoneOffsetSeconds=(0,util_1$7.assertNumberOrInteger)(o,"Time zone offset in seconds"),Object.freeze(this)}return r.fromStandardDate=function(e,t){return verifyStandardDateAndNanos(e,t),new r(e.getHours(),e.getMinutes(),e.getSeconds(),(0,integer_1$1.toNumber)(util$3.totalNanoseconds(e,t)),util$3.timeZoneOffsetInSeconds(e))},r.prototype.toString=function(){return util$3.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+util$3.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},r}();function isTime(e){return hasIdentifierProperty$1(e,TIME_IDENTIFIER_PROPERTY)}temporalTypes.Time=Time,Object.defineProperty(Time.prototype,TIME_IDENTIFIER_PROPERTY,IDENTIFIER_PROPERTY_ATTRIBUTES$1),temporalTypes.isTime=isTime;var Date$1=function(){function t(e,t,r){this.year=util$3.assertValidYear(e),this.month=util$3.assertValidMonth(t),this.day=util$3.assertValidDay(r),Object.freeze(this)}return t.fromStandardDate=function(e){return verifyStandardDateAndNanos(e),new t(e.getFullYear(),e.getMonth()+1,e.getDate())},t.prototype.toStandardDate=function(){return util$3.isoStringToStandardDate(this.toString())},t.prototype.toString=function(){return util$3.dateToIsoString(this.year,this.month,this.day)},t}();function isDate$1(e){return hasIdentifierProperty$1(e,DATE_IDENTIFIER_PROPERTY)}temporalTypes.Date=Date$1,Object.defineProperty(Date$1.prototype,DATE_IDENTIFIER_PROPERTY,IDENTIFIER_PROPERTY_ATTRIBUTES$1),temporalTypes.isDate=isDate$1;var LocalDateTime=function(){function r(e,t,r,n,o,i,a){this.year=util$3.assertValidYear(e),this.month=util$3.assertValidMonth(t),this.day=util$3.assertValidDay(r),this.hour=util$3.assertValidHour(n),this.minute=util$3.assertValidMinute(o),this.second=util$3.assertValidSecond(i),this.nanosecond=util$3.assertValidNanosecond(a),Object.freeze(this)}return r.fromStandardDate=function(e,t){return verifyStandardDateAndNanos(e,t),new r(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),(0,integer_1$1.toNumber)(util$3.totalNanoseconds(e,t)))},r.prototype.toStandardDate=function(){return util$3.isoStringToStandardDate(this.toString())},r.prototype.toString=function(){return localDateTimeToString(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},r}();function isLocalDateTime(e){return hasIdentifierProperty$1(e,LOCAL_DATE_TIME_IDENTIFIER_PROPERTY)}temporalTypes.LocalDateTime=LocalDateTime,Object.defineProperty(LocalDateTime.prototype,LOCAL_DATE_TIME_IDENTIFIER_PROPERTY,IDENTIFIER_PROPERTY_ATTRIBUTES$1),temporalTypes.isLocalDateTime=isLocalDateTime;var DateTime=function(){function r(e,t,r,n,o,i,a,s,u){this.year=util$3.assertValidYear(e),this.month=util$3.assertValidMonth(t),this.day=util$3.assertValidDay(r),this.hour=util$3.assertValidHour(n),this.minute=util$3.assertValidMinute(o),this.second=util$3.assertValidSecond(i),this.nanosecond=util$3.assertValidNanosecond(a);e=__read$x(verifyTimeZoneArguments(s,u),2),t=e[0],r=e[1];this.timeZoneOffsetSeconds=t,this.timeZoneId=null!=r?r:void 0,Object.freeze(this)}return r.fromStandardDate=function(e,t){return verifyStandardDateAndNanos(e,t),new r(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),(0,integer_1$1.toNumber)(util$3.totalNanoseconds(e,t)),util$3.timeZoneOffsetInSeconds(e),null)},r.prototype.toStandardDate=function(){return util$3.toStandardDate(this._toUTC())},r.prototype.toString=function(){var e;return localDateTimeToString(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)+(null!=this.timeZoneOffsetSeconds?util$3.timeZoneOffsetToIsoString(null!=(e=this.timeZoneOffsetSeconds)?e:0):"")+(null!=this.timeZoneId?"[".concat(this.timeZoneId,"]"):"")},r.prototype._toUTC=function(){if(void 0===this.timeZoneOffsetSeconds)throw new Error("Requires DateTime created with time zone offset");var e=util$3.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond).subtract(null!=(e=this.timeZoneOffsetSeconds)?e:0);return(0,integer_1$1.int)(e).multiply(1e3).add((0,integer_1$1.int)(this.nanosecond).div(1e6)).toNumber()},r}();function isDateTime(e){return hasIdentifierProperty$1(e,DATE_TIME_IDENTIFIER_PROPERTY)}function hasIdentifierProperty$1(e,t){return null!=e&&!0===e[t]}function localDateTimeToString(e,t,r,n,o,i,a){return util$3.dateToIsoString(e,t,r)+"T"+util$3.timeToIsoString(n,o,i,a)}function verifyTimeZoneArguments(e,t){var r=null!=e,n=null!=t&&""!==t;if(!r&&!n)throw(0,error_1$c.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(e," and id: ").concat(t));var o=[void 0,void 0];return r&&((0,util_1$7.assertNumberOrInteger)(e,"Time zone offset in seconds"),o[0]=e),n&&((0,util_1$7.assertString)(t,"Time zone ID"),util$3.assertValidZoneId("Time zone ID",t),o[1]=t),o}function verifyStandardDateAndNanos(e,t){(0,util_1$7.assertValidDate)(e,"Standard date"),null!=t&&(0,util_1$7.assertNumberOrInteger)(t,"Nanosecond")}temporalTypes.DateTime=DateTime,Object.defineProperty(DateTime.prototype,DATE_TIME_IDENTIFIER_PROPERTY,IDENTIFIER_PROPERTY_ATTRIBUTES$1),temporalTypes.isDateTime=isDateTime;var graphTypes={},json_1$2=(Object.defineProperty(graphTypes,"__esModule",{value:!0}),graphTypes.isPathSegment=graphTypes.PathSegment=graphTypes.isPath=graphTypes.Path=graphTypes.isUnboundRelationship=graphTypes.UnboundRelationship=graphTypes.isRelationship=graphTypes.Relationship=graphTypes.isNode=graphTypes.Node=void 0,json$3),IDENTIFIER_PROPERTY_ATTRIBUTES={value:!0,enumerable:!1,configurable:!1,writable:!1},NODE_IDENTIFIER_PROPERTY="__isNode__",RELATIONSHIP_IDENTIFIER_PROPERTY="__isRelationship__",UNBOUND_RELATIONSHIP_IDENTIFIER_PROPERTY="__isUnboundRelationship__",PATH_IDENTIFIER_PROPERTY="__isPath__",PATH_SEGMENT_IDENTIFIER_PROPERTY="__isPathSegment__";function hasIdentifierProperty(e,t){return null!=e&&!0===e[t]}var Node=function(){function e(e,t,r,n){this.identity=e,this.labels=t,this.properties=r,this.elementId=_valueOrGetDefault(n,function(){return e.toString()})}return e.prototype.toString=function(){for(var e="("+this.elementId,t=0;t<this.labels.length;t++)e+=":"+this.labels[t];var r=Object.keys(this.properties);if(0<r.length){e+=" {";for(t=0;t<r.length;t++)0<t&&(e+=","),e+=r[t]+":"+(0,json_1$2.stringify)(this.properties[r[t]]);e+="}"}return e+=")"},e}();function isNode(e){return hasIdentifierProperty(e,NODE_IDENTIFIER_PROPERTY)}graphTypes.Node=Node,Object.defineProperty(Node.prototype,NODE_IDENTIFIER_PROPERTY,IDENTIFIER_PROPERTY_ATTRIBUTES),graphTypes.isNode=isNode;var Relationship=function(){function e(e,t,r,n,o,i,a,s){this.identity=e,this.start=t,this.end=r,this.type=n,this.properties=o,this.elementId=_valueOrGetDefault(i,function(){return e.toString()}),this.startNodeElementId=_valueOrGetDefault(a,function(){return t.toString()}),this.endNodeElementId=_valueOrGetDefault(s,function(){return r.toString()})}return e.prototype.toString=function(){var e="("+this.startNodeElementId+")-[:"+this.type,t=Object.keys(this.properties);if(0<t.length){e+=" {";for(var r=0;r<t.length;r++)0<r&&(e+=","),e+=t[r]+":"+(0,json_1$2.stringify)(this.properties[t[r]]);e+="}"}return e+="]->("+this.endNodeElementId+")"},e}();function isRelationship(e){return hasIdentifierProperty(e,RELATIONSHIP_IDENTIFIER_PROPERTY)}graphTypes.Relationship=Relationship,Object.defineProperty(Relationship.prototype,RELATIONSHIP_IDENTIFIER_PROPERTY,IDENTIFIER_PROPERTY_ATTRIBUTES),graphTypes.isRelationship=isRelationship;var UnboundRelationship=function(){function e(e,t,r,n){this.identity=e,this.type=t,this.properties=r,this.elementId=_valueOrGetDefault(n,function(){return e.toString()})}return e.prototype.bind=function(e,t){return new Relationship(this.identity,e,t,this.type,this.properties,this.elementId)},e.prototype.bindTo=function(e,t){return new Relationship(this.identity,e.identity,t.identity,this.type,this.properties,this.elementId,e.elementId,t.elementId)},e.prototype.toString=function(){var e="-[:"+this.type,t=Object.keys(this.properties);if(0<t.length){e+=" {";for(var r=0;r<t.length;r++)0<r&&(e+=","),e+=t[r]+":"+(0,json_1$2.stringify)(this.properties[t[r]]);e+="}"}return e+="]->"},e}();function isUnboundRelationship(e){return hasIdentifierProperty(e,UNBOUND_RELATIONSHIP_IDENTIFIER_PROPERTY)}graphTypes.UnboundRelationship=UnboundRelationship,Object.defineProperty(UnboundRelationship.prototype,UNBOUND_RELATIONSHIP_IDENTIFIER_PROPERTY,IDENTIFIER_PROPERTY_ATTRIBUTES),graphTypes.isUnboundRelationship=isUnboundRelationship;var PathSegment=function(e,t,r){this.start=e,this.relationship=t,this.end=r};function isPathSegment(e){return hasIdentifierProperty(e,PATH_SEGMENT_IDENTIFIER_PROPERTY)}graphTypes.PathSegment=PathSegment,Object.defineProperty(PathSegment.prototype,PATH_SEGMENT_IDENTIFIER_PROPERTY,IDENTIFIER_PROPERTY_ATTRIBUTES),graphTypes.isPathSegment=isPathSegment;var Path=function(e,t,r){this.start=e,this.end=t,this.segments=r,this.length=r.length};function isPath(e){return hasIdentifierProperty(e,PATH_IDENTIFIER_PROPERTY)}function _valueOrGetDefault(e,t){return null==e?t():e}graphTypes.Path=Path,Object.defineProperty(Path.prototype,PATH_IDENTIFIER_PROPERTY,IDENTIFIER_PROPERTY_ATTRIBUTES),graphTypes.isPath=isPath;var record={},__generator$n=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__values$c=commonjsGlobal&&commonjsGlobal.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$w=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},error_1$b=(Object.defineProperty(record,"__esModule",{value:!0}),error);function generateFieldLookup(e){var r={};return e.forEach(function(e,t){r[e]=t}),r}var Record=function(){function e(e,t,r){this.keys=e,this.length=e.length,this._fields=t,this._fieldLookup=null!=r?r:generateFieldLookup(e)}return e.prototype.forEach=function(e){var t,r;try{for(var n=__values$c(this.entries()),o=n.next();!o.done;o=n.next()){var i=__read$w(o.value,2),a=i[0];e(i[1],a,this)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.map=function(e){var t,r,n=[];try{for(var o=__values$c(this.entries()),i=o.next();!i.done;i=o.next()){var a=__read$w(i.value,2),s=a[0],u=a[1];n.push(e(u,s,this))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},e.prototype.entries=function(){var t;return __generator$n(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,[this.keys[t],this._fields[t]]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},e.prototype.values=function(){var t;return __generator$n(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},e.prototype[Symbol.iterator]=function(){var t;return __generator$n(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},e.prototype.toObject=function(){var t,e,r={};try{for(var n=__values$c(this.entries()),o=n.next();!o.done;o=n.next()){var i=__read$w(o.value,2),a=i[0],s=i[1];r[a]=s}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},e.prototype.get=function(e){var t;if("number"!=typeof e){if(void 0===(t=this._fieldLookup[e]))throw(0,error_1$b.newError)("This record has no field with key '".concat(e.toString(),"', available keys are: [")+this.keys.toString()+"].")}else t=e;if(t>this._fields.length-1||t<0)throw(0,error_1$b.newError)("This record has no field with index '"+t.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[t]},e.prototype.has=function(e){return"number"==typeof e?0<=e&&e<this._fields.length:void 0!==this._fieldLookup[e]},e}(),spatialTypes=(record.default=Record,{}),util_1$6=(Object.defineProperty(spatialTypes,"__esModule",{value:!0}),spatialTypes.isPoint=spatialTypes.Point=void 0,util$4),POINT_IDENTIFIER_PROPERTY="__isPoint__",Point=function(){function e(e,t,r,n){this.srid=(0,util_1$6.assertNumberOrInteger)(e,"SRID"),this.x=(0,util_1$6.assertNumber)(t,"X coordinate"),this.y=(0,util_1$6.assertNumber)(r,"Y coordinate"),this.z=null==n?n:(0,util_1$6.assertNumber)(n,"Z coordinate"),Object.freeze(this)}return e.prototype.toString=function(){return null==this.z||isNaN(this.z)?"Point{srid=".concat(formatAsFloat(this.srid),", x=").concat(formatAsFloat(this.x),", y=").concat(formatAsFloat(this.y),"}"):"Point{srid=".concat(formatAsFloat(this.srid),", x=").concat(formatAsFloat(this.x),", y=").concat(formatAsFloat(this.y),", z=").concat(formatAsFloat(this.z),"}")},e}();function formatAsFloat(e){return Number.isInteger(e)?e.toString()+".0":e.toString()}function isPoint(e){return null!=e&&!0===e[POINT_IDENTIFIER_PROPERTY]}spatialTypes.Point=Point,Object.defineProperty(Point.prototype,POINT_IDENTIFIER_PROPERTY,{value:!0,enumerable:!1,configurable:!1,writable:!1}),spatialTypes.isPoint=isPoint;var resultSummary={},internal={},observers={},CompletedObserver$1=(Object.defineProperty(observers,"__esModule",{value:!0}),observers.FailedObserver=observers.CompletedObserver=void 0,function(){function e(){}return e.prototype.subscribe=function(e){apply(e,e.onKeys,[]),apply(e,e.onCompleted,{})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e.prototype.markCompleted=function(){},e.prototype.onError=function(e){throw new Error("CompletedObserver not supposed to call onError",{cause:e})},e}()),FailedObserver$1=(observers.CompletedObserver=CompletedObserver$1,function(){function e(e){var t=e.error,e=e.onError;this._error=t,this._beforeError=e,this._observers=[],this.onError(t)}return e.prototype.subscribe=function(e){apply(e,e.onError,this._error),this._observers.push(e)},e.prototype.onError=function(t){apply(this,this._beforeError,t),this._observers.forEach(function(e){return apply(e,e.onError,t)})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.markCompleted=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e}());function apply(e,t,r){null!=t&&t.bind(e)(r)}observers.FailedObserver=FailedObserver$1;var bookmarks$1={},__createBinding$a=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),__setModuleDefault$a=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$a=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$a(t,e,r);return __setModuleDefault$a(t,e),t},__read$v=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$o=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},util$2=(Object.defineProperty(bookmarks$1,"__esModule",{value:!0}),bookmarks$1.Bookmarks=void 0,__importStar$a(util$4)),BOOKMARKS_KEY="bookmarks",Bookmarks$4=function(){function e(e){this._values=asStringArray(e)}return e.empty=function(){return EMPTY_BOOKMARK},e.prototype.isEmpty=function(){return 0===this._values.length},e.prototype.values=function(){return this._values},e.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},e.prototype.asBeginTransactionParameters=function(){var e;return this.isEmpty()?{}:((e={})[BOOKMARKS_KEY]=this._values,e)},e}(),EMPTY_BOOKMARK=new(bookmarks$1.Bookmarks=Bookmarks$4)(null);function asStringArray(e){if(null==e||""===e)return[];if(util$2.isString(e))return[e];if(Array.isArray(e)){for(var t=new Set,r=flattenArray(e),n=0;n<r.length;n++){var o=r[n];if(null!=o){if(!util$2.isString(o))throw new TypeError("Bookmark value should be a string, given: '".concat(o,"'"));t.add(o)}}return __spreadArray$o([],__read$v(t),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(e,"'"))}function flattenArray(e){return e.reduce(function(e,t){return Array.isArray(t)?e.concat(flattenArray(t)):e.concat(t)},[])}var _a$i,constants$1={},FETCH_ALL$8=(Object.defineProperty(constants$1,"__esModule",{value:!0}),constants$1.TELEMETRY_APIS=constants$1.BOLT_PROTOCOL_V5_8=constants$1.BOLT_PROTOCOL_V5_7=constants$1.BOLT_PROTOCOL_V5_6=constants$1.BOLT_PROTOCOL_V5_5=constants$1.BOLT_PROTOCOL_V5_4=constants$1.BOLT_PROTOCOL_V5_3=constants$1.BOLT_PROTOCOL_V5_2=constants$1.BOLT_PROTOCOL_V5_1=constants$1.BOLT_PROTOCOL_V5_0=constants$1.BOLT_PROTOCOL_V4_4=constants$1.BOLT_PROTOCOL_V4_3=constants$1.BOLT_PROTOCOL_V4_2=constants$1.BOLT_PROTOCOL_V4_1=constants$1.BOLT_PROTOCOL_V4_0=constants$1.BOLT_PROTOCOL_V3=constants$1.BOLT_PROTOCOL_V2=constants$1.BOLT_PROTOCOL_V1=constants$1.DEFAULT_POOL_MAX_SIZE=constants$1.DEFAULT_POOL_ACQUISITION_TIMEOUT=constants$1.DEFAULT_CONNECTION_TIMEOUT_MILLIS=constants$1.ACCESS_MODE_WRITE=constants$1.ACCESS_MODE_READ=constants$1.FETCH_ALL=void 0,-1),DEFAULT_POOL_ACQUISITION_TIMEOUT=(constants$1.FETCH_ALL=FETCH_ALL$8,6e4),DEFAULT_POOL_MAX_SIZE=(constants$1.DEFAULT_POOL_ACQUISITION_TIMEOUT=DEFAULT_POOL_ACQUISITION_TIMEOUT,100),DEFAULT_CONNECTION_TIMEOUT_MILLIS=(constants$1.DEFAULT_POOL_MAX_SIZE=DEFAULT_POOL_MAX_SIZE,3e4),ACCESS_MODE_READ$2=(constants$1.DEFAULT_CONNECTION_TIMEOUT_MILLIS=DEFAULT_CONNECTION_TIMEOUT_MILLIS,"READ"),ACCESS_MODE_WRITE$2=(constants$1.ACCESS_MODE_READ=ACCESS_MODE_READ$2,"WRITE"),BOLT_PROTOCOL_V1$1=(constants$1.ACCESS_MODE_WRITE=ACCESS_MODE_WRITE$2,1),BOLT_PROTOCOL_V2$1=(constants$1.BOLT_PROTOCOL_V1=BOLT_PROTOCOL_V1$1,2),BOLT_PROTOCOL_V3$3=(constants$1.BOLT_PROTOCOL_V2=BOLT_PROTOCOL_V2$1,3),BOLT_PROTOCOL_V4_0$3=(constants$1.BOLT_PROTOCOL_V3=BOLT_PROTOCOL_V3$3,4),BOLT_PROTOCOL_V4_1$1=(constants$1.BOLT_PROTOCOL_V4_0=BOLT_PROTOCOL_V4_0$3,4.1),BOLT_PROTOCOL_V4_2$1=(constants$1.BOLT_PROTOCOL_V4_1=BOLT_PROTOCOL_V4_1$1,4.2),BOLT_PROTOCOL_V4_3$1=(constants$1.BOLT_PROTOCOL_V4_2=BOLT_PROTOCOL_V4_2$1,4.3),BOLT_PROTOCOL_V4_4$3=(constants$1.BOLT_PROTOCOL_V4_3=BOLT_PROTOCOL_V4_3$1,4.4),BOLT_PROTOCOL_V5_0$1=(constants$1.BOLT_PROTOCOL_V4_4=BOLT_PROTOCOL_V4_4$3,5),BOLT_PROTOCOL_V5_1$3=(constants$1.BOLT_PROTOCOL_V5_0=BOLT_PROTOCOL_V5_0$1,5.1),BOLT_PROTOCOL_V5_2$1=(constants$1.BOLT_PROTOCOL_V5_1=BOLT_PROTOCOL_V5_1$3,5.2),BOLT_PROTOCOL_V5_3$1=(constants$1.BOLT_PROTOCOL_V5_2=BOLT_PROTOCOL_V5_2$1,5.3),BOLT_PROTOCOL_V5_4$1=(constants$1.BOLT_PROTOCOL_V5_3=BOLT_PROTOCOL_V5_3$1,5.4),BOLT_PROTOCOL_V5_5$1=(constants$1.BOLT_PROTOCOL_V5_4=BOLT_PROTOCOL_V5_4$1,5.5),BOLT_PROTOCOL_V5_6$1=(constants$1.BOLT_PROTOCOL_V5_5=BOLT_PROTOCOL_V5_5$1,5.6),BOLT_PROTOCOL_V5_7$1=(constants$1.BOLT_PROTOCOL_V5_6=BOLT_PROTOCOL_V5_6$1,5.7),BOLT_PROTOCOL_V5_8$1=(constants$1.BOLT_PROTOCOL_V5_7=BOLT_PROTOCOL_V5_7$1,5.8),TELEMETRY_APIS$1=(constants$1.BOLT_PROTOCOL_V5_8=BOLT_PROTOCOL_V5_8$1,{MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3}),connectionHolder$1=(constants$1.TELEMETRY_APIS=TELEMETRY_APIS$1,{}),logger$1={},__extends$R=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),error_1$a=(Object.defineProperty(logger$1,"__esModule",{value:!0}),logger$1.Logger=void 0,error),ERROR="error",WARN="warn",INFO="info",DEBUG="debug",DEFAULT_LEVEL=INFO,levels=((_a$i={})[ERROR]=0,_a$i[WARN]=1,_a$i[INFO]=2,_a$i[DEBUG]=3,_a$i),Logger$1=function(){function t(e,t){this._level=e,this._loggerFunction=t}return t.create=function(e){return null!=(null==e?void 0:e.logging)?new t(extractConfiguredLevel(e=e.logging),extractConfiguredLogger(e)):this.noOp()},t.noOp=function(){return noOpLogger},t.prototype.isErrorEnabled=function(){return isLevelEnabled(this._level,ERROR)},t.prototype.error=function(e){this.isErrorEnabled()&&this._loggerFunction(ERROR,e)},t.prototype.isWarnEnabled=function(){return isLevelEnabled(this._level,WARN)},t.prototype.warn=function(e){this.isWarnEnabled()&&this._loggerFunction(WARN,e)},t.prototype.isInfoEnabled=function(){return isLevelEnabled(this._level,INFO)},t.prototype.info=function(e){this.isInfoEnabled()&&this._loggerFunction(INFO,e)},t.prototype.isDebugEnabled=function(){return isLevelEnabled(this._level,DEBUG)},t.prototype.debug=function(e){this.isDebugEnabled()&&this._loggerFunction(DEBUG,e)},t}(),NoOpLogger=function(e){function t(){return e.call(this,INFO,function(e,t){})||this}return __extends$R(t,e),t.prototype.isErrorEnabled=function(){return!1},t.prototype.error=function(e){},t.prototype.isWarnEnabled=function(){return!1},t.prototype.warn=function(e){},t.prototype.isInfoEnabled=function(){return!1},t.prototype.info=function(e){},t.prototype.isDebugEnabled=function(){return!1},t.prototype.debug=function(e){},t}(logger$1.Logger=Logger$1),noOpLogger=new NoOpLogger;function isLevelEnabled(e,t){return levels[e]>=levels[t]}function extractConfiguredLevel(e){if(null==(null==e?void 0:e.level))return DEFAULT_LEVEL;var e=e.level,t=levels[e];if(null==t&&0!==t)throw(0,error_1$a.newError)("Illegal logging level: ".concat(e,". Supported levels are: ").concat(Object.keys(levels).toString()));return e}function extractConfiguredLogger(e){if(null!=(null==e?void 0:e.logger)){var t=e.logger;if(null!=t&&"function"==typeof t)return t}throw(0,error_1$a.newError)("Illegal logger function: ".concat(null!=(e=null==(t=null==e?void 0:e.logger)?void 0:t.toString())?e:"undefined"))}var __extends$Q=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__awaiter$k=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$m=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},error_1$9=(Object.defineProperty(connectionHolder$1,"__esModule",{value:!0}),connectionHolder$1.EMPTY_CONNECTION_HOLDER=connectionHolder$1.ReadOnlyConnectionHolder=connectionHolder$1.ConnectionHolder=void 0,error),util_1$5=util$4,constants_1$4=constants$1,bookmarks_1$3=bookmarks$1,logger_1$2=logger$1,ConnectionHolder=function(){function e(e){var t=e.mode,r=e.database,r=void 0===r?"":r,n=e.bookmarks,o=e.connectionProvider,i=e.impersonatedUser,a=e.onDatabaseNameResolved,s=e.getConnectionAcquistionBookmarks,u=e.auth,e=e.log;this._mode=null!=t?t:constants_1$4.ACCESS_MODE_WRITE,this._closed=!1,this._database=null!=r?(0,util_1$5.assertString)(r,"database"):"",this._bookmarks=null!=n?n:bookmarks_1$3.Bookmarks.empty(),this._connectionProvider=o,this._impersonatedUser=i,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=a,this._auth=u,this._log=e,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=null!=s?s:function(){return Promise.resolve(bookmarks_1$3.Bookmarks.empty())}}return e.prototype.mode=function(){return this._mode},e.prototype.database=function(){return this._database},e.prototype.setDatabase=function(e){this._database=e},e.prototype.bookmarks=function(){return this._bookmarks},e.prototype.connectionProvider=function(){return this._connectionProvider},e.prototype.referenceCount=function(){return this._referenceCount},e.prototype.initializeConnection=function(e){return 0!==this._referenceCount||null==this._connectionProvider?(this._referenceCount++,!1):(this._connectionPromise=this._createConnectionPromise(this._connectionProvider,e),this._referenceCount++,!0)},e.prototype._createConnectionPromise=function(o,i){return __awaiter$k(this,void 0,void 0,function(){var t,r,n;return __generator$m(this,function(e){switch(e.label){case 0:return r=(t=o).acquireConnection,n={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,r.apply(t,[(n.bookmarks=e.sent(),n.impersonatedUser=this._impersonatedUser,n.onDatabaseNameResolved=this._onDatabaseNameResolved,n.auth=this._auth,n.homeDb=i,n)])];case 2:return[2,e.sent()]}})})},e.prototype._getBookmarks=function(){return __awaiter$k(this,void 0,void 0,function(){return __generator$m(this,function(e){switch(e.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,e.sent()]}})})},e.prototype.getConnection=function(){return this._connectionPromise},e.prototype.releaseConnection=function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount--,0===this._referenceCount?this._releaseConnection():this._connectionPromise)},e.prototype.close=function(e){return this._closed=!0,0===this._referenceCount?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(e))},e.prototype.log=function(){return this._log},e.prototype._releaseConnection=function(t){return this._connectionPromise=this._connectionPromise.then(function(e){return null!=e?e.isOpen()&&(e.hasOngoingObservableRequests()||!0===t)?e.resetAndFlush().catch(ignoreError).then(function(){return e.release().then(function(){return null})}):e.release().then(function(){return null}):Promise.resolve(null)}).catch(this._logError),this._connectionPromise},e.prototype._logError=function(e){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(e,". Stacktrace: ").concat(e.stack)),null},e}(),ReadOnlyConnectionHolder=function(r){function e(e){var t=r.call(this,{mode:e.mode(),database:e.database(),bookmarks:e.bookmarks(),getConnectionAcquistionBookmarks:e._getConnectionAcquistionBookmarks,connectionProvider:e.connectionProvider(),log:e.log()})||this;return t._connectionHolder=e,t}return __extends$Q(e,r),e.prototype.initializeConnection=function(){return 0!==this._connectionHolder.referenceCount()},e.prototype.getConnection=function(){return this._connectionHolder.getConnection()},e.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},e.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},e}(connectionHolder$1.ConnectionHolder=ConnectionHolder),EmptyConnectionHolder=(connectionHolder$1.ReadOnlyConnectionHolder=ReadOnlyConnectionHolder,connectionHolder$1.default=ReadOnlyConnectionHolder,function(e){function t(){return e.call(this,{log:logger_1$2.Logger.create({})})||this}return __extends$Q(t,e),t.prototype.mode=function(){},t.prototype.database=function(){},t.prototype.initializeConnection=function(){return!0},t.prototype.getConnection=function(){return __awaiter$k(this,void 0,void 0,function(){return __generator$m(this,function(e){switch(e.label){case 0:return[4,Promise.reject((0,error_1$9.newError)("This connection holder does not serve connections"))];case 1:return[2,e.sent()]}})})},t.prototype.releaseConnection=function(){return __awaiter$k(this,void 0,void 0,function(){return __generator$m(this,function(e){switch(e.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,e.sent()]}})})},t.prototype.close=function(){return __awaiter$k(this,void 0,void 0,function(){return __generator$m(this,function(e){switch(e.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,e.sent()]}})})},t}(ConnectionHolder)),EMPTY_CONNECTION_HOLDER$1=new EmptyConnectionHolder;function ignoreError(e){return null}connectionHolder$1.EMPTY_CONNECTION_HOLDER=EMPTY_CONNECTION_HOLDER$1;var txConfig$1={},__createBinding$9=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),__setModuleDefault$9=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$9=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$9(t,e,r);return __setModuleDefault$9(t,e),t},util$1=(Object.defineProperty(txConfig$1,"__esModule",{value:!0}),txConfig$1.TxConfig=void 0,__importStar$9(util$4)),error_1$8=error,integer_1=integer,TxConfig$4=function(){function e(e,t){assertValidConfig(e),this.timeout=extractTimeout(e,t),this.metadata=extractMetadata(e)}return e.empty=function(){return EMPTY_CONFIG},e.prototype.isEmpty=function(){return Object.values(this).every(function(e){return null==e})},e}(),EMPTY_CONFIG=new(txConfig$1.TxConfig=TxConfig$4)({});function extractTimeout(e,t){if(util$1.isObject(e)&&null!=e.timeout){util$1.assertNumberOrInteger(e.timeout,"Transaction timeout"),isTimeoutFloat(e)&&!0===(null==t?void 0:t.isInfoEnabled())&&null!=t&&t.info("Transaction timeout expected to be an integer, got: ".concat(e.timeout,". The value will be rounded up."));t=(0,integer_1.int)(e.timeout,{ceilFloat:!0});if(t.isNegative())throw(0,error_1$8.newError)("Transaction timeout should not be negative");return t}return null}function isTimeoutFloat(e){return"number"==typeof e.timeout&&!Number.isInteger(e.timeout)}function extractMetadata(e){if(util$1.isObject(e)&&null!=e.metadata){e=e.metadata;if(util$1.assertObject(e,"config.metadata"),0!==Object.keys(e).length)return e}return null}function assertValidConfig(e){null!=e&&util$1.assertObject(e,"Transaction config")}var transactionExecutor$1={},__assign$x=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$x=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__awaiter$j=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$l=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__read$u=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$n=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},error_1$7=(Object.defineProperty(transactionExecutor$1,"__esModule",{value:!0}),transactionExecutor$1.TransactionExecutor=void 0,error),constants_1$3=constants$1,DEFAULT_MAX_RETRY_TIME_MS$1=3e4,DEFAULT_INITIAL_RETRY_DELAY_MS$1=1e3,DEFAULT_RETRY_DELAY_MULTIPLIER$1=2,DEFAULT_RETRY_DELAY_JITTER_FACTOR$1=.2;function setTimeoutWrapper(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,__spreadArray$n([e,t],__read$u(r),!1))}function clearTimeoutWrapper(e){return clearTimeout(e)}var TransactionExecutor=function(){function e(e,t,r,n,o){void 0===o&&(o={setTimeout:setTimeoutWrapper,clearTimeout:clearTimeoutWrapper}),this._maxRetryTimeMs=_valueOrDefault(e,DEFAULT_MAX_RETRY_TIME_MS$1),this._initialRetryDelayMs=_valueOrDefault(t,DEFAULT_INITIAL_RETRY_DELAY_MS$1),this._multiplier=_valueOrDefault(r,DEFAULT_RETRY_DELAY_MULTIPLIER$1),this._jitterFactor=_valueOrDefault(n,DEFAULT_RETRY_DELAY_JITTER_FACTOR$1),this._setTimeout=o.setTimeout,this._clearTimeout=o.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=constants_1$3.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return e.prototype.execute=function(n,o,i){var a=this,s={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){s.apiTransactionConfig=void 0}}};return new Promise(function(e,t){a._executeTransactionInsidePromise(n,o,e,t,i,s).catch(t)}).catch(function(e){var t=Date.now(),r=a._initialRetryDelayMs;return a._retryTransactionPromise(n,o,e,t,r,i,s)})},e.prototype.close=function(){var t=this;this._inFlightTimeoutIds.forEach(function(e){return t._clearTimeout(e)}),this._inFlightTimeoutIds=[]},e.prototype._retryTransactionPromise=function(o,i,e,r,a,s,u){var c=this;return Date.now()-r>this._maxRetryTimeMs||!(0,error_1$7.isRetriableError)(e)?Promise.reject(e):new Promise(function(e,t){var r=c._computeDelayWithJitter(a),n=c._setTimeout(function(){c._inFlightTimeoutIds=c._inFlightTimeoutIds.filter(function(e){return e!==n}),c._executeTransactionInsidePromise(o,i,e,t,s,u).catch(t)},r);c._inFlightTimeoutIds.push(n)}).catch(function(e){var t=a*c._multiplier;return c._retryTransactionPromise(o,i,e,r,t,s,u)})},e.prototype._executeTransactionInsidePromise=function(a,s,u,c,l,f){return __awaiter$j(this,void 0,void 0,function(){var t,r,n,o,i=this;return __generator$l(this,function(e){switch(e.label){case 0:return(e.trys.push([0,4,,5]),r=a(null!=(null==f?void 0:f.apiTransactionConfig)?__assign$x({},null==f?void 0:f.apiTransactionConfig):void 0),this.pipelineBegin)?(n=r,[3,3]):[3,1];case 1:return[4,r];case 2:n=e.sent(),e.label=3;case 3:return t=n,[3,5];case 4:return o=e.sent(),c(o),[2];case 5:return o=(null!=l?l:function(e){return e})(t),this._safeExecuteTransactionWork(o,s).then(function(e){return i._handleTransactionWorkSuccess(e,t,u,c)}).catch(function(e){return i._handleTransactionWorkFailure(e,t,c)}),[2]}})})},e.prototype._safeExecuteTransactionWork=function(e,t){try{var r=t(e);return Promise.resolve(r)}catch(e){return Promise.reject(e)}},e.prototype._handleTransactionWorkSuccess=function(e,t,r,n){t.isOpen()?t.commit().then(function(){r(e)}).catch(function(e){n(e)}):r(e)},e.prototype._handleTransactionWorkFailure=function(e,t,r){t.isOpen()?t.rollback().catch(function(e){}).then(function(){return r(e)}).catch(r):r(e)},e.prototype._computeDelayWithJitter=function(e){var t=e*this._jitterFactor,r=e-t,e=e+t;return Math.random()*(e-r)+r},e.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,error_1$7.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,error_1$7.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,error_1$7.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||1<this._jitterFactor)throw(0,error_1$7.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},e}();function _valueOrDefault(e,t){return null!=e?e:t}transactionExecutor$1.TransactionExecutor=TransactionExecutor;var urlUtil$2={},__assign$w=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$w=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__read$t=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},util_1$4=(Object.defineProperty(urlUtil$2,"__esModule",{value:!0}),urlUtil$2.Url=urlUtil$2.formatIPv6Address=urlUtil$2.formatIPv4Address=urlUtil$2.defaultPortForScheme=urlUtil$2.parseDatabaseUrl=void 0,util$4),DEFAULT_BOLT_PORT=7687,DEFAULT_HTTP_PORT=7474,DEFAULT_HTTPS_PORT=7473,Url=function(e,t,r,n,o){this.scheme=e,this.host=t,this.port=r,this.hostAndPort=n,this.query=o};function parseDatabaseUrl(e){(0,util_1$4.assertString)(e,"URL");var t=sanitizeUrl(e),r=uriJsParse(t.url),t=t.schemeMissing?null:extractScheme(r.scheme),n=extractHost(r.host),o=formatHost(n),i=extractPort(r.port,t),o="".concat(o,":").concat(i),a=extractQuery(null!=(a=r.query)?a:extractResourceQueryString(r.resourceName),e);return new Url(t,n,i,o,a)}function extractResourceQueryString(e){return"string"!=typeof e?null:__read$t(e.split("?"),2)[1]}function sanitizeUrl(e){return(e=e.trim()).includes("://")?{schemeMissing:!1,url:e}:{schemeMissing:!0,url:"none://".concat(e)}}function extractScheme(e){return null!=e?":"===(e=e.trim()).charAt(e.length-1)?e.substring(0,e.length-1):e:null}function extractHost(e,t){if(null==e)throw new Error("Unable to extract host from null or undefined URL");return e.trim()}function extractPort(e,t){e="string"==typeof e?parseInt(e,10):e;return null==e||isNaN(e)?defaultPortForScheme(t):e}function extractQuery(e,r){var e=null!=e?trimAndSanitizeQuery(e):null,n={};return null!=e&&e.split("&").forEach(function(e){e=e.split("=");if(2!==e.length)throw new Error("Invalid parameters: '".concat(e.toString(),"' in URL '").concat(r,"'."));var t=trimAndVerifyQueryElement(e[0],"key",r),e=trimAndVerifyQueryElement(e[1],"value",r);if(void 0!==n[t])throw new Error("Duplicated query parameters with key '".concat(t,"' in URL '").concat(r,"'"));n[t]=e}),n}function trimAndSanitizeQuery(e){return e="?"===(null==(e=(null!=e?e:"").trim())?void 0:e.charAt(0))?e.substring(1,e.length):e}function trimAndVerifyQueryElement(e,t,r){if(""===(e=(null!=e?e:"").trim()))throw new Error("Illegal empty ".concat(t," in URL query '").concat(r,"'"));return e}function escapeIPv6Address(e){var t="["===e.charAt(0),r="]"===e.charAt(e.length-1);if(t||r){if(t&&r)return e;throw new Error("Illegal IPv6 address ".concat(e))}return"[".concat(e,"]")}function formatHost(e){if(""===e||null==e)throw new Error("Illegal host ".concat(e));return e.includes(":")?escapeIPv6Address(e):e}function formatIPv4Address(e,t){return"".concat(e,":").concat(t)}function formatIPv6Address(e,t){e=escapeIPv6Address(e);return"".concat(e,":").concat(t)}function defaultPortForScheme(e){return"http"===e?DEFAULT_HTTP_PORT:"https"===e?DEFAULT_HTTPS_PORT:DEFAULT_BOLT_PORT}function uriJsParse(e){function a(e,t){t=e.indexOf(t);return 0<=t?[e.substring(0,t),e[t],e.substring(t+1)]:[e,"",""]}function t(e){var t,r={},n=((t="@")===(t=0<=(t=(o=e).lastIndexOf(t))?[o.substring(0,t),o[t],o.substring(t+1)]:["","",o])[1]&&(r.userInfo=decodeURIComponent(t[0]),e=t[2]),__read$t((o="]",n=a(n=e,i="["),[(i=a(n[2],o))[0],i[2]]),2)),o=n[0],i=n[1];return""!==o?(r.host=o,t=a(i,":")):(t=a(e,":"),r.host=t[0]),":"===t[1]&&(r.port=t[2]),r}var r={},n=a(e,":");return":"===n[1]&&(r.scheme=decodeURIComponent(n[0]),e=n[2]),"#"===(n=a(e,"#"))[1]&&(r.fragment=decodeURIComponent(n[2]),e=n[0]),"?"===(n=a(e,"?"))[1]&&(r.query=n[2],e=n[0]),e.startsWith("//")?(n=a(e.substr(2),"/"),(r=__assign$w(__assign$w({},r),t(n[0]))).path=n[1]+n[2]):r.path=e,r}urlUtil$2.Url=Url,urlUtil$2.parseDatabaseUrl=parseDatabaseUrl,urlUtil$2.formatIPv4Address=formatIPv4Address,urlUtil$2.formatIPv6Address=formatIPv6Address,urlUtil$2.defaultPortForScheme=defaultPortForScheme;var serverAddress$1={},__createBinding$8=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),__setModuleDefault$8=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$8=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$8(t,e,r);return __setModuleDefault$8(t,e),t},util_1$3=(Object.defineProperty(serverAddress$1,"__esModule",{value:!0}),serverAddress$1.ServerAddress=void 0,util$4),urlUtil$1=__importStar$8(urlUtil$2),ServerAddress$1=function(){function t(e,t,r,n){this._host=(0,util_1$3.assertString)(e,"host"),this._resolved=null!=t?(0,util_1$3.assertString)(t,"resolved"):null,this._port=(0,util_1$3.assertNumber)(r,"port"),this._hostPort=n,this._stringValue=null!=t?"".concat(n,"(").concat(t,")"):"".concat(n)}return t.prototype.host=function(){return this._host},t.prototype.resolvedHost=function(){return null!=this._resolved?this._resolved:this._host},t.prototype.port=function(){return this._port},t.prototype.resolveWith=function(e){return new t(this._host,e,this._port,this._hostPort)},t.prototype.asHostPort=function(){return this._hostPort},t.prototype.asKey=function(){return this._hostPort},t.prototype.toString=function(){return this._stringValue},t.fromUrl=function(e){e=urlUtil$1.parseDatabaseUrl(e);return new t(e.host,null,e.port,e.hostAndPort)},t}(),resolver$1=(serverAddress$1.ServerAddress=ServerAddress$1,{}),baseHostNameResolver={},BaseHostNameResolver$1=(Object.defineProperty(baseHostNameResolver,"__esModule",{value:!0}),function(){function e(){}return e.prototype.resolve=function(){throw new Error("Abstract function")},e.prototype._resolveToItself=function(e){return Promise.resolve([e])},e}()),configuredCustomResolver=(baseHostNameResolver.default=BaseHostNameResolver$1,{}),server_address_1=(Object.defineProperty(configuredCustomResolver,"__esModule",{value:!0}),serverAddress$1);function resolveToSelf(e){return Promise.resolve([e])}var ConfiguredCustomResolver=function(){function e(e){this._resolverFunction=null!=e?e:resolveToSelf}return e.prototype.resolve=function(t){var r=this;return new Promise(function(e){return e(r._resolverFunction(t.asHostPort()))}).then(function(e){if(Array.isArray(e))return e.map(function(e){return server_address_1.ServerAddress.fromUrl(e)});throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(e))})},e}(),__importDefault$10=(configuredCustomResolver.default=ConfiguredCustomResolver,commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}}),base_host_name_resolver_1=(Object.defineProperty(resolver$1,"__esModule",{value:!0}),resolver$1.ConfiguredCustomResolver=resolver$1.BaseHostNameResolver=void 0,__importDefault$10(baseHostNameResolver)),configured_custom_resolver_1$1=(resolver$1.BaseHostNameResolver=base_host_name_resolver_1.default,__importDefault$10(configuredCustomResolver)),browser$1=(resolver$1.ConfiguredCustomResolver=configured_custom_resolver_1$1.default,{}),boltAgent$1={};function fromVersion(e,t){var t=(t=void 0===t?function(){return{get userAgent(){}}}:t)(),r=null!=t.userAgent?t.userAgent.split("(")[1].split(")")[0]:void 0,t=t.userAgent||void 0;return{product:"neo4j-javascript/".concat(e),platform:r,languageDetails:t}}Object.defineProperty(boltAgent$1,"__esModule",{value:!0}),boltAgent$1.fromVersion=void 0,boltAgent$1.fromVersion=fromVersion,function(e){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),t=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),t(boltAgent$1,e)}(browser$1);var pool$2={},poolConfig={},DEFAULT_MAX_SIZE=(Object.defineProperty(poolConfig,"__esModule",{value:!0}),poolConfig.DEFAULT_ACQUISITION_TIMEOUT=poolConfig.DEFAULT_MAX_SIZE=void 0,100),DEFAULT_ACQUISITION_TIMEOUT=(poolConfig.DEFAULT_MAX_SIZE=DEFAULT_MAX_SIZE,6e4),PoolConfig$1=(poolConfig.DEFAULT_ACQUISITION_TIMEOUT=DEFAULT_ACQUISITION_TIMEOUT,function(){function t(e,t){this.maxSize=valueOrDefault$2(e,DEFAULT_MAX_SIZE),this.acquisitionTimeout=valueOrDefault$2(t,DEFAULT_ACQUISITION_TIMEOUT)}return t.defaultConfig=function(){return new t(DEFAULT_MAX_SIZE,DEFAULT_ACQUISITION_TIMEOUT)},t.fromDriverConfig=function(e){return new t(isConfigured(e.maxConnectionPoolSize)?e.maxConnectionPoolSize:DEFAULT_MAX_SIZE,isConfigured(e.connectionAcquisitionTimeout)?e.connectionAcquisitionTimeout:DEFAULT_ACQUISITION_TIMEOUT)},t}());function valueOrDefault$2(e,t){return isConfigured(e)?e:t}function isConfigured(e){return 0===e||null!=e}poolConfig.default=PoolConfig$1;var pool$1={},__awaiter$i=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$k=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__importDefault$$=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},pool_config_1=(Object.defineProperty(pool$1,"__esModule",{value:!0}),__importDefault$$(poolConfig)),error_1$6=error,logger_1$1=logger$1,Pool$1=function(){function e(e){var t=e.create,t=void 0===t?function(e,t,r){return __awaiter$i(u,void 0,void 0,function(){return __generator$k(this,function(e){switch(e.label){case 0:return[4,Promise.reject(new Error("Not implemented"))];case 1:return[2,e.sent()]}})})}:t,r=e.destroy,r=void 0===r?function(e){return __awaiter$i(u,void 0,void 0,function(){return __generator$k(this,function(e){switch(e.label){case 0:return[4,Promise.resolve()];case 1:return[2,e.sent()]}})})}:r,n=e.validateOnAcquire,n=void 0===n?function(e,t){return!0}:n,o=e.validateOnRelease,o=void 0===o?function(e){return!0}:o,i=e.installIdleObserver,i=void 0===i?function(e,t){}:i,a=e.removeIdleObserver,a=void 0===a?function(e){}:a,s=e.config,s=void 0===s?pool_config_1.default.defaultConfig():s,e=e.log,e=void 0===e?logger_1$1.Logger.noOp():e,u=this;this._create=t,this._destroy=r,this._validateOnAcquire=n,this._validateOnRelease=o,this._installIdleObserver=i,this._removeIdleObserver=a,this._maxSize=s.maxSize,this._acquisitionTimeout=s.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=e,this._closed=!1}return e.prototype.acquire=function(s,u,c){return __awaiter$i(this,void 0,void 0,function(){var o,i,a=this;return __generator$k(this,function(e){switch(e.label){case 0:return o=u.asKey(),i=this._acquireRequests,null==i[o]&&(i[o]=[]),[4,new Promise(function(e,t){var r=setTimeout(function(){var e,t=i[o];null!=t&&(i[o]=t.filter(function(e){return e!==n})),n.isCompleted()||(t=a.activeResourceCount(u),e=a.has(u)?a._pools[o].length:0,n.reject((0,error_1$6.newError)("Connection acquisition timed out in ".concat(a._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(t,", Idle conn count = ").concat(e,"."))))},a._acquisitionTimeout),n=("object"==typeof r&&r.unref(),new PendingRequest(o,s,c,e,t,r,a._log));i[o].push(n),a._processPendingAcquireRequests(u)})];case 1:return[2,e.sent()]}})})},e.prototype.purge=function(t){return __awaiter$i(this,void 0,void 0,function(){return __generator$k(this,function(e){switch(e.label){case 0:return[4,this._purgeKey(t.asKey())];case 1:return[2,e.sent()]}})})},e.prototype.apply=function(e,t){e=e.asKey();e in this._pools&&this._pools[e].apply(t)},e.prototype.close=function(){return __awaiter$i(this,void 0,void 0,function(){var r=this;return __generator$k(this,function(e){switch(e.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(t){return __awaiter$i(r,void 0,void 0,function(){return __generator$k(this,function(e){switch(e.label){case 0:return[4,this._purgeKey(t)];case 1:return[2,e.sent()]}})})})).then()];case 1:return[2,e.sent()]}})})},e.prototype.keepAll=function(o){return __awaiter$i(this,void 0,void 0,function(){var t,r,n=this;return __generator$k(this,function(e){switch(e.label){case 0:return t=o.map(function(e){return e.asKey()}),r=Object.keys(this._pools),r=r.filter(function(e){return!t.includes(e)}),[4,Promise.all(r.map(function(t){return __awaiter$i(n,void 0,void 0,function(){return __generator$k(this,function(e){switch(e.label){case 0:return[4,this._purgeKey(t)];case 1:return[2,e.sent()]}})})})).then()];case 1:return[2,e.sent()]}})})},e.prototype.has=function(e){return e.asKey()in this._pools},e.prototype.activeResourceCount=function(e){return null!=(e=this._activeResourceCounts[e.asKey()])?e:0},e.prototype._getOrInitializePoolFor=function(e){var t=this._pools[e];return null==t&&(t=new SingleAddressPool,this._pools[e]=t,this._pendingCreates[e]=0),t},e.prototype._acquire=function(c,l,f){return __awaiter$i(this,void 0,void 0,function(){var t,n,r,o,i,a,s,u=this;return __generator$k(this,function(e){switch(e.label){case 0:if(this._closed)throw(0,error_1$6.newError)("Pool is closed, it is no more able to serve requests.");if(t=l.asKey(),n=this._getOrInitializePoolFor(t),f)return[3,10];e.label=1;case 1:if(!(0<n.length))return[3,10];if(null==(r=n.pop()))return[3,1];resourceAcquired(t,this._activeResourceCounts),null!=this._removeIdleObserver&&this._removeIdleObserver(r),o=!1,e.label=2;case 2:return e.trys.push([2,4,,6]),[4,this._validateOnAcquire(c,r)];case 3:return o=e.sent(),[3,6];case 4:return i=e.sent(),resourceReleased(t,this._activeResourceCounts),n.removeInUse(r),[4,this._destroy(r)];case 5:throw e.sent(),i;case 6:return o?(this._log.isDebugEnabled()&&this._log.debug("".concat(r," acquired from the pool ").concat(t)),[2,{resource:r,pool:n}]):[3,7];case 7:return resourceReleased(t,this._activeResourceCounts),n.removeInUse(r),[4,this._destroy(r)];case 8:e.sent(),e.label=9;case 9:return[3,1];case 10:if(0<this._maxSize&&this.activeResourceCount(l)+this._pendingCreates[t]>=this._maxSize)return[2,{resource:null,pool:n}];this._pendingCreates[t]=this._pendingCreates[t]+1,e.label=11;case 11:return(e.trys.push([11,,15,16]),this.activeResourceCount(l)+n.length>=this._maxSize&&f)?null==(s=n.pop())?[3,13]:(null!=this._removeIdleObserver&&this._removeIdleObserver(s),n.removeInUse(s),[4,this._destroy(s)]):[3,13];case 12:e.sent(),e.label=13;case 13:return[4,this._create(c,l,function(t,r){return __awaiter$i(u,void 0,void 0,function(){return __generator$k(this,function(e){switch(e.label){case 0:return[4,this._release(t,r,n)];case 1:return[2,e.sent()]}})})})];case 14:return a=e.sent(),n.pushInUse(a),resourceAcquired(t,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(a," created for the pool ").concat(t)),[3,16];case 15:return this._pendingCreates[t]=this._pendingCreates[t]-1,[7];case 16:return[2,{resource:a,pool:n}]}})})},e.prototype._release=function(n,o,i){return __awaiter$i(this,void 0,void 0,function(){var t,r=this;return __generator$k(this,function(e){switch(e.label){case 0:t=n.asKey(),e.label=1;case 1:return(e.trys.push([1,,9,10]),i.isActive())?[4,this._validateOnRelease(o)]:[3,6];case 2:return e.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(o," destroyed and can't be released to the pool ").concat(t," because it is not functional")),i.removeInUse(o),[4,this._destroy(o)]);case 3:return e.sent(),[3,5];case 4:null!=this._installIdleObserver&&this._installIdleObserver(o,{onError:function(e){r._log.debug("Idle connection ".concat(o," destroyed because of error: ").concat(e));e=r._pools[t];null!=e&&(r._pools[t]=e.filter(function(e){return e!==o}),e.removeInUse(o)),r._destroy(o).catch(function(){})}}),i.push(o),this._log.isDebugEnabled()&&this._log.debug("".concat(o," released to the pool ").concat(t)),e.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(o," destroyed and can't be released to the pool ").concat(t," because pool has been purged")),i.removeInUse(o),[4,this._destroy(o)];case 7:e.sent(),e.label=8;case 8:return[3,10];case 9:return resourceReleased(t,this._activeResourceCounts),this._processPendingAcquireRequests(n),[7];case 10:return[2]}})})},e.prototype._purgeKey=function(o){return __awaiter$i(this,void 0,void 0,function(){var t,r,n;return __generator$k(this,function(e){switch(e.label){case 0:if(t=this._pools[o],r=[],null==t)return[3,2];for(;0<t.length;)null!=(n=t.pop())&&(null!=this._removeIdleObserver&&this._removeIdleObserver(n),r.push(this._destroy(n)));return t.close(),delete this._pools[o],[4,Promise.all(r)];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype._processPendingAcquireRequests=function(r){var n,o=this,i=r.asKey(),e=this._acquireRequests[i];null!=e&&(null!=(n=e.shift())?this._acquire(n.context,r,n.requireNew).catch(function(e){return n.reject(e),{resource:null,pool:null}}).then(function(e){var t=e.resource,e=e.pool;null!=t&&null!=e?n.isCompleted()?o._release(r,t,e).catch(function(e){o._log.isDebugEnabled()&&o._log.debug("".concat(t," could not be release back to the pool. Cause: ").concat(e))}):n.resolve(t):n.isCompleted()||(null==o._acquireRequests[i]&&(o._acquireRequests[i]=[]),o._acquireRequests[i].unshift(n))}).catch(function(e){return n.reject(e)}):delete this._acquireRequests[i])},e}();function resourceAcquired(e,t){var r=null!=(r=t[e])?r:0;t[e]=r+1}function resourceReleased(e,t){var r=(null!=(r=t[e])?r:0)-1;0<r?t[e]=r:delete t[e]}var PendingRequest=function(){function e(e,t,r,n,o,i,a){this._key=e,this._context=t,this._resolve=n,this._reject=o,this._timeoutId=i,this._log=a,this._completed=!1,this._config=null!=r?r:{}}return Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requireNew",{get:function(){var e;return null!=(e=this._config.requireNew)&&e},enumerable:!1,configurable:!0}),e.prototype.isCompleted=function(){return this._completed},e.prototype.resolve=function(e){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(e," acquired from the pool ").concat(this._key)),this._resolve(e))},e.prototype.reject=function(e){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(e))},e}(),SingleAddressPool=function(){function e(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return e.prototype.isActive=function(){return this._active},e.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},e.prototype.filter=function(e){return this._elements=this._elements.filter(e),this},e.prototype.apply=function(e){this._elements.forEach(e),this._elementsInUse.forEach(e)},Object.defineProperty(e.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),e.prototype.pop=function(){var e=this._elements.pop();return null!=e&&this._elementsInUse.add(e),e},e.prototype.push=function(e){return this._elementsInUse.delete(e),this._elements.push(e)},e.prototype.pushInUse=function(e){this._elementsInUse.add(e)},e.prototype.removeInUse=function(e){this._elementsInUse.delete(e)},e}(),__createBinding$7=(pool$1.default=Pool$1,!function(e){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),t=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=(Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_MAX_SIZE=e.DEFAULT_ACQUISITION_TIMEOUT=e.PoolConfig=e.Pool=void 0,t(poolConfig)),t=(e.PoolConfig=i.default,Object.defineProperty(e,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return i.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(e,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return i.DEFAULT_MAX_SIZE}}),r(pool$1));e.Pool=t.default,e.default=t.default}(pool$2),commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]})),__setModuleDefault$7=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$7=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$7(t,e,r);return __setModuleDefault$7(t,e),t},util=(Object.defineProperty(internal,"__esModule",{value:!0}),internal.pool=internal.boltAgent=internal.objectUtil=internal.resolver=internal.serverAddress=internal.urlUtil=internal.logger=internal.transactionExecutor=internal.txConfig=internal.connectionHolder=internal.constants=internal.bookmarks=internal.observer=internal.temporalUtil=internal.util=void 0,__importStar$7(util$4)),temporalUtil=(internal.util=util,__importStar$7(temporalUtil$1)),observer=(internal.temporalUtil=temporalUtil,__importStar$7(observers)),bookmarks=(internal.observer=observer,__importStar$7(bookmarks$1)),constants=(internal.bookmarks=bookmarks,__importStar$7(constants$1)),connectionHolder=(internal.constants=constants,__importStar$7(connectionHolder$1)),txConfig=(internal.connectionHolder=connectionHolder,__importStar$7(txConfig$1)),transactionExecutor=(internal.txConfig=txConfig,__importStar$7(transactionExecutor$1)),logger=(internal.transactionExecutor=transactionExecutor,__importStar$7(logger$1)),urlUtil=(internal.logger=logger,__importStar$7(urlUtil$2)),serverAddress=(internal.urlUtil=urlUtil,__importStar$7(serverAddress$1)),resolver=(internal.serverAddress=serverAddress,__importStar$7(resolver$1)),objectUtil$1=(internal.resolver=resolver,__importStar$7(objectUtil$2)),boltAgent=(internal.objectUtil=objectUtil$1,__importStar$7(browser$1)),pool=(internal.boltAgent=boltAgent,__importStar$7(pool$2)),notification=(internal.pool=pool,{}),__assign$v=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__createBinding$6=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),__setModuleDefault$6=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$6=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$6(t,e,r);return __setModuleDefault$6(t,e),t},__read$s=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$m=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},json$1=(Object.defineProperty(notification,"__esModule",{value:!0}),notification.buildNotificationsFromMetadata=notification.buildGqlStatusObjectFromMetadata=notification.polyfillNotification=notification.polyfillGqlStatusObject=notification.GqlStatusObject=notification.Notification=notification.notificationClassification=notification.notificationCategory=notification.notificationSeverityLevel=void 0,__importStar$6(json$3)),internal_1$3=internal,gql_constants_1=gqlConstants,unknownGqlStatus={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"},ERROR:{gql_status:"50N42",status_description:"error: general processing exception - unexpected error"}},notificationSeverityLevel={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"},severityLevels=(notification.notificationSeverityLevel=notificationSeverityLevel,Object.freeze(notificationSeverityLevel),Object.values(notificationSeverityLevel)),notificationCategory={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"},categories=(notification.notificationCategory=notificationCategory,Object.freeze(notificationCategory),Object.values(notificationCategory)),notificationClassification=notificationCategory,Notification$1=(notification.notificationClassification=notificationClassification,function(e){this.code=e.code,this.title=e.title,this.description=e.description,this.severity=e.severity,this.position=_constructPosition(e.position),this.severityLevel=_asEnumerableSeverity(e.severity),this.rawSeverityLevel=e.severity,this.category=_asEnumerableClassification(e.category),this.rawCategory=e.category}),GqlStatusObject=(notification.Notification=Notification$1,function(){function e(e){var t;this.gqlStatus=e.gql_status,this.statusDescription=e.status_description,this.diagnosticRecord=null!=(t=e.diagnostic_record)?t:{},this.position=null!=this.diagnosticRecord._position?_constructPosition(this.diagnosticRecord._position):void 0,this.severity=_asEnumerableSeverity(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=_asEnumerableClassification(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=null!=e.neo4j_code,Object.freeze(this)}return Object.defineProperty(e.prototype,"diagnosticRecordAsJsonString",{get:function(){return json$1.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),e}());function polyfillNotification(e){var t;if(null!=e.neo4j_code)return new Notification$1({code:e.neo4j_code,title:e.title,description:e.description,severity:null==(t=e.diagnostic_record)?void 0:t._severity,category:null==(t=e.diagnostic_record)?void 0:t._classification,position:null==(t=e.diagnostic_record)?void 0:t._position})}function polyfillGqlStatusObject(e){var t=e.severity===notificationSeverityLevel.WARNING?unknownGqlStatus.WARNING:unknownGqlStatus.INFORMATION,r={gql_status:t.gql_status,status_description:null!=(r=e.description)?r:t.status_description,neo4j_code:e.code,title:e.title,diagnostic_record:__assign$v({},gql_constants_1.rawPolyfilledDiagnosticRecord)};return null!=e.severity&&(r.diagnostic_record._severity=e.severity),null!=e.category&&(r.diagnostic_record._classification=e.category),null!=e.position&&(r.diagnostic_record._position=e.position),new GqlStatusObject(r)}notification.GqlStatusObject=GqlStatusObject,notification.polyfillNotification=polyfillNotification,notification.polyfillGqlStatusObject=polyfillGqlStatusObject;var staticGqlStatusObjects={SUCCESS:new GqlStatusObject({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:gql_constants_1.rawPolyfilledDiagnosticRecord}),NO_DATA:new GqlStatusObject({gql_status:"02000",status_description:"note: no data",diagnostic_record:gql_constants_1.rawPolyfilledDiagnosticRecord}),NO_DATA_UNKNOWN_SUBCONDITION:new GqlStatusObject(__assign$v(__assign$v({},unknownGqlStatus.NO_DATA),{diagnostic_record:gql_constants_1.rawPolyfilledDiagnosticRecord})),OMITTED_RESULT:new GqlStatusObject({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:gql_constants_1.rawPolyfilledDiagnosticRecord})};function buildGqlStatusObjectFromMetadata(e){if(null!=e.statuses)return e.statuses.map(function(e){return new GqlStatusObject(e)});var t=!0===(null==(t=e.stream_summary)?void 0:t.have_records_streamed)?staticGqlStatusObjects.SUCCESS:!1===(null==t?void 0:t.has_keys)?staticGqlStatusObjects.OMITTED_RESULT:!0===(null==t?void 0:t.pulled)?staticGqlStatusObjects.NO_DATA:staticGqlStatusObjects.NO_DATA_UNKNOWN_SUBCONDITION;return __spreadArray$m([t],__read$s(null!=(e=null==(t=e.notifications)?void 0:t.map(polyfillGqlStatusObject))?e:[]),!1).sort(function(e,t){return calculateWeight(e)-calculateWeight(t)})}Object.freeze(staticGqlStatusObjects),notification.buildGqlStatusObjectFromMetadata=buildGqlStatusObjectFromMetadata;var gqlStatusWeightByClass=Object.freeze({"02":0,"01":1,"00":2});function calculateWeight(e){var e=null==(e=e.gqlStatus)?void 0:e.slice(0,2);return null!=(e=gqlStatusWeightByClass[e])?e:9999}function buildNotificationsFromMetadata(e){return null!=e.notifications?e.notifications.map(function(e){return new Notification$1(e)}):null!=e.statuses?e.statuses.map(polyfillNotification).filter(function(e){return null!=e}):[]}function _constructPosition(e){return null==e?{}:{offset:internal_1$3.util.toNumber(e.offset),line:internal_1$3.util.toNumber(e.line),column:internal_1$3.util.toNumber(e.column)}}function _asEnumerableSeverity(e){return severityLevels.includes(e)?e:notificationSeverityLevel.UNKNOWN}function _asEnumerableClassification(e){return categories.includes(e)?e:notificationClassification.UNKNOWN}notification.buildNotificationsFromMetadata=buildNotificationsFromMetadata,notification.default=Notification$1,Object.defineProperty(resultSummary,"__esModule",{value:!0}),resultSummary.Stats=resultSummary.QueryStatistics=resultSummary.ProfiledPlan=resultSummary.Plan=resultSummary.ServerInfo=resultSummary.queryType=void 0;var internal_1$2=internal,notification_1=notification,ResultSummary=function(){function e(e,t,r,n){this.query={text:e,parameters:t},this.queryType=r.type,this.counters=new QueryStatistics(null!=(e=r.stats)?e:{}),this.updateStatistics=this.counters,this.plan=(null!=r.plan||null!=r.profile)&&new Plan(null!=(t=r.plan)?t:r.profile),this.profile=null!=r.profile&&new ProfiledPlan(r.profile),this.notifications=(0,notification_1.buildNotificationsFromMetadata)(r),this.gqlStatusObjects=(0,notification_1.buildGqlStatusObjectFromMetadata)(r),this.server=new ServerInfo(r.server,n),this.resultConsumedAfter=r.result_consumed_after,this.resultAvailableAfter=r.result_available_after,this.database={name:null!=(e=r.db)?e:null}}return e.prototype.hasPlan=function(){return this.plan instanceof Plan},e.prototype.hasProfile=function(){return this.profile instanceof ProfiledPlan},e}(),Plan=function t(e){this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.children=null!=e.children?e.children.map(function(e){return new t(e)}):[]},ProfiledPlan=(resultSummary.Plan=Plan,function(){function t(e){this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.dbHits=valueOrDefault$1("dbHits",e),this.rows=valueOrDefault$1("rows",e),this.pageCacheMisses=valueOrDefault$1("pageCacheMisses",e),this.pageCacheHits=valueOrDefault$1("pageCacheHits",e),this.pageCacheHitRatio=valueOrDefault$1("pageCacheHitRatio",e),this.time=valueOrDefault$1("time",e),this.children=null!=e.children?e.children.map(function(e){return new t(e)}):[]}return t.prototype.hasPageCacheStats=function(){return 0<this.pageCacheMisses||0<this.pageCacheHits||0<this.pageCacheHitRatio},t}()),Stats=(resultSummary.ProfiledPlan=ProfiledPlan,function(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0}),QueryStatistics=(resultSummary.Stats=Stats,function(){function e(r){var n=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(r).forEach(function(e){var t=e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()});t in n._stats?n._stats[t]=internal_1$2.util.toNumber(r[e]):"systemUpdates"===t?n._systemUpdates=internal_1$2.util.toNumber(r[e]):"containsSystemUpdates"===t?n._containsSystemUpdates=r[e]:"containsUpdates"===t&&(n._containsUpdates=r[e])}),this._stats=Object.freeze(this._stats)}return e.prototype.containsUpdates=function(){var r=this;return void 0!==this._containsUpdates?this._containsUpdates:0<Object.keys(this._stats).reduce(function(e,t){return e+r._stats[t]},0)},e.prototype.updates=function(){return this._stats},e.prototype.containsSystemUpdates=function(){return void 0!==this._containsSystemUpdates?this._containsSystemUpdates:0<this._systemUpdates},e.prototype.systemUpdates=function(){return this._systemUpdates},e}()),ServerInfo=(resultSummary.QueryStatistics=QueryStatistics,function(e,t){null!=e&&(this.address=e.address,this.agent=e.version),this.protocolVersion=t});function valueOrDefault$1(e,t,r){return void 0===r&&(r=0),!1!==t&&e in t?(t=t[e],internal_1$2.util.toNumber(t)):r}resultSummary.ServerInfo=ServerInfo;var _a$h,queryType={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"},notificationFilter=(resultSummary.queryType=queryType,resultSummary.default=ResultSummary,{}),notificationFilterMinimumSeverityLevel=(Object.defineProperty(notificationFilter,"__esModule",{value:!0}),notificationFilter.notificationFilterDisabledClassification=notificationFilter.notificationFilterDisabledCategory=notificationFilter.notificationFilterMinimumSeverityLevel=void 0,{OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"}),notificationFilterDisabledCategory=(notificationFilter.notificationFilterMinimumSeverityLevel=notificationFilterMinimumSeverityLevel,Object.freeze(notificationFilterMinimumSeverityLevel),{HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"}),notificationFilterDisabledClassification=(notificationFilter.notificationFilterDisabledCategory=notificationFilterDisabledCategory,Object.freeze(notificationFilterDisabledCategory),notificationFilterDisabledCategory),NotificationFilter=(notificationFilter.notificationFilterDisabledClassification=notificationFilterDisabledClassification,function(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,new Error("Not implemented")}),result=(notificationFilter.default=NotificationFilter,{}),__awaiter$h=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$j=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__importDefault$_=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},result_summary_1=(Object.defineProperty(result,"__esModule",{value:!0}),__importDefault$_(resultSummary)),internal_1$1=internal,error_1$5=error,EMPTY_CONNECTION_HOLDER=internal_1$1.connectionHolder.EMPTY_CONNECTION_HOLDER,DEFAULT_ON_ERROR=function(e){console.log("Uncaught error when processing result: "+e)},DEFAULT_ON_COMPLETED=function(e){},DEFAULT_ON_KEYS=function(e){},Result=function(){function e(e,t,r,n,o){void 0===o&&(o={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[_a$h]="Result",this._stack=captureStacktrace(),this._streamObserverPromise=e,this._p=null,this._query=t,this._parameters=null!=r?r:{},this._connectionHolder=null!=n?n:EMPTY_CONNECTION_HOLDER,this._keys=null,this._summary=null,this._error=null,this._watermarks=o}return e.prototype.keys=function(){var n=this;return null!==this._keys?Promise.resolve(this._keys):null!==this._error?Promise.reject(this._error):new Promise(function(t,r){n._streamObserverPromise.then(function(e){return e.subscribe(n._decorateObserver({onKeys:function(e){return t(e)},onError:function(e){return r(e)}}))}).catch(r)})},e.prototype.summary=function(){var n=this;return null!==this._summary?Promise.resolve(this._summary):null!==this._error?Promise.reject(this._error):new Promise(function(t,r){n._streamObserverPromise.then(function(e){e.cancel(),e.subscribe(n._decorateObserver({onCompleted:function(e){return t(e)},onError:function(e){return r(e)}}))}).catch(r)})},e.prototype._getOrCreatePromise=function(){var e=this;return null==this._p&&(this._p=new Promise(function(t,r){var n=[];e.subscribe({onNext:function(e){n.push(e)},onCompleted:function(e){t({records:n,summary:e})},onError:function(e){r(e)}})})),this._p},e.prototype[Symbol.asyncIterator]=function(){var e,n=this;if(!this.isOpen())return e=(0,error_1$5.newError)("Result is already consumed"),{next:function(){return Promise.reject(e)},peek:function(){return Promise.reject(e)}};function o(){return __awaiter$h(n,void 0,void 0,function(){var t;return __generator$j(this,function(e){switch(e.label){case 0:return void 0!==a.queuedObserver?[3,2]:(a.queuedObserver=this._createQueuedResultObserver(r),t=a,[4,this._subscribe(a.queuedObserver,!0).catch(function(){})]);case 1:t.streaming=e.sent(),r(),e.label=2;case 2:return[2,a.queuedObserver]}})})}function i(e){if(void 0===e)throw(0,error_1$5.newError)("InvalidState: Result stream finished without Summary",error_1$5.PROTOCOL_ERROR);return 1}var a={paused:!0,firstRun:!0,finished:!1},r=function(){var e,t;null!=a.streaming&&(e=(t=null!=(t=null==(t=a.queuedObserver)?void 0:t.size)?t:0)>=n._watermarks.high,t=t<=n._watermarks.low,e&&!a.paused?(a.paused=!0,a.streaming.pause()):(t&&a.paused||a.firstRun&&!e)&&(a.firstRun=!1,a.paused=!1,a.streaming.resume()))};return{next:function(){return __awaiter$h(n,void 0,void 0,function(){var t;return __generator$j(this,function(e){switch(e.label){case 0:return a.finished&&i(a.summary)?[2,{done:!0,value:a.summary}]:[4,o()];case 1:return[4,e.sent().dequeue()];case 2:return!0===(t=e.sent()).done&&(a.finished=t.done,a.summary=t.value),[2,t]}})})},return:function(r){return __awaiter$h(n,void 0,void 0,function(){var t;return __generator$j(this,function(e){switch(e.label){case 0:return a.finished&&i(a.summary)?[2,{done:!0,value:null!=r?r:a.summary}]:(null!=(t=a.streaming)&&t.cancel(),[4,o()]);case 1:return[4,e.sent().dequeueUntilDone()];case 2:return t=e.sent(),a.finished=!0,t.value=null!=r?r:t.value,a.summary=t.value,[2,t]}})})},peek:function(){return __awaiter$h(n,void 0,void 0,function(){return __generator$j(this,function(e){switch(e.label){case 0:return a.finished&&i(a.summary)?[2,{done:!0,value:a.summary}]:[4,o()];case 1:return[4,e.sent().head()];case 2:return[2,e.sent()]}})})}}},e.prototype.then=function(e,t){return this._getOrCreatePromise().then(e,t)},e.prototype.catch=function(e){return this._getOrCreatePromise().catch(e)},e.prototype.finally=function(e){return this._getOrCreatePromise().finally(e)},e.prototype.subscribe=function(e){this._subscribe(e).catch(function(){})},e.prototype.isOpen=function(){return null===this._summary&&null===this._error},e.prototype._subscribe=function(e,t){void 0===t&&(t=!1);var r=this._decorateObserver(e);return this._streamObserverPromise.then(function(e){return t&&e.pause(),e.subscribe(r),e}).catch(function(e){return null!=r.onError&&r.onError(e),Promise.reject(e)})},e.prototype._decorateObserver=function(t){var e,r=this,n=null!=(e=t.onCompleted)?e:DEFAULT_ON_COMPLETED,o=null!=(e=t.onError)?e:DEFAULT_ON_ERROR,i=null!=(e=t.onKeys)?e:DEFAULT_ON_KEYS;return{onNext:null!=t.onNext?t.onNext.bind(t):void 0,onKeys:function(e){return r._keys=e,i.call(t,e)},onCompleted:function(e){r._releaseConnectionAndGetSummary(e).then(function(e){return null!==r._summary?n.call(t,r._summary):(r._summary=e,n.call(t,e))}).catch(o)},onError:function(e){r._connectionHolder.releaseConnection().then(function(){replaceStacktrace(e,r._stack),r._error=e,o.call(t,e)}).catch(o)}}},e.prototype._cancel=function(){null===this._summary&&null===this._error&&this._streamObserverPromise.then(function(e){return e.cancel()}).catch(function(){})},e.prototype._releaseConnectionAndGetSummary=function(t){var e=internal_1$1.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),r=e.validatedQuery,n=e.params,o=this._connectionHolder;return o.getConnection().then(function(e){return o.releaseConnection().then(function(){return null==e?void 0:e.getProtocolVersion()})},function(e){}).then(function(e){return new result_summary_1.default(r,n,t,e)})},e.prototype._createQueuedResultObserver=function(n){var e=this;function o(){var r={};return r.promise=new Promise(function(e,t){r.resolve=e,r.reject=t}),r}function i(e){return e instanceof Error}function r(){var r;return __awaiter$h(this,void 0,void 0,function(){var t;return __generator$j(this,function(e){switch(e.label){case 0:if(0<a.length){if(t=null!=(r=a.shift())?r:(0,error_1$5.newError)("Unexpected empty buffer",error_1$5.PROTOCOL_ERROR),n(),i(t))throw t;return[2,t]}return s.resolvable=o(),[4,s.resolvable.promise];case 1:return[2,e.sent()]}})})}var a=[],s={resolvable:null},t={onNext:function(e){t._push({done:!1,value:e})},onCompleted:function(e){t._push({done:!0,value:e})},onError:function(e){t._push(e)},_push:function(e){var t;null!==s.resolvable?(t=s.resolvable,s.resolvable=null,i(e)?t.reject(e):t.resolve(e)):(a.push(e),n())},dequeue:r,dequeueUntilDone:function(){return __awaiter$h(e,void 0,void 0,function(){var t;return __generator$j(this,function(e){switch(e.label){case 0:return[4,r()];case 1:return!0===(t=e.sent()).done?[2,t]:[3,0];case 2:return[2]}})})},head:function(){return __awaiter$h(e,void 0,void 0,function(){var t,r;return __generator$j(this,function(e){switch(e.label){case 0:if(0<a.length){if(i(t=a[0]))throw t;return[2,t]}s.resolvable=o(),e.label=1;case 1:return e.trys.push([1,3,4,5]),[4,s.resolvable.promise];case 2:return t=e.sent(),a.unshift(t),[2,t];case 3:throw r=e.sent(),a.unshift(r),r;case 4:return n(),[7];case 5:return[2]}})})},get size(){return a.length}};return t},e}();function captureStacktrace(){var e=new Error("");return null!=e.stack?e.stack.replace(/^Error(\n\r)*/,""):null}function replaceStacktrace(e,t){null!=t&&(e.stack=e.toString()+"\n"+t)}_a$h=Symbol.toStringTag,result.default=Result;var resultEager={},EagerResult=(Object.defineProperty(resultEager,"__esModule",{value:!0}),function(e,t,r){this.keys=e,this.records=t,this.summary=r}),connectionProvider$1=(resultEager.default=EagerResult,{}),Releasable=(Object.defineProperty(connectionProvider$1,"__esModule",{value:!0}),connectionProvider$1.Releasable=void 0,function(){function e(){}return e.prototype.release=function(){throw new Error("Not implemented")},e}()),ConnectionProvider=(connectionProvider$1.Releasable=Releasable,function(){function e(){}return e.prototype.acquireConnection=function(e){throw Error("Not implemented")},e.prototype.supportsMultiDb=function(){throw Error("Not implemented")},e.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},e.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},e.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},e.prototype.SSREnabled=function(){return!1},e.prototype.verifyConnectivityAndGetServerInfo=function(e){throw Error("Not implemented")},e.prototype.verifyAuthentication=function(e){throw Error("Not implemented")},e.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},e.prototype.close=function(){throw Error("Not implemented")},e}()),connection$2=(connectionProvider$1.default=ConnectionProvider,{}),Connection$1=(Object.defineProperty(connection$2,"__esModule",{value:!0}),function(){function e(){}return e.prototype.beginTransaction=function(e){throw new Error("Not implemented")},e.prototype.run=function(e,t,r){throw new Error("Not implemented")},e.prototype.commitTransaction=function(e){throw new Error("Not implemented")},e.prototype.rollbackTransaction=function(e){throw new Error("Not implemented")},e.prototype.resetAndFlush=function(){throw new Error("Not implemented")},e.prototype.isOpen=function(){throw new Error("Not implemented")},e.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},e.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},e}()),transaction=(connection$2.default=Connection$1,{}),__awaiter$g=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$i=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__importDefault$Z=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},util_1$2=(Object.defineProperty(transaction,"__esModule",{value:!0}),util$4),connection_holder_1$1=connectionHolder$1,bookmarks_1$2=bookmarks$1,tx_config_1$1=txConfig$1,observers_1$1=observers,error_1$4=error,result_1$1=__importDefault$Z(result),Transaction=function(){function e(e){var t=e.connectionHolder,r=e.onClose,n=e.onBookmarks,o=e.onConnection,i=e.reactive,a=e.fetchSize,s=e.impersonatedUser,u=e.highRecordWatermark,c=e.lowRecordWatermark,l=e.notificationFilter,e=e.apiTelemetryConfig,f=this;this._connectionHolder=t,this._reactive=i,this._state=_states$1.ACTIVE,this._onClose=r,this._onBookmarks=n,this._onConnection=o,this._onError=this._onErrorCallback.bind(this),this._fetchSize=a,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=s,this._lowRecordWatermak=c,this._highRecordWatermark=u,this._bookmarks=bookmarks_1$2.Bookmarks.empty(),this._notificationFilter=l,this._apiTelemetryConfig=e,this._acceptActive=function(){},this._activePromise=new Promise(function(e,t){f._acceptActive=e})}return e.prototype._begin=function(o,i,a){var t=this;this._connectionHolder.getConnection().then(function(n){return __awaiter$g(t,void 0,void 0,function(){var t,r=this;return __generator$i(this,function(e){switch(e.label){case 0:return(this._onConnection(),null==n)?[3,2]:(t=this,[4,o()]);case 1:return t._bookmarks=e.sent(),[2,n.beginTransaction({bookmarks:this._bookmarks,txConfig:i,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(e){null!=a&&a.onError(e),r._onError(e).catch(function(){})},afterComplete:function(e){null!=a&&a.onComplete(e),void 0!==e.db&&null!=(null==a?void 0:a.onDB)&&a.onDB(e.db),r._onComplete(e)}})];case 2:throw(0,error_1$4.newError)("No connection available")}})})}).catch(function(e){null!=a&&a.onError(e),t._onError(e).catch(function(){})}).finally(function(){return t._acceptActive()})},e.prototype.run=function(e,t){e=(0,util_1$2.validateQueryAndParameters)(e,t),t=e.validatedQuery,e=e.params,t=this._state.run(t,e,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(t),t},e.prototype.commit=function(){var t=this,r=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(e){return t._onCompleteCallback(e,t._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=r.state,this._onClose(),new Promise(function(e,t){r.result.subscribe({onCompleted:function(){return e()},onError:function(e){return t(e)}})})},e.prototype.rollback=function(){var r=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=r.state,this._onClose(),new Promise(function(e,t){r.result.subscribe({onCompleted:function(){return e()},onError:function(e){return t(e)}})})},e.prototype.isOpen=function(){return this._state===_states$1.ACTIVE},e.prototype.close=function(){return __awaiter$g(this,void 0,void 0,function(){return __generator$i(this,function(e){switch(e.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._onErrorCallback=function(t){return this._state===_states$1.FAILED?Promise.resolve(null):(this._state=_states$1.FAILED,this._onClose(),this._results.forEach(function(e){e.isOpen()&&e._streamObserverPromise.then(function(e){return e.onError(t)}).catch(function(e){})}),this._connectionHolder.releaseConnection())},e.prototype._onCompleteCallback=function(e,t){this._onBookmarks(new bookmarks_1$2.Bookmarks(null==e?void 0:e.bookmark),null!=t?t:bookmarks_1$2.Bookmarks.empty(),null==e?void 0:e.db)},e}(),_states$1={ACTIVE:{commit:function(e){return{result:finishTransaction(!0,e.connectionHolder,e.onError,e.onComplete,e.onConnection,e.pendingResults,e.preparationJob),state:_states$1.SUCCEEDED}},rollback:function(e){return{result:finishTransaction(!1,e.connectionHolder,e.onError,e.onComplete,e.onConnection,e.pendingResults,e.preparationJob),state:_states$1.ROLLED_BACK}},run:function(t,r,e){var n=e.connectionHolder,o=e.onError,i=e.onComplete,a=e.onConnection,s=e.reactive,u=e.fetchSize,c=e.highRecordWatermark,l=e.lowRecordWatermark,e=e.preparationJob,f=null!=e?e:Promise.resolve();return newCompletedResult(n.getConnection().then(function(e){return f.then(function(){return e})}).then(function(e){if(a(),null!=e)return e.run(t,r,{bookmarks:bookmarks_1$2.Bookmarks.empty(),txConfig:tx_config_1$1.TxConfig.empty(),beforeError:o,afterComplete:i,reactive:s,fetchSize:u,highRecordWatermark:c,lowRecordWatermark:l});throw(0,error_1$4.newError)("No connection available")}).catch(function(e){return new observers_1$1.FailedObserver({error:e,onError:o})}),t,r,n,c,l)}},FAILED:{commit:function(e){var t=e.connectionHolder,r=e.onError;return e.onComplete,{result:newCompletedResult(new observers_1$1.FailedObserver({error:(0,error_1$4.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:r}),"COMMIT",{},t,0,0),state:_states$1.FAILED}},rollback:function(e){var t=e.connectionHolder;return e.onError,e.onComplete,{result:newCompletedResult(new observers_1$1.CompletedObserver,"ROLLBACK",{},t,0,0),state:_states$1.FAILED}},run:function(e,t,r){var n=r.connectionHolder,o=r.onError;return r.onComplete,newCompletedResult(new observers_1$1.FailedObserver({error:(0,error_1$4.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:o}),e,t,n,0,0)}},SUCCEEDED:{commit:function(e){var t=e.connectionHolder,r=e.onError;return e.onComplete,{result:newCompletedResult(new observers_1$1.FailedObserver({error:(0,error_1$4.newError)("Cannot commit this transaction, because it has already been committed."),onError:r}),"COMMIT",{},connection_holder_1$1.EMPTY_CONNECTION_HOLDER,0,0),state:_states$1.SUCCEEDED,connectionHolder:t}},rollback:function(e){var t=e.connectionHolder,r=e.onError;return e.onComplete,{result:newCompletedResult(new observers_1$1.FailedObserver({error:(0,error_1$4.newError)("Cannot rollback this transaction, because it has already been committed."),onError:r}),"ROLLBACK",{},connection_holder_1$1.EMPTY_CONNECTION_HOLDER,0,0),state:_states$1.SUCCEEDED,connectionHolder:t}},run:function(e,t,r){var n=r.connectionHolder,o=r.onError;return r.onComplete,newCompletedResult(new observers_1$1.FailedObserver({error:(0,error_1$4.newError)("Cannot run query in this transaction, because it has already been committed."),onError:o}),e,t,n,0,0)}},ROLLED_BACK:{commit:function(e){var t=e.connectionHolder,r=e.onError;return e.onComplete,{result:newCompletedResult(new observers_1$1.FailedObserver({error:(0,error_1$4.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:r}),"COMMIT",{},t,0,0),state:_states$1.ROLLED_BACK}},rollback:function(e){var t=e.connectionHolder;return e.onError,e.onComplete,{result:newCompletedResult(new observers_1$1.FailedObserver({error:(0,error_1$4.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},t,0,0),state:_states$1.ROLLED_BACK}},run:function(e,t,r){var n=r.connectionHolder,o=r.onError;return r.onComplete,newCompletedResult(new observers_1$1.FailedObserver({error:(0,error_1$4.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:o}),e,t,n,0,0)}}};function finishTransaction(r,e,n,o,i,a,t){var s=null!=t?t:Promise.resolve(),t=e.getConnection().then(function(e){return s.then(function(){return e})}).then(function(t){return i(),a.forEach(function(e){return e._cancel()}),Promise.all(a.map(function(e){return e.summary()})).then(function(e){if(null!=t)return r?t.commitTransaction({beforeError:n,afterComplete:o}):t.rollbackTransaction({beforeError:n,afterComplete:o});throw(0,error_1$4.newError)("No connection available")})}).catch(function(e){return new observers_1$1.FailedObserver({error:e,onError:n})});return new result_1$1.default(t,r?"COMMIT":"ROLLBACK",{},e,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function newCompletedResult(e,t,r,n,o,i){return void 0===n&&(n=connection_holder_1$1.EMPTY_CONNECTION_HOLDER),new result_1$1.default(Promise.resolve(e),t,r,new connection_holder_1$1.ReadOnlyConnectionHolder(null!=n?n:connection_holder_1$1.EMPTY_CONNECTION_HOLDER),{low:i,high:o})}transaction.default=Transaction;var transactionManaged={},ManagedTransaction=(Object.defineProperty(transactionManaged,"__esModule",{value:!0}),function(){function t(e){e=e.run;this._run=e}return t.fromTransaction=function(e){return new t({run:e.run.bind(e)})},t.prototype.run=function(e,t){return this._run(e,t)},t}()),transactionPromise=(transactionManaged.default=ManagedTransaction,{}),__extends$P=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__assign$u=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$Y=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},transaction_1=(Object.defineProperty(transactionPromise,"__esModule",{value:!0}),__importDefault$Y(transaction)),TransactionPromise=function(_){function e(e){var t=e.connectionHolder,r=e.onClose,n=e.onBookmarks,o=e.onConnection,i=e.reactive,a=e.fetchSize,s=e.impersonatedUser,u=e.highRecordWatermark,c=e.lowRecordWatermark,l=e.notificationFilter,f=e.apiTelemetryConfig,e=e.onDbCallback,t=_.call(this,{connectionHolder:t,onClose:r,onBookmarks:n,onConnection:o,reactive:i,fetchSize:a,impersonatedUser:s,highRecordWatermark:u,lowRecordWatermark:c,notificationFilter:l,apiTelemetryConfig:f})||this;return t[_a$g]="TransactionPromise",t._onDbCallback=e,t}return __extends$P(e,_),e.prototype.then=function(e,t){return this._getOrCreateBeginPromise().then(e,t)},e.prototype.catch=function(e){return this._getOrCreateBeginPromise().catch(e)},e.prototype.finally=function(e){return this._getOrCreateBeginPromise().finally(e)},e.prototype._getOrCreateBeginPromise=function(){var r=this;return null==this._beginPromise&&(this._beginPromise=new Promise(function(e,t){r._resolve=e,r._reject=t,null!=r._beginError&&t(r._beginError),null!=r._beginMetadata&&e(r._toTransaction())})),this._beginPromise},e.prototype._toTransaction=function(){return __assign$u(__assign$u({},this),{run:_.prototype.run.bind(this),commit:_.prototype.commit.bind(this),rollback:_.prototype.rollback.bind(this),close:_.prototype.close.bind(this),isOpen:_.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},e.prototype._begin=function(e,t){return _.prototype._begin.call(this,e,t,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this),onDB:this._onDbCallback})},e.prototype._onBeginError=function(e){this._beginError=e,null!=this._reject&&this._reject(e)},e.prototype._onBeginMetadata=function(e){this._beginMetadata=null!=e?e:{},null!=this._resolve&&this._resolve(this._toTransaction())},e}(transaction_1.default),_a$g=Symbol.toStringTag,session=(transactionPromise.default=TransactionPromise,{}),authUtil={},json_1$1=(Object.defineProperty(authUtil,"__esModule",{value:!0}),authUtil.cacheKey=void 0,json$3);function cacheKey(e,t){return null!=t?"basic:"+t:void 0===e?"DEFAULT":"basic"===e.scheme?"basic:"+(null!=(t=e.principal)?t:""):"kerberos"===e.scheme?"kerberos:"+e.credentials:"bearer"===e.scheme?"bearer:"+e.credentials:"none"===e.scheme?"none":(0,json_1$1.stringify)(e,{sortedElements:!0})}authUtil.cacheKey=cacheKey;var __awaiter$f=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$h=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__read$r=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$l=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},__importDefault$X=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},observers_1=(Object.defineProperty(session,"__esModule",{value:!0}),observers),util_1$1=util$4,constants_1$2=constants$1,error_1$3=error,result_1=__importDefault$X(result),connection_holder_1=connectionHolder$1,transaction_executor_1=transactionExecutor$1,bookmarks_1$1=bookmarks$1,tx_config_1=txConfig$1,transaction_promise_1=__importDefault$X(transactionPromise),transaction_managed_1=__importDefault$X(transactionManaged),auth_util_1$1=authUtil,Session=function(){function o(e){var t=e.mode,r=e.connectionProvider,n=e.bookmarks,o=e.database,i=e.config,a=e.reactive,s=e.fetchSize,u=e.impersonatedUser,c=e.bookmarkManager,l=e.notificationFilter,f=e.auth,_=e.log,e=e.homeDatabaseCallback,t=(this._mode=t,this._database=o,this._reactive=a,this._fetchSize=s,this._homeDatabaseCallback=e,this._auth=f,this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new connection_holder_1.ConnectionHolder({mode:constants_1$2.ACCESS_MODE_READ,auth:f,database:o,bookmarks:n,connectionProvider:r,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:_}),this._writeConnectionHolder=new connection_holder_1.ConnectionHolder({mode:constants_1$2.ACCESS_MODE_WRITE,auth:f,database:o,bookmarks:n,connectionProvider:r,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:_}),this._open=!0,this._hasTx=!1,this._impersonatedUser=u,this._lastBookmarks=null!=n?n:bookmarks_1$1.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=_createTransactionExecutor(i),this._databaseNameResolved=""!==this._database,this._calculateWatermaks());this._lowRecordWatermark=t.low,this._highRecordWatermark=t.high,this._results=[],this._bookmarkManager=c,this._notificationFilter=l,this._log=_,this._databaseGuess=null==i?void 0:i.cachedHomeDatabase,this._isRoutingSession=null!=(a=null==i?void 0:i.routingDriver)&&a}return o.prototype.run=function(e,t,r){var o=this,e=(0,util_1$1.validateQueryAndParameters)(e,t),i=e.validatedQuery,a=e.params,s=null!=r?new tx_config_1.TxConfig(r,this._log):tx_config_1.TxConfig.empty(),t=this._run(i,a,function(n){return __awaiter$f(o,void 0,void 0,function(){var t,r=this;return __generator$h(this,function(e){switch(e.label){case 0:return[4,this._bookmarks()];case 1:return t=e.sent(),this._assertSessionIsOpen(),[2,n.run(i,a,{bookmarks:t,txConfig:s,mode:this._mode,database:this._database,apiTelemetryConfig:{api:constants_1$2.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(e){return r._onCompleteCallback(e,t)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,onDb:this._onDatabaseNameResolved.bind(this)})]}})})});return this._results.push(t),t},o.prototype._run=function(e,t,r){var r=this._acquireAndConsumeConnection(r),n=r.connectionHolder,r=r.resultPromise.catch(function(e){return Promise.resolve(new observers_1.FailedObserver({error:e}))}),o={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new result_1.default(r,e,t,n,o)},o.prototype._acquireConnection=function(e){var r=this,e=this._acquireAndConsumeConnection(e),n=e.connectionHolder;return e.resultPromise.then(function(t){return __awaiter$f(r,void 0,void 0,function(){return __generator$h(this,function(e){switch(e.label){case 0:return[4,n.releaseConnection()];case 1:return e.sent(),[2,t]}})})})},o.prototype._acquireAndConsumeConnection=function(t){var e=this._connectionHolderWithMode(this._mode),r=this._open?!this._hasTx&&e.initializeConnection(this._databaseGuess)?e.getConnection().then(function(e){return t(e)}):Promise.reject((0,error_1$3.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):Promise.reject((0,error_1$3.newError)("Cannot run query in a closed session."));return{connectionHolder:e,resultPromise:r}},o.prototype.beginTransaction=function(e){var t=tx_config_1.TxConfig.empty();return null!=e&&(t=new tx_config_1.TxConfig(e,this._log)),this._beginTransaction(this._mode,t,{api:constants_1$2.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},o.prototype._beginTransaction=function(e,t,r){var n=this;if(!this._open)throw(0,error_1$3.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,error_1$3.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");e=o._validateSessionMode(e),e=this._connectionHolderWithMode(e),e.initializeConnection(this._databaseGuess),this._hasTx=!0,e=new transaction_promise_1.default({connectionHolder:e,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(e,t,r){return n._updateBookmarks(e,t,r)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:r,onDbCallback:this._onDatabaseNameResolved.bind(this)});return e._begin(function(){return n._bookmarks()},t),e},o.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,error_1$3.newError)("You cannot run more transactions on a closed session.")},o.prototype._transactionClosed=function(){this._hasTx=!1},o.prototype.lastBookmark=function(){return this.lastBookmarks()},o.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},o.prototype._bookmarks=function(){var r;return __awaiter$f(this,void 0,void 0,function(){var t;return __generator$h(this,function(e){switch(e.label){case 0:return[4,null==(r=this._bookmarkManager)?void 0:r.getBookmarks()];case 1:return void 0===(t=e.sent())?[2,this._lastBookmarks]:[2,new bookmarks_1$1.Bookmarks(__spreadArray$l(__spreadArray$l([],__read$r(t),!1),__read$r(this._configuredBookmarks),!1))]}})})},o.prototype.readTransaction=function(e,t){t=new tx_config_1.TxConfig(t,this._log);return this._runTransaction(constants_1$2.ACCESS_MODE_READ,t,e)},o.prototype.writeTransaction=function(e,t){t=new tx_config_1.TxConfig(t,this._log);return this._runTransaction(constants_1$2.ACCESS_MODE_WRITE,t,e)},o.prototype._runTransaction=function(t,r,e){var n=this;return this._transactionExecutor.execute(function(e){return n._beginTransaction(t,r,e)},e)},o.prototype.executeRead=function(e,t){t=new tx_config_1.TxConfig(t,this._log);return this._executeInTransaction(constants_1$2.ACCESS_MODE_READ,t,e)},o.prototype.executeWrite=function(e,t){t=new tx_config_1.TxConfig(t,this._log);return this._executeInTransaction(constants_1$2.ACCESS_MODE_WRITE,t,e)},o.prototype._executeInTransaction=function(t,r,e){var n=this;return this._transactionExecutor.execute(function(e){return n._beginTransaction(t,r,e)},e,transaction_managed_1.default.fromTransaction)},o.prototype._onDatabaseNameResolved=function(e){var t;this._isRoutingSession&&(this._databaseGuess=e,this._databaseNameResolved||(this._database=t=null!=e?e:"",this._readConnectionHolder.setDatabase(t),this._writeConnectionHolder.setDatabase(t),this._databaseNameResolved=!0,null!=this._homeDatabaseCallback&&this._homeDatabaseCallback((0,auth_util_1$1.cacheKey)(this._auth,this._impersonatedUser),e)))},o.prototype._getConnectionAcquistionBookmarks=function(){var r;return __awaiter$f(this,void 0,void 0,function(){var t;return __generator$h(this,function(e){switch(e.label){case 0:return[4,null==(r=this._bookmarkManager)?void 0:r.getBookmarks()];case 1:return void 0===(t=e.sent())?[2,this._lastBookmarks]:[2,new bookmarks_1$1.Bookmarks(__spreadArray$l(__spreadArray$l([],__read$r(this._configuredBookmarks),!1),__read$r(t),!1))]}})})},o.prototype._updateBookmarks=function(e,t,r){var n;null==e||e.isEmpty()||(null!=(n=this._bookmarkManager)&&n.updateBookmarks(null!=(n=null==t?void 0:t.values())?n:[],null!=(t=null==e?void 0:e.values())?t:[]).catch(function(){}),this._lastBookmarks=e,this._configuredBookmarks=bookmarks_1$1.Bookmarks.empty())},o.prototype.close=function(){return __awaiter$f(this,void 0,void 0,function(){return __generator$h(this,function(e){switch(e.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(e){return e._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return e.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},o.prototype[Symbol.asyncDispose]=function(){return this.close()},o.prototype._connectionHolderWithMode=function(e){if(e===constants_1$2.ACCESS_MODE_READ)return this._readConnectionHolder;if(e===constants_1$2.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,error_1$3.newError)("Unknown access mode: "+e)},o.prototype._onCompleteCallback=function(e,t){this._updateBookmarks(new bookmarks_1$1.Bookmarks(e.bookmark),t,e.db)},o.prototype._calculateWatermaks=function(){return this._fetchSize===constants_1$2.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},o.prototype._configureTransactionExecutor=function(e,t){this._transactionExecutor.pipelineBegin=e,this._transactionExecutor.telemetryApi=t},o._validateSessionMode=function(e){e=null!=e?e:constants_1$2.ACCESS_MODE_WRITE;if(e!==constants_1$2.ACCESS_MODE_READ&&e!==constants_1$2.ACCESS_MODE_WRITE)throw(0,error_1$3.newError)("Illegal session mode "+e);return e},o}();function _createTransactionExecutor(e){e=null!=(e=null==e?void 0:e.maxTransactionRetryTime)?e:null;return new transaction_executor_1.TransactionExecutor(e)}session.default=Session;var driver={},bookmarkManager$1={},__awaiter$e=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$g=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__values$b=commonjsGlobal&&commonjsGlobal.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$q=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$k=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},BookmarkManager=(Object.defineProperty(bookmarkManager$1,"__esModule",{value:!0}),bookmarkManager$1.bookmarkManager=void 0,function(){function e(){throw new Error("Not implemented")}return e.prototype.updateBookmarks=function(e,t){return __awaiter$e(this,void 0,void 0,function(){return __generator$g(this,function(e){throw new Error("Not implemented")})})},e.prototype.getBookmarks=function(){return __awaiter$e(this,void 0,void 0,function(){return __generator$g(this,function(e){throw new Error("Not implemented")})})},e}());function bookmarkManager(e){void 0===e&&(e={});var t=new Set(e.initialBookmarks);return new Neo4jBookmarkManager(t,e.bookmarksSupplier,e.bookmarksConsumer)}bookmarkManager$1.default=BookmarkManager,bookmarkManager$1.bookmarkManager=bookmarkManager;var Neo4jBookmarkManager=function(){function e(e,t,r){this._bookmarks=e,this._bookmarksSupplier=t,this._bookmarksConsumer=r}return e.prototype.updateBookmarks=function(f,_){return __awaiter$e(this,void 0,void 0,function(){var t,r,n,o,i,a,s,u,c,l;return __generator$g(this,function(e){switch(e.label){case 0:t=this._bookmarks;try{for(r=__values$b(f),n=r.next();!n.done;n=r.next())a=n.value,t.delete(a)}catch(e){s={error:e}}finally{try{n&&!n.done&&(u=r.return)&&u.call(r)}finally{if(s)throw s.error}}try{for(o=__values$b(_),i=o.next();!i.done;i=o.next())a=i.value,t.add(a)}catch(e){c={error:e}}finally{try{i&&!i.done&&(l=o.return)&&l.call(o)}finally{if(c)throw c.error}}return"function"!=typeof this._bookmarksConsumer?[3,2]:[4,this._bookmarksConsumer(__spreadArray$k([],__read$q(t),!1))];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.getBookmarks=function(){var u;return __awaiter$e(this,void 0,void 0,function(){var t,r,n,o,i,a,s;return __generator$g(this,function(e){switch(e.label){case 0:return t=new Set(this._bookmarks),"function"!=typeof this._bookmarksSupplier?[3,2]:[4,this._bookmarksSupplier()];case 1:r=null!=(u=e.sent())?u:[];try{for(n=__values$b(r),o=n.next();!o.done;o=n.next())i=o.value,t.add(i)}catch(e){a={error:e}}finally{try{o&&!o.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}e.label=2;case 2:return[2,__spreadArray$k([],__read$q(t),!1)]}})})},e}(),resultTransformers$1={},__awaiter$d=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$f=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__importDefault$W=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},result_eager_1=(Object.defineProperty(resultTransformers$1,"__esModule",{value:!0}),__importDefault$W(resultEager)),error_1$2=error,ResultTransformers=function(){function e(){}return e.prototype.eagerResultTransformer=function(){return createEagerResultFromResult},e.prototype.eager=function(){return createEagerResultFromResult},e.prototype.mappedResultTransformer=function(e){return createMappedResultTransformer(e)},e.prototype.mapped=function(e){return createMappedResultTransformer(e)},e.prototype.first=function(){return first$2},e.prototype.summary=function(){return summary},e}(),resultTransformers=new ResultTransformers;function createEagerResultFromResult(o){return __awaiter$d(this,void 0,void 0,function(){var t,r,n;return __generator$f(this,function(e){switch(e.label){case 0:return[4,o];case 1:return r=e.sent(),t=r.summary,r=r.records,[4,o.keys()];case 2:return n=e.sent(),[2,new result_eager_1.default(n,r,t)]}})})}function createMappedResultTransformer(i){var e=this;if(null==i||null==i.collect&&null==i.map)throw(0,error_1$2.newError)("Requires a map or/and a collect functions.");return function(o){return __awaiter$d(e,void 0,void 0,function(){return __generator$f(this,function(e){switch(e.label){case 0:return[4,new Promise(function(t,r){var n={records:[],keys:[]};o.subscribe({onKeys:function(e){n.keys=e},onNext:function(e){var t;null!=i.map?void 0!==(t=i.map(e))&&n.records.push(t):n.records.push(e)},onCompleted:function(e){null!=i.collect?t(i.collect(n.records,e,n.keys)):(e={records:n.records,summary:e,keys:n.keys},t(e))},onError:function(e){r(e)}})})];case 1:return[2,e.sent()]}})})}}function first$2(o){return __awaiter$d(this,void 0,void 0,function(){var t,r,n;return __generator$f(this,function(e){switch(e.label){case 0:return[4,(t=o[Symbol.asyncIterator]()).next()];case 1:n=e.sent(),r=n.value,n=n.done,e.label=2;case 2:return e.trys.push([2,,3,6]),!0===n?[2,void 0]:[2,r];case 3:return null==t.return?[3,5]:[4,t.return()];case 4:e.sent(),e.label=5;case 5:return[7];case 6:return[2]}})})}function summary(t){return __awaiter$d(this,void 0,void 0,function(){return __generator$f(this,function(e){switch(e.label){case 0:return[4,t.summary()];case 1:return[2,e.sent()]}})})}Object.freeze(resultTransformers),resultTransformers$1.default=resultTransformers;var queryExecutor={},__awaiter$c=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$e=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},constants_1$1=(Object.defineProperty(queryExecutor,"__esModule",{value:!0}),constants$1),QueryExecutor=function(){function e(e){this._createSession=e}return e.prototype.execute=function(o,i,a){return __awaiter$c(this,void 0,void 0,function(){var t,r,n=this;return __generator$e(this,function(e){switch(e.label){case 0:t=this._createSession({database:o.database,bookmarkManager:o.bookmarkManager,impersonatedUser:o.impersonatedUser,auth:o.auth}),r=installEventListenerWhenPossible(o.signal,"abort",function(){return __awaiter$c(n,void 0,void 0,function(){return __generator$e(this,function(e){switch(e.label){case 0:return[4,t.close()];case 1:return[2,e.sent()]}})})}),t._configureTransactionExecutor(!0,constants_1$1.TELEMETRY_APIS.EXECUTE_QUERY),e.label=1;case 1:return e.trys.push([1,,3,5]),[4,("READ"===o.routing?t.executeRead:t.executeWrite).bind(t)(function(r){return __awaiter$c(n,void 0,void 0,function(){var t;return __generator$e(this,function(e){switch(e.label){case 0:return t=r.run(i,a),[4,o.resultTransformer(t)];case 1:return[2,e.sent()]}})})},o.transactionConfig)];case 2:return[2,e.sent()];case 3:return r.uninstall(),[4,t.close()];case 4:return e.sent(),[7];case 5:return[2]}})})},e}();function installEventListenerWhenPossible(e,t,r){return"function"==typeof(null==e?void 0:e.addEventListener)&&e.addEventListener(t,r),{uninstall:function(){"function"==typeof(null==e?void 0:e.removeEventListener)&&e.removeEventListener(t,r)}}}queryExecutor.default=QueryExecutor;var homedbCache={},HomeDatabaseCache=(Object.defineProperty(homedbCache,"__esModule",{value:!0}),function(){function e(e){this.maxSize=e,this.pruneCount=Math.max(Math.round(.01*e*Math.log(e)),1),this.map=new Map}return e.prototype.set=function(e,t){this.map.set(e,{database:t,lastUsed:Date.now()}),this._pruneCache()},e.prototype.get=function(e){e=this.map.get(e);if(void 0!==e)return e.lastUsed=Date.now(),e.database},e.prototype.delete=function(e){this.map.delete(e)},e.prototype._pruneCache=function(){if(this.map.size>this.maxSize)for(var e=Array.from(this.map.entries()).sort(function(e,t){return e[1].lastUsed-t[1].lastUsed}),t=0;t<this.pruneCount;t++)this.map.delete(e[t][0])},e}()),__assign$t=(homedbCache.default=HomeDatabaseCache,commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),__awaiter$b=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$d=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__importDefault$V=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bookmarks_1=(Object.defineProperty(driver,"__esModule",{value:!0}),driver.QueryConfig=driver.SessionConfig=driver.routing=driver.WRITE=driver.READ=driver.Driver=void 0,bookmarks$1),configured_custom_resolver_1=__importDefault$V(configuredCustomResolver),constants_1=constants$1,logger_1=logger$1,session_1=__importDefault$V(session),util_1=util$4,bookmark_manager_1=bookmarkManager$1,result_transformers_1=__importDefault$V(resultTransformers$1),query_executor_1=__importDefault$V(queryExecutor),error_1$1=error,homedb_cache_1=__importDefault$V(homedbCache),auth_util_1=authUtil,DEFAULT_MAX_CONNECTION_LIFETIME=36e5,DEFAULT_FETCH_SIZE=1e3,HOMEDB_CACHE_MAX_SIZE=1e4,READ$3=constants_1.ACCESS_MODE_READ,WRITE$3=(driver.READ=READ$3,constants_1.ACCESS_MODE_WRITE),idGenerator$1=(driver.WRITE=WRITE$3,0),SessionConfig=function(){this.defaultAccessMode=WRITE$3,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0},ROUTING_WRITE=(driver.SessionConfig=SessionConfig,"WRITE"),ROUTING_READ="READ",routing={WRITE:ROUTING_WRITE,READ:ROUTING_READ},QueryConfig=(driver.routing=routing,Object.freeze(routing),function(){this.routing=routing.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0}),Driver$1=(driver.QueryConfig=QueryConfig,function(){function e(e,t,r,n,o){void 0===n&&(n=function(e){return new session_1.default(e)}),void 0===o&&(o=function(e){return new query_executor_1.default(e)}),sanitizeConfig(t=void 0===t?{}:t);var i=logger_1.Logger.create(t);validateConfig(t,i),this._id=idGenerator$1++,this._meta=e,this._config=t,this._log=i,this._createConnectionProvider=r,this._createSession=n,this._defaultExecuteQueryBookmarkManager=(0,bookmark_manager_1.bookmarkManager)(),this._queryExecutor=o(this.session.bind(this)),this._connectionProvider=null,this.homeDatabaseCache=new homedb_cache_1.default(HOMEDB_CACHE_MAX_SIZE),this._afterConstruction()}return Object.defineProperty(e.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),e.prototype.executeQuery=function(o,i,a){var s,u;return void 0===a&&(a={}),__awaiter$b(this,void 0,void 0,function(){var t,r,n;return __generator$d(this,function(e){switch(e.label){case 0:if(t=null===a.bookmarkManager?void 0:null!=(s=a.bookmarkManager)?s:this.executeQueryBookmarkManager,r=null!=(s=a.resultTransformer)?s:result_transformers_1.default.eagerResultTransformer(),(n=null!=(u=a.routing)?u:routing.WRITE)!==routing.READ&&n!==routing.WRITE)throw(0,error_1$1.newError)('Illegal query routing config: "'.concat(n,'"'));return[4,this._queryExecutor.execute({resultTransformer:r,bookmarkManager:t,routing:n,database:a.database,impersonatedUser:a.impersonatedUser,transactionConfig:a.transactionConfig,auth:a.auth,signal:a.signal},o,i)];case 1:return[2,e.sent()]}})})},e.prototype.verifyConnectivity=function(e){e=(void 0===e?{}:e).database,e=void 0===e?"":e;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:e,accessMode:READ$3})},e.prototype.verifyAuthentication=function(e){var e=void 0===e?{}:e,t=e.database,r=e.auth;return __awaiter$b(this,void 0,void 0,function(){return __generator$d(this,function(e){switch(e.label){case 0:return[4,this._getOrCreateConnectionProvider().verifyAuthentication({database:null!=t?t:"system",auth:r,accessMode:READ$3})];case 1:return[2,e.sent()]}})})},e.prototype.getServerInfo=function(e){e=(void 0===e?{}:e).database,e=void 0===e?"":e;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:e,accessMode:READ$3})},e.prototype.supportsMultiDb=function(){return this._getOrCreateConnectionProvider().supportsMultiDb()},e.prototype.supportsTransactionConfig=function(){return this._getOrCreateConnectionProvider().supportsTransactionConfig()},e.prototype.supportsUserImpersonation=function(){return this._getOrCreateConnectionProvider().supportsUserImpersonation()},e.prototype.supportsSessionAuth=function(){return this._getOrCreateConnectionProvider().supportsSessionAuth()},e.prototype.getNegotiatedProtocolVersion=function(){return this._getOrCreateConnectionProvider().getNegotiatedProtocolVersion()},e.prototype.isEncrypted=function(){return this._isEncrypted()},e.prototype._supportsRouting=function(){return this._meta.routing},e.prototype._isEncrypted=function(){return this._config.encrypted===util_1.ENCRYPTION_ON||!0===this._config.encrypted},e.prototype._getTrust=function(){return this._config.trust},e.prototype.session=function(e){var e=void 0===e?{}:e,t=e.defaultAccessMode,r=e.bookmarks,n=e.database,o=e.impersonatedUser,i=e.fetchSize,a=e.bookmarkManager,s=e.notificationFilter,e=e.auth;return this._newSession({defaultAccessMode:void 0===t?WRITE$3:t,bookmarkOrBookmarks:r,database:void 0===n?"":n,reactive:!1,impersonatedUser:o,fetchSize:validateFetchSizeValue$1(i,this._config.fetchSize),bookmarkManager:a,notificationFilter:s,auth:e})},e.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),null!=this._connectionProvider?this._connectionProvider.close():Promise.resolve()},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},e.prototype._homeDatabaseCallback=function(e,t){this.homeDatabaseCache.set(e,t)},e.prototype._newSession=function(e){var t=e.defaultAccessMode,r=e.bookmarkOrBookmarks,n=e.database,o=e.reactive,i=e.impersonatedUser,a=e.fetchSize,s=e.bookmarkManager,u=e.notificationFilter,e=e.auth,t=session_1.default._validateSessionMode(t),c=this._getOrCreateConnectionProvider(),l=this.homeDatabaseCache.get((0,auth_util_1.cacheKey)(e,i)),f=this._homeDatabaseCallback.bind(this),r=null!=r?new bookmarks_1.Bookmarks(r):bookmarks_1.Bookmarks.empty();return this._createSession({mode:t,database:null!=n?n:"",connectionProvider:c,bookmarks:r,config:__assign$t({cachedHomeDatabase:l,routingDriver:this._supportsRouting()},this._config),reactive:o,impersonatedUser:i,fetchSize:a,bookmarkManager:s,notificationFilter:u,auth:e,log:this._log,homeDatabaseCallback:f})},e.prototype._getOrCreateConnectionProvider=function(){return null==this._connectionProvider&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,createHostNameResolver(this._config))),this._connectionProvider},e}());function validateConfig(e,t){var r=e.resolver;if(null!=r&&"function"!=typeof r)throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof r));if(e.connectionAcquisitionTimeout<e.connectionTimeout&&t.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),null!=(null==(r=e.notificationFilter)?void 0:r.disabledCategories)&&null!=(null==(t=e.notificationFilter)?void 0:t.disabledClassifications))throw new Error('The notificationFilter can\'t have both "disabledCategories" and  "disabledClassifications" configured at the same time.');return e}function sanitizeConfig(e){e.maxConnectionLifetime=sanitizeIntValue(e.maxConnectionLifetime,DEFAULT_MAX_CONNECTION_LIFETIME),e.maxConnectionPoolSize=sanitizeIntValue(e.maxConnectionPoolSize,constants_1.DEFAULT_POOL_MAX_SIZE),e.connectionAcquisitionTimeout=sanitizeIntValue(e.connectionAcquisitionTimeout,constants_1.DEFAULT_POOL_ACQUISITION_TIMEOUT),e.fetchSize=validateFetchSizeValue$1(e.fetchSize,DEFAULT_FETCH_SIZE),e.connectionTimeout=extractConnectionTimeout(e),e.connectionLivenessCheckTimeout=validateConnectionLivenessCheckTimeoutSizeValue(e.connectionLivenessCheckTimeout)}function sanitizeIntValue(e,t){e=parseInt(e,10);return 0<e||0===e?e:e<0?Number.MAX_SAFE_INTEGER:t}function validateFetchSizeValue$1(e,t){e=parseInt(e,10);if(0<e||e===constants_1.FETCH_ALL)return e;if(0===e||e<0)throw new Error("The fetch size can only be a positive value or ".concat(constants_1.FETCH_ALL," for ALL. However fetchSize = ").concat(e));return t}function extractConnectionTimeout(e){e=parseInt(e.connectionTimeout,10);return 0===e||!isNaN(e)&&e<0?null:isNaN(e)?constants_1.DEFAULT_CONNECTION_TIMEOUT_MILLIS:e}function validateConnectionLivenessCheckTimeoutSizeValue(e){if(null!=e){e=parseInt(e,10);if(e<0||Number.isNaN(e))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(e));return e}}function createHostNameResolver(e){return new configured_custom_resolver_1.default(e.resolver)}driver.Driver=Driver$1,driver.default=Driver$1;var auth$1={},error_1=(Object.defineProperty(auth$1,"__esModule",{value:!0}),error),json_1=json$3,auth={basic:function(e,t,r){return null!=r?{scheme:"basic",principal:e,credentials:t,realm:r}:{scheme:"basic",principal:e,credentials:t}},kerberos:function(e){return{scheme:"kerberos",principal:"",credentials:e}},bearer:function(e){return{scheme:"bearer",credentials:e}},none:function(){return{scheme:"none"}},custom:function(e,t,r,n,o){n={scheme:n,principal:e};if(isNotEmpty(t)&&(n.credentials=t),isNotEmpty(r)&&(n.realm=r),isNotEmpty(o)){try{(0,json_1.stringify)(o)}catch(e){throw(0,error_1.newError)("Circular references in custom auth token parameters",void 0,e)}n.parameters=o}return n}};function isNotEmpty(e){return!(null==e||""===e||Object.getPrototypeOf(e)===Object.prototype&&0===Object.keys(e).length)}auth$1.default=auth;var authTokenManager={},__awaiter$a=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$c=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__importDefault$U=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},auth_1=(Object.defineProperty(authTokenManager,"__esModule",{value:!0}),authTokenManager.staticAuthTokenManager=authTokenManager.authTokenManagers=authTokenManager.AuthTokenAndExpiration=void 0,__importDefault$U(auth$1)),internal_1=internal,AuthTokenManager=function(){function e(){}return e.prototype.getToken=function(){throw new Error("Not Implemented")},e.prototype.handleSecurityException=function(e,t){throw new Error("Not implemented")},e}(),AuthTokenAndExpiration=(authTokenManager.default=AuthTokenManager,function(){this.token=auth_1.default.none(),this.expiration=void 0}),AuthTokenManagers=(authTokenManager.AuthTokenAndExpiration=AuthTokenAndExpiration,function(){function e(){}return e.prototype.bearer=function(e){e=e.tokenProvider;if("function"!=typeof e)throw new TypeError("tokenProvider should be function, but got: ".concat(typeof e));return new ExpirationBasedAuthTokenManager(e,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},e.prototype.basic=function(e){var t=this,r=e.tokenProvider;if("function"!=typeof r)throw new TypeError("tokenProvider should be function, but got: ".concat(typeof r));return new ExpirationBasedAuthTokenManager(function(){return __awaiter$a(t,void 0,void 0,function(){var t;return __generator$c(this,function(e){switch(e.label){case 0:return t={},[4,r()];case 1:return[2,(t.token=e.sent(),t)]}})})},["Neo.ClientError.Security.Unauthorized"])},e}()),authTokenManagers=new AuthTokenManagers;function staticAuthTokenManager(e){e=e.authToken;return new StaticAuthTokenManager(e)}authTokenManager.authTokenManagers=authTokenManagers,Object.freeze(authTokenManagers),authTokenManager.staticAuthTokenManager=staticAuthTokenManager;var TokenRefreshObservable=function(){function e(e){this._subscribers=e=void 0===e?[]:e}return e.prototype.subscribe=function(e){this._subscribers.push(e)},e.prototype.onCompleted=function(t){this._subscribers.forEach(function(e){return e.onCompleted(t)})},e.prototype.onError=function(t){this._subscribers.forEach(function(e){return e.onError(t)})},e}(),ExpirationBasedAuthTokenManager=function(){function e(e,t,r,n){this._tokenProvider=e,this._handledSecurityCodes=t,this._currentAuthData=r,this._refreshObservable=n}return e.prototype.getToken=function(){var t;return __awaiter$a(this,void 0,void 0,function(){return __generator$c(this,function(e){switch(e.label){case 0:return void 0===this._currentAuthData||void 0!==this._currentAuthData.expiration&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2,null==(t=this._currentAuthData)?void 0:t.token]}})})},e.prototype.handleSecurityException=function(e,t){return!!this._handledSecurityCodes.includes(t)&&(internal_1.util.equals(e,null==(t=this._currentAuthData)?void 0:t.token)&&this._scheduleRefreshAuthToken(),!0)},e.prototype._scheduleRefreshAuthToken=function(e){var r=this;void 0===this._refreshObservable&&(this._currentAuthData=void 0,this._refreshObservable=new TokenRefreshObservable,Promise.resolve(this._tokenProvider()).then(function(e){var t;r._currentAuthData=e,null!=(t=r._refreshObservable)&&t.onCompleted(e)}).catch(function(e){var t;null!=(t=r._refreshObservable)&&t.onError(e)}).finally(function(){r._refreshObservable=void 0})),void 0!==e&&this._refreshObservable.subscribe(e)},e.prototype._refreshAuthToken=function(){return __awaiter$a(this,void 0,void 0,function(){var r=this;return __generator$c(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e,t){r._scheduleRefreshAuthToken({onCompleted:e,onError:t})})];case 1:return[2,e.sent()]}})})},e}(),StaticAuthTokenManager=function(){function e(e){this._authToken=e}return e.prototype.getToken=function(){return this._authToken},e.prototype.handleSecurityException=function(e,t){return!1},e}(),types$1={},__extends$O=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Config=(Object.defineProperty(types$1,"__esModule",{value:!0}),types$1.InternalConfig=types$1.Config=void 0,function(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=36e5,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0}),InternalConfig=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$O(t,e),t}(types$1.Config=Config),clientCertificate=(types$1.InternalConfig=InternalConfig,{}),__extends$N=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__assign$s=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__createBinding$5=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),__setModuleDefault$5=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$5=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$5(t,e,r);return __setModuleDefault$5(t,e),t},json=(Object.defineProperty(clientCertificate,"__esModule",{value:!0}),clientCertificate.resolveCertificateProvider=clientCertificate.clientCertificateProviders=clientCertificate.RotatingClientCertificateProvider=clientCertificate.ClientCertificateProvider=void 0,__importStar$5(json$3)),ClientCertificate=function(){this.certfile="",this.keyfile="",this.password=void 0},ClientCertificateProvider=(clientCertificate.default=ClientCertificate,function(){function e(){}return e.prototype.hasUpdate=function(){throw new Error("Not Implemented")},e.prototype.getClientCertificate=function(){throw new Error("Not Implemented")},e}()),RotatingClientCertificateProvider=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$N(t,e),t.prototype.updateCertificate=function(e){throw new Error("Not implemented")},t}(clientCertificate.ClientCertificateProvider=ClientCertificateProvider),ClientCertificateProviders=(clientCertificate.RotatingClientCertificateProvider=RotatingClientCertificateProvider,function(){function e(){}return e.prototype.rotating=function(e){e=e.initialCertificate;if(null==e||!isClientClientCertificate(e))throw new TypeError("initialCertificate should be ClientCertificate, but got ".concat(json.stringify(e)));e=__assign$s({},e);return new InternalRotatingClientCertificateProvider(e)},e}()),clientCertificateProviders=new ClientCertificateProviders;function resolveCertificateProvider(e){if(null!=e){if("object"==typeof e&&"hasUpdate"in e&&"getClientCertificate"in e&&"function"==typeof e.getClientCertificate&&"function"==typeof e.hasUpdate)return e;var t;if(isClientClientCertificate(e))return t=__assign$s({},e),{getClientCertificate:function(){return t},hasUpdate:function(){return!1}};throw new TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(json.stringify(e)))}}function isClientClientCertificate(e){return null!=e&&"object"==typeof e&&"certfile"in e&&isCertFile(e.certfile)&&"keyfile"in e&&isKeyFile(e.keyfile)&&isStringOrNotPresent("password",e)}function isCertFile(e){return isString(e)||isArrayOf(e,isString)}function isKeyFile(e){function t(e){return"string"==typeof e||null!=e&&"object"==typeof e&&"path"in e&&"string"==typeof e.path&&isStringOrNotPresent("password",e)}return t(e)||isArrayOf(e,t)}function isString(e){return"string"==typeof e}function isArrayOf(e,t,r){return void 0===r&&(r=!1),Array.isArray(e)&&(r||0<e.length)&&e.filter(t).length===e.length}function isStringOrNotPresent(e,t){return!(e in t)||null==t[e]||"string"==typeof t[e]}clientCertificate.clientCertificateProviders=clientCertificateProviders,Object.freeze(clientCertificateProviders),clientCertificate.resolveCertificateProvider=resolveCertificateProvider;var InternalRotatingClientCertificateProvider=function(){function e(e,t){void 0===t&&(t=!1),this._certificate=e,this._updated=t}return e.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},e.prototype.getClientCertificate=function(){return this._certificate},e.prototype.updateCertificate=function(e){if(!isClientClientCertificate(e))throw new TypeError("certificate should be ClientCertificate, but got ".concat(json.stringify(e)));this._certificate=__assign$s({},e),this._updated=!0},e}(),sessionRx=(!function(e){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),t=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=(Object.defineProperty(e,"__esModule",{value:!0}),e.EagerResult=e.Result=e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.GqlStatusObject=e.Notification=e.ServerInfo=e.queryType=e.ResultSummary=e.Record=e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=e.Time=e.LocalTime=e.LocalDateTime=e.isTime=e.isLocalTime=e.isLocalDateTime=e.isDuration=e.isDateTime=e.isDate=e.Duration=e.DateTime=e.Date=e.Point=e.isPoint=e.internal=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=e.Integer=e.error=e.isRetriableError=e.GQLError=e.newGQLError=e.Neo4jError=e.newError=e.authTokenManagers=void 0,e.resolveCertificateProvider=e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.routing=e.staticAuthTokenManager=e.bookmarkManager=e.auth=e.json=e.driver=e.types=e.Driver=e.Session=e.TransactionPromise=e.ManagedTransaction=e.Transaction=e.Connection=e.Releasable=e.ConnectionProvider=void 0,error),a=(Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return i.newError}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return i.Neo4jError}}),Object.defineProperty(e,"newGQLError",{enumerable:!0,get:function(){return i.newGQLError}}),Object.defineProperty(e,"GQLError",{enumerable:!0,get:function(){return i.GQLError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return i.isRetriableError}}),t(integer)),s=(e.Integer=a.default,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"inSafeRange",{enumerable:!0,get:function(){return a.inSafeRange}}),Object.defineProperty(e,"toNumber",{enumerable:!0,get:function(){return a.toNumber}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return a.toString}}),temporalTypes),u=(Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return s.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return s.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return s.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return s.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return s.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return s.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return s.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return s.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return s.isTime}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return s.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return s.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return s.Time}}),graphTypes),c=(Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return u.Node}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return u.isNode}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return u.Relationship}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return u.isRelationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return u.UnboundRelationship}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return u.isUnboundRelationship}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return u.Path}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return u.isPath}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return u.PathSegment}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return u.isPathSegment}}),r(record)),l=(e.Record=c.default,spatialTypes),f=(Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return l.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return l.Point}}),t(resultSummary)),_=(e.ResultSummary=f.default,Object.defineProperty(e,"queryType",{enumerable:!0,get:function(){return f.queryType}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return f.ServerInfo}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return f.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return f.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return f.QueryStatistics}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return f.Stats}}),t(notification)),p=(e.Notification=_.default,Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return _.GqlStatusObject}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return _.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return _.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return _.notificationSeverityLevel}}),notificationFilter),d=(Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return p.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return p.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return p.notificationFilterMinimumSeverityLevel}}),r(result)),b=(e.Result=d.default,r(resultEager)),m=(e.EagerResult=b.default,t(connectionProvider$1)),h=(e.ConnectionProvider=m.default,Object.defineProperty(e,"Releasable",{enumerable:!0,get:function(){return m.Releasable}}),r(connection$2)),y=(e.Connection=h.default,r(transaction)),v=(e.Transaction=y.default,r(transactionManaged)),g=(e.ManagedTransaction=v.default,r(transactionPromise)),$=(e.TransactionPromise=g.default,r(session)),O=(e.Session=$.default,t(driver)),E=O,T=(e.Driver=O.default,e.driver=E,r(auth$1)),S=(e.auth=T.default,bookmarkManager$1),w=(Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return S.bookmarkManager}}),authTokenManager),P=(Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return w.authTokenManagers}}),Object.defineProperty(e,"staticAuthTokenManager",{enumerable:!0,get:function(){return w.staticAuthTokenManager}}),driver),j=(Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return P.routing}}),t(types$1)),C=(e.types=j,t(json$3)),r=(e.json=C,r(resultTransformers$1)),R=(e.resultTransformers=r.default,clientCertificate),t=(Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return R.clientCertificateProviders}}),Object.defineProperty(e,"resolveCertificateProvider",{enumerable:!0,get:function(){return R.resolveCertificateProvider}}),t(internal)),A=(e.internal=t,{SERVICE_UNAVAILABLE:i.SERVICE_UNAVAILABLE,SESSION_EXPIRED:i.SESSION_EXPIRED,PROTOCOL_ERROR:i.PROTOCOL_ERROR}),A=(e.error=A,{authTokenManagers:w.authTokenManagers,newError:i.newError,Neo4jError:i.Neo4jError,newGQLError:i.newGQLError,GQLError:i.GQLError,isRetriableError:i.isRetriableError,error:A,Integer:a.default,int:a.int,isInt:a.isInt,inSafeRange:a.inSafeRange,toNumber:a.toNumber,toString:a.toString,internal:t,isPoint:l.isPoint,Point:l.Point,Date:s.Date,DateTime:s.DateTime,Duration:s.Duration,isDate:s.isDate,isDateTime:s.isDateTime,isDuration:s.isDuration,isLocalDateTime:s.isLocalDateTime,isLocalTime:s.isLocalTime,isTime:s.isTime,LocalDateTime:s.LocalDateTime,LocalTime:s.LocalTime,Time:s.Time,Node:u.Node,isNode:u.isNode,Relationship:u.Relationship,isRelationship:u.isRelationship,UnboundRelationship:u.UnboundRelationship,isUnboundRelationship:u.isUnboundRelationship,Path:u.Path,isPath:u.isPath,PathSegment:u.PathSegment,isPathSegment:u.isPathSegment,Record:c.default,ResultSummary:f.default,queryType:f.queryType,ServerInfo:f.ServerInfo,Notification:_.default,GqlStatusObject:_.GqlStatusObject,Plan:f.Plan,ProfiledPlan:f.ProfiledPlan,QueryStatistics:f.QueryStatistics,Stats:f.Stats,Result:d.default,EagerResult:b.default,Transaction:y.default,ManagedTransaction:v.default,TransactionPromise:g.default,Session:$.default,Driver:O.default,Connection:h.default,Releasable:m.Releasable,types:j,driver:E,json:C,auth:T.default,bookmarkManager:S.bookmarkManager,routing:P.routing,resultTransformers:r.default,notificationCategory:_.notificationCategory,notificationClassification:_.notificationClassification,notificationSeverityLevel:_.notificationSeverityLevel,notificationFilterDisabledCategory:p.notificationFilterDisabledCategory,notificationFilterDisabledClassification:p.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:p.notificationFilterMinimumSeverityLevel,clientCertificateProviders:R.clientCertificateProviders,resolveCertificateProvider:R.resolveCertificateProvider});e.default=A}(lib$1),{}),cjs={},Observable$1={},Subscriber={},isFunction$1={};function isFunction(e){return"function"==typeof e}Object.defineProperty(isFunction$1,"__esModule",{value:!0}),isFunction$1.isFunction=void 0,isFunction$1.isFunction=isFunction;var Subscription$1={},UnsubscriptionError={},createErrorClass$1={};function createErrorClass(e){e=e(function(e){Error.call(e),e.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e}Object.defineProperty(createErrorClass$1,"__esModule",{value:!0}),createErrorClass$1.createErrorClass=void 0,createErrorClass$1.createErrorClass=createErrorClass,Object.defineProperty(UnsubscriptionError,"__esModule",{value:!0}),UnsubscriptionError.UnsubscriptionError=void 0;var createErrorClass_1$5=createErrorClass$1,arrRemove$1=(UnsubscriptionError.UnsubscriptionError=createErrorClass_1$5.createErrorClass(function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}),{});function arrRemove(e,t){e&&0<=(t=e.indexOf(t))&&e.splice(t,1)}Object.defineProperty(arrRemove$1,"__esModule",{value:!0}),arrRemove$1.arrRemove=void 0,arrRemove$1.arrRemove=arrRemove;var __values$a=commonjsGlobal&&commonjsGlobal.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$p=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$j=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},isFunction_1$p=(Object.defineProperty(Subscription$1,"__esModule",{value:!0}),Subscription$1.isSubscription=Subscription$1.EMPTY_SUBSCRIPTION=Subscription$1.Subscription=void 0,isFunction$1),UnsubscriptionError_1=UnsubscriptionError,arrRemove_1$7=arrRemove$1,Subscription=function(){function r(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var e;return r.prototype.unsubscribe=function(){var t,e,r;if(!this.closed){this.closed=!0;var n=this._parentage;if(n)if(this._parentage=null,Array.isArray(n))try{for(var o=__values$a(n),i=o.next();!i.done;i=o.next())i.value.remove(this)}catch(e){s={error:e}}finally{try{i&&!i.done&&(a=o.return)&&a.call(o)}finally{if(s)throw s.error}}else n.remove(this);var a=this.initialTeardown;if(isFunction_1$p.isFunction(a))try{a()}catch(e){r=e instanceof UnsubscriptionError_1.UnsubscriptionError?e.errors:[e]}var s=this._finalizers;if(s){this._finalizers=null;try{for(var u=__values$a(s),c=u.next();!c.done;c=u.next()){var l=c.value;try{execFinalizer(l)}catch(e){r=null!=r?r:[],e instanceof UnsubscriptionError_1.UnsubscriptionError?r=__spreadArray$j(__spreadArray$j([],__read$p(r)),__read$p(e.errors)):r.push(e)}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}}if(r)throw new UnsubscriptionError_1.UnsubscriptionError(r)}},r.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)execFinalizer(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(t=this._finalizers)?t:[]).push(e)}},r.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},r.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},r.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&arrRemove_1$7.arrRemove(t,e)},r.prototype.remove=function(e){var t=this._finalizers;t&&arrRemove_1$7.arrRemove(t,e),e instanceof r&&e._removeParent(this)},r.EMPTY=((e=new r).closed=!0,e),r}();function isSubscription(e){return e instanceof Subscription||e&&"closed"in e&&isFunction_1$p.isFunction(e.remove)&&isFunction_1$p.isFunction(e.add)&&isFunction_1$p.isFunction(e.unsubscribe)}function execFinalizer(e){isFunction_1$p.isFunction(e)?e():e.unsubscribe()}Subscription$1.Subscription=Subscription,Subscription$1.EMPTY_SUBSCRIPTION=Subscription.EMPTY,Subscription$1.isSubscription=isSubscription;var config={},reportUnhandledError$1=(Object.defineProperty(config,"__esModule",{value:!0}),config.config=void 0,config.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},{}),timeoutProvider={},config_1$2=(!function(i){var a=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},s=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(i,"__esModule",{value:!0}),i.timeoutProvider=void 0,i.timeoutProvider={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=i.timeoutProvider.delegate;return null!=o&&o.setTimeout?o.setTimeout.apply(o,s([e,t],a(r))):setTimeout.apply(void 0,s([e,t],a(r)))},clearTimeout:function(e){var t=i.timeoutProvider.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0}}(timeoutProvider),Object.defineProperty(reportUnhandledError$1,"__esModule",{value:!0}),reportUnhandledError$1.reportUnhandledError=void 0,config),timeoutProvider_1=timeoutProvider;function reportUnhandledError(t){timeoutProvider_1.timeoutProvider.setTimeout(function(){var e=config_1$2.config.onUnhandledError;if(!e)throw t;e(t)})}reportUnhandledError$1.reportUnhandledError=reportUnhandledError;var noop$1={};function noop(){}Object.defineProperty(noop$1,"__esModule",{value:!0}),noop$1.noop=void 0,noop$1.noop=noop;var NotificationFactories={};function errorNotification(e){return createNotification("E",void 0,e)}function nextNotification(e){return createNotification("N",e,void 0)}function createNotification(e,t,r){return{kind:e,value:t,error:r}}Object.defineProperty(NotificationFactories,"__esModule",{value:!0}),NotificationFactories.createNotification=NotificationFactories.nextNotification=NotificationFactories.errorNotification=NotificationFactories.COMPLETE_NOTIFICATION=void 0,NotificationFactories.COMPLETE_NOTIFICATION=createNotification("C",void 0,void 0),NotificationFactories.errorNotification=errorNotification,NotificationFactories.nextNotification=nextNotification,NotificationFactories.createNotification=createNotification;var errorContext$1={},config_1$1=(Object.defineProperty(errorContext$1,"__esModule",{value:!0}),errorContext$1.captureError=errorContext$1.errorContext=void 0,config),context=null;function errorContext(e){if(config_1$1.config.useDeprecatedSynchronousErrorHandling){var t=!context;if(t&&(context={errorThrown:!1,error:null}),e(),t){var t=context,r=t.errorThrown,t=t.error;if(context=null,r)throw t}}else e()}function captureError(e){config_1$1.config.useDeprecatedSynchronousErrorHandling&&context&&(context.errorThrown=!0,context.error=e)}errorContext$1.errorContext=errorContext,errorContext$1.captureError=captureError,function(r){var n,o,e=commonjsGlobal&&commonjsGlobal.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=(Object.defineProperty(r,"__esModule",{value:!0}),r.EMPTY_OBSERVER=r.SafeSubscriber=r.Subscriber=void 0,isFunction$1),a=Subscription$1,s=config,t=reportUnhandledError$1,u=noop$1,c=NotificationFactories,l=timeoutProvider,f=errorContext$1,_=(o=a.Subscription,e(p,o),p.create=function(e,t,r){return new v(e,t,r)},p.prototype.next=function(e){this.isStopped?O(c.nextNotification(e),this):this._next(e)},p.prototype.error=function(e){this.isStopped?O(c.errorNotification(e),this):(this.isStopped=!0,this._error(e))},p.prototype.complete=function(){this.isStopped?O(c.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},p.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this),this.destination=null)},p.prototype._next=function(e){this.destination.next(e)},p.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},p.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},p);function p(e){var t=o.call(this)||this;return t.isStopped=!1,e?(t.destination=e,a.isSubscription(e)&&e.add(t)):t.destination=r.EMPTY_OBSERVER,t}r.Subscriber=_;var d=Function.prototype.bind;function b(e,t){return d.call(e,t)}h.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){$(e)}},h.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){$(e)}else $(e)},h.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){$(e)}};var m=h;function h(e){this.partialObserver=e}e(g,y=_);var y,v=g;function g(e,t,r){var n=y.call(this)||this;return r=i.isFunction(e)||!e?{next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=r?r:void 0}:n&&s.config.useDeprecatedNextContext?((t=Object.create(e)).unsubscribe=function(){return n.unsubscribe()},{next:e.next&&b(e.next,t),error:e.error&&b(e.error,t),complete:e.complete&&b(e.complete,t)}):e,n.destination=new m(r),n}function $(e){s.config.useDeprecatedSynchronousErrorHandling?f.captureError(e):t.reportUnhandledError(e)}function O(e,t){var r=s.config.onStoppedNotification;r&&l.timeoutProvider.setTimeout(function(){return r(e,t)})}r.SafeSubscriber=v,r.EMPTY_OBSERVER={closed:!0,next:u.noop,error:function(e){throw e},complete:u.noop}}(Subscriber);var observable={},pipe$1=(Object.defineProperty(observable,"__esModule",{value:!0}),observable.observable=void 0,observable.observable="function"==typeof Symbol&&Symbol.observable||"@@observable",{}),identity$2={};function identity$1(e){return e}Object.defineProperty(identity$2,"__esModule",{value:!0}),identity$2.identity=void 0,identity$2.identity=identity$1,Object.defineProperty(pipe$1,"__esModule",{value:!0}),pipe$1.pipeFromArray=pipe$1.pipe=void 0;var identity_1$e=identity$2;function pipe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return pipeFromArray(e)}function pipeFromArray(t){return 0===t.length?identity_1$e.identity:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)}}pipe$1.pipe=pipe,pipe$1.pipeFromArray=pipeFromArray,Object.defineProperty(Observable$1,"__esModule",{value:!0}),Observable$1.Observable=void 0;var Subscriber_1$3=Subscriber,Subscription_1$8=Subscription$1,observable_1$2=observable,pipe_1$2=pipe$1,config_1=config,isFunction_1$o=isFunction$1,errorContext_1$1=errorContext$1,Observable=function(){function r(e){e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,r){var n=this,o=isSubscriber(e)?e:new Subscriber_1$3.SafeSubscriber(e,t,r);return errorContext_1$1.errorContext(function(){var e=n.operator,t=n.source;o.add(e?e.call(o,t):t?n._subscribe(o):n._trySubscribe(o))}),o},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},r.prototype.forEach=function(n,e){var o=this;return new(e=getPromiseCtor(e))(function(e,t){var r=new Subscriber_1$3.SafeSubscriber({next:function(e){try{n(e)}catch(e){t(e),r.unsubscribe()}},error:t,complete:e});o.subscribe(r)})},r.prototype._subscribe=function(e){var t;return null==(t=this.source)?void 0:t.subscribe(e)},r.prototype[observable_1$2.observable]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return pipe_1$2.pipeFromArray(e)(this)},r.prototype.toPromise=function(e){var n=this;return new(e=getPromiseCtor(e))(function(e,t){var r;n.subscribe(function(e){return r=e},function(e){return t(e)},function(){return e(r)})})},r.create=function(e){return new r(e)},r}();function getPromiseCtor(e){return null!=(e=null!=e?e:config_1.config.Promise)?e:Promise}function isObserver(e){return e&&isFunction_1$o.isFunction(e.next)&&isFunction_1$o.isFunction(e.error)&&isFunction_1$o.isFunction(e.complete)}function isSubscriber(e){return e&&e instanceof Subscriber_1$3.Subscriber||isObserver(e)&&Subscription_1$8.isSubscription(e)}Observable$1.Observable=Observable;var ConnectableObservable$1={},refCount$1={},lift={},isFunction_1$n=(Object.defineProperty(lift,"__esModule",{value:!0}),lift.operate=lift.hasLift=void 0,isFunction$1);function hasLift(e){return isFunction_1$n.isFunction(null==e?void 0:e.lift)}function operate(t){return function(e){if(hasLift(e))return e.lift(function(e){try{return t(e,this)}catch(e){this.error(e)}});throw new TypeError("Unable to lift unknown Observable type")}}lift.hasLift=hasLift,lift.operate=operate;var OperatorSubscriber$1={},__extends$M=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Subscriber_1$2=(Object.defineProperty(OperatorSubscriber$1,"__esModule",{value:!0}),OperatorSubscriber$1.OperatorSubscriber=OperatorSubscriber$1.createOperatorSubscriber=void 0,Subscriber);function createOperatorSubscriber(e,t,r,n,o){return new OperatorSubscriber(e,t,r,n,o)}OperatorSubscriber$1.createOperatorSubscriber=createOperatorSubscriber;var OperatorSubscriber=function(s){function e(t,r,e,n,o,i){var a=s.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=i,a._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:s.prototype._next,a._error=n?function(e){try{n(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:s.prototype._error,a._complete=e?function(){try{e()}catch(e){t.error(e)}finally{this.unsubscribe()}}:s.prototype._complete,a}return __extends$M(e,s),e.prototype.unsubscribe=function(){var e;this.shouldUnsubscribe&&!this.shouldUnsubscribe()||(e=this.closed,s.prototype.unsubscribe.call(this),e||null==(e=this.onFinalize)||e.call(this))},e}(Subscriber_1$2.Subscriber),lift_1$14=(OperatorSubscriber$1.OperatorSubscriber=OperatorSubscriber,Object.defineProperty(refCount$1,"__esModule",{value:!0}),refCount$1.refCount=void 0,lift),OperatorSubscriber_1$V=OperatorSubscriber$1;function refCount(){return lift_1$14.operate(function(r,n){var o=null,e=(r._refCount++,OperatorSubscriber_1$V.createOperatorSubscriber(n,void 0,void 0,void 0,function(){var e,t;!r||r._refCount<=0||0<--r._refCount?o=null:(e=r._connection,t=o,o=null,!e||t&&e!==t||e.unsubscribe(),n.unsubscribe())}));r.subscribe(e),e.closed||(o=r.connect())})}refCount$1.refCount=refCount;var __extends$L=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Observable_1$n=(Object.defineProperty(ConnectableObservable$1,"__esModule",{value:!0}),ConnectableObservable$1.ConnectableObservable=void 0,Observable$1),Subscription_1$7=Subscription$1,refCount_1=refCount$1,OperatorSubscriber_1$U=OperatorSubscriber$1,lift_1$13=lift,ConnectableObservable=function(n){function e(e,t){var r=n.call(this)||this;return r.source=e,r.subjectFactory=t,r._subject=null,r._refCount=0,r._connection=null,lift_1$13.hasLift(e)&&(r.lift=e.lift),r}return __extends$L(e,n),e.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},e.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype._teardown=function(){this._refCount=0;var e=this._connection;(this._subject=this._connection=null)!=e&&e.unsubscribe()},e.prototype.connect=function(){var t,r=this,e=this._connection;return e||(e=this._connection=new Subscription_1$7.Subscription,t=this.getSubject(),e.add(this.source.subscribe(OperatorSubscriber_1$U.createOperatorSubscriber(t,void 0,function(){r._teardown(),t.complete()},function(e){r._teardown(),t.error(e)},function(){return r._teardown()}))),e.closed&&(this._connection=null,e=Subscription_1$7.Subscription.EMPTY)),e},e.prototype.refCount=function(){return refCount_1.refCount()(this)},e}(Observable$1.Observable),animationFrames$1=(ConnectableObservable$1.ConnectableObservable=ConnectableObservable,{}),performanceTimestampProvider={},animationFrameProvider=(!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}}(performanceTimestampProvider),{}),Observable_1$m=(!function(i){var n=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},a=(Object.defineProperty(i,"__esModule",{value:!0}),i.animationFrameProvider=void 0,Subscription$1);i.animationFrameProvider={schedule:function(t){var e=requestAnimationFrame,r=cancelAnimationFrame,n=i.animationFrameProvider.delegate,o=(n&&(e=n.requestAnimationFrame,r=n.cancelAnimationFrame),e(function(e){r=void 0,t(e)}));return new a.Subscription(function(){return null==r?void 0:r(o)})},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=i.animationFrameProvider.delegate;return((null==r?void 0:r.requestAnimationFrame)||requestAnimationFrame).apply(void 0,o([],n(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=i.animationFrameProvider.delegate;return((null==r?void 0:r.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,o([],n(e)))},delegate:void 0}}(animationFrameProvider),Object.defineProperty(animationFrames$1,"__esModule",{value:!0}),animationFrames$1.animationFrames=void 0,Observable$1),performanceTimestampProvider_1=performanceTimestampProvider,animationFrameProvider_1$1=animationFrameProvider;function animationFrames(e){return e?animationFramesFactory(e):DEFAULT_ANIMATION_FRAMES}function animationFramesFactory(s){return new Observable_1$m.Observable(function(r){var n=s||performanceTimestampProvider_1.performanceTimestampProvider,o=n.now(),i=0,a=function(){r.closed||(i=animationFrameProvider_1$1.animationFrameProvider.requestAnimationFrame(function(e){i=0;var t=n.now();r.next({timestamp:s?t:e,elapsed:t-o}),a()}))};return a(),function(){i&&animationFrameProvider_1$1.animationFrameProvider.cancelAnimationFrame(i)}})}animationFrames$1.animationFrames=animationFrames;var resolved,DEFAULT_ANIMATION_FRAMES=animationFramesFactory(),Subject$1={},ObjectUnsubscribedError={},createErrorClass_1$4=(Object.defineProperty(ObjectUnsubscribedError,"__esModule",{value:!0}),ObjectUnsubscribedError.ObjectUnsubscribedError=void 0,createErrorClass$1),__extends$K=(ObjectUnsubscribedError.ObjectUnsubscribedError=createErrorClass_1$4.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__values$9=commonjsGlobal&&commonjsGlobal.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Observable_1$l=(Object.defineProperty(Subject$1,"__esModule",{value:!0}),Subject$1.AnonymousSubject=Subject$1.Subject=void 0,Observable$1),Subscription_1$6=Subscription$1,ObjectUnsubscribedError_1=ObjectUnsubscribedError,arrRemove_1$6=arrRemove$1,errorContext_1=errorContext$1,Subject=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return __extends$K(e,t),e.prototype.lift=function(e){var t=new AnonymousSubject(this,this);return t.operator=e,t},e.prototype._throwIfClosed=function(){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError},e.prototype.next=function(o){var i=this;errorContext_1.errorContext(function(){var t,e;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var r=__values$9(i.currentObservers),n=r.next();!n.done;n=r.next())n.value.next(o)}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}}})},e.prototype.error=function(t){var r=this;errorContext_1.errorContext(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=t;for(var e=r.observers;e.length;)e.shift().error(t)}})},e.prototype.complete=function(){var t=this;errorContext_1.errorContext(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var e;return 0<(null==(e=this.observers)?void 0:e.length)},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},e.prototype._innerSubscribe=function(e){var t=this,r=this.hasError,n=this.isStopped,o=this.observers;return r||n?Subscription_1$6.EMPTY_SUBSCRIPTION:(this.currentObservers=null,o.push(e),new Subscription_1$6.Subscription(function(){t.currentObservers=null,arrRemove_1$6.arrRemove(o,e)}))},e.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,r=this.thrownError,n=this.isStopped;t?e.error(r):n&&e.complete()},e.prototype.asObservable=function(){var e=new Observable_1$l.Observable;return e.source=this,e},e.create=function(e,t){return new AnonymousSubject(e,t)},e}(Observable_1$l.Observable),AnonymousSubject=function(n){function e(e,t){var r=n.call(this)||this;return r.destination=e,r.source=t,r}return __extends$K(e,n),e.prototype.next=function(e){var t,r;null!=(r=null==(t=this.destination)?void 0:t.next)&&r.call(t,e)},e.prototype.error=function(e){var t,r;null!=(r=null==(t=this.destination)?void 0:t.error)&&r.call(t,e)},e.prototype.complete=function(){var e,t;null!=(t=null==(e=this.destination)?void 0:e.complete)&&t.call(e)},e.prototype._subscribe=function(e){var t;return null!=(t=null==(t=this.source)?void 0:t.subscribe(e))?t:Subscription_1$6.EMPTY_SUBSCRIPTION},e}(Subject$1.Subject=Subject),BehaviorSubject$1=(Subject$1.AnonymousSubject=AnonymousSubject,{}),__extends$J=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Subject_1$e=(Object.defineProperty(BehaviorSubject$1,"__esModule",{value:!0}),BehaviorSubject$1.BehaviorSubject=void 0,Subject$1),BehaviorSubject=function(r){function e(e){var t=r.call(this)||this;return t._value=e,t}return __extends$J(e,r),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(e){var t=r.prototype._subscribe.call(this,e);return t.closed||e.next(this._value),t},e.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,r=this._value;if(e)throw t;return this._throwIfClosed(),r},e.prototype.next=function(e){r.prototype.next.call(this,this._value=e)},e}(Subject$1.Subject),ReplaySubject$1=(BehaviorSubject$1.BehaviorSubject=BehaviorSubject,{}),dateTimestampProvider={},__extends$I=(!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}}(dateTimestampProvider),commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),Subject_1$d=(Object.defineProperty(ReplaySubject$1,"__esModule",{value:!0}),ReplaySubject$1.ReplaySubject=void 0,Subject$1),dateTimestampProvider_1$2=dateTimestampProvider,ReplaySubject=function(a){function e(e,t,r){void 0===e&&(e=1/0),void 0===t&&(t=1/0),void 0===r&&(r=dateTimestampProvider_1$2.dateTimestampProvider);var n=a.call(this)||this;return n._bufferSize=e,n._windowTime=t,n._timestampProvider=r,n._buffer=[],n._infiniteTimeWindow=!0,n._infiniteTimeWindow=t===1/0,n._bufferSize=Math.max(1,e),n._windowTime=Math.max(1,t),n}return __extends$I(e,a),e.prototype.next=function(e){var t=this,r=t.isStopped,n=t._buffer,o=t._infiniteTimeWindow,i=t._timestampProvider,t=t._windowTime;r||(n.push(e),o||n.push(i.now()+t)),this._trimBuffer(),a.prototype.next.call(this,e)},e.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),r=this._infiniteTimeWindow,n=this._buffer.slice(),o=0;o<n.length&&!e.closed;o+=r?1:2)e.next(n[o]);return this._checkFinalizedStatuses(e),t},e.prototype._trimBuffer=function(){var e=this._bufferSize,t=this._timestampProvider,r=this._buffer,n=this._infiniteTimeWindow,o=(n?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!n){for(var i=t.now(),a=0,s=1;s<r.length&&r[s]<=i;s+=2)a=s;a&&r.splice(0,a+1)}},e}(Subject$1.Subject),AsyncSubject$1=(ReplaySubject$1.ReplaySubject=ReplaySubject,{}),__extends$H=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Subject_1$c=(Object.defineProperty(AsyncSubject$1,"__esModule",{value:!0}),AsyncSubject$1.AsyncSubject=void 0,Subject$1),AsyncSubject=function(r){function e(){var e=null!==r&&r.apply(this,arguments)||this;return e._value=null,e._hasValue=!1,e._isComplete=!1,e}return __extends$H(e,r),e.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,n=t._hasValue,o=t._value,i=t.thrownError,a=t.isStopped,t=t._isComplete;r?e.error(i):(a||t)&&(n&&e.next(o),e.complete())},e.prototype.next=function(e){this.isStopped||(this._value=e,this._hasValue=!0)},e.prototype.complete=function(){var e=this._hasValue,t=this._value;this._isComplete||(this._isComplete=!0,e&&r.prototype.next.call(this,t),r.prototype.complete.call(this))},e}(Subject$1.Subject),asap=(AsyncSubject$1.AsyncSubject=AsyncSubject,{}),AsapAction$1={},AsyncAction$1={},Action$1={},__extends$G=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Subscription_1$5=(Object.defineProperty(Action$1,"__esModule",{value:!0}),Action$1.Action=void 0,Subscription$1),Action=function(r){function e(e,t){return r.call(this)||this}return __extends$G(e,r),e.prototype.schedule=function(e,t){return this},e}(Subscription$1.Subscription),intervalProvider=(Action$1.Action=Action,{}),__extends$F=(!function(i){var a=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},s=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(i,"__esModule",{value:!0}),i.intervalProvider=void 0,i.intervalProvider={setInterval:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=i.intervalProvider.delegate;return null!=o&&o.setInterval?o.setInterval.apply(o,s([e,t],a(r))):setInterval.apply(void 0,s([e,t],a(r)))},clearInterval:function(e){var t=i.intervalProvider.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0}}(intervalProvider),commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),Action_1=(Object.defineProperty(AsyncAction$1,"__esModule",{value:!0}),AsyncAction$1.AsyncAction=void 0,Action$1),intervalProvider_1=intervalProvider,arrRemove_1$5=arrRemove$1,AsyncAction=function(n){function e(e,t){var r=n.call(this,e,t)||this;return r.scheduler=e,r.work=t,r.pending=!1,r}return __extends$F(e,n),e.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var e=this.id,r=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(r,e,t)),this.pending=!0,this.delay=t,this.id=null!=(e=this.id)?e:this.requestAsyncId(r,this.id,t),this},e.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),intervalProvider_1.intervalProvider.setInterval(e.flush.bind(e,this),r)},e.prototype.recycleAsyncId=function(e,t,r){if(null!=(r=void 0===r?0:r)&&this.delay===r&&!1===this.pending)return t;null!=t&&intervalProvider_1.intervalProvider.clearInterval(t)},e.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;e=this._execute(e,t);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(e,t){var r,n=!1;try{this.work(e)}catch(e){n=!0,r=e||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},e.prototype.unsubscribe=function(){var e,t,r;this.closed||(e=this.id,r=(t=this.scheduler).actions,this.work=this.state=this.scheduler=null,this.pending=!1,arrRemove_1$5.arrRemove(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,n.prototype.unsubscribe.call(this))},e}(Action$1.Action),immediateProvider=(AsyncAction$1.AsyncAction=AsyncAction,{}),Immediate={},nextHandle=(Object.defineProperty(Immediate,"__esModule",{value:!0}),Immediate.TestTools=Immediate.Immediate=void 0,1),activeHandles={};function findAndClearHandle(e){return e in activeHandles&&(delete activeHandles[e],!0)}Immediate.Immediate={setImmediate:function(e){var t=nextHandle++;return activeHandles[t]=!0,(resolved=resolved||Promise.resolve()).then(function(){return findAndClearHandle(t)&&e()}),t},clearImmediate:function(e){findAndClearHandle(e)}},Immediate.TestTools={pending:function(){return Object.keys(activeHandles).length}},function(n){var o=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(n,"__esModule",{value:!0}),n.immediateProvider=void 0;var a=Immediate.Immediate.setImmediate,r=Immediate.Immediate.clearImmediate;n.immediateProvider={setImmediate:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=n.immediateProvider.delegate;return((null==r?void 0:r.setImmediate)||a).apply(void 0,i([],o(e)))},clearImmediate:function(e){var t=n.immediateProvider.delegate;return((null==t?void 0:t.clearImmediate)||r)(e)},delegate:void 0}}(immediateProvider);var __extends$E=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),AsyncAction_1$3=(Object.defineProperty(AsapAction$1,"__esModule",{value:!0}),AsapAction$1.AsapAction=void 0,AsyncAction$1),immediateProvider_1=immediateProvider,AsapAction=function(n){function e(e,t){var r=n.call(this,e,t)||this;return r.scheduler=e,r.work=t,r}return __extends$E(e,n),e.prototype.requestAsyncId=function(e,t,r){return null!==(r=void 0===r?0:r)&&0<r?n.prototype.requestAsyncId.call(this,e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=immediateProvider_1.immediateProvider.setImmediate(e.flush.bind(e,void 0))))},e.prototype.recycleAsyncId=function(e,t,r){if(null!=(r=void 0===r?0:r)?0<r:0<this.delay)return n.prototype.recycleAsyncId.call(this,e,t,r);var r=e.actions;null!=t&&(null==(r=r[r.length-1])?void 0:r.id)!==t&&(immediateProvider_1.immediateProvider.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))},e}(AsyncAction$1.AsyncAction),AsapScheduler$1=(AsapAction$1.AsapAction=AsapAction,{}),AsyncScheduler$1={},Scheduler$1={},dateTimestampProvider_1$1=(Object.defineProperty(Scheduler$1,"__esModule",{value:!0}),Scheduler$1.Scheduler=void 0,dateTimestampProvider),Scheduler=function(){function r(e,t){void 0===t&&(t=r.now),this.schedulerActionCtor=e,this.now=t}return r.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},r.now=dateTimestampProvider_1$1.dateTimestampProvider.now,r}(),__extends$D=(Scheduler$1.Scheduler=Scheduler,commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),Scheduler_1=(Object.defineProperty(AsyncScheduler$1,"__esModule",{value:!0}),AsyncScheduler$1.AsyncScheduler=void 0,Scheduler$1),AsyncScheduler=function(r){function e(e,t){void 0===t&&(t=Scheduler_1.Scheduler.now);e=r.call(this,e,t)||this;return e.actions=[],e._active=!1,e}return __extends$D(e,r),e.prototype.flush=function(e){var t,r=this.actions;if(this._active)r.push(e);else{this._active=!0;do{if(t=e.execute(e.state,e.delay))break}while(e=r.shift());if(this._active=!1,t){for(;e=r.shift();)e.unsubscribe();throw t}}},e}(Scheduler_1.Scheduler),__extends$C=(AsyncScheduler$1.AsyncScheduler=AsyncScheduler,commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),AsyncScheduler_1$3=(Object.defineProperty(AsapScheduler$1,"__esModule",{value:!0}),AsapScheduler$1.AsapScheduler=void 0,AsyncScheduler$1),AsapScheduler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$C(t,e),t.prototype.flush=function(e){this._active=!0;var t,r=this._scheduled,n=(this._scheduled=void 0,this.actions);e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===r&&n.shift());if(this._active=!1,t){for(;(e=n[0])&&e.id===r&&n.shift();)e.unsubscribe();throw t}},t}(AsyncScheduler$1.AsyncScheduler),async=(AsapScheduler$1.AsapScheduler=AsapScheduler,!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var t=AsapScheduler$1;e.asapScheduler=new t.AsapScheduler(AsapAction$1.AsapAction),e.asap=e.asapScheduler}(asap),{}),queue=(!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var t=AsyncScheduler$1;e.asyncScheduler=new t.AsyncScheduler(AsyncAction$1.AsyncAction),e.async=e.asyncScheduler}(async),{}),QueueAction$1={},__extends$B=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),AsyncAction_1$2=(Object.defineProperty(QueueAction$1,"__esModule",{value:!0}),QueueAction$1.QueueAction=void 0,AsyncAction$1),QueueAction=function(n){function e(e,t){var r=n.call(this,e,t)||this;return r.scheduler=e,r.work=t,r}return __extends$B(e,n),e.prototype.schedule=function(e,t){return 0<(t=void 0===t?0:t)?n.prototype.schedule.call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,t){return 0<t||this.closed?n.prototype.execute.call(this,e,t):this._execute(e,t)},e.prototype.requestAsyncId=function(e,t,r){return null!=(r=void 0===r?0:r)&&0<r||null==r&&0<this.delay?n.prototype.requestAsyncId.call(this,e,t,r):(e.flush(this),0)},e}(AsyncAction$1.AsyncAction),QueueScheduler$1=(QueueAction$1.QueueAction=QueueAction,{}),__extends$A=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),AsyncScheduler_1$2=(Object.defineProperty(QueueScheduler$1,"__esModule",{value:!0}),QueueScheduler$1.QueueScheduler=void 0,AsyncScheduler$1),QueueScheduler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$A(t,e),t}(AsyncScheduler$1.AsyncScheduler),animationFrame=(QueueScheduler$1.QueueScheduler=QueueScheduler,!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var t=QueueScheduler$1;e.queueScheduler=new t.QueueScheduler(QueueAction$1.QueueAction),e.queue=e.queueScheduler}(queue),{}),AnimationFrameAction$1={},__extends$z=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),AsyncAction_1$1=(Object.defineProperty(AnimationFrameAction$1,"__esModule",{value:!0}),AnimationFrameAction$1.AnimationFrameAction=void 0,AsyncAction$1),animationFrameProvider_1=animationFrameProvider,AnimationFrameAction=function(n){function e(e,t){var r=n.call(this,e,t)||this;return r.scheduler=e,r.work=t,r}return __extends$z(e,n),e.prototype.requestAsyncId=function(e,t,r){return null!==(r=void 0===r?0:r)&&0<r?n.prototype.requestAsyncId.call(this,e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=animationFrameProvider_1.animationFrameProvider.requestAnimationFrame(function(){return e.flush(void 0)})))},e.prototype.recycleAsyncId=function(e,t,r){if(null!=(r=void 0===r?0:r)?0<r:0<this.delay)return n.prototype.recycleAsyncId.call(this,e,t,r);var r=e.actions;null!=t&&t===e._scheduled&&(null==(r=r[r.length-1])?void 0:r.id)!==t&&(animationFrameProvider_1.animationFrameProvider.cancelAnimationFrame(t),e._scheduled=void 0)},e}(AsyncAction$1.AsyncAction),AnimationFrameScheduler$1=(AnimationFrameAction$1.AnimationFrameAction=AnimationFrameAction,{}),__extends$y=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),AsyncScheduler_1$1=(Object.defineProperty(AnimationFrameScheduler$1,"__esModule",{value:!0}),AnimationFrameScheduler$1.AnimationFrameScheduler=void 0,AsyncScheduler$1),AnimationFrameScheduler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$y(t,e),t.prototype.flush=function(e){this._active=!0,e?t=e.id:(t=this._scheduled,this._scheduled=void 0);var t,r,n=this.actions;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}},t}(AsyncScheduler$1.AsyncScheduler),VirtualTimeScheduler$1=(AnimationFrameScheduler$1.AnimationFrameScheduler=AnimationFrameScheduler,!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var t=AnimationFrameScheduler$1;e.animationFrameScheduler=new t.AnimationFrameScheduler(AnimationFrameAction$1.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler}(animationFrame),{}),__extends$x=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),AsyncAction_1=(Object.defineProperty(VirtualTimeScheduler$1,"__esModule",{value:!0}),VirtualTimeScheduler$1.VirtualAction=VirtualTimeScheduler$1.VirtualTimeScheduler=void 0,AsyncAction$1),Subscription_1$4=Subscription$1,AsyncScheduler_1=AsyncScheduler$1,VirtualTimeScheduler=function(n){function e(e,t){void 0===t&&(t=1/0);var r=n.call(this,e=void 0===e?VirtualAction:e,function(){return r.frame})||this;return r.maxFrames=t,r.frame=0,r.index=-1,r}return __extends$x(e,n),e.prototype.flush=function(){for(var e,t,r=this.actions,n=this.maxFrames;(t=r[0])&&t.delay<=n&&(r.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=r.shift();)t.unsubscribe();throw e}},e.frameTimeFactor=10,e}(AsyncScheduler$1.AsyncScheduler),VirtualAction=(VirtualTimeScheduler$1.VirtualTimeScheduler=VirtualTimeScheduler,function(o){function n(e,t,r){void 0===r&&(r=e.index+=1);var n=o.call(this,e,t)||this;return n.scheduler=e,n.work=t,n.index=r,n.active=!0,n.index=e.index=r,n}return __extends$x(n,o),n.prototype.schedule=function(e,t){if(void 0===t&&(t=0),Number.isFinite(t)){if(!this.id)return o.prototype.schedule.call(this,e,t);this.active=!1;var r=new n(this.scheduler,this.work);return this.add(r),r.schedule(e,t)}return Subscription_1$4.Subscription.EMPTY},n.prototype.requestAsyncId=function(e,t,r){this.delay=e.frame+(r=void 0===r?0:r);r=e.actions;return r.push(this),r.sort(n.sortActions),1},n.prototype.recycleAsyncId=function(e,t,r){},n.prototype._execute=function(e,t){if(!0===this.active)return o.prototype._execute.call(this,e,t)},n.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},n}(AsyncAction_1.AsyncAction)),Notification=(VirtualTimeScheduler$1.VirtualAction=VirtualAction,{}),empty={},of$1=(!function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.empty=r.EMPTY=void 0;var n=Observable$1;r.EMPTY=new n.Observable(function(e){return e.complete()}),r.empty=function(e){return e?(t=e,new n.Observable(function(e){return t.schedule(function(){return e.complete()})})):r.EMPTY;var t}}(empty),{}),args={},isScheduler$1={},isFunction_1$m=(Object.defineProperty(isScheduler$1,"__esModule",{value:!0}),isScheduler$1.isScheduler=void 0,isFunction$1);function isScheduler(e){return e&&isFunction_1$m.isFunction(e.schedule)}isScheduler$1.isScheduler=isScheduler,Object.defineProperty(args,"__esModule",{value:!0}),args.popNumber=args.popScheduler=args.popResultSelector=void 0;var isFunction_1$l=isFunction$1,isScheduler_1$3=isScheduler$1;function last$2(e){return e[e.length-1]}function popResultSelector(e){return isFunction_1$l.isFunction(last$2(e))?e.pop():void 0}function popScheduler(e){return isScheduler_1$3.isScheduler(last$2(e))?e.pop():void 0}function popNumber(e,t){return"number"==typeof last$2(e)?e.pop():t}args.popResultSelector=popResultSelector,args.popScheduler=popScheduler,args.popNumber=popNumber;var from$1={},scheduled$1={},scheduleObservable$1={},innerFrom$1={},isArrayLike={},isPromise$1=(Object.defineProperty(isArrayLike,"__esModule",{value:!0}),isArrayLike.isArrayLike=void 0,isArrayLike.isArrayLike=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e},{}),isFunction_1$k=(Object.defineProperty(isPromise$1,"__esModule",{value:!0}),isPromise$1.isPromise=void 0,isFunction$1);function isPromise(e){return isFunction_1$k.isFunction(null==e?void 0:e.then)}isPromise$1.isPromise=isPromise;var isInteropObservable$1={},observable_1$1=(Object.defineProperty(isInteropObservable$1,"__esModule",{value:!0}),isInteropObservable$1.isInteropObservable=void 0,observable),isFunction_1$j=isFunction$1;function isInteropObservable(e){return isFunction_1$j.isFunction(e[observable_1$1.observable])}isInteropObservable$1.isInteropObservable=isInteropObservable;var isAsyncIterable$1={},isFunction_1$i=(Object.defineProperty(isAsyncIterable$1,"__esModule",{value:!0}),isAsyncIterable$1.isAsyncIterable=void 0,isFunction$1);function isAsyncIterable(e){return Symbol.asyncIterator&&isFunction_1$i.isFunction(null==e?void 0:e[Symbol.asyncIterator])}isAsyncIterable$1.isAsyncIterable=isAsyncIterable;var throwUnobservableError={};function createInvalidObservableTypeError(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}Object.defineProperty(throwUnobservableError,"__esModule",{value:!0}),throwUnobservableError.createInvalidObservableTypeError=void 0,throwUnobservableError.createInvalidObservableTypeError=createInvalidObservableTypeError;var isIterable$2={},iterator={};function getSymbolIterator(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(iterator,"__esModule",{value:!0}),iterator.iterator=iterator.getSymbolIterator=void 0,iterator.getSymbolIterator=getSymbolIterator,iterator.iterator=getSymbolIterator(),Object.defineProperty(isIterable$2,"__esModule",{value:!0}),isIterable$2.isIterable=void 0;var iterator_1$1=iterator,isFunction_1$h=isFunction$1;function isIterable$1(e){return isFunction_1$h.isFunction(null==e?void 0:e[iterator_1$1.iterator])}isIterable$2.isIterable=isIterable$1;var isReadableStreamLike$1={},__generator$b=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__await=commonjsGlobal&&commonjsGlobal.__await||function(e){return this instanceof __await?(this.v=e,this):new __await(e)},__asyncGenerator=commonjsGlobal&&commonjsGlobal.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=r.apply(e,t||[]),i=[],a={};return n("next"),n("throw"),n("return"),a[Symbol.asyncIterator]=function(){return this},a;function n(n){o[n]&&(a[n]=function(r){return new Promise(function(e,t){1<i.push([n,r,e,t])||s(n,r)})})}function s(e,t){try{(r=o[e](t)).value instanceof __await?Promise.resolve(r.value.v).then(u,c):l(i[0][2],r)}catch(e){l(i[0][3],e)}var r}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}},isFunction_1$g=(Object.defineProperty(isReadableStreamLike$1,"__esModule",{value:!0}),isReadableStreamLike$1.isReadableStreamLike=isReadableStreamLike$1.readableStreamLikeToAsyncGenerator=void 0,isFunction$1);function readableStreamLikeToAsyncGenerator(o){return __asyncGenerator(this,arguments,function(){var t,r,n;return __generator$b(this,function(e){switch(e.label){case 0:t=o.getReader(),e.label=1;case 1:e.trys.push([1,,9,10]),e.label=2;case 2:return[4,__await(t.read())];case 3:return(r=e.sent(),n=r.value,r.done)?[4,__await(void 0)]:[3,5];case 4:return[2,e.sent()];case 5:return[4,__await(n)];case 6:return[4,e.sent()];case 7:return e.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function isReadableStreamLike(e){return isFunction_1$g.isFunction(null==e?void 0:e.getReader)}isReadableStreamLike$1.readableStreamLikeToAsyncGenerator=readableStreamLikeToAsyncGenerator,isReadableStreamLike$1.isReadableStreamLike=isReadableStreamLike;var __awaiter$9=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$a=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__asyncValues=commonjsGlobal&&commonjsGlobal.__asyncValues||function(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=a[Symbol.asyncIterator];return t?t.call(a):(a="function"==typeof __values$8?__values$8(a):a[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(i){e[i]=a[i]&&function(o){return new Promise(function(e,t){var r,n;o=a[i](o),r=e,e=t,n=o.done,t=o.value,Promise.resolve(t).then(function(e){r({value:e,done:n})},e)})}}},__values$8=commonjsGlobal&&commonjsGlobal.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},isArrayLike_1$2=(Object.defineProperty(innerFrom$1,"__esModule",{value:!0}),innerFrom$1.fromReadableStreamLike=innerFrom$1.fromAsyncIterable=innerFrom$1.fromIterable=innerFrom$1.fromPromise=innerFrom$1.fromArrayLike=innerFrom$1.fromInteropObservable=innerFrom$1.innerFrom=void 0,isArrayLike),isPromise_1$1=isPromise$1,Observable_1$k=Observable$1,isInteropObservable_1$1=isInteropObservable$1,isAsyncIterable_1$1=isAsyncIterable$1,throwUnobservableError_1$1=throwUnobservableError,isIterable_1$1=isIterable$2,isReadableStreamLike_1$2=isReadableStreamLike$1,isFunction_1$f=isFunction$1,reportUnhandledError_1=reportUnhandledError$1,observable_1=observable;function innerFrom(e){if(e instanceof Observable_1$k.Observable)return e;if(null!=e){if(isInteropObservable_1$1.isInteropObservable(e))return fromInteropObservable(e);if(isArrayLike_1$2.isArrayLike(e))return fromArrayLike(e);if(isPromise_1$1.isPromise(e))return fromPromise(e);if(isAsyncIterable_1$1.isAsyncIterable(e))return fromAsyncIterable(e);if(isIterable_1$1.isIterable(e))return fromIterable(e);if(isReadableStreamLike_1$2.isReadableStreamLike(e))return fromReadableStreamLike(e)}throw throwUnobservableError_1$1.createInvalidObservableTypeError(e)}function fromInteropObservable(r){return new Observable_1$k.Observable(function(e){var t=r[observable_1.observable]();if(isFunction_1$f.isFunction(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fromArrayLike(r){return new Observable_1$k.Observable(function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}function fromPromise(e){return new Observable_1$k.Observable(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,reportUnhandledError_1.reportUnhandledError)})}function fromIterable(a){return new Observable_1$k.Observable(function(e){var t,r;try{for(var n=__values$8(a),o=n.next();!o.done;o=n.next()){var i=o.value;if(e.next(i),e.closed)return}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}e.complete()})}function fromAsyncIterable(e){return new Observable_1$k.Observable(function(t){process(e,t).catch(function(e){return t.error(e)})})}function fromReadableStreamLike(e){return fromAsyncIterable(isReadableStreamLike_1$2.readableStreamLikeToAsyncGenerator(e))}function process(r,n){var o,i,a,s;return __awaiter$9(this,void 0,void 0,function(){var t;return __generator$a(this,function(e){switch(e.label){case 0:e.trys.push([0,5,6,11]),o=__asyncValues(r),e.label=1;case 1:return[4,o.next()];case 2:if((i=e.sent()).done)return[3,4];if(t=i.value,n.next(t),n.closed)return[2];e.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return t=e.sent(),a={error:t},[3,11];case 6:return(e.trys.push([6,,9,10]),i&&!i.done&&(s=o.return))?[4,s.call(o)]:[3,8];case 7:e.sent(),e.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return n.complete(),[2]}})})}innerFrom$1.innerFrom=innerFrom,innerFrom$1.fromInteropObservable=fromInteropObservable,innerFrom$1.fromArrayLike=fromArrayLike,innerFrom$1.fromPromise=fromPromise,innerFrom$1.fromIterable=fromIterable,innerFrom$1.fromAsyncIterable=fromAsyncIterable,innerFrom$1.fromReadableStreamLike=fromReadableStreamLike;var observeOn$1={},executeSchedule$1={};function executeSchedule(e,t,r,n,o){void 0===n&&(n=0),void 0===o&&(o=!1);t=t.schedule(function(){r(),o?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(t),!o)return t}Object.defineProperty(executeSchedule$1,"__esModule",{value:!0}),executeSchedule$1.executeSchedule=void 0,executeSchedule$1.executeSchedule=executeSchedule,Object.defineProperty(observeOn$1,"__esModule",{value:!0}),observeOn$1.observeOn=void 0;var executeSchedule_1$6=executeSchedule$1,lift_1$12=lift,OperatorSubscriber_1$T=OperatorSubscriber$1;function observeOn(r,n){return void 0===n&&(n=0),lift_1$12.operate(function(e,t){e.subscribe(OperatorSubscriber_1$T.createOperatorSubscriber(t,function(e){return executeSchedule_1$6.executeSchedule(t,r,function(){return t.next(e)},n)},function(){return executeSchedule_1$6.executeSchedule(t,r,function(){return t.complete()},n)},function(e){return executeSchedule_1$6.executeSchedule(t,r,function(){return t.error(e)},n)}))})}observeOn$1.observeOn=observeOn;var subscribeOn$1={},lift_1$11=(Object.defineProperty(subscribeOn$1,"__esModule",{value:!0}),subscribeOn$1.subscribeOn=void 0,lift);function subscribeOn(r,n){return void 0===n&&(n=0),lift_1$11.operate(function(e,t){t.add(r.schedule(function(){return e.subscribe(t)},n))})}subscribeOn$1.subscribeOn=subscribeOn,Object.defineProperty(scheduleObservable$1,"__esModule",{value:!0}),scheduleObservable$1.scheduleObservable=void 0;var innerFrom_1$D=innerFrom$1,observeOn_1$2=observeOn$1,subscribeOn_1$2=subscribeOn$1;function scheduleObservable(e,t){return innerFrom_1$D.innerFrom(e).pipe(subscribeOn_1$2.subscribeOn(t),observeOn_1$2.observeOn(t))}scheduleObservable$1.scheduleObservable=scheduleObservable;var schedulePromise$1={},innerFrom_1$C=(Object.defineProperty(schedulePromise$1,"__esModule",{value:!0}),schedulePromise$1.schedulePromise=void 0,innerFrom$1),observeOn_1$1=observeOn$1,subscribeOn_1$1=subscribeOn$1;function schedulePromise(e,t){return innerFrom_1$C.innerFrom(e).pipe(subscribeOn_1$1.subscribeOn(t),observeOn_1$1.observeOn(t))}schedulePromise$1.schedulePromise=schedulePromise;var scheduleArray$1={},Observable_1$j=(Object.defineProperty(scheduleArray$1,"__esModule",{value:!0}),scheduleArray$1.scheduleArray=void 0,Observable$1);function scheduleArray(r,n){return new Observable_1$j.Observable(function(e){var t=0;return n.schedule(function(){t===r.length?e.complete():(e.next(r[t++]),e.closed||this.schedule())})})}scheduleArray$1.scheduleArray=scheduleArray;var scheduleIterable$1={},Observable_1$i=(Object.defineProperty(scheduleIterable$1,"__esModule",{value:!0}),scheduleIterable$1.scheduleIterable=void 0,Observable$1),iterator_1=iterator,isFunction_1$e=isFunction$1,executeSchedule_1$5=executeSchedule$1;function scheduleIterable(e,t){return new Observable_1$i.Observable(function(n){var o;return executeSchedule_1$5.executeSchedule(n,t,function(){o=e[iterator_1.iterator](),executeSchedule_1$5.executeSchedule(n,t,function(){var e,t,r;try{t=(e=o.next()).value,r=e.done}catch(e){return void n.error(e)}r?n.complete():n.next(t)},0,!0)}),function(){return isFunction_1$e.isFunction(null==o?void 0:o.return)&&o.return()}})}scheduleIterable$1.scheduleIterable=scheduleIterable;var scheduleAsyncIterable$1={},Observable_1$h=(Object.defineProperty(scheduleAsyncIterable$1,"__esModule",{value:!0}),scheduleAsyncIterable$1.scheduleAsyncIterable=void 0,Observable$1),executeSchedule_1$4=executeSchedule$1;function scheduleAsyncIterable(r,n){if(r)return new Observable_1$h.Observable(function(t){executeSchedule_1$4.executeSchedule(t,n,function(){var e=r[Symbol.asyncIterator]();executeSchedule_1$4.executeSchedule(t,n,function(){e.next().then(function(e){e.done?t.complete():t.next(e.value)})},0,!0)})});throw new Error("Iterable cannot be null")}scheduleAsyncIterable$1.scheduleAsyncIterable=scheduleAsyncIterable;var scheduleReadableStreamLike$1={},scheduleAsyncIterable_1$1=(Object.defineProperty(scheduleReadableStreamLike$1,"__esModule",{value:!0}),scheduleReadableStreamLike$1.scheduleReadableStreamLike=void 0,scheduleAsyncIterable$1),isReadableStreamLike_1$1=isReadableStreamLike$1;function scheduleReadableStreamLike(e,t){return scheduleAsyncIterable_1$1.scheduleAsyncIterable(isReadableStreamLike_1$1.readableStreamLikeToAsyncGenerator(e),t)}scheduleReadableStreamLike$1.scheduleReadableStreamLike=scheduleReadableStreamLike,Object.defineProperty(scheduled$1,"__esModule",{value:!0}),scheduled$1.scheduled=void 0;var scheduleObservable_1=scheduleObservable$1,schedulePromise_1=schedulePromise$1,scheduleArray_1=scheduleArray$1,scheduleIterable_1$1=scheduleIterable$1,scheduleAsyncIterable_1=scheduleAsyncIterable$1,isInteropObservable_1=isInteropObservable$1,isPromise_1=isPromise$1,isArrayLike_1$1=isArrayLike,isIterable_1=isIterable$2,isAsyncIterable_1=isAsyncIterable$1,throwUnobservableError_1=throwUnobservableError,isReadableStreamLike_1=isReadableStreamLike$1,scheduleReadableStreamLike_1=scheduleReadableStreamLike$1;function scheduled(e,t){if(null!=e){if(isInteropObservable_1.isInteropObservable(e))return scheduleObservable_1.scheduleObservable(e,t);if(isArrayLike_1$1.isArrayLike(e))return scheduleArray_1.scheduleArray(e,t);if(isPromise_1.isPromise(e))return schedulePromise_1.schedulePromise(e,t);if(isAsyncIterable_1.isAsyncIterable(e))return scheduleAsyncIterable_1.scheduleAsyncIterable(e,t);if(isIterable_1.isIterable(e))return scheduleIterable_1$1.scheduleIterable(e,t);if(isReadableStreamLike_1.isReadableStreamLike(e))return scheduleReadableStreamLike_1.scheduleReadableStreamLike(e,t)}throw throwUnobservableError_1.createInvalidObservableTypeError(e)}scheduled$1.scheduled=scheduled,Object.defineProperty(from$1,"__esModule",{value:!0}),from$1.from=void 0;var scheduled_1=scheduled$1,innerFrom_1$B=innerFrom$1;function from(e,t){return t?scheduled_1.scheduled(e,t):innerFrom_1$B.innerFrom(e)}from$1.from=from,Object.defineProperty(of$1,"__esModule",{value:!0}),of$1.of=void 0;var args_1$c=args,from_1$6=from$1;function of(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=args_1$c.popScheduler(e);return from_1$6.from(e,r)}of$1.of=of;var throwError$1={},Observable_1$g=(Object.defineProperty(throwError$1,"__esModule",{value:!0}),throwError$1.throwError=void 0,Observable$1),isFunction_1$d=isFunction$1;function throwError(e,t){function r(e){return e.error(n())}var n=isFunction_1$d.isFunction(e)?e:function(){return e};return new Observable_1$g.Observable(t?function(e){return t.schedule(r,0,e)}:r)}throwError$1.throwError=throwError,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var n=empty,o=of$1,i=throwError$1,a=isFunction$1,t=((t=e.NotificationKind||(e.NotificationKind={})).NEXT="N",t.ERROR="E",t.COMPLETE="C",r.prototype.observe=function(e){return s(this,e)},r.prototype.do=function(e,t,r){var n=this.kind,o=this.value,i=this.error;return"N"===n?null==e?void 0:e(o):"E"===n?null==t?void 0:t(i):null==r?void 0:r()},r.prototype.accept=function(e,t,r){var n;return a.isFunction(null==(n=e)?void 0:n.next)?this.observe(e):this.do(e,t,r)},r.prototype.toObservable=function(){var e=this.kind,t=this.value,r=this.error,t="N"===e?o.of(t):"E"===e?i.throwError(function(){return r}):"C"===e?n.EMPTY:0;if(t)return t;throw new TypeError("Unexpected notification kind "+e)},r.createNext=function(e){return new r("N",e)},r.createError=function(e){return new r("E",void 0,e)},r.createComplete=function(){return r.completeNotification},r.completeNotification=new r("C"),r);function r(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}function s(e,t){var r,n=e.kind,o=e.value,e=e.error;if("string"!=typeof n)throw new TypeError('Invalid notification, missing "kind"');"N"===n?null!=(r=t.next)&&r.call(t,o):"E"===n?null!=(r=t.error)&&r.call(t,e):null!=(o=t.complete)&&o.call(t)}e.Notification=t,e.observeNotification=s}(Notification);var isObservable$1={},Observable_1$f=(Object.defineProperty(isObservable$1,"__esModule",{value:!0}),isObservable$1.isObservable=void 0,Observable$1),isFunction_1$c=isFunction$1;function isObservable(e){return!!e&&(e instanceof Observable_1$f.Observable||isFunction_1$c.isFunction(e.lift)&&isFunction_1$c.isFunction(e.subscribe))}isObservable$1.isObservable=isObservable;var lastValueFrom$1={},EmptyError={},createErrorClass_1$3=(Object.defineProperty(EmptyError,"__esModule",{value:!0}),EmptyError.EmptyError=void 0,createErrorClass$1),EmptyError_1$5=(EmptyError.EmptyError=createErrorClass_1$3.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}),Object.defineProperty(lastValueFrom$1,"__esModule",{value:!0}),lastValueFrom$1.lastValueFrom=void 0,EmptyError);function lastValueFrom(o,i){var a="object"==typeof i;return new Promise(function(e,t){var r,n=!1;o.subscribe({next:function(e){r=e,n=!0},error:t,complete:function(){n?e(r):a?e(i.defaultValue):t(new EmptyError_1$5.EmptyError)}})})}lastValueFrom$1.lastValueFrom=lastValueFrom;var firstValueFrom$1={},EmptyError_1$4=(Object.defineProperty(firstValueFrom$1,"__esModule",{value:!0}),firstValueFrom$1.firstValueFrom=void 0,EmptyError),Subscriber_1$1=Subscriber;function firstValueFrom(n,o){var i="object"==typeof o;return new Promise(function(t,e){var r=new Subscriber_1$1.SafeSubscriber({next:function(e){t(e),r.unsubscribe()},error:e,complete:function(){i?t(o.defaultValue):e(new EmptyError_1$4.EmptyError)}});n.subscribe(r)})}firstValueFrom$1.firstValueFrom=firstValueFrom;var ArgumentOutOfRangeError={},createErrorClass_1$2=(Object.defineProperty(ArgumentOutOfRangeError,"__esModule",{value:!0}),ArgumentOutOfRangeError.ArgumentOutOfRangeError=void 0,createErrorClass$1),NotFoundError=(ArgumentOutOfRangeError.ArgumentOutOfRangeError=createErrorClass_1$2.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}}),{}),createErrorClass_1$1=(Object.defineProperty(NotFoundError,"__esModule",{value:!0}),NotFoundError.NotFoundError=void 0,createErrorClass$1),SequenceError=(NotFoundError.NotFoundError=createErrorClass_1$1.createErrorClass(function(t){return function(e){t(this),this.name="NotFoundError",this.message=e}}),{}),createErrorClass_1=(Object.defineProperty(SequenceError,"__esModule",{value:!0}),SequenceError.SequenceError=void 0,createErrorClass$1),timeout=(SequenceError.SequenceError=createErrorClass_1.createErrorClass(function(t){return function(e){t(this),this.name="SequenceError",this.message=e}}),{}),isDate={};function isValidDate(e){return e instanceof Date&&!isNaN(e)}Object.defineProperty(isDate,"__esModule",{value:!0}),isDate.isValidDate=void 0,isDate.isValidDate=isValidDate,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.timeout=t.TimeoutError=void 0;var n=async,o=isDate,i=lift,_=innerFrom$1,e=createErrorClass$1,p=OperatorSubscriber$1,d=executeSchedule$1;function a(e){throw new t.TimeoutError(e)}t.TimeoutError=e.createErrorClass(function(t){return function(e){void 0===e&&(e=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}}),t.timeout=function(e,t){var s=(e=o.isValidDate(e)?{first:e}:"number"==typeof e?{each:e}:e).first,u=e.each,r=e.with,c=void 0===r?a:r,l=void 0===(r=e.scheduler)?null!=t?t:n.asyncScheduler:r,f=void 0===(t=e.meta)?null:t;if(null==s&&null==u)throw new TypeError("No timeout provided.");return i.operate(function(e,t){function r(e){n=d.executeSchedule(t,l,function(){try{a.unsubscribe(),_.innerFrom(c({meta:f,lastValue:o,seen:i})).subscribe(t)}catch(e){t.error(e)}},e)}var n,o=null,i=0,a=e.subscribe(p.createOperatorSubscriber(t,function(e){null!=n&&n.unsubscribe(),i++,t.next(o=e),0<u&&r(u)},void 0,void 0,function(){null!=n&&n.closed||null!=n&&n.unsubscribe(),o=null}));i||r(null!=s?"number"==typeof s?s:+s-l.now():u)})}}(timeout);var bindCallback$1={},bindCallbackInternals$1={},mapOneOrManyArgs$1={},map$1={},lift_1$10=(Object.defineProperty(map$1,"__esModule",{value:!0}),map$1.map=void 0,lift),OperatorSubscriber_1$S=OperatorSubscriber$1;function map(n,o){return lift_1$10.operate(function(e,t){var r=0;e.subscribe(OperatorSubscriber_1$S.createOperatorSubscriber(t,function(e){t.next(n.call(o,e,r++))}))})}map$1.map=map;var __read$o=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$i=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},map_1$5=(Object.defineProperty(mapOneOrManyArgs$1,"__esModule",{value:!0}),mapOneOrManyArgs$1.mapOneOrManyArgs=void 0,map$1),isArray$2=Array.isArray;function callOrApply(e,t){return isArray$2(t)?e.apply(void 0,__spreadArray$i([],__read$o(t))):e(t)}function mapOneOrManyArgs(t){return map_1$5.map(function(e){return callOrApply(t,e)})}mapOneOrManyArgs$1.mapOneOrManyArgs=mapOneOrManyArgs;var __read$n=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$h=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},isScheduler_1$2=(Object.defineProperty(bindCallbackInternals$1,"__esModule",{value:!0}),bindCallbackInternals$1.bindCallbackInternals=void 0,isScheduler$1),Observable_1$e=Observable$1,subscribeOn_1=subscribeOn$1,mapOneOrManyArgs_1$6=mapOneOrManyArgs$1,observeOn_1=observeOn$1,AsyncSubject_1$1=AsyncSubject$1;function bindCallbackInternals(s,u,r,n){if(r){if(!isScheduler_1$2.isScheduler(r))return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return bindCallbackInternals(s,u,n).apply(this,e).pipe(mapOneOrManyArgs_1$6.mapOneOrManyArgs(r))};n=r}return n?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return bindCallbackInternals(s,u).apply(this,e).pipe(subscribeOn_1.subscribeOn(n),observeOn_1.observeOn(n))}:function(){for(var t=this,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var i=new AsyncSubject_1$1.AsyncSubject,a=!0;return new Observable_1$e.Observable(function(e){var n,o,e=i.subscribe(e);return a&&(n=a=!1,o=!1,u.apply(t,__spreadArray$h(__spreadArray$h([],__read$n(r)),[function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(s){var r=e.shift();if(null!=r)return void i.error(r)}i.next(1<e.length?e:e[0]),o=!0,n&&i.complete()}])),o&&i.complete(),n=!0),e})}}bindCallbackInternals$1.bindCallbackInternals=bindCallbackInternals,Object.defineProperty(bindCallback$1,"__esModule",{value:!0}),bindCallback$1.bindCallback=void 0;var bindCallbackInternals_1$1=bindCallbackInternals$1;function bindCallback(e,t,r){return bindCallbackInternals_1$1.bindCallbackInternals(!1,e,t,r)}bindCallback$1.bindCallback=bindCallback;var bindNodeCallback$1={},bindCallbackInternals_1=(Object.defineProperty(bindNodeCallback$1,"__esModule",{value:!0}),bindNodeCallback$1.bindNodeCallback=void 0,bindCallbackInternals$1);function bindNodeCallback(e,t,r){return bindCallbackInternals_1.bindCallbackInternals(!0,e,t,r)}bindNodeCallback$1.bindNodeCallback=bindNodeCallback;var combineLatest$3={},argsArgArrayOrObject$1={},isArray$1=(Object.defineProperty(argsArgArrayOrObject$1,"__esModule",{value:!0}),argsArgArrayOrObject$1.argsArgArrayOrObject=void 0,Array.isArray),getPrototypeOf=Object.getPrototypeOf,objectProto=Object.prototype,getKeys=Object.keys;function argsArgArrayOrObject(e){if(1===e.length){var t,r=e[0];if(isArray$1(r))return{args:r,keys:null};if(isPOJO(r))return{args:(t=getKeys(r)).map(function(e){return r[e]}),keys:t}}return{args:e,keys:null}}function isPOJO(e){return e&&"object"==typeof e&&getPrototypeOf(e)===objectProto}argsArgArrayOrObject$1.argsArgArrayOrObject=argsArgArrayOrObject;var createObject$1={};function createObject(e,n){return e.reduce(function(e,t,r){return e[t]=n[r],e},{})}Object.defineProperty(createObject$1,"__esModule",{value:!0}),createObject$1.createObject=void 0,createObject$1.createObject=createObject,Object.defineProperty(combineLatest$3,"__esModule",{value:!0}),combineLatest$3.combineLatestInit=combineLatest$3.combineLatest=void 0;var Observable_1$d=Observable$1,argsArgArrayOrObject_1$1=argsArgArrayOrObject$1,from_1$5=from$1,identity_1$d=identity$2,mapOneOrManyArgs_1$5=mapOneOrManyArgs$1,args_1$b=args,createObject_1$1=createObject$1,OperatorSubscriber_1$R=OperatorSubscriber$1,executeSchedule_1$3=executeSchedule$1;function combineLatest$2(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=args_1$b.popScheduler(e),n=args_1$b.popResultSelector(e),o=argsArgArrayOrObject_1$1.argsArgArrayOrObject(e),i=o.args,a=o.keys;if(0===i.length)return from_1$5.from([],r);o=new Observable_1$d.Observable(combineLatestInit(i,r,a?function(e){return createObject_1$1.createObject(a,e)}:identity_1$d.identity));return n?o.pipe(mapOneOrManyArgs_1$5.mapOneOrManyArgs(n)):o}function combineLatestInit(s,u,c){return void 0===c&&(c=identity_1$d.identity),function(a){maybeSchedule(u,function(){for(var e=s.length,n=new Array(e),o=e,i=e,t=0;t<e;t++)!function(r){maybeSchedule(u,function(){var e=from_1$5.from(s[r],u),t=!1;e.subscribe(OperatorSubscriber_1$R.createOperatorSubscriber(a,function(e){n[r]=e,t||(t=!0,i--),i||a.next(c(n.slice()))},function(){--o||a.complete()}))},a)}(t)},a)}}function maybeSchedule(e,t,r){e?executeSchedule_1$3.executeSchedule(r,e,t):t()}combineLatest$3.combineLatest=combineLatest$2,combineLatest$3.combineLatestInit=combineLatestInit;var concat$3={},concatAll$1={},mergeAll$1={},mergeMap$1={},mergeInternals$1={},innerFrom_1$A=(Object.defineProperty(mergeInternals$1,"__esModule",{value:!0}),mergeInternals$1.mergeInternals=void 0,innerFrom$1),executeSchedule_1$2=executeSchedule$1,OperatorSubscriber_1$Q=OperatorSubscriber$1;function mergeInternals(e,r,n,o,i,a,s,t){var u=[],c=0,l=0,f=function(){u.length||c||r.complete()},_=function(e){return c<o?p(e):u.push(e)},p=function(e){a&&r.next(e),c++;var t=!1;innerFrom_1$A.innerFrom(n(e,l++)).subscribe(OperatorSubscriber_1$Q.createOperatorSubscriber(r,function(e){null!=i&&i(e),a?_(e):r.next(e)},function(){t=!0},void 0,function(){if(t)try{c--;for(;u.length&&c<o;)!function(){var e=u.shift();s?executeSchedule_1$2.executeSchedule(r,s,function(){return p(e)}):p(e)}();f()}catch(e){r.error(e)}}))};return e.subscribe(OperatorSubscriber_1$Q.createOperatorSubscriber(r,_,function(){f()})),function(){null!=t&&t()}}mergeInternals$1.mergeInternals=mergeInternals,Object.defineProperty(mergeMap$1,"__esModule",{value:!0}),mergeMap$1.mergeMap=void 0;var map_1$4=map$1,innerFrom_1$z=innerFrom$1,lift_1$$=lift,mergeInternals_1$2=mergeInternals$1,isFunction_1$b=isFunction$1;function mergeMap(o,i,r){return void 0===r&&(r=1/0),isFunction_1$b.isFunction(i)?mergeMap(function(r,n){return map_1$4.map(function(e,t){return i(r,e,n,t)})(innerFrom_1$z.innerFrom(o(r,n)))},r):("number"==typeof i&&(r=i),lift_1$$.operate(function(e,t){return mergeInternals_1$2.mergeInternals(e,t,o,r)}))}mergeMap$1.mergeMap=mergeMap,Object.defineProperty(mergeAll$1,"__esModule",{value:!0}),mergeAll$1.mergeAll=void 0;var mergeMap_1$6=mergeMap$1,identity_1$c=identity$2;function mergeAll(e){return mergeMap_1$6.mergeMap(identity_1$c.identity,e=void 0===e?1/0:e)}mergeAll$1.mergeAll=mergeAll,Object.defineProperty(concatAll$1,"__esModule",{value:!0}),concatAll$1.concatAll=void 0;var mergeAll_1$2=mergeAll$1;function concatAll(){return mergeAll_1$2.mergeAll(1)}concatAll$1.concatAll=concatAll,Object.defineProperty(concat$3,"__esModule",{value:!0}),concat$3.concat=void 0;var concatAll_1$1=concatAll$1,args_1$a=args,from_1$4=from$1;function concat$2(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return concatAll_1$1.concatAll()(from_1$4.from(e,args_1$a.popScheduler(e)))}concat$3.concat=concat$2;var connectable$1={},defer$1={},Observable_1$c=(Object.defineProperty(defer$1,"__esModule",{value:!0}),defer$1.defer=void 0,Observable$1),innerFrom_1$y=innerFrom$1;function defer(t){return new Observable_1$c.Observable(function(e){innerFrom_1$y.innerFrom(t()).subscribe(e)})}defer$1.defer=defer,Object.defineProperty(connectable$1,"__esModule",{value:!0}),connectable$1.connectable=void 0;var Subject_1$b=Subject$1,Observable_1$b=Observable$1,defer_1$2=defer$1,DEFAULT_CONFIG$1={connector:function(){return new Subject_1$b.Subject},resetOnDisconnect:!0};function connectable(e,t){var r=null,n=(t=void 0===t?DEFAULT_CONFIG$1:t).connector,t=t.resetOnDisconnect,o=void 0===t||t,i=n(),t=new Observable_1$b.Observable(function(e){return i.subscribe(e)});return t.connect=function(){return r&&!r.closed||(r=defer_1$2.defer(function(){return e}).subscribe(i),o&&r.add(function(){return i=n()})),r},t}connectable$1.connectable=connectable;var forkJoin$1={},Observable_1$a=(Object.defineProperty(forkJoin$1,"__esModule",{value:!0}),forkJoin$1.forkJoin=void 0,Observable$1),argsArgArrayOrObject_1=argsArgArrayOrObject$1,innerFrom_1$x=innerFrom$1,args_1$9=args,OperatorSubscriber_1$P=OperatorSubscriber$1,mapOneOrManyArgs_1$4=mapOneOrManyArgs$1,createObject_1=createObject$1;function forkJoin(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=args_1$9.popResultSelector(e),n=argsArgArrayOrObject_1.argsArgArrayOrObject(e),a=n.args,s=n.keys,n=new Observable_1$a.Observable(function(e){var t=a.length;if(t)for(var n=new Array(t),o=t,i=t,r=0;r<t;r++)!function(t){var r=!1;innerFrom_1$x.innerFrom(a[t]).subscribe(OperatorSubscriber_1$P.createOperatorSubscriber(e,function(e){r||(r=!0,i--),n[t]=e},function(){return o--},void 0,function(){o&&r||(i||e.next(s?createObject_1.createObject(s,n):n),e.complete())}))}(r);else e.complete()});return r?n.pipe(mapOneOrManyArgs_1$4.mapOneOrManyArgs(r)):n}forkJoin$1.forkJoin=forkJoin;var fromEvent$1={},__read$m=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},innerFrom_1$w=(Object.defineProperty(fromEvent$1,"__esModule",{value:!0}),fromEvent$1.fromEvent=void 0,innerFrom$1),Observable_1$9=Observable$1,mergeMap_1$5=mergeMap$1,isArrayLike_1=isArrayLike,isFunction_1$a=isFunction$1,mapOneOrManyArgs_1$3=mapOneOrManyArgs$1,nodeEventEmitterMethods=["addListener","removeListener"],eventTargetMethods=["addEventListener","removeEventListener"],jqueryMethods=["on","off"];function fromEvent(r,n,o,e){if(isFunction_1$a.isFunction(o)&&(e=o,o=void 0),e)return fromEvent(r,n,o).pipe(mapOneOrManyArgs_1$3.mapOneOrManyArgs(e));var e=__read$m(isEventTarget(r)?eventTargetMethods.map(function(t){return function(e){return r[t](n,e,o)}}):isNodeStyleEventEmitter(r)?nodeEventEmitterMethods.map(toCommonHandlerRegistry(r,n)):isJQueryStyleEventEmitter(r)?jqueryMethods.map(toCommonHandlerRegistry(r,n)):[],2),t=e[0],i=e[1];if(!t&&isArrayLike_1.isArrayLike(r))return mergeMap_1$5.mergeMap(function(e){return fromEvent(e,n,o)})(innerFrom_1$w.innerFrom(r));if(t)return new Observable_1$9.Observable(function(r){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(1<e.length?e:e[0])}return t(e),function(){return i(e)}});throw new TypeError("Invalid event target")}function toCommonHandlerRegistry(r,n){return function(t){return function(e){return r[t](n,e)}}}function isNodeStyleEventEmitter(e){return isFunction_1$a.isFunction(e.addListener)&&isFunction_1$a.isFunction(e.removeListener)}function isJQueryStyleEventEmitter(e){return isFunction_1$a.isFunction(e.on)&&isFunction_1$a.isFunction(e.off)}function isEventTarget(e){return isFunction_1$a.isFunction(e.addEventListener)&&isFunction_1$a.isFunction(e.removeEventListener)}fromEvent$1.fromEvent=fromEvent;var fromEventPattern$1={},Observable_1$8=(Object.defineProperty(fromEventPattern$1,"__esModule",{value:!0}),fromEventPattern$1.fromEventPattern=void 0,Observable$1),isFunction_1$9=isFunction$1,mapOneOrManyArgs_1$2=mapOneOrManyArgs$1;function fromEventPattern(n,o,e){return e?fromEventPattern(n,o).pipe(mapOneOrManyArgs_1$2.mapOneOrManyArgs(e)):new Observable_1$8.Observable(function(r){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(1===e.length?e[0]:e)}var t=n(e);return isFunction_1$9.isFunction(o)?function(){return o(e,t)}:void 0})}fromEventPattern$1.fromEventPattern=fromEventPattern;var generate$1={},__generator$9=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},identity_1$b=(Object.defineProperty(generate$1,"__esModule",{value:!0}),generate$1.generate=void 0,identity$2),isScheduler_1$1=isScheduler$1,defer_1$1=defer$1,scheduleIterable_1=scheduleIterable$1;function generate(e,r,n,t,o){var i,a,s;function u(){var t;return __generator$9(this,function(e){switch(e.label){case 0:t=s,e.label=1;case 1:return r&&!r(t)?[3,4]:[4,a(t)];case 2:e.sent(),e.label=3;case 3:return t=n(t),[3,1];case 4:return[2]}})}return 1===arguments.length?(s=e.initialState,r=e.condition,n=e.iterate,i=e.resultSelector,a=void 0===i?identity_1$b.identity:i,o=e.scheduler):(s=e,!t||isScheduler_1$1.isScheduler(t)?(a=identity_1$b.identity,o=t):a=t),defer_1$1.defer(o?function(){return scheduleIterable_1.scheduleIterable(u(),o)}:u)}generate$1.generate=generate;var iif$1={},defer_1=(Object.defineProperty(iif$1,"__esModule",{value:!0}),iif$1.iif=void 0,defer$1);function iif(e,t,r){return defer_1.defer(function(){return e()?t:r})}iif$1.iif=iif;var interval$1={},timer$1={},Observable_1$7=(Object.defineProperty(timer$1,"__esModule",{value:!0}),timer$1.timer=void 0,Observable$1),async_1$a=async,isScheduler_1=isScheduler$1,isDate_1$1=isDate;function timer(n,e,o){void 0===n&&(n=0),void 0===o&&(o=async_1$a.async);var i=-1;return null!=e&&(isScheduler_1.isScheduler(e)?o=e:i=e),new Observable_1$7.Observable(function(e){var t=isDate_1$1.isValidDate(n)?+n-o.now():n,r=0;return o.schedule(function(){e.closed||(e.next(r++),0<=i?this.schedule(void 0,i):e.complete())},t=t<0?0:t)})}timer$1.timer=timer,Object.defineProperty(interval$1,"__esModule",{value:!0}),interval$1.interval=void 0;var async_1$9=async,timer_1$5=timer$1;function interval(e,t){return void 0===t&&(t=async_1$9.asyncScheduler),timer_1$5.timer(e=(e=void 0===e?0:e)<0?0:e,e,t)}interval$1.interval=interval;var merge$3={},mergeAll_1$1=(Object.defineProperty(merge$3,"__esModule",{value:!0}),merge$3.merge=void 0,mergeAll$1),innerFrom_1$v=innerFrom$1,empty_1$6=empty,args_1$8=args,from_1$3=from$1;function merge$2(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=args_1$8.popScheduler(e),n=args_1$8.popNumber(e,1/0),o=e;return o.length?1===o.length?innerFrom_1$v.innerFrom(o[0]):mergeAll_1$1.mergeAll(n)(from_1$3.from(o,r)):empty_1$6.EMPTY}merge$3.merge=merge$2;var never={},onErrorResumeNext$1=(!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var t=Observable$1;e.NEVER=new t.Observable(noop$1.noop),e.never=function(){return e.NEVER}}(never),{}),argsOrArgArray$1={},isArray=(Object.defineProperty(argsOrArgArray$1,"__esModule",{value:!0}),argsOrArgArray$1.argsOrArgArray=void 0,Array.isArray);function argsOrArgArray(e){return 1===e.length&&isArray(e[0])?e[0]:e}argsOrArgArray$1.argsOrArgArray=argsOrArgArray,Object.defineProperty(onErrorResumeNext$1,"__esModule",{value:!0}),onErrorResumeNext$1.onErrorResumeNext=void 0;var Observable_1$6=Observable$1,argsOrArgArray_1$5=argsOrArgArray$1,OperatorSubscriber_1$O=OperatorSubscriber$1,noop_1$c=noop$1,innerFrom_1$u=innerFrom$1;function onErrorResumeNext(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=argsOrArgArray_1$5.argsOrArgArray(e);return new Observable_1$6.Observable(function(r){var n=0,o=function(){if(n<i.length){var e=void 0;try{e=innerFrom_1$u.innerFrom(i[n++])}catch(e){return void o()}var t=new OperatorSubscriber_1$O.OperatorSubscriber(r,void 0,noop_1$c.noop,noop_1$c.noop);e.subscribe(t),t.add(o)}else r.complete()};o()})}onErrorResumeNext$1.onErrorResumeNext=onErrorResumeNext;var pairs$1={},from_1$2=(Object.defineProperty(pairs$1,"__esModule",{value:!0}),pairs$1.pairs=void 0,from$1);function pairs(e,t){return from_1$2.from(Object.entries(e),t)}pairs$1.pairs=pairs;var partition$3={},not$1={};function not(r,n){return function(e,t){return!r.call(n,e,t)}}Object.defineProperty(not$1,"__esModule",{value:!0}),not$1.not=void 0,not$1.not=not;var filter$1={},lift_1$_=(Object.defineProperty(filter$1,"__esModule",{value:!0}),filter$1.filter=void 0,lift),OperatorSubscriber_1$N=OperatorSubscriber$1;function filter(n,o){return lift_1$_.operate(function(e,t){var r=0;e.subscribe(OperatorSubscriber_1$N.createOperatorSubscriber(t,function(e){return n.call(o,e,r++)&&t.next(e)}))})}filter$1.filter=filter,Object.defineProperty(partition$3,"__esModule",{value:!0}),partition$3.partition=void 0;var not_1$1=not$1,filter_1$5=filter$1,innerFrom_1$t=innerFrom$1;function partition$2(e,t,r){return[filter_1$5.filter(t,r)(innerFrom_1$t.innerFrom(e)),filter_1$5.filter(not_1$1.not(t,r))(innerFrom_1$t.innerFrom(e))]}partition$3.partition=partition$2;var race$3={},Observable_1$5=(Object.defineProperty(race$3,"__esModule",{value:!0}),race$3.raceInit=race$3.race=void 0,Observable$1),innerFrom_1$s=innerFrom$1,argsOrArgArray_1$4=argsOrArgArray$1,OperatorSubscriber_1$M=OperatorSubscriber$1;function race$2(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===(e=argsOrArgArray_1$4.argsOrArgArray(e)).length?innerFrom_1$s.innerFrom(e[0]):new Observable_1$5.Observable(raceInit(e))}function raceInit(t){return function(n){for(var o=[],e=0;o&&!n.closed&&e<t.length;e++)!function(r){o.push(innerFrom_1$s.innerFrom(t[r]).subscribe(OperatorSubscriber_1$M.createOperatorSubscriber(n,function(e){if(o){for(var t=0;t<o.length;t++)t!==r&&o[t].unsubscribe();o=null}n.next(e)})))}(e)}}race$3.race=race$2,race$3.raceInit=raceInit;var range$1={},Observable_1$4=(Object.defineProperty(range$1,"__esModule",{value:!0}),range$1.range=void 0,Observable$1),empty_1$5=empty;function range(r,e,n){if(null==e&&(e=r,r=0),e<=0)return empty_1$5.EMPTY;var o=e+r;return new Observable_1$4.Observable(n?function(e){var t=r;return n.schedule(function(){t<o?(e.next(t++),this.schedule()):e.complete()})}:function(e){for(var t=r;t<o&&!e.closed;)e.next(t++);e.complete()})}range$1.range=range;var using$1={},Observable_1$3=(Object.defineProperty(using$1,"__esModule",{value:!0}),using$1.using=void 0,Observable$1),innerFrom_1$r=innerFrom$1,empty_1$4=empty;function using(n,o){return new Observable_1$3.Observable(function(e){var t=n(),r=o(t);return(r?innerFrom_1$r.innerFrom(r):empty_1$4.EMPTY).subscribe(e),function(){t&&t.unsubscribe()}})}using$1.using=using;var zip$3={},__read$l=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$g=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},Observable_1$2=(Object.defineProperty(zip$3,"__esModule",{value:!0}),zip$3.zip=void 0,Observable$1),innerFrom_1$q=innerFrom$1,argsOrArgArray_1$3=argsOrArgArray$1,empty_1$3=empty,OperatorSubscriber_1$L=OperatorSubscriber$1,args_1$7=args;function zip$2(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=args_1$7.popResultSelector(e),a=argsOrArgArray_1$3.argsOrArgArray(e);return a.length?new Observable_1$2.Observable(function(r){for(var n=a.map(function(){return[]}),o=a.map(function(){return!1}),e=(r.add(function(){n=o=null}),0);!r.closed&&e<a.length;e++)!function(t){innerFrom_1$q.innerFrom(a[t]).subscribe(OperatorSubscriber_1$L.createOperatorSubscriber(r,function(e){n[t].push(e),n.every(function(e){return e.length})&&(e=n.map(function(e){return e.shift()}),r.next(i?i.apply(void 0,__spreadArray$g([],__read$l(e))):e),n.some(function(e,t){return!e.length&&o[t]})&&r.complete())},function(){o[t]=!0,n[t].length||r.complete()}))}(e);return function(){n=o=null}}):empty_1$3.EMPTY}zip$3.zip=zip$2;var types={},audit$1=(Object.defineProperty(types,"__esModule",{value:!0}),{}),lift_1$Z=(Object.defineProperty(audit$1,"__esModule",{value:!0}),audit$1.audit=void 0,lift),innerFrom_1$p=innerFrom$1,OperatorSubscriber_1$K=OperatorSubscriber$1;function audit(u){return lift_1$Z.operate(function(e,t){function r(){var e;null!=a&&a.unsubscribe(),a=null,o&&(o=!1,e=i,i=null,t.next(e)),s&&t.complete()}function n(){a=null,s&&t.complete()}var o=!1,i=null,a=null,s=!1;e.subscribe(OperatorSubscriber_1$K.createOperatorSubscriber(t,function(e){o=!0,i=e,a||innerFrom_1$p.innerFrom(u(e)).subscribe(a=OperatorSubscriber_1$K.createOperatorSubscriber(t,r,n))},function(){s=!0,o&&a&&!a.closed||t.complete()}))})}audit$1.audit=audit;var auditTime$1={},async_1$8=(Object.defineProperty(auditTime$1,"__esModule",{value:!0}),auditTime$1.auditTime=void 0,async),audit_1=audit$1,timer_1$4=timer$1;function auditTime(e,t){return void 0===t&&(t=async_1$8.asyncScheduler),audit_1.audit(function(){return timer_1$4.timer(e,t)})}auditTime$1.auditTime=auditTime;var buffer$2={},lift_1$Y=(Object.defineProperty(buffer$2,"__esModule",{value:!0}),buffer$2.buffer=void 0,lift),noop_1$b=noop$1,OperatorSubscriber_1$J=OperatorSubscriber$1,innerFrom_1$o=innerFrom$1;function buffer$1(n){return lift_1$Y.operate(function(e,t){var r=[];return e.subscribe(OperatorSubscriber_1$J.createOperatorSubscriber(t,function(e){return r.push(e)},function(){t.next(r),t.complete()})),innerFrom_1$o.innerFrom(n).subscribe(OperatorSubscriber_1$J.createOperatorSubscriber(t,function(){var e=r;r=[],t.next(e)},noop_1$b.noop)),function(){r=null}})}buffer$2.buffer=buffer$1;var bufferCount$1={},__values$7=commonjsGlobal&&commonjsGlobal.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},lift_1$X=(Object.defineProperty(bufferCount$1,"__esModule",{value:!0}),bufferCount$1.bufferCount=void 0,lift),OperatorSubscriber_1$I=OperatorSubscriber$1,arrRemove_1$4=arrRemove$1;function bufferCount(d,b){return b=null!=(b=void 0===b?null:b)?b:d,lift_1$X.operate(function(e,f){var _=[],p=0;e.subscribe(OperatorSubscriber_1$I.createOperatorSubscriber(f,function(e){var t,r,n,o,i=null;p++%b==0&&_.push([]);try{for(var a=__values$7(_),s=a.next();!s.done;s=a.next())(l=s.value).push(e),d<=l.length&&(i=null!=i?i:[]).push(l)}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}if(i)try{for(var u=__values$7(i),c=u.next();!c.done;c=u.next()){var l=c.value;arrRemove_1$4.arrRemove(_,l),f.next(l)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}},function(){var t,e;try{for(var r=__values$7(_),n=r.next();!n.done;n=r.next()){var o=n.value;f.next(o)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}f.complete()},void 0,function(){_=null}))})}bufferCount$1.bufferCount=bufferCount;var bufferTime$1={},__values$6=commonjsGlobal&&commonjsGlobal.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Subscription_1$3=(Object.defineProperty(bufferTime$1,"__esModule",{value:!0}),bufferTime$1.bufferTime=void 0,Subscription$1),lift_1$W=lift,OperatorSubscriber_1$H=OperatorSubscriber$1,arrRemove_1$3=arrRemove$1,async_1$7=async,args_1$6=args,executeSchedule_1$1=executeSchedule$1;function bufferTime(i){for(var e,t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var a=null!=(e=args_1$6.popScheduler(t))?e:async_1$7.asyncScheduler,s=null!=(e=t[0])?e:null,l=t[1]||1/0;return lift_1$W.operate(function(e,r){var u=[],n=!1,c=function(e){var t=e.buffer;e.subs.unsubscribe(),arrRemove_1$3.arrRemove(u,e),r.next(t),n&&o()},o=function(){var e,t;u&&(e=new Subscription_1$3.Subscription,r.add(e),u.push(t={buffer:[],subs:e}),executeSchedule_1$1.executeSchedule(e,a,function(){return c(t)},i))},t=(null!==s&&0<=s?executeSchedule_1$1.executeSchedule(r,a,o,s,!0):n=!0,o(),OperatorSubscriber_1$H.createOperatorSubscriber(r,function(e){var t,r,n=u.slice();try{for(var o=__values$6(n),i=o.next();!i.done;i=o.next()){var a=i.value,s=a.buffer;s.push(e),l<=s.length&&c(a)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}},function(){for(;null!=u&&u.length;)r.next(u.shift().buffer);null!=t&&t.unsubscribe(),r.complete(),r.unsubscribe()},void 0,function(){return u=null}));e.subscribe(t)})}bufferTime$1.bufferTime=bufferTime;var bufferToggle$1={},__values$5=commonjsGlobal&&commonjsGlobal.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Subscription_1$2=(Object.defineProperty(bufferToggle$1,"__esModule",{value:!0}),bufferToggle$1.bufferToggle=void 0,Subscription$1),lift_1$V=lift,innerFrom_1$n=innerFrom$1,OperatorSubscriber_1$G=OperatorSubscriber$1,noop_1$a=noop$1,arrRemove_1$2=arrRemove$1;function bufferToggle(t,o){return lift_1$V.operate(function(e,n){var i=[];innerFrom_1$n.innerFrom(t).subscribe(OperatorSubscriber_1$G.createOperatorSubscriber(n,function(e){var t=[],r=(i.push(t),new Subscription_1$2.Subscription);r.add(innerFrom_1$n.innerFrom(o(e)).subscribe(OperatorSubscriber_1$G.createOperatorSubscriber(n,function(){arrRemove_1$2.arrRemove(i,t),n.next(t),r.unsubscribe()},noop_1$a.noop)))},noop_1$a.noop)),e.subscribe(OperatorSubscriber_1$G.createOperatorSubscriber(n,function(e){var t,r;try{for(var n=__values$5(i),o=n.next();!o.done;o=n.next())o.value.push(e)}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},function(){for(;0<i.length;)n.next(i.shift());n.complete()}))})}bufferToggle$1.bufferToggle=bufferToggle;var bufferWhen$1={},lift_1$U=(Object.defineProperty(bufferWhen$1,"__esModule",{value:!0}),bufferWhen$1.bufferWhen=void 0,lift),noop_1$9=noop$1,OperatorSubscriber_1$F=OperatorSubscriber$1,innerFrom_1$m=innerFrom$1;function bufferWhen(i){return lift_1$U.operate(function(e,t){var r=null,n=null,o=function(){null!=n&&n.unsubscribe();var e=r;r=[],e&&t.next(e),innerFrom_1$m.innerFrom(i()).subscribe(n=OperatorSubscriber_1$F.createOperatorSubscriber(t,o,noop_1$9.noop))};o(),e.subscribe(OperatorSubscriber_1$F.createOperatorSubscriber(t,function(e){return null==r?void 0:r.push(e)},function(){r&&t.next(r),t.complete()},void 0,function(){return r=n=null}))})}bufferWhen$1.bufferWhen=bufferWhen;var catchError$1={},innerFrom_1$l=(Object.defineProperty(catchError$1,"__esModule",{value:!0}),catchError$1.catchError=void 0,innerFrom$1),OperatorSubscriber_1$E=OperatorSubscriber$1,lift_1$T=lift;function catchError(a){return lift_1$T.operate(function(t,r){var n,o=null,i=!1,o=t.subscribe(OperatorSubscriber_1$E.createOperatorSubscriber(r,void 0,void 0,function(e){n=innerFrom_1$l.innerFrom(a(e,catchError(a)(t))),o?(o.unsubscribe(),o=null,n.subscribe(r)):i=!0}));i&&(o.unsubscribe(),o=null,n.subscribe(r))})}catchError$1.catchError=catchError;var combineAll={},combineLatestAll$1={},joinAllInternals$1={},toArray$1={},reduce$1={},scanInternals$1={},OperatorSubscriber_1$D=(Object.defineProperty(scanInternals$1,"__esModule",{value:!0}),scanInternals$1.scanInternals=void 0,OperatorSubscriber$1);function scanInternals(a,t,s,u,c){return function(e,r){var n=s,o=t,i=0;e.subscribe(OperatorSubscriber_1$D.createOperatorSubscriber(r,function(e){var t=i++;o=n?a(o,e,t):(n=!0,e),u&&r.next(o)},c&&function(){n&&r.next(o),r.complete()}))}}scanInternals$1.scanInternals=scanInternals,Object.defineProperty(reduce$1,"__esModule",{value:!0}),reduce$1.reduce=void 0;var scanInternals_1$1=scanInternals$1,lift_1$S=lift;function reduce(e,t){return lift_1$S.operate(scanInternals_1$1.scanInternals(e,t,2<=arguments.length,!1,!0))}reduce$1.reduce=reduce,Object.defineProperty(toArray$1,"__esModule",{value:!0}),toArray$1.toArray=void 0;var reduce_1$3=reduce$1,lift_1$R=lift,arrReducer=function(e,t){return e.push(t),e};function toArray(){return lift_1$R.operate(function(e,t){reduce_1$3.reduce(arrReducer,[])(e).subscribe(t)})}toArray$1.toArray=toArray,Object.defineProperty(joinAllInternals$1,"__esModule",{value:!0}),joinAllInternals$1.joinAllInternals=void 0;var identity_1$a=identity$2,mapOneOrManyArgs_1$1=mapOneOrManyArgs$1,pipe_1$1=pipe$1,mergeMap_1$4=mergeMap$1,toArray_1=toArray$1;function joinAllInternals(t,e){return pipe_1$1.pipe(toArray_1.toArray(),mergeMap_1$4.mergeMap(function(e){return t(e)}),e?mapOneOrManyArgs_1$1.mapOneOrManyArgs(e):identity_1$a.identity)}joinAllInternals$1.joinAllInternals=joinAllInternals,Object.defineProperty(combineLatestAll$1,"__esModule",{value:!0}),combineLatestAll$1.combineLatestAll=void 0;var combineLatest_1$2=combineLatest$3,joinAllInternals_1$1=joinAllInternals$1;function combineLatestAll(e){return joinAllInternals_1$1.joinAllInternals(combineLatest_1$2.combineLatest,e)}combineLatestAll$1.combineLatestAll=combineLatestAll,Object.defineProperty(combineAll,"__esModule",{value:!0}),combineAll.combineAll=void 0;var combineLatestAll_1=combineLatestAll$1,combineLatestWith$1=(combineAll.combineAll=combineLatestAll_1.combineLatestAll,{}),combineLatest$1={},__read$k=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$f=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},combineLatest_1$1=(Object.defineProperty(combineLatest$1,"__esModule",{value:!0}),combineLatest$1.combineLatest=void 0,combineLatest$3),lift_1$Q=lift,argsOrArgArray_1$2=argsOrArgArray$1,mapOneOrManyArgs_1=mapOneOrManyArgs$1,pipe_1=pipe$1,args_1$5=args;function combineLatest(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=args_1$5.popResultSelector(r);return t?pipe_1.pipe(combineLatest.apply(void 0,__spreadArray$f([],__read$k(r))),mapOneOrManyArgs_1.mapOneOrManyArgs(t)):lift_1$Q.operate(function(e,t){combineLatest_1$1.combineLatestInit(__spreadArray$f([e],__read$k(argsOrArgArray_1$2.argsOrArgArray(r))))(t)})}combineLatest$1.combineLatest=combineLatest;var __read$j=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$e=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},combineLatest_1=(Object.defineProperty(combineLatestWith$1,"__esModule",{value:!0}),combineLatestWith$1.combineLatestWith=void 0,combineLatest$1);function combineLatestWith(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return combineLatest_1.combineLatest.apply(void 0,__spreadArray$e([],__read$j(e)))}combineLatestWith$1.combineLatestWith=combineLatestWith;var concatMap$1={},mergeMap_1$3=(Object.defineProperty(concatMap$1,"__esModule",{value:!0}),concatMap$1.concatMap=void 0,mergeMap$1),isFunction_1$8=isFunction$1;function concatMap(e,t){return isFunction_1$8.isFunction(t)?mergeMap_1$3.mergeMap(e,t,1):mergeMap_1$3.mergeMap(e,1)}concatMap$1.concatMap=concatMap;var concatMapTo$1={},concatMap_1=(Object.defineProperty(concatMapTo$1,"__esModule",{value:!0}),concatMapTo$1.concatMapTo=void 0,concatMap$1),isFunction_1$7=isFunction$1;function concatMapTo(e,t){return isFunction_1$7.isFunction(t)?concatMap_1.concatMap(function(){return e},t):concatMap_1.concatMap(function(){return e})}concatMapTo$1.concatMapTo=concatMapTo;var concatWith$1={},concat$1={},__read$i=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$d=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},lift_1$P=(Object.defineProperty(concat$1,"__esModule",{value:!0}),concat$1.concat=void 0,lift),concatAll_1=concatAll$1,args_1$4=args,from_1$1=from$1;function concat(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=args_1$4.popScheduler(r);return lift_1$P.operate(function(e,t){concatAll_1.concatAll()(from_1$1.from(__spreadArray$d([e],__read$i(r)),n)).subscribe(t)})}concat$1.concat=concat;var __read$h=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$c=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},concat_1$3=(Object.defineProperty(concatWith$1,"__esModule",{value:!0}),concatWith$1.concatWith=void 0,concat$1);function concatWith(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return concat_1$3.concat.apply(void 0,__spreadArray$c([],__read$h(e)))}concatWith$1.concatWith=concatWith;var connect$1={},fromSubscribable$1={},Observable_1$1=(Object.defineProperty(fromSubscribable$1,"__esModule",{value:!0}),fromSubscribable$1.fromSubscribable=void 0,Observable$1);function fromSubscribable(t){return new Observable_1$1.Observable(function(e){return t.subscribe(e)})}fromSubscribable$1.fromSubscribable=fromSubscribable,Object.defineProperty(connect$1,"__esModule",{value:!0}),connect$1.connect=void 0;var Subject_1$a=Subject$1,innerFrom_1$k=innerFrom$1,lift_1$O=lift,fromSubscribable_1=fromSubscribable$1,DEFAULT_CONFIG={connector:function(){return new Subject_1$a.Subject}};function connect(n,e){var o=(e=void 0===e?DEFAULT_CONFIG:e).connector;return lift_1$O.operate(function(e,t){var r=o();innerFrom_1$k.innerFrom(n(fromSubscribable_1.fromSubscribable(r))).subscribe(t),t.add(e.subscribe(r))})}connect$1.connect=connect;var count$1={},reduce_1$2=(Object.defineProperty(count$1,"__esModule",{value:!0}),count$1.count=void 0,reduce$1);function count(n){return reduce_1$2.reduce(function(e,t,r){return!n||n(t,r)?e+1:e},0)}count$1.count=count;var debounce$1={},lift_1$N=(Object.defineProperty(debounce$1,"__esModule",{value:!0}),debounce$1.debounce=void 0,lift),noop_1$8=noop$1,OperatorSubscriber_1$C=OperatorSubscriber$1,innerFrom_1$j=innerFrom$1;function debounce(a){return lift_1$N.operate(function(e,t){function r(){var e;null!=i&&i.unsubscribe(),i=null,n&&(n=!1,e=o,o=null,t.next(e))}var n=!1,o=null,i=null;e.subscribe(OperatorSubscriber_1$C.createOperatorSubscriber(t,function(e){null!=i&&i.unsubscribe(),n=!0,o=e,i=OperatorSubscriber_1$C.createOperatorSubscriber(t,r,noop_1$8.noop),innerFrom_1$j.innerFrom(a(e)).subscribe(i)},function(){r(),t.complete()},void 0,function(){o=i=null}))})}debounce$1.debounce=debounce;var debounceTime$1={},async_1$6=(Object.defineProperty(debounceTime$1,"__esModule",{value:!0}),debounceTime$1.debounceTime=void 0,async),lift_1$M=lift,OperatorSubscriber_1$B=OperatorSubscriber$1;function debounceTime(s,u){return void 0===u&&(u=async_1$6.asyncScheduler),lift_1$M.operate(function(e,r){var n=null,t=null,o=null,i=function(){var e;n&&(n.unsubscribe(),e=t,t=n=null,r.next(e))};function a(){var e=o+s,t=u.now();if(t<e)return n=this.schedule(void 0,e-t),void r.add(n);i()}e.subscribe(OperatorSubscriber_1$B.createOperatorSubscriber(r,function(e){t=e,o=u.now(),n||(n=u.schedule(a,s),r.add(n))},function(){i(),r.complete()},void 0,function(){t=n=null}))})}debounceTime$1.debounceTime=debounceTime;var defaultIfEmpty$1={},lift_1$L=(Object.defineProperty(defaultIfEmpty$1,"__esModule",{value:!0}),defaultIfEmpty$1.defaultIfEmpty=void 0,lift),OperatorSubscriber_1$A=OperatorSubscriber$1;function defaultIfEmpty(n){return lift_1$L.operate(function(e,t){var r=!1;e.subscribe(OperatorSubscriber_1$A.createOperatorSubscriber(t,function(e){r=!0,t.next(e)},function(){r||t.next(n),t.complete()}))})}defaultIfEmpty$1.defaultIfEmpty=defaultIfEmpty;var delay$1={},delayWhen$1={},take$1={},empty_1$2=(Object.defineProperty(take$1,"__esModule",{value:!0}),take$1.take=void 0,empty),lift_1$K=lift,OperatorSubscriber_1$z=OperatorSubscriber$1;function take(n){return n<=0?function(){return empty_1$2.EMPTY}:lift_1$K.operate(function(e,t){var r=0;e.subscribe(OperatorSubscriber_1$z.createOperatorSubscriber(t,function(e){++r<=n&&(t.next(e),n<=r&&t.complete())}))})}take$1.take=take;var ignoreElements$1={},lift_1$J=(Object.defineProperty(ignoreElements$1,"__esModule",{value:!0}),ignoreElements$1.ignoreElements=void 0,lift),OperatorSubscriber_1$y=OperatorSubscriber$1,noop_1$7=noop$1;function ignoreElements(){return lift_1$J.operate(function(e,t){e.subscribe(OperatorSubscriber_1$y.createOperatorSubscriber(t,noop_1$7.noop))})}ignoreElements$1.ignoreElements=ignoreElements;var mapTo$1={},map_1$3=(Object.defineProperty(mapTo$1,"__esModule",{value:!0}),mapTo$1.mapTo=void 0,map$1);function mapTo(e){return map_1$3.map(function(){return e})}mapTo$1.mapTo=mapTo,Object.defineProperty(delayWhen$1,"__esModule",{value:!0}),delayWhen$1.delayWhen=void 0;var concat_1$2=concat$3,take_1$2=take$1,ignoreElements_1=ignoreElements$1,mapTo_1=mapTo$1,mergeMap_1$2=mergeMap$1,innerFrom_1$i=innerFrom$1;function delayWhen(r,t){return t?function(e){return concat_1$2.concat(t.pipe(take_1$2.take(1),ignoreElements_1.ignoreElements()),e.pipe(delayWhen(r)))}:mergeMap_1$2.mergeMap(function(e,t){return innerFrom_1$i.innerFrom(r(e,t)).pipe(take_1$2.take(1),mapTo_1.mapTo(e))})}delayWhen$1.delayWhen=delayWhen,Object.defineProperty(delay$1,"__esModule",{value:!0}),delay$1.delay=void 0;var async_1$5=async,delayWhen_1=delayWhen$1,timer_1$3=timer$1;function delay(e,t){void 0===t&&(t=async_1$5.asyncScheduler);var r=timer_1$3.timer(e,t);return delayWhen_1.delayWhen(function(){return r})}delay$1.delay=delay;var dematerialize$1={},Notification_1$1=(Object.defineProperty(dematerialize$1,"__esModule",{value:!0}),dematerialize$1.dematerialize=void 0,Notification),lift_1$I=lift,OperatorSubscriber_1$x=OperatorSubscriber$1;function dematerialize(){return lift_1$I.operate(function(e,t){e.subscribe(OperatorSubscriber_1$x.createOperatorSubscriber(t,function(e){return Notification_1$1.observeNotification(e,t)}))})}dematerialize$1.dematerialize=dematerialize;var distinct$1={},lift_1$H=(Object.defineProperty(distinct$1,"__esModule",{value:!0}),distinct$1.distinct=void 0,lift),OperatorSubscriber_1$w=OperatorSubscriber$1,noop_1$6=noop$1,innerFrom_1$h=innerFrom$1;function distinct(o,t){return lift_1$H.operate(function(e,r){var n=new Set;e.subscribe(OperatorSubscriber_1$w.createOperatorSubscriber(r,function(e){var t=o?o(e):e;n.has(t)||(n.add(t),r.next(e))})),t&&innerFrom_1$h.innerFrom(t).subscribe(OperatorSubscriber_1$w.createOperatorSubscriber(r,function(){return n.clear()},noop_1$6.noop))})}distinct$1.distinct=distinct;var distinctUntilChanged$1={},identity_1$9=(Object.defineProperty(distinctUntilChanged$1,"__esModule",{value:!0}),distinctUntilChanged$1.distinctUntilChanged=void 0,identity$2),lift_1$G=lift,OperatorSubscriber_1$v=OperatorSubscriber$1;function distinctUntilChanged(i,a){return void 0===a&&(a=identity_1$9.identity),i=null!=i?i:defaultCompare,lift_1$G.operate(function(e,r){var n,o=!0;e.subscribe(OperatorSubscriber_1$v.createOperatorSubscriber(r,function(e){var t=a(e);!o&&i(n,t)||(o=!1,n=t,r.next(e))}))})}function defaultCompare(e,t){return e===t}distinctUntilChanged$1.distinctUntilChanged=distinctUntilChanged;var distinctUntilKeyChanged$1={},distinctUntilChanged_1=(Object.defineProperty(distinctUntilKeyChanged$1,"__esModule",{value:!0}),distinctUntilKeyChanged$1.distinctUntilKeyChanged=void 0,distinctUntilChanged$1);function distinctUntilKeyChanged(r,n){return distinctUntilChanged_1.distinctUntilChanged(function(e,t){return n?n(e[r],t[r]):e[r]===t[r]})}distinctUntilKeyChanged$1.distinctUntilKeyChanged=distinctUntilKeyChanged;var elementAt$1={},throwIfEmpty$1={},EmptyError_1$3=(Object.defineProperty(throwIfEmpty$1,"__esModule",{value:!0}),throwIfEmpty$1.throwIfEmpty=void 0,EmptyError),lift_1$F=lift,OperatorSubscriber_1$u=OperatorSubscriber$1;function throwIfEmpty(n){return void 0===n&&(n=defaultErrorFactory),lift_1$F.operate(function(e,t){var r=!1;e.subscribe(OperatorSubscriber_1$u.createOperatorSubscriber(t,function(e){r=!0,t.next(e)},function(){return r?t.complete():t.error(n())}))})}function defaultErrorFactory(){return new EmptyError_1$3.EmptyError}throwIfEmpty$1.throwIfEmpty=throwIfEmpty,Object.defineProperty(elementAt$1,"__esModule",{value:!0}),elementAt$1.elementAt=void 0;var ArgumentOutOfRangeError_1=ArgumentOutOfRangeError,filter_1$4=filter$1,throwIfEmpty_1$2=throwIfEmpty$1,defaultIfEmpty_1$2=defaultIfEmpty$1,take_1$1=take$1;function elementAt(r,t){if(r<0)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError;var n=2<=arguments.length;return function(e){return e.pipe(filter_1$4.filter(function(e,t){return t===r}),take_1$1.take(1),n?defaultIfEmpty_1$2.defaultIfEmpty(t):throwIfEmpty_1$2.throwIfEmpty(function(){return new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}))}}elementAt$1.elementAt=elementAt;var endWith$1={},__read$g=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$b=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},concat_1$1=(Object.defineProperty(endWith$1,"__esModule",{value:!0}),endWith$1.endWith=void 0,concat$3),of_1=of$1;function endWith(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return concat_1$1.concat(e,of_1.of.apply(void 0,__spreadArray$b([],__read$g(t))))}}endWith$1.endWith=endWith;var every$1={},lift_1$E=(Object.defineProperty(every$1,"__esModule",{value:!0}),every$1.every=void 0,lift),OperatorSubscriber_1$t=OperatorSubscriber$1;function every(o,i){return lift_1$E.operate(function(t,r){var n=0;t.subscribe(OperatorSubscriber_1$t.createOperatorSubscriber(r,function(e){o.call(i,e,n++,t)||(r.next(!1),r.complete())},function(){r.next(!0),r.complete()}))})}every$1.every=every;var exhaust={},exhaustAll$1={},exhaustMap$1={},map_1$2=(Object.defineProperty(exhaustMap$1,"__esModule",{value:!0}),exhaustMap$1.exhaustMap=void 0,map$1),innerFrom_1$g=innerFrom$1,lift_1$D=lift,OperatorSubscriber_1$s=OperatorSubscriber$1;function exhaustMap(i,o){return o?function(e){return e.pipe(exhaustMap(function(r,n){return innerFrom_1$g.innerFrom(i(r,n)).pipe(map_1$2.map(function(e,t){return o(r,e,n,t)}))}))}:lift_1$D.operate(function(e,t){var r=0,n=null,o=!1;e.subscribe(OperatorSubscriber_1$s.createOperatorSubscriber(t,function(e){n||(n=OperatorSubscriber_1$s.createOperatorSubscriber(t,void 0,function(){n=null,o&&t.complete()}),innerFrom_1$g.innerFrom(i(e,r++)).subscribe(n))},function(){o=!0,n||t.complete()}))})}exhaustMap$1.exhaustMap=exhaustMap,Object.defineProperty(exhaustAll$1,"__esModule",{value:!0}),exhaustAll$1.exhaustAll=void 0;var exhaustMap_1=exhaustMap$1,identity_1$8=identity$2;function exhaustAll(){return exhaustMap_1.exhaustMap(identity_1$8.identity)}exhaustAll$1.exhaustAll=exhaustAll,Object.defineProperty(exhaust,"__esModule",{value:!0}),exhaust.exhaust=void 0;var exhaustAll_1=exhaustAll$1,expand$1=(exhaust.exhaust=exhaustAll_1.exhaustAll,{}),lift_1$C=(Object.defineProperty(expand$1,"__esModule",{value:!0}),expand$1.expand=void 0,lift),mergeInternals_1$1=mergeInternals$1;function expand(r,n,o){return n=((n=void 0===n?1/0:n)||0)<1?1/0:n,lift_1$C.operate(function(e,t){return mergeInternals_1$1.mergeInternals(e,t,r,n,void 0,!0,o)})}expand$1.expand=expand;var finalize$1={},lift_1$B=(Object.defineProperty(finalize$1,"__esModule",{value:!0}),finalize$1.finalize=void 0,lift);function finalize(r){return lift_1$B.operate(function(e,t){try{e.subscribe(t)}finally{t.add(r)}})}finalize$1.finalize=finalize;var find$1={},lift_1$A=(Object.defineProperty(find$1,"__esModule",{value:!0}),find$1.createFind=find$1.find=void 0,lift),OperatorSubscriber_1$r=OperatorSubscriber$1;function find(e,t){return lift_1$A.operate(createFind(e,t,"value"))}function createFind(i,a,e){var s="index"===e;return function(r,n){var o=0;r.subscribe(OperatorSubscriber_1$r.createOperatorSubscriber(n,function(e){var t=o++;i.call(a,e,t,r)&&(n.next(s?t:e),n.complete())},function(){n.next(s?-1:void 0),n.complete()}))}}find$1.find=find,find$1.createFind=createFind;var findIndex$1={},lift_1$z=(Object.defineProperty(findIndex$1,"__esModule",{value:!0}),findIndex$1.findIndex=void 0,lift),find_1=find$1;function findIndex(e,t){return lift_1$z.operate(find_1.createFind(e,t,"index"))}findIndex$1.findIndex=findIndex;var first$1={},EmptyError_1$2=(Object.defineProperty(first$1,"__esModule",{value:!0}),first$1.first=void 0,EmptyError),filter_1$3=filter$1,take_1=take$1,defaultIfEmpty_1$1=defaultIfEmpty$1,throwIfEmpty_1$1=throwIfEmpty$1,identity_1$7=identity$2;function first(n,e){var t=2<=arguments.length;return function(r){return r.pipe(n?filter_1$3.filter(function(e,t){return n(e,t,r)}):identity_1$7.identity,take_1.take(1),t?defaultIfEmpty_1$1.defaultIfEmpty(e):throwIfEmpty_1$1.throwIfEmpty(function(){return new EmptyError_1$2.EmptyError}))}}first$1.first=first;var groupBy$1={},Observable_1=(Object.defineProperty(groupBy$1,"__esModule",{value:!0}),groupBy$1.groupBy=void 0,Observable$1),innerFrom_1$f=innerFrom$1,Subject_1$9=Subject$1,lift_1$y=lift,OperatorSubscriber_1$q=OperatorSubscriber$1;function groupBy(b,t,m,h){return lift_1$y.operate(function(e,u){function c(t){return r(function(e){return e.error(t)})}t&&"function"!=typeof t?(m=t.duration,l=t.element,h=t.connector):l=t;var l,f=new Map,r=function(e){f.forEach(e),e(u)},_=0,p=!1,d=new OperatorSubscriber_1$q.OperatorSubscriber(u,function(e){try{var t,r,n=b(e),o=f.get(n);o||(f.set(n,o=h?h():new Subject_1$9.Subject),i=n,a=o,(s=new Observable_1.Observable(function(e){_++;var t=a.subscribe(e);return function(){t.unsubscribe(),0==--_&&p&&d.unsubscribe()}})).key=i,t=s,u.next(t),m&&(r=OperatorSubscriber_1$q.createOperatorSubscriber(o,function(){o.complete(),null!=r&&r.unsubscribe()},void 0,void 0,function(){return f.delete(n)}),d.add(innerFrom_1$f.innerFrom(m(t)).subscribe(r)))),o.next(l?l(e):e)}catch(e){c(e)}var i,a,s},function(){return r(function(e){return e.complete()})},c,function(){return f.clear()},function(){return p=!0,0===_});e.subscribe(d)})}groupBy$1.groupBy=groupBy;var isEmpty$1={},lift_1$x=(Object.defineProperty(isEmpty$1,"__esModule",{value:!0}),isEmpty$1.isEmpty=void 0,lift),OperatorSubscriber_1$p=OperatorSubscriber$1;function isEmpty(){return lift_1$x.operate(function(e,t){e.subscribe(OperatorSubscriber_1$p.createOperatorSubscriber(t,function(){t.next(!1),t.complete()},function(){t.next(!0),t.complete()}))})}isEmpty$1.isEmpty=isEmpty;var last$1={},takeLast$1={},__values$4=commonjsGlobal&&commonjsGlobal.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},empty_1$1=(Object.defineProperty(takeLast$1,"__esModule",{value:!0}),takeLast$1.takeLast=void 0,empty),lift_1$w=lift,OperatorSubscriber_1$o=OperatorSubscriber$1;function takeLast(t){return t<=0?function(){return empty_1$1.EMPTY}:lift_1$w.operate(function(e,i){var a=[];e.subscribe(OperatorSubscriber_1$o.createOperatorSubscriber(i,function(e){a.push(e),t<a.length&&a.shift()},function(){var t,e;try{for(var r=__values$4(a),n=r.next();!n.done;n=r.next()){var o=n.value;i.next(o)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}i.complete()},void 0,function(){a=null}))})}takeLast$1.takeLast=takeLast,Object.defineProperty(last$1,"__esModule",{value:!0}),last$1.last=void 0;var EmptyError_1$1=EmptyError,filter_1$2=filter$1,takeLast_1=takeLast$1,throwIfEmpty_1=throwIfEmpty$1,defaultIfEmpty_1=defaultIfEmpty$1,identity_1$6=identity$2;function last(n,e){var t=2<=arguments.length;return function(r){return r.pipe(n?filter_1$2.filter(function(e,t){return n(e,t,r)}):identity_1$6.identity,takeLast_1.takeLast(1),t?defaultIfEmpty_1.defaultIfEmpty(e):throwIfEmpty_1.throwIfEmpty(function(){return new EmptyError_1$1.EmptyError}))}}last$1.last=last;var materialize$1={},Notification_1=(Object.defineProperty(materialize$1,"__esModule",{value:!0}),materialize$1.materialize=void 0,Notification),lift_1$v=lift,OperatorSubscriber_1$n=OperatorSubscriber$1;function materialize(){return lift_1$v.operate(function(e,t){e.subscribe(OperatorSubscriber_1$n.createOperatorSubscriber(t,function(e){t.next(Notification_1.Notification.createNext(e))},function(){t.next(Notification_1.Notification.createComplete()),t.complete()},function(e){t.next(Notification_1.Notification.createError(e)),t.complete()}))})}materialize$1.materialize=materialize;var max$1={},reduce_1$1=(Object.defineProperty(max$1,"__esModule",{value:!0}),max$1.max=void 0,reduce$1),isFunction_1$6=isFunction$1;function max(r){return reduce_1$1.reduce(isFunction_1$6.isFunction(r)?function(e,t){return 0<r(e,t)?e:t}:function(e,t){return t<e?e:t})}max$1.max=max;var flatMap={},mergeMap_1$1=(Object.defineProperty(flatMap,"__esModule",{value:!0}),flatMap.flatMap=void 0,mergeMap$1),mergeMapTo$1=(flatMap.flatMap=mergeMap_1$1.mergeMap,{}),mergeMap_1=(Object.defineProperty(mergeMapTo$1,"__esModule",{value:!0}),mergeMapTo$1.mergeMapTo=void 0,mergeMap$1),isFunction_1$5=isFunction$1;function mergeMapTo(e,t,r){return void 0===r&&(r=1/0),isFunction_1$5.isFunction(t)?mergeMap_1.mergeMap(function(){return e},t,r):mergeMap_1.mergeMap(function(){return e},r="number"==typeof t?t:r)}mergeMapTo$1.mergeMapTo=mergeMapTo;var mergeScan$1={},lift_1$u=(Object.defineProperty(mergeScan$1,"__esModule",{value:!0}),mergeScan$1.mergeScan=void 0,lift),mergeInternals_1=mergeInternals$1;function mergeScan(n,o,i){return void 0===i&&(i=1/0),lift_1$u.operate(function(e,t){var r=o;return mergeInternals_1.mergeInternals(e,t,function(e,t){return n(r,e,t)},i,function(e){r=e},!1,void 0,function(){return r=null})})}mergeScan$1.mergeScan=mergeScan;var mergeWith$1={},merge$1={},__read$f=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$a=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},lift_1$t=(Object.defineProperty(merge$1,"__esModule",{value:!0}),merge$1.merge=void 0,lift),mergeAll_1=mergeAll$1,args_1$3=args,from_1=from$1;function merge(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=args_1$3.popScheduler(r),o=args_1$3.popNumber(r,1/0);return lift_1$t.operate(function(e,t){mergeAll_1.mergeAll(o)(from_1.from(__spreadArray$a([e],__read$f(r)),n)).subscribe(t)})}merge$1.merge=merge;var __read$e=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$9=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},merge_1=(Object.defineProperty(mergeWith$1,"__esModule",{value:!0}),mergeWith$1.mergeWith=void 0,merge$1);function mergeWith(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return merge_1.merge.apply(void 0,__spreadArray$9([],__read$e(e)))}mergeWith$1.mergeWith=mergeWith;var min$1={},reduce_1=(Object.defineProperty(min$1,"__esModule",{value:!0}),min$1.min=void 0,reduce$1),isFunction_1$4=isFunction$1;function min(r){return reduce_1.reduce(isFunction_1$4.isFunction(r)?function(e,t){return r(e,t)<0?e:t}:function(e,t){return e<t?e:t})}min$1.min=min;var multicast$1={},ConnectableObservable_1$2=(Object.defineProperty(multicast$1,"__esModule",{value:!0}),multicast$1.multicast=void 0,ConnectableObservable$1),isFunction_1$3=isFunction$1,connect_1$1=connect$1;function multicast(e,t){var r=isFunction_1$3.isFunction(e)?e:function(){return e};return isFunction_1$3.isFunction(t)?connect_1$1.connect(t,{connector:r}):function(e){return new ConnectableObservable_1$2.ConnectableObservable(e,r)}}multicast$1.multicast=multicast;var onErrorResumeNextWith$1={},__read$d=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$8=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},argsOrArgArray_1$1=(Object.defineProperty(onErrorResumeNextWith$1,"__esModule",{value:!0}),onErrorResumeNextWith$1.onErrorResumeNext=onErrorResumeNextWith$1.onErrorResumeNextWith=void 0,argsOrArgArray$1),onErrorResumeNext_1=onErrorResumeNext$1;function onErrorResumeNextWith(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=argsOrArgArray_1$1.argsOrArgArray(e);return function(e){return onErrorResumeNext_1.onErrorResumeNext.apply(void 0,__spreadArray$8([e],__read$d(r)))}}onErrorResumeNextWith$1.onErrorResumeNextWith=onErrorResumeNextWith,onErrorResumeNextWith$1.onErrorResumeNext=onErrorResumeNextWith;var pairwise$1={},lift_1$s=(Object.defineProperty(pairwise$1,"__esModule",{value:!0}),pairwise$1.pairwise=void 0,lift),OperatorSubscriber_1$m=OperatorSubscriber$1;function pairwise(){return lift_1$s.operate(function(e,r){var n,o=!1;e.subscribe(OperatorSubscriber_1$m.createOperatorSubscriber(r,function(e){var t=n;n=e,o&&r.next([t,e]),o=!0}))})}pairwise$1.pairwise=pairwise;var pluck$1={},map_1$1=(Object.defineProperty(pluck$1,"__esModule",{value:!0}),pluck$1.pluck=void 0,map$1);function pluck(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];var i=o.length;if(0===i)throw new Error("list of properties cannot be empty.");return map_1$1.map(function(e){for(var t=e,r=0;r<i;r++){var n=null==t?void 0:t[o[r]];if(void 0===n)return;t=n}return t})}pluck$1.pluck=pluck;var publish$1={},Subject_1$8=(Object.defineProperty(publish$1,"__esModule",{value:!0}),publish$1.publish=void 0,Subject$1),multicast_1$1=multicast$1,connect_1=connect$1;function publish(t){return t?function(e){return connect_1.connect(t)(e)}:function(e){return multicast_1$1.multicast(new Subject_1$8.Subject)(e)}}publish$1.publish=publish;var publishBehavior$1={},BehaviorSubject_1=(Object.defineProperty(publishBehavior$1,"__esModule",{value:!0}),publishBehavior$1.publishBehavior=void 0,BehaviorSubject$1),ConnectableObservable_1$1=ConnectableObservable$1;function publishBehavior(r){return function(e){var t=new BehaviorSubject_1.BehaviorSubject(r);return new ConnectableObservable_1$1.ConnectableObservable(e,function(){return t})}}publishBehavior$1.publishBehavior=publishBehavior;var publishLast$1={},AsyncSubject_1=(Object.defineProperty(publishLast$1,"__esModule",{value:!0}),publishLast$1.publishLast=void 0,AsyncSubject$1),ConnectableObservable_1=ConnectableObservable$1;function publishLast(){return function(e){var t=new AsyncSubject_1.AsyncSubject;return new ConnectableObservable_1.ConnectableObservable(e,function(){return t})}}publishLast$1.publishLast=publishLast;var publishReplay$1={},ReplaySubject_1$1=(Object.defineProperty(publishReplay$1,"__esModule",{value:!0}),publishReplay$1.publishReplay=void 0,ReplaySubject$1),multicast_1=multicast$1,isFunction_1$2=isFunction$1;function publishReplay(t,r,e,n){e&&!isFunction_1$2.isFunction(e)&&(n=e);var o=isFunction_1$2.isFunction(e)?e:void 0;return function(e){return multicast_1.multicast(new ReplaySubject_1$1.ReplaySubject(t,r,n),o)(e)}}publishReplay$1.publishReplay=publishReplay;var raceWith$1={},__read$c=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$7=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},race_1=(Object.defineProperty(raceWith$1,"__esModule",{value:!0}),raceWith$1.raceWith=void 0,race$3),lift_1$r=lift,identity_1$5=identity$2;function raceWith(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r.length?lift_1$r.operate(function(e,t){race_1.raceInit(__spreadArray$7([e],__read$c(r)))(t)}):identity_1$5.identity}raceWith$1.raceWith=raceWith;var repeat$1={},empty_1=(Object.defineProperty(repeat$1,"__esModule",{value:!0}),repeat$1.repeat=void 0,empty),lift_1$q=lift,OperatorSubscriber_1$l=OperatorSubscriber$1,innerFrom_1$e=innerFrom$1,timer_1$2=timer$1;function repeat(e){var t,s,u=1/0;return null!=e&&("object"==typeof e?(t=e.count,u=void 0===t?1/0:t,s=e.delay):u=e),u<=0?function(){return empty_1.EMPTY}:lift_1$q.operate(function(t,r){function n(){var e=!1;o=t.subscribe(OperatorSubscriber_1$l.createOperatorSubscriber(r,void 0,function(){++i<u?o?a():e=!0:r.complete()})),e&&a()}var o,i=0,a=function(){var e,t;null!=o&&o.unsubscribe(),(o=null)!=s?(e="number"==typeof s?timer_1$2.timer(s):innerFrom_1$e.innerFrom(s(i)),t=OperatorSubscriber_1$l.createOperatorSubscriber(r,function(){t.unsubscribe(),n()}),e.subscribe(t)):n()};n()})}repeat$1.repeat=repeat;var repeatWhen$1={},innerFrom_1$d=(Object.defineProperty(repeatWhen$1,"__esModule",{value:!0}),repeatWhen$1.repeatWhen=void 0,innerFrom$1),Subject_1$7=Subject$1,lift_1$p=lift,OperatorSubscriber_1$k=OperatorSubscriber$1;function repeatWhen(l){return lift_1$p.operate(function(e,t){var r,n,o=!1,i=!1,a=!1,s=function(){return a&&i&&(t.complete(),!0)},u=function(){return n||(n=new Subject_1$7.Subject,innerFrom_1$d.innerFrom(l(n)).subscribe(OperatorSubscriber_1$k.createOperatorSubscriber(t,function(){r?c():o=!0},function(){i=!0,s()}))),n},c=function(){a=!1,r=e.subscribe(OperatorSubscriber_1$k.createOperatorSubscriber(t,void 0,function(){a=!0,s()||u().next()})),o&&(r.unsubscribe(),r=null,o=!1,c())};c()})}repeatWhen$1.repeatWhen=repeatWhen;var retry$1={},lift_1$o=(Object.defineProperty(retry$1,"__esModule",{value:!0}),retry$1.retry=void 0,lift),OperatorSubscriber_1$j=OperatorSubscriber$1,identity_1$4=identity$2,timer_1$1=timer$1,innerFrom_1$c=innerFrom$1;function retry(e){var t=(e=(e=void 0===e?1/0:e)&&"object"==typeof e?e:{count:e}).count,c=void 0===t?1/0:t,l=e.delay,t=e.resetOnSuccess,r=void 0!==t&&t;return c<=0?identity_1$4.identity:lift_1$o.operate(function(e,i){var a,s=0,u=function(){var o=!1;a=e.subscribe(OperatorSubscriber_1$j.createOperatorSubscriber(i,function(e){r&&(s=0),i.next(e)},void 0,function(e){var t,r,n;s++<c?(t=function(){a?(a.unsubscribe(),a=null,u()):o=!0},null!=l?(r="number"==typeof l?timer_1$1.timer(l):innerFrom_1$c.innerFrom(l(e,s)),n=OperatorSubscriber_1$j.createOperatorSubscriber(i,function(){n.unsubscribe(),t()},function(){i.complete()}),r.subscribe(n)):t()):i.error(e)})),o&&(a.unsubscribe(),a=null,u())};u()})}retry$1.retry=retry;var retryWhen$1={},innerFrom_1$b=(Object.defineProperty(retryWhen$1,"__esModule",{value:!0}),retryWhen$1.retryWhen=void 0,innerFrom$1),Subject_1$6=Subject$1,lift_1$n=lift,OperatorSubscriber_1$i=OperatorSubscriber$1;function retryWhen(a){return lift_1$n.operate(function(e,t){var r,n,o=!1,i=function(){r=e.subscribe(OperatorSubscriber_1$i.createOperatorSubscriber(t,void 0,void 0,function(e){n||(n=new Subject_1$6.Subject,innerFrom_1$b.innerFrom(a(n)).subscribe(OperatorSubscriber_1$i.createOperatorSubscriber(t,function(){return r?i():o=!0}))),n&&n.next(e)})),o&&(r.unsubscribe(),r=null,o=!1,i())};i()})}retryWhen$1.retryWhen=retryWhen;var sample$1={},innerFrom_1$a=(Object.defineProperty(sample$1,"__esModule",{value:!0}),sample$1.sample=void 0,innerFrom$1),lift_1$m=lift,noop_1$5=noop$1,OperatorSubscriber_1$h=OperatorSubscriber$1;function sample(o){return lift_1$m.operate(function(e,t){var r=!1,n=null;e.subscribe(OperatorSubscriber_1$h.createOperatorSubscriber(t,function(e){r=!0,n=e})),innerFrom_1$a.innerFrom(o).subscribe(OperatorSubscriber_1$h.createOperatorSubscriber(t,function(){var e;r&&(r=!1,e=n,n=null,t.next(e))},noop_1$5.noop))})}sample$1.sample=sample;var sampleTime$1={},async_1$4=(Object.defineProperty(sampleTime$1,"__esModule",{value:!0}),sampleTime$1.sampleTime=void 0,async),sample_1=sample$1,interval_1=interval$1;function sampleTime(e,t){return void 0===t&&(t=async_1$4.asyncScheduler),sample_1.sample(interval_1.interval(e,t))}sampleTime$1.sampleTime=sampleTime;var scan$1={},lift_1$l=(Object.defineProperty(scan$1,"__esModule",{value:!0}),scan$1.scan=void 0,lift),scanInternals_1=scanInternals$1;function scan(e,t){return lift_1$l.operate(scanInternals_1.scanInternals(e,t,2<=arguments.length,!0))}scan$1.scan=scan;var sequenceEqual$1={},lift_1$k=(Object.defineProperty(sequenceEqual$1,"__esModule",{value:!0}),sequenceEqual$1.sequenceEqual=void 0,lift),OperatorSubscriber_1$g=OperatorSubscriber$1,innerFrom_1$9=innerFrom$1;function sequenceEqual(a,s){return void 0===s&&(s=function(e,t){return e===t}),lift_1$k.operate(function(e,t){function r(n,o){var r=OperatorSubscriber_1$g.createOperatorSubscriber(t,function(e){var t=o.buffer,r=o.complete;0===t.length?r?i(!1):n.buffer.push(e):s(e,t.shift())||i(!1)},function(){n.complete=!0;var e=o.complete,t=o.buffer;e&&i(0===t.length),null!=r&&r.unsubscribe()});return r}var n=createState(),o=createState(),i=function(e){t.next(e),t.complete()};e.subscribe(r(n,o)),innerFrom_1$9.innerFrom(a).subscribe(r(o,n))})}function createState(){return{buffer:[],complete:!1}}sequenceEqual$1.sequenceEqual=sequenceEqual;var share$1={},__read$b=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$6=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},innerFrom_1$8=(Object.defineProperty(share$1,"__esModule",{value:!0}),share$1.share=void 0,innerFrom$1),Subject_1$5=Subject$1,Subscriber_1=Subscriber,lift_1$j=lift;function share(e){var t=(e=void 0===e?{}:e).connector,_=void 0===t?function(){return new Subject_1$5.Subject}:t,t=e.resetOnError,p=void 0===t||t,t=e.resetOnComplete,d=void 0===t||t,t=e.resetOnRefCountZero,b=void 0===t||t;return function(e){function n(){var e=o;f(),null!=e&&e.unsubscribe()}var o,i,a,s=0,u=!1,c=!1,l=function(){null!=i&&i.unsubscribe(),i=void 0},f=function(){l(),o=a=void 0,u=c=!1};return lift_1$j.operate(function(e,t){s++,c||u||l();var r=a=null!=a?a:_();t.add(function(){0!==--s||c||u||(i=handleReset(n,b))}),r.subscribe(t),!o&&0<s&&(o=new Subscriber_1.SafeSubscriber({next:function(e){return r.next(e)},error:function(e){c=!0,l(),i=handleReset(f,p,e),r.error(e)},complete:function(){u=!0,l(),i=handleReset(f,d),r.complete()}}),innerFrom_1$8.innerFrom(e).subscribe(o))})(e)}}function handleReset(e,t){for(var r,n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!0===t)e();else if(!1!==t)return r=new Subscriber_1.SafeSubscriber({next:function(){r.unsubscribe(),e()}}),innerFrom_1$8.innerFrom(t.apply(void 0,__spreadArray$6([],__read$b(n)))).subscribe(r)}share$1.share=share;var shareReplay$1={},ReplaySubject_1=(Object.defineProperty(shareReplay$1,"__esModule",{value:!0}),shareReplay$1.shareReplay=void 0,ReplaySubject$1),share_1=share$1;function shareReplay(e,t,r){var n,o,i=!1;return e&&"object"==typeof e?(n=e.bufferSize,o=void 0===n?1/0:n,n=e.windowTime,t=void 0===n?1/0:n,i=void 0!==(n=e.refCount)&&n,r=e.scheduler):o=null!=e?e:1/0,share_1.share({connector:function(){return new ReplaySubject_1.ReplaySubject(o,t,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}shareReplay$1.shareReplay=shareReplay;var single$1={},EmptyError_1=(Object.defineProperty(single$1,"__esModule",{value:!0}),single$1.single=void 0,EmptyError),SequenceError_1=SequenceError,NotFoundError_1=NotFoundError,lift_1$i=lift,OperatorSubscriber_1$f=OperatorSubscriber$1;function single(s){return lift_1$i.operate(function(t,r){var n,o=!1,i=!1,a=0;t.subscribe(OperatorSubscriber_1$f.createOperatorSubscriber(r,function(e){i=!0,s&&!s(e,a++,t)||(o&&r.error(new SequenceError_1.SequenceError("Too many matching values")),o=!0,n=e)},function(){o?(r.next(n),r.complete()):r.error(i?new NotFoundError_1.NotFoundError("No matching values"):new EmptyError_1.EmptyError)}))})}single$1.single=single;var skip$1={},filter_1$1=(Object.defineProperty(skip$1,"__esModule",{value:!0}),skip$1.skip=void 0,filter$1);function skip(r){return filter_1$1.filter(function(e,t){return r<=t})}skip$1.skip=skip;var skipLast$1={},identity_1$3=(Object.defineProperty(skipLast$1,"__esModule",{value:!0}),skipLast$1.skipLast=void 0,identity$2),lift_1$h=lift,OperatorSubscriber_1$e=OperatorSubscriber$1;function skipLast(a){return a<=0?identity_1$3.identity:lift_1$h.operate(function(e,n){var o=new Array(a),i=0;return e.subscribe(OperatorSubscriber_1$e.createOperatorSubscriber(n,function(e){var t,r=i++;r<a?o[r]=e:(t=o[r=r%a],o[r]=e,n.next(t))})),function(){o=null}})}skipLast$1.skipLast=skipLast;var skipUntil$1={},lift_1$g=(Object.defineProperty(skipUntil$1,"__esModule",{value:!0}),skipUntil$1.skipUntil=void 0,lift),OperatorSubscriber_1$d=OperatorSubscriber$1,innerFrom_1$7=innerFrom$1,noop_1$4=noop$1;function skipUntil(o){return lift_1$g.operate(function(e,t){var r=!1,n=OperatorSubscriber_1$d.createOperatorSubscriber(t,function(){null!=n&&n.unsubscribe(),r=!0},noop_1$4.noop);innerFrom_1$7.innerFrom(o).subscribe(n),e.subscribe(OperatorSubscriber_1$d.createOperatorSubscriber(t,function(e){return r&&t.next(e)}))})}skipUntil$1.skipUntil=skipUntil;var skipWhile$1={},lift_1$f=(Object.defineProperty(skipWhile$1,"__esModule",{value:!0}),skipWhile$1.skipWhile=void 0,lift),OperatorSubscriber_1$c=OperatorSubscriber$1;function skipWhile(o){return lift_1$f.operate(function(e,t){var r=!1,n=0;e.subscribe(OperatorSubscriber_1$c.createOperatorSubscriber(t,function(e){return(r=r||!o(e,n++))&&t.next(e)}))})}skipWhile$1.skipWhile=skipWhile;var startWith$1={},concat_1=(Object.defineProperty(startWith$1,"__esModule",{value:!0}),startWith$1.startWith=void 0,concat$3),args_1$2=args,lift_1$e=lift;function startWith(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=args_1$2.popScheduler(r);return lift_1$e.operate(function(e,t){(n?concat_1.concat(r,e,n):concat_1.concat(r,e)).subscribe(t)})}startWith$1.startWith=startWith;var switchAll$1={},switchMap$1={},innerFrom_1$6=(Object.defineProperty(switchMap$1,"__esModule",{value:!0}),switchMap$1.switchMap=void 0,innerFrom$1),lift_1$d=lift,OperatorSubscriber_1$b=OperatorSubscriber$1;function switchMap(u,c){return lift_1$d.operate(function(e,o){function i(){t&&!a&&o.complete()}var a=null,s=0,t=!1;e.subscribe(OperatorSubscriber_1$b.createOperatorSubscriber(o,function(t){null!=a&&a.unsubscribe();var r=0,n=s++;innerFrom_1$6.innerFrom(u(t,n)).subscribe(a=OperatorSubscriber_1$b.createOperatorSubscriber(o,function(e){return o.next(c?c(t,e,n,r++):e)},function(){a=null,i()}))},function(){t=!0,i()}))})}switchMap$1.switchMap=switchMap,Object.defineProperty(switchAll$1,"__esModule",{value:!0}),switchAll$1.switchAll=void 0;var switchMap_1$2=switchMap$1,identity_1$2=identity$2;function switchAll(){return switchMap_1$2.switchMap(identity_1$2.identity)}switchAll$1.switchAll=switchAll;var switchMapTo$1={},switchMap_1$1=(Object.defineProperty(switchMapTo$1,"__esModule",{value:!0}),switchMapTo$1.switchMapTo=void 0,switchMap$1),isFunction_1$1=isFunction$1;function switchMapTo(e,t){return isFunction_1$1.isFunction(t)?switchMap_1$1.switchMap(function(){return e},t):switchMap_1$1.switchMap(function(){return e})}switchMapTo$1.switchMapTo=switchMapTo;var switchScan$1={},switchMap_1=(Object.defineProperty(switchScan$1,"__esModule",{value:!0}),switchScan$1.switchScan=void 0,switchMap$1),lift_1$c=lift;function switchScan(n,o){return lift_1$c.operate(function(e,t){var r=o;return switchMap_1.switchMap(function(e,t){return n(r,e,t)},function(e,t){return r=t})(e).subscribe(t),function(){r=null}})}switchScan$1.switchScan=switchScan;var takeUntil$1={},lift_1$b=(Object.defineProperty(takeUntil$1,"__esModule",{value:!0}),takeUntil$1.takeUntil=void 0,lift),OperatorSubscriber_1$a=OperatorSubscriber$1,innerFrom_1$5=innerFrom$1,noop_1$3=noop$1;function takeUntil(r){return lift_1$b.operate(function(e,t){innerFrom_1$5.innerFrom(r).subscribe(OperatorSubscriber_1$a.createOperatorSubscriber(t,function(){return t.complete()},noop_1$3.noop)),t.closed||e.subscribe(t)})}takeUntil$1.takeUntil=takeUntil;var takeWhile$1={},lift_1$a=(Object.defineProperty(takeWhile$1,"__esModule",{value:!0}),takeWhile$1.takeWhile=void 0,lift),OperatorSubscriber_1$9=OperatorSubscriber$1;function takeWhile(o,i){return void 0===i&&(i=!1),lift_1$a.operate(function(e,r){var n=0;e.subscribe(OperatorSubscriber_1$9.createOperatorSubscriber(r,function(e){var t=o(e,n++);(t||i)&&r.next(e),t||r.complete()}))})}takeWhile$1.takeWhile=takeWhile;var tap$1={},isFunction_1=(Object.defineProperty(tap$1,"__esModule",{value:!0}),tap$1.tap=void 0,isFunction$1),lift_1$9=lift,OperatorSubscriber_1$8=OperatorSubscriber$1,identity_1$1=identity$2;function tap(e,t,r){var o=isFunction_1.isFunction(e)||t||r?{next:e,error:t,complete:r}:e;return o?lift_1$9.operate(function(e,r){null!=(t=o.subscribe)&&t.call(o);var t,n=!0;e.subscribe(OperatorSubscriber_1$8.createOperatorSubscriber(r,function(e){var t;null!=(t=o.next)&&t.call(o,e),r.next(e)},function(){var e;n=!1,null!=(e=o.complete)&&e.call(o),r.complete()},function(e){var t;n=!1,null!=(t=o.error)&&t.call(o,e),r.error(e)},function(){var e;n&&null!=(e=o.unsubscribe)&&e.call(o),null!=(e=o.finalize)&&e.call(o)}))}):identity_1$1.identity}tap$1.tap=tap;var throttle$1={},lift_1$8=(Object.defineProperty(throttle$1,"__esModule",{value:!0}),throttle$1.throttle=void 0,lift),OperatorSubscriber_1$7=OperatorSubscriber$1,innerFrom_1$4=innerFrom$1;function throttle(d,b){return lift_1$8.operate(function(e,t){function r(){var e;s&&(s=!1,e=u,u=null,t.next(e),l||p(e))}var n=null!=b?b:{},o=n.leading,i=void 0===o||o,o=n.trailing,a=void 0!==o&&o,s=!1,u=null,c=null,l=!1,f=function(){null!=c&&c.unsubscribe(),c=null,a&&(r(),l&&t.complete())},_=function(){c=null,l&&t.complete()},p=function(e){return c=innerFrom_1$4.innerFrom(d(e)).subscribe(OperatorSubscriber_1$7.createOperatorSubscriber(t,f,_))};e.subscribe(OperatorSubscriber_1$7.createOperatorSubscriber(t,function(e){s=!0,u=e,c&&!c.closed||(i?r():p(e))},function(){l=!0,a&&s&&c&&!c.closed||t.complete()}))})}throttle$1.throttle=throttle;var throttleTime$1={},async_1$3=(Object.defineProperty(throttleTime$1,"__esModule",{value:!0}),throttleTime$1.throttleTime=void 0,async),throttle_1=throttle$1,timer_1=timer$1;function throttleTime(e,t,r){void 0===t&&(t=async_1$3.asyncScheduler);var n=timer_1.timer(e,t);return throttle_1.throttle(function(){return n},r)}throttleTime$1.throttleTime=throttleTime;var timeInterval$1={},async_1$2=(Object.defineProperty(timeInterval$1,"__esModule",{value:!0}),timeInterval$1.TimeInterval=timeInterval$1.timeInterval=void 0,async),lift_1$7=lift,OperatorSubscriber_1$6=OperatorSubscriber$1;function timeInterval(i){return void 0===i&&(i=async_1$2.asyncScheduler),lift_1$7.operate(function(e,n){var o=i.now();e.subscribe(OperatorSubscriber_1$6.createOperatorSubscriber(n,function(e){var t=i.now(),r=t-o;o=t,n.next(new TimeInterval(e,r))}))})}timeInterval$1.timeInterval=timeInterval;var TimeInterval=function(e,t){this.value=e,this.interval=t},timeoutWith$1=(timeInterval$1.TimeInterval=TimeInterval,{}),async_1$1=(Object.defineProperty(timeoutWith$1,"__esModule",{value:!0}),timeoutWith$1.timeoutWith=void 0,async),isDate_1=isDate,timeout_1=timeout;function timeoutWith(e,t,r){var n,o;if(r=null!=r?r:async_1$1.async,isDate_1.isValidDate(e)?n=e:"number"==typeof e&&(o=e),!t)throw new TypeError("No observable provided to switch to");if(e=function(){return t},null==n&&null==o)throw new TypeError("No timeout provided.");return timeout_1.timeout({first:n,each:o,scheduler:r,with:e})}timeoutWith$1.timeoutWith=timeoutWith;var timestamp$1={},dateTimestampProvider_1=(Object.defineProperty(timestamp$1,"__esModule",{value:!0}),timestamp$1.timestamp=void 0,dateTimestampProvider),map_1=map$1;function timestamp(t){return void 0===t&&(t=dateTimestampProvider_1.dateTimestampProvider),map_1.map(function(e){return{value:e,timestamp:t.now()}})}timestamp$1.timestamp=timestamp;var window$2={},Subject_1$4=(Object.defineProperty(window$2,"__esModule",{value:!0}),window$2.window=void 0,Subject$1),lift_1$6=lift,OperatorSubscriber_1$5=OperatorSubscriber$1,noop_1$2=noop$1,innerFrom_1$3=innerFrom$1;function window$1(o){return lift_1$6.operate(function(e,t){function r(e){n.error(e),t.error(e)}var n=new Subject_1$4.Subject;t.next(n.asObservable());return e.subscribe(OperatorSubscriber_1$5.createOperatorSubscriber(t,function(e){return null==n?void 0:n.next(e)},function(){n.complete(),t.complete()},r)),innerFrom_1$3.innerFrom(o).subscribe(OperatorSubscriber_1$5.createOperatorSubscriber(t,function(){n.complete(),t.next(n=new Subject_1$4.Subject)},noop_1$2.noop,r)),function(){null!=n&&n.unsubscribe(),n=null}})}window$2.window=window$1;var windowCount$1={},__values$3=commonjsGlobal&&commonjsGlobal.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Subject_1$3=(Object.defineProperty(windowCount$1,"__esModule",{value:!0}),windowCount$1.windowCount=void 0,Subject$1),lift_1$5=lift,OperatorSubscriber_1$4=OperatorSubscriber$1;function windowCount(u,e){var c=0<(e=void 0===e?0:e)?e:u;return lift_1$5.operate(function(e,i){var a=[new Subject_1$3.Subject],s=0;i.next(a[0].asObservable()),e.subscribe(OperatorSubscriber_1$4.createOperatorSubscriber(i,function(e){try{for(var t=__values$3(a),r=t.next();!r.done;r=t.next())r.value.next(e)}catch(e){n={error:e}}finally{try{r&&!r.done&&(o=t.return)&&o.call(t)}finally{if(n)throw n.error}}var n,o=s-u+1;0<=o&&o%c==0&&a.shift().complete(),++s%c==0&&(n=new Subject_1$3.Subject,a.push(n),i.next(n.asObservable()))},function(){for(;0<a.length;)a.shift().complete();i.complete()},function(e){for(;0<a.length;)a.shift().error(e);i.error(e)},function(){a=null}))})}windowCount$1.windowCount=windowCount;var windowTime$1={},Subject_1$2=(Object.defineProperty(windowTime$1,"__esModule",{value:!0}),windowTime$1.windowTime=void 0,Subject$1),async_1=async,Subscription_1$1=Subscription$1,lift_1$4=lift,OperatorSubscriber_1$3=OperatorSubscriber$1,arrRemove_1$1=arrRemove$1,args_1$1=args,executeSchedule_1=executeSchedule$1;function windowTime(c){for(var e,t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var l=null!=(e=args_1$1.popScheduler(t))?e:async_1.asyncScheduler,f=null!=(e=t[0])?e:null,_=t[1]||1/0;return lift_1$4.operate(function(e,n){function r(t){u(function(e){e=e.window;return t(e)}),t(n),n.unsubscribe()}var o=[],i=!1,a=function(e){var t=e.window,r=e.subs;t.complete(),r.unsubscribe(),arrRemove_1$1.arrRemove(o,e),i&&s()},s=function(){var e,t,r;o&&(e=new Subscription_1$1.Subscription,n.add(e),t=new Subject_1$2.Subject,o.push(r={window:t,subs:e,seen:0}),n.next(t.asObservable()),executeSchedule_1.executeSchedule(e,l,function(){return a(r)},c))},u=(null!==f&&0<=f?executeSchedule_1.executeSchedule(n,l,s,f,!0):i=!0,s(),function(e){return o.slice().forEach(e)});return e.subscribe(OperatorSubscriber_1$3.createOperatorSubscriber(n,function(t){u(function(e){e.window.next(t),_<=++e.seen&&a(e)})},function(){return r(function(e){return e.complete()})},function(t){return r(function(e){return e.error(t)})})),function(){o=null}})}windowTime$1.windowTime=windowTime;var windowToggle$1={},__values$2=commonjsGlobal&&commonjsGlobal.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Subject_1$1=(Object.defineProperty(windowToggle$1,"__esModule",{value:!0}),windowToggle$1.windowToggle=void 0,Subject$1),Subscription_1=Subscription$1,lift_1$3=lift,innerFrom_1$2=innerFrom$1,OperatorSubscriber_1$2=OperatorSubscriber$1,noop_1$1=noop$1,arrRemove_1=arrRemove$1;function windowToggle(t,s){return lift_1$3.operate(function(e,o){function i(e){for(;0<a.length;)a.shift().error(e);o.error(e)}var a=[];innerFrom_1$2.innerFrom(t).subscribe(OperatorSubscriber_1$2.createOperatorSubscriber(o,function(e){var t,r=new Subject_1$1.Subject,n=(a.push(r),new Subscription_1.Subscription);try{t=innerFrom_1$2.innerFrom(s(e))}catch(e){return void i(e)}o.next(r.asObservable()),n.add(t.subscribe(OperatorSubscriber_1$2.createOperatorSubscriber(o,function(){arrRemove_1.arrRemove(a,r),r.complete(),n.unsubscribe()},noop_1$1.noop,i)))},noop_1$1.noop)),e.subscribe(OperatorSubscriber_1$2.createOperatorSubscriber(o,function(e){var t,r,n=a.slice();try{for(var o=__values$2(n),i=o.next();!i.done;i=o.next())i.value.next(e)}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}},function(){for(;0<a.length;)a.shift().complete();o.complete()},i,function(){for(;0<a.length;)a.shift().unsubscribe()}))})}windowToggle$1.windowToggle=windowToggle;var windowWhen$1={},Subject_1=(Object.defineProperty(windowWhen$1,"__esModule",{value:!0}),windowWhen$1.windowWhen=void 0,Subject$1),lift_1$2=lift,OperatorSubscriber_1$1=OperatorSubscriber$1,innerFrom_1$1=innerFrom$1;function windowWhen(a){return lift_1$2.operate(function(e,t){var r,n,o=function(e){r.error(e),t.error(e)},i=function(){var e;null!=n&&n.unsubscribe(),null!=r&&r.complete(),r=new Subject_1.Subject,t.next(r.asObservable());try{e=innerFrom_1$1.innerFrom(a())}catch(e){return void o(e)}e.subscribe(n=OperatorSubscriber_1$1.createOperatorSubscriber(t,i,i,o))};i(),e.subscribe(OperatorSubscriber_1$1.createOperatorSubscriber(t,function(e){return r.next(e)},function(){r.complete(),t.complete()},o,function(){null!=n&&n.unsubscribe(),r=null}))})}windowWhen$1.windowWhen=windowWhen;var withLatestFrom$1={},__read$a=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$5=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},lift_1$1=(Object.defineProperty(withLatestFrom$1,"__esModule",{value:!0}),withLatestFrom$1.withLatestFrom=void 0,lift),OperatorSubscriber_1=OperatorSubscriber$1,innerFrom_1=innerFrom$1,identity_1=identity$2,noop_1=noop$1,args_1=args;function withLatestFrom(){for(var s=[],e=0;e<arguments.length;e++)s[e]=arguments[e];var u=args_1.popResultSelector(s);return lift_1$1.operate(function(e,r){for(var t=s.length,n=new Array(t),o=s.map(function(){return!1}),i=!1,a=0;a<t;a++)!function(t){innerFrom_1.innerFrom(s[t]).subscribe(OperatorSubscriber_1.createOperatorSubscriber(r,function(e){n[t]=e,i||o[t]||(o[t]=!0,(i=o.every(identity_1.identity))&&(o=null))},noop_1.noop))}(a);e.subscribe(OperatorSubscriber_1.createOperatorSubscriber(r,function(e){i&&(e=__spreadArray$5([e],__read$a(n)),r.next(u?u.apply(void 0,__spreadArray$5([],__read$a(e))):e))}))})}withLatestFrom$1.withLatestFrom=withLatestFrom;var zipAll$1={},zip_1$2=(Object.defineProperty(zipAll$1,"__esModule",{value:!0}),zipAll$1.zipAll=void 0,zip$3),joinAllInternals_1=joinAllInternals$1;function zipAll(e){return joinAllInternals_1.joinAllInternals(zip_1$2.zip,e)}zipAll$1.zipAll=zipAll;var zipWith$1={},zip$1={},__read$9=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$4=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},zip_1$1=(Object.defineProperty(zip$1,"__esModule",{value:!0}),zip$1.zip=void 0,zip$3),lift_1=lift;function zip(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return lift_1.operate(function(e,t){zip_1$1.zip.apply(void 0,__spreadArray$4([e],__read$9(r))).subscribe(t)})}zip$1.zip=zip;var __read$8=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$3=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},zip_1=(Object.defineProperty(zipWith$1,"__esModule",{value:!0}),zipWith$1.zipWith=void 0,zip$1);function zipWith(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return zip_1.zip.apply(void 0,__spreadArray$3([],__read$8(e)))}zipWith$1.zipWith=zipWith,function(e){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),t=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},r=(Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0,Observable$1),o=(Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return r.Observable}}),ConnectableObservable$1),i=(Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return o.ConnectableObservable}}),observable),a=(Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return i.observable}}),animationFrames$1),s=(Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return a.animationFrames}}),Subject$1),u=(Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return s.Subject}}),BehaviorSubject$1),c=(Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return u.BehaviorSubject}}),ReplaySubject$1),l=(Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return c.ReplaySubject}}),AsyncSubject$1),f=(Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return l.AsyncSubject}}),asap),_=(Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return f.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return f.asapScheduler}}),async),p=(Object.defineProperty(e,"async",{enumerable:!0,get:function(){return _.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return _.asyncScheduler}}),queue),d=(Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return p.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return p.queueScheduler}}),animationFrame),b=(Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return d.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return d.animationFrameScheduler}}),VirtualTimeScheduler$1),m=(Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return b.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return b.VirtualAction}}),Scheduler$1),h=(Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return m.Scheduler}}),Subscription$1),y=(Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return h.Subscription}}),Subscriber),v=(Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return y.Subscriber}}),Notification),g=(Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return v.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return v.NotificationKind}}),pipe$1),$=(Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return g.pipe}}),noop$1),O=(Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return $.noop}}),identity$2),E=(Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return O.identity}}),isObservable$1),T=(Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return E.isObservable}}),lastValueFrom$1),S=(Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return T.lastValueFrom}}),firstValueFrom$1),w=(Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return S.firstValueFrom}}),ArgumentOutOfRangeError),P=(Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return w.ArgumentOutOfRangeError}}),EmptyError),j=(Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return P.EmptyError}}),NotFoundError),C=(Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return j.NotFoundError}}),ObjectUnsubscribedError),R=(Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return C.ObjectUnsubscribedError}}),SequenceError),A=(Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return R.SequenceError}}),timeout),I=(Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return A.TimeoutError}}),UnsubscriptionError),k=(Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return I.UnsubscriptionError}}),bindCallback$1),x=(Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return k.bindCallback}}),bindNodeCallback$1),N=(Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return x.bindNodeCallback}}),combineLatest$3),D=(Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return N.combineLatest}}),concat$3),L=(Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return D.concat}}),connectable$1),M=(Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return L.connectable}}),defer$1),F=(Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return M.defer}}),empty),U=(Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return F.empty}}),forkJoin$1),G=(Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return U.forkJoin}}),from$1),B=(Object.defineProperty(e,"from",{enumerable:!0,get:function(){return G.from}}),fromEvent$1),V=(Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return B.fromEvent}}),fromEventPattern$1),W=(Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return V.fromEventPattern}}),generate$1),q=(Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return W.generate}}),iif$1),H=(Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return q.iif}}),interval$1),z=(Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return H.interval}}),merge$3),Y=(Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return z.merge}}),never),K=(Object.defineProperty(e,"never",{enumerable:!0,get:function(){return Y.never}}),of$1),Z=(Object.defineProperty(e,"of",{enumerable:!0,get:function(){return K.of}}),onErrorResumeNext$1),Q=(Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return Z.onErrorResumeNext}}),pairs$1),X=(Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return Q.pairs}}),partition$3),J=(Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return X.partition}}),race$3),ee=(Object.defineProperty(e,"race",{enumerable:!0,get:function(){return J.race}}),range$1),te=(Object.defineProperty(e,"range",{enumerable:!0,get:function(){return ee.range}}),throwError$1),re=(Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return te.throwError}}),timer$1),ne=(Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return re.timer}}),using$1),oe=(Object.defineProperty(e,"using",{enumerable:!0,get:function(){return ne.using}}),zip$3),ie=(Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return oe.zip}}),scheduled$1),ae=(Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return ie.scheduled}}),empty),se=(Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return ae.EMPTY}}),never),ue=(Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return se.NEVER}}),t(types,e),config),ce=(Object.defineProperty(e,"config",{enumerable:!0,get:function(){return ue.config}}),audit$1),le=(Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return ce.audit}}),auditTime$1),fe=(Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return le.auditTime}}),buffer$2),_e=(Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return fe.buffer}}),bufferCount$1),pe=(Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return _e.bufferCount}}),bufferTime$1),de=(Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return pe.bufferTime}}),bufferToggle$1),be=(Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return de.bufferToggle}}),bufferWhen$1),me=(Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return be.bufferWhen}}),catchError$1),he=(Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return me.catchError}}),combineAll),ye=(Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return he.combineAll}}),combineLatestAll$1),ve=(Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return ye.combineLatestAll}}),combineLatestWith$1),ge=(Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return ve.combineLatestWith}}),concatAll$1),$e=(Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return ge.concatAll}}),concatMap$1),Oe=(Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return $e.concatMap}}),concatMapTo$1),Ee=(Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return Oe.concatMapTo}}),concatWith$1),Te=(Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return Ee.concatWith}}),connect$1),Se=(Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return Te.connect}}),count$1),we=(Object.defineProperty(e,"count",{enumerable:!0,get:function(){return Se.count}}),debounce$1),Pe=(Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return we.debounce}}),debounceTime$1),je=(Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return Pe.debounceTime}}),defaultIfEmpty$1),Ce=(Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return je.defaultIfEmpty}}),delay$1),Re=(Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return Ce.delay}}),delayWhen$1),Ae=(Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return Re.delayWhen}}),dematerialize$1),Ie=(Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return Ae.dematerialize}}),distinct$1),ke=(Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return Ie.distinct}}),distinctUntilChanged$1),xe=(Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return ke.distinctUntilChanged}}),distinctUntilKeyChanged$1),Ne=(Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return xe.distinctUntilKeyChanged}}),elementAt$1),De=(Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return Ne.elementAt}}),endWith$1),Le=(Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return De.endWith}}),every$1),Me=(Object.defineProperty(e,"every",{enumerable:!0,get:function(){return Le.every}}),exhaust),Fe=(Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return Me.exhaust}}),exhaustAll$1),Ue=(Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return Fe.exhaustAll}}),exhaustMap$1),Ge=(Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return Ue.exhaustMap}}),expand$1),Be=(Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return Ge.expand}}),filter$1),Ve=(Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return Be.filter}}),finalize$1),We=(Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return Ve.finalize}}),find$1),qe=(Object.defineProperty(e,"find",{enumerable:!0,get:function(){return We.find}}),findIndex$1),He=(Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return qe.findIndex}}),first$1),ze=(Object.defineProperty(e,"first",{enumerable:!0,get:function(){return He.first}}),groupBy$1),Ye=(Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return ze.groupBy}}),ignoreElements$1),Ke=(Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return Ye.ignoreElements}}),isEmpty$1),Ze=(Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return Ke.isEmpty}}),last$1),Qe=(Object.defineProperty(e,"last",{enumerable:!0,get:function(){return Ze.last}}),map$1),Xe=(Object.defineProperty(e,"map",{enumerable:!0,get:function(){return Qe.map}}),mapTo$1),Je=(Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return Xe.mapTo}}),materialize$1),et=(Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Je.materialize}}),max$1),tt=(Object.defineProperty(e,"max",{enumerable:!0,get:function(){return et.max}}),mergeAll$1),rt=(Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return tt.mergeAll}}),flatMap),nt=(Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return rt.flatMap}}),mergeMap$1),ot=(Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return nt.mergeMap}}),mergeMapTo$1),it=(Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return ot.mergeMapTo}}),mergeScan$1),at=(Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return it.mergeScan}}),mergeWith$1),st=(Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return at.mergeWith}}),min$1),ut=(Object.defineProperty(e,"min",{enumerable:!0,get:function(){return st.min}}),multicast$1),ct=(Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return ut.multicast}}),observeOn$1),lt=(Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return ct.observeOn}}),onErrorResumeNextWith$1),ft=(Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return lt.onErrorResumeNextWith}}),pairwise$1),_t=(Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return ft.pairwise}}),pluck$1),pt=(Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return _t.pluck}}),publish$1),dt=(Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return pt.publish}}),publishBehavior$1),bt=(Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return dt.publishBehavior}}),publishLast$1),mt=(Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return bt.publishLast}}),publishReplay$1),ht=(Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return mt.publishReplay}}),raceWith$1),yt=(Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return ht.raceWith}}),reduce$1),vt=(Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return yt.reduce}}),repeat$1),gt=(Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return vt.repeat}}),repeatWhen$1),$t=(Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return gt.repeatWhen}}),retry$1),Ot=(Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return $t.retry}}),retryWhen$1),Et=(Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return Ot.retryWhen}}),refCount$1),Tt=(Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return Et.refCount}}),sample$1),St=(Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return Tt.sample}}),sampleTime$1),wt=(Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return St.sampleTime}}),scan$1),Pt=(Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return wt.scan}}),sequenceEqual$1),jt=(Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return Pt.sequenceEqual}}),share$1),Ct=(Object.defineProperty(e,"share",{enumerable:!0,get:function(){return jt.share}}),shareReplay$1),Rt=(Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return Ct.shareReplay}}),single$1),At=(Object.defineProperty(e,"single",{enumerable:!0,get:function(){return Rt.single}}),skip$1),It=(Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return At.skip}}),skipLast$1),kt=(Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return It.skipLast}}),skipUntil$1),xt=(Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return kt.skipUntil}}),skipWhile$1),Nt=(Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return xt.skipWhile}}),startWith$1),Dt=(Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return Nt.startWith}}),subscribeOn$1),Lt=(Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return Dt.subscribeOn}}),switchAll$1),Mt=(Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return Lt.switchAll}}),switchMap$1),Ft=(Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return Mt.switchMap}}),switchMapTo$1),Ut=(Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return Ft.switchMapTo}}),switchScan$1),Gt=(Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return Ut.switchScan}}),take$1),Bt=(Object.defineProperty(e,"take",{enumerable:!0,get:function(){return Gt.take}}),takeLast$1),Vt=(Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return Bt.takeLast}}),takeUntil$1),Wt=(Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return Vt.takeUntil}}),takeWhile$1),qt=(Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return Wt.takeWhile}}),tap$1),Ht=(Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return qt.tap}}),throttle$1),zt=(Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return Ht.throttle}}),throttleTime$1),Yt=(Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return zt.throttleTime}}),throwIfEmpty$1),Kt=(Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return Yt.throwIfEmpty}}),timeInterval$1),Zt=(Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return Kt.timeInterval}}),timeout),Qt=(Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Zt.timeout}}),timeoutWith$1),Xt=(Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Qt.timeoutWith}}),timestamp$1),Jt=(Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return Xt.timestamp}}),toArray$1),er=(Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return Jt.toArray}}),window$2),tr=(Object.defineProperty(e,"window",{enumerable:!0,get:function(){return er.window}}),windowCount$1),rr=(Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return tr.windowCount}}),windowTime$1),nr=(Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return rr.windowTime}}),windowToggle$1),or=(Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return nr.windowToggle}}),windowWhen$1),ir=(Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return or.windowWhen}}),withLatestFrom$1),ar=(Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return ir.withLatestFrom}}),zipAll$1),sr=(Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return ar.zipAll}}),zipWith$1);Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return sr.zipWith}})}(cjs);var operators={},partition$1={},not_1=(Object.defineProperty(partition$1,"__esModule",{value:!0}),partition$1.partition=void 0,not$1),filter_1=filter$1;function partition(t,r){return function(e){return[filter_1.filter(t,r)(e),filter_1.filter(not_1.not(t,r))(e)]}}partition$1.partition=partition;var race$1={},__read$7=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$2=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},argsOrArgArray_1=(Object.defineProperty(race$1,"__esModule",{value:!0}),race$1.race=void 0,argsOrArgArray$1),raceWith_1=raceWith$1;function race(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return raceWith_1.raceWith.apply(void 0,__spreadArray$2([],__read$7(argsOrArgArray_1.argsOrArgArray(e))))}race$1.race=race,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=e.merge=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.concat=e.combineLatestWith=e.combineLatest=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=void 0,e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.race=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.partition=e.pairwise=e.onErrorResumeNext=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=void 0,e.zipWith=e.zipAll=e.zip=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=void 0;var t=audit$1,r=(Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return t.audit}}),auditTime$1),n=(Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return r.auditTime}}),buffer$2),o=(Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return n.buffer}}),bufferCount$1),i=(Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return o.bufferCount}}),bufferTime$1),a=(Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return i.bufferTime}}),bufferToggle$1),s=(Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return a.bufferToggle}}),bufferWhen$1),u=(Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return s.bufferWhen}}),catchError$1),c=(Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return u.catchError}}),combineAll),l=(Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return c.combineAll}}),combineLatestAll$1),f=(Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return l.combineLatestAll}}),combineLatest$1),_=(Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return f.combineLatest}}),combineLatestWith$1),p=(Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return _.combineLatestWith}}),concat$1),d=(Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return p.concat}}),concatAll$1),b=(Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return d.concatAll}}),concatMap$1),m=(Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return b.concatMap}}),concatMapTo$1),h=(Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return m.concatMapTo}}),concatWith$1),y=(Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return h.concatWith}}),connect$1),v=(Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return y.connect}}),count$1),g=(Object.defineProperty(e,"count",{enumerable:!0,get:function(){return v.count}}),debounce$1),$=(Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return g.debounce}}),debounceTime$1),O=(Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return $.debounceTime}}),defaultIfEmpty$1),E=(Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return O.defaultIfEmpty}}),delay$1),T=(Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return E.delay}}),delayWhen$1),S=(Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return T.delayWhen}}),dematerialize$1),w=(Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return S.dematerialize}}),distinct$1),P=(Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return w.distinct}}),distinctUntilChanged$1),j=(Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return P.distinctUntilChanged}}),distinctUntilKeyChanged$1),C=(Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return j.distinctUntilKeyChanged}}),elementAt$1),R=(Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return C.elementAt}}),endWith$1),A=(Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return R.endWith}}),every$1),I=(Object.defineProperty(e,"every",{enumerable:!0,get:function(){return A.every}}),exhaust),k=(Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return I.exhaust}}),exhaustAll$1),x=(Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return k.exhaustAll}}),exhaustMap$1),N=(Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return x.exhaustMap}}),expand$1),D=(Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return N.expand}}),filter$1),L=(Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return D.filter}}),finalize$1),M=(Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return L.finalize}}),find$1),F=(Object.defineProperty(e,"find",{enumerable:!0,get:function(){return M.find}}),findIndex$1),U=(Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return F.findIndex}}),first$1),G=(Object.defineProperty(e,"first",{enumerable:!0,get:function(){return U.first}}),groupBy$1),B=(Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return G.groupBy}}),ignoreElements$1),V=(Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return B.ignoreElements}}),isEmpty$1),W=(Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return V.isEmpty}}),last$1),q=(Object.defineProperty(e,"last",{enumerable:!0,get:function(){return W.last}}),map$1),H=(Object.defineProperty(e,"map",{enumerable:!0,get:function(){return q.map}}),mapTo$1),z=(Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return H.mapTo}}),materialize$1),Y=(Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return z.materialize}}),max$1),K=(Object.defineProperty(e,"max",{enumerable:!0,get:function(){return Y.max}}),merge$1),Z=(Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return K.merge}}),mergeAll$1),Q=(Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return Z.mergeAll}}),flatMap),X=(Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return Q.flatMap}}),mergeMap$1),J=(Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return X.mergeMap}}),mergeMapTo$1),ee=(Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return J.mergeMapTo}}),mergeScan$1),te=(Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return ee.mergeScan}}),mergeWith$1),re=(Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return te.mergeWith}}),min$1),ne=(Object.defineProperty(e,"min",{enumerable:!0,get:function(){return re.min}}),multicast$1),oe=(Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return ne.multicast}}),observeOn$1),ie=(Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return oe.observeOn}}),onErrorResumeNextWith$1),ae=(Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return ie.onErrorResumeNext}}),pairwise$1),se=(Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return ae.pairwise}}),partition$1),ue=(Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return se.partition}}),pluck$1),ce=(Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return ue.pluck}}),publish$1),le=(Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return ce.publish}}),publishBehavior$1),fe=(Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return le.publishBehavior}}),publishLast$1),_e=(Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return fe.publishLast}}),publishReplay$1),pe=(Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return _e.publishReplay}}),race$1),de=(Object.defineProperty(e,"race",{enumerable:!0,get:function(){return pe.race}}),raceWith$1),be=(Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return de.raceWith}}),reduce$1),me=(Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return be.reduce}}),repeat$1),he=(Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return me.repeat}}),repeatWhen$1),ye=(Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return he.repeatWhen}}),retry$1),ve=(Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return ye.retry}}),retryWhen$1),ge=(Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return ve.retryWhen}}),refCount$1),$e=(Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return ge.refCount}}),sample$1),Oe=(Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return $e.sample}}),sampleTime$1),Ee=(Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return Oe.sampleTime}}),scan$1),Te=(Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return Ee.scan}}),sequenceEqual$1),Se=(Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return Te.sequenceEqual}}),share$1),we=(Object.defineProperty(e,"share",{enumerable:!0,get:function(){return Se.share}}),shareReplay$1),Pe=(Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return we.shareReplay}}),single$1),je=(Object.defineProperty(e,"single",{enumerable:!0,get:function(){return Pe.single}}),skip$1),Ce=(Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return je.skip}}),skipLast$1),Re=(Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return Ce.skipLast}}),skipUntil$1),Ae=(Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return Re.skipUntil}}),skipWhile$1),Ie=(Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return Ae.skipWhile}}),startWith$1),ke=(Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return Ie.startWith}}),subscribeOn$1),xe=(Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return ke.subscribeOn}}),switchAll$1),Ne=(Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return xe.switchAll}}),switchMap$1),De=(Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return Ne.switchMap}}),switchMapTo$1),Le=(Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return De.switchMapTo}}),switchScan$1),Me=(Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return Le.switchScan}}),take$1),Fe=(Object.defineProperty(e,"take",{enumerable:!0,get:function(){return Me.take}}),takeLast$1),Ue=(Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return Fe.takeLast}}),takeUntil$1),Ge=(Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return Ue.takeUntil}}),takeWhile$1),Be=(Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return Ge.takeWhile}}),tap$1),Ve=(Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return Be.tap}}),throttle$1),We=(Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return Ve.throttle}}),throttleTime$1),qe=(Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return We.throttleTime}}),throwIfEmpty$1),He=(Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return qe.throwIfEmpty}}),timeInterval$1),ze=(Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return He.timeInterval}}),timeout),Ye=(Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return ze.timeout}}),timeoutWith$1),Ke=(Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Ye.timeoutWith}}),timestamp$1),Ze=(Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return Ke.timestamp}}),toArray$1),Qe=(Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return Ze.toArray}}),window$2),Xe=(Object.defineProperty(e,"window",{enumerable:!0,get:function(){return Qe.window}}),windowCount$1),Je=(Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return Xe.windowCount}}),windowTime$1),et=(Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return Je.windowTime}}),windowToggle$1),tt=(Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return et.windowToggle}}),windowWhen$1),rt=(Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return tt.windowWhen}}),withLatestFrom$1),nt=(Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return rt.withLatestFrom}}),zip$1),ot=(Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return nt.zip}}),zipAll$1),it=(Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return ot.zipAll}}),zipWith$1);Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return it.zipWith}})}(operators);var resultRx={},__awaiter$8=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$8=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},neo4j_driver_core_1$M=(Object.defineProperty(resultRx,"__esModule",{value:!0}),lib$1),rxjs_1$3=cjs,operators_1$2=operators,States={READY:0,STREAMING:1,COMPLETED:2},RxResult=function(){function o(e,t){e=e.pipe((0,operators_1$2.publishReplay)(1),(0,operators_1$2.refCount)());this._result=e,this._keys=e.pipe((0,operators_1$2.mergeMap)(function(e){return(0,rxjs_1$3.from)(e.keys())}),(0,operators_1$2.publishReplay)(1),(0,operators_1$2.refCount)()),this._records=void 0,this._controls=new StreamControl,this._summary=new rxjs_1$3.ReplaySubject,this._state=t||States.READY}return o.prototype.keys=function(){return this._keys},o.prototype.records=function(){var r=this,e=this._result.pipe((0,operators_1$2.mergeMap)(function(t){return new rxjs_1$3.Observable(function(e){return r._startStreaming({result:t,recordsObserver:e})})}));return e.push=function(){return r._push()},e},o.prototype.consume=function(){var r=this;return this._result.pipe((0,operators_1$2.mergeMap)(function(t){return new rxjs_1$3.Observable(function(e){return r._startStreaming({result:t,summaryObserver:e})})}))},o.prototype.pause=function(){this._controls.pause()},o.prototype.resume=function(){return this._controls.resume()},o.prototype.push=function(){return this._controls.push()},o.prototype._startStreaming=function(e){var e=void 0===e?{}:e,t=e.result,r=e.recordsObserver,r=void 0===r?null:r,e=e.summaryObserver,e=void 0===e?null:e,n=[];return e&&n.push(this._summary.subscribe(e)),this._state<States.STREAMING?(this._state=States.STREAMING,this._setupRecordsStream(t),r?n.push(this._records.subscribe(r)):t._cancel(),n.push({unsubscribe:function(){t._cancel&&t._cancel()}})):r&&r.error((0,neo4j_driver_core_1$M.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){n.forEach(function(e){return e.unsubscribe()})}},o.prototype._toObservable=function(){var n=this;return new rxjs_1$3.Observable(function(r){n._result.subscribe({complete:function(){return r.complete()},next:function(e){return r.next(new o((t=e,new rxjs_1$3.Observable(function(e){e.next(t),e.complete()}))),n._state);var t},error:function(e){return r.error(e)}})})},o.prototype._setupRecordsStream=function(n){var t=this;return this._records||(this._records=createFullyControlledSubject(n[Symbol.asyncIterator](),{complete:function(){return __awaiter$8(t,void 0,void 0,function(){var t,r;return __generator$8(this,function(e){switch(e.label){case 0:return this._state=States.COMPLETED,r=(t=this._summary).next,[4,n.summary()];case 1:return r.apply(t,[e.sent()]),this._summary.complete(),[2]}})})},error:function(e){t._state=States.COMPLETED,t._summary.error(e)}},this._controls),this._records)},o}();function createFullyControlledSubject(o,i,a){var e=this,s=(void 0===a&&(a=new StreamControl),new rxjs_1$3.Subject),u=function(n){return __awaiter$8(e,void 0,void 0,function(){var t,r;return __generator$8(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),a.pushing=!0,[4,n];case 1:return t=e.sent(),r=t.done,t=t.value,r?(s.complete(),i.complete()):(s.next(t),a.paused||u(o.next()).catch(function(){})),[3,4];case 2:return r=e.sent(),s.error(r),i.error(r),[3,4];case 3:return a.pushing=!1,[7];case 4:return[2]}})})};function t(t){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(e){switch(e.label){case 0:return[4,u(o.next(t))];case 1:return e.sent(),[2]}})})}return(a.pusher=t)(),s}resultRx.default=RxResult;var StreamControl=function(){function e(e){void 0===e&&(e=function(){return __awaiter$8(t,void 0,void 0,function(){return __generator$8(this,function(e){return[2]})})});var t=this;this._paused=!1,this._pushing=!1,this._push=e}return e.prototype.pause=function(){this._paused=!0},Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushing",{get:function(){return this._pushing},set:function(e){this._pushing=e},enumerable:!1,configurable:!0}),e.prototype.resume=function(){return __awaiter$8(this,void 0,void 0,function(){var t;return __generator$8(this,function(e){switch(e.label){case 0:return t=this._paused,this._paused=!1,!t||this._pushing?[3,2]:[4,this._push()];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.push=function(){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(e){switch(e.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,e.sent()]}})})},Object.defineProperty(e.prototype,"pusher",{get:function(){return this._push},set:function(e){this._push=e},enumerable:!1,configurable:!0}),e}(),transactionRx={},__importDefault$T=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},rxjs_1$2=(Object.defineProperty(transactionRx,"__esModule",{value:!0}),cjs),result_rx_1$1=__importDefault$T(resultRx),RxTransaction=(__importDefault$T(lib$1),function(){function e(e){this._txc=e}return e.prototype.run=function(e,r){var n=this;return new result_rx_1$1.default(new rxjs_1$2.Observable(function(t){try{t.next(n._txc.run(e,r)),t.complete()}catch(e){t.error(e)}return function(){}}))},e.prototype.commit=function(){var e=this;return new rxjs_1$2.Observable(function(t){e._txc.commit().then(function(){t.complete()}).catch(function(e){return t.error(e)})})},e.prototype.rollback=function(){var e=this;return new rxjs_1$2.Observable(function(t){e._txc.rollback().then(function(){t.complete()}).catch(function(e){return t.error(e)})})},e.prototype.isOpen=function(){return this._txc.isOpen()},e.prototype.close=function(){var e=this;return new rxjs_1$2.Observable(function(t){e._txc.close().then(function(){t.complete()}).catch(function(e){return t.error(e)})})},e}()),transactionManagedRx=(transactionRx.default=RxTransaction,{}),__importDefault$S=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},RxManagedTransaction=(Object.defineProperty(transactionManagedRx,"__esModule",{value:!0}),__importDefault$S(resultRx),__importDefault$S(transactionRx),function(){function t(e){e=e.run;this._run=e}return t.fromTransaction=function(e){return new t({run:e.run.bind(e)})},t.prototype.run=function(e,t){return this._run(e,t)},t}()),retryLogicRx=(transactionManagedRx.default=RxManagedTransaction,{}),neo4j_driver_core_1$L=(Object.defineProperty(retryLogicRx,"__esModule",{value:!0}),lib$1),rxjs_1$1=cjs,operators_1$1=operators,SERVICE_UNAVAILABLE$5=(neo4j_driver_core_1$L.internal.logger.Logger,neo4j_driver_core_1$L.error.SERVICE_UNAVAILABLE),DEFAULT_MAX_RETRY_TIME_MS=3e4,DEFAULT_INITIAL_RETRY_DELAY_MS=1e3,DEFAULT_RETRY_DELAY_MULTIPLIER=2,DEFAULT_RETRY_DELAY_JITTER_FACTOR=.2,RxRetryLogic=function(){function e(e){var e=void 0===e?{}:e,t=e.maxRetryTimeout,r=e.initialDelay,r=void 0===r?DEFAULT_INITIAL_RETRY_DELAY_MS:r,n=e.delayMultiplier,n=void 0===n?DEFAULT_RETRY_DELAY_MULTIPLIER:n,o=e.delayJitter,o=void 0===o?DEFAULT_RETRY_DELAY_JITTER_FACTOR:o,e=e.logger,e=void 0===e?null:e;this._maxRetryTimeout=valueOrDefault(void 0===t?DEFAULT_MAX_RETRY_TIME_MS:t,DEFAULT_MAX_RETRY_TIME_MS),this._initialDelay=valueOrDefault(r,DEFAULT_INITIAL_RETRY_DELAY_MS),this._delayMultiplier=valueOrDefault(n,DEFAULT_RETRY_DELAY_MULTIPLIER),this._delayJitter=valueOrDefault(o,DEFAULT_RETRY_DELAY_JITTER_FACTOR),this._logger=e}return e.prototype.retry=function(e){var s=this;return e.pipe((0,operators_1$1.retryWhen)(function(e){var n=[],o=Date.now(),i=1,a=s._initialDelay;return e.pipe((0,operators_1$1.mergeMap)(function(e){if(!(0,neo4j_driver_core_1$L.isRetriableError)(e))return(0,rxjs_1$1.throwError)(function(){return e});var t;if(n.push(e),2<=i&&Date.now()-o>=s._maxRetryTimeout)return(t=(0,neo4j_driver_core_1$L.newError)("Failed after retried for ".concat(i," times in ").concat(s._maxRetryTimeout," ms. Make sure that your database is online and retry again."),SERVICE_UNAVAILABLE$5)).seenErrors=n,(0,rxjs_1$1.throwError)(function(){return t});var r=s._computeNextDelay(a);return a*=s._delayMultiplier,i++,s._logger&&s._logger.warn("Transaction failed and will be retried in ".concat(r)),(0,rxjs_1$1.of)(1).pipe((0,operators_1$1.delay)(r))}))}))},e.prototype._computeNextDelay=function(e){var t=e*this._delayJitter;return e-t+2*t*Math.random()},e}();function valueOrDefault(e,t){return e||0===e?e:t}retryLogicRx.default=RxRetryLogic;var __importDefault$R=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},rxjs_1=(Object.defineProperty(sessionRx,"__esModule",{value:!0}),cjs),operators_1=operators,result_rx_1=__importDefault$R(resultRx),neo4j_driver_core_1$K=lib$1,transaction_rx_1=__importDefault$R(transactionRx),transaction_managed_rx_1=__importDefault$R(transactionManagedRx),retry_logic_rx_1=__importDefault$R(retryLogicRx),_a$f=neo4j_driver_core_1$K.internal.constants,ACCESS_MODE_READ$1=_a$f.ACCESS_MODE_READ,ACCESS_MODE_WRITE$1=_a$f.ACCESS_MODE_WRITE,TELEMETRY_APIS=_a$f.TELEMETRY_APIS,TxConfig$3=neo4j_driver_core_1$K.internal.txConfig.TxConfig,RxSession=function(){function e(e){var e=void 0===e?{}:e,t=e.session,r=e.config,e=e.log;this._session=t,this._retryLogic=_createRetryLogic(r),this._log=e}return e.prototype.run=function(e,r,n){var o=this;return new result_rx_1.default(new rxjs_1.Observable(function(t){try{t.next(o._session.run(e,r,n)),t.complete()}catch(e){t.error(e)}return function(){}}))},e.prototype.beginTransaction=function(e){return this._beginTransaction(this._session._mode,e,{api:TELEMETRY_APIS.UNMANAGED_TRANSACTION})},e.prototype.readTransaction=function(e,t){return this._runTransaction(ACCESS_MODE_READ$1,e,t)},e.prototype.writeTransaction=function(e,t){return this._runTransaction(ACCESS_MODE_WRITE$1,e,t)},e.prototype.executeRead=function(e,t){return this._executeInTransaction(ACCESS_MODE_READ$1,e,t)},e.prototype.executeWrite=function(e,t){return this._executeInTransaction(ACCESS_MODE_WRITE$1,e,t)},e.prototype._executeInTransaction=function(e,t,r){return this._runTransaction(e,t,r,function(e){return new transaction_managed_rx_1.default({run:e.run.bind(e)})})},e.prototype.close=function(){var e=this;return new rxjs_1.Observable(function(t){e._session.close().then(function(){t.complete()}).catch(function(e){return t.error(e)})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},e.prototype._beginTransaction=function(e,t,r){var n=this,o=TxConfig$3.empty();return t&&(o=new TxConfig$3(t,this._log)),new rxjs_1.Observable(function(t){try{n._session._beginTransaction(e,o,r).then(function(e){t.next(new transaction_rx_1.default(e)),t.complete()}).catch(function(e){return t.error(e)})}catch(e){t.error(e)}return function(){}})},e.prototype._runTransaction=function(e,r,t,n){var o=this,i=(void 0===n&&(n=function(e){return e}),TxConfig$3.empty()),a=(t&&(i=new TxConfig$3(t)),{apiTelemetryConfig:{api:TELEMETRY_APIS.MANAGED_TRANSACTION,onTelemetrySuccess:function(){a.apiTelemetryConfig=void 0}}});return this._retryLogic.retry((0,rxjs_1.of)(1).pipe((0,operators_1.mergeMap)(function(){return o._beginTransaction(e,i,a.apiTelemetryConfig)}),(0,operators_1.mergeMap)(function(t){return(0,rxjs_1.defer)(function(){try{return r(n(t))}catch(e){return(0,rxjs_1.throwError)(function(){return e})}}).pipe((0,operators_1.catchError)(function(e){return t.rollback().pipe((0,operators_1.concatWith)((0,rxjs_1.throwError)(function(){return e})))}),(0,operators_1.concatWith)(t.commit()))})))},e}();function _createRetryLogic(e){e=e&&e.maxTransactionRetryTime?e.maxTransactionRetryTime:null;return new retry_logic_rx_1.default({maxRetryTimeout:e})}sessionRx.default=RxSession;var __extends$w=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__importDefault$Q=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},neo4j_driver_core_1$J=(Object.defineProperty(driver$1,"__esModule",{value:!0}),driver$1.WRITE=driver$1.READ=driver$1.Driver=void 0,lib$1),session_rx_1=__importDefault$Q(sessionRx),FETCH_ALL$7=neo4j_driver_core_1$J.internal.constants.FETCH_ALL,READ$2=neo4j_driver_core_1$J.driver.READ,WRITE$2=neo4j_driver_core_1$J.driver.WRITE,Driver=(driver$1.READ=READ$2,driver$1.WRITE=WRITE$2,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$w(t,e),t.prototype.rxSession=function(e){var e=void 0===e?{}:e,t=e.defaultAccessMode,r=e.bookmarks,n=e.database,o=e.fetchSize,i=e.impersonatedUser,a=e.bookmarkManager,s=e.notificationFilter,e=e.auth;return new session_rx_1.default({session:this._newSession({defaultAccessMode:void 0===t?WRITE$2:t,bookmarkOrBookmarks:r,database:void 0===n?"":n,impersonatedUser:i,auth:e,reactive:!1,fetchSize:validateFetchSizeValue(o,this._config.fetchSize),bookmarkManager:a,notificationFilter:s,log:this._log}),config:this._config,log:this._log})},t}(neo4j_driver_core_1$J.Driver));function validateFetchSizeValue(e,t){e=parseInt(e,10);if(0<e||e===FETCH_ALL$7)return e;if(0===e||e<0)throw new Error("The fetch size can only be a positive value or ".concat(FETCH_ALL$7," for ALL. However fetchSize = ").concat(e));return t}driver$1.Driver=Driver,driver$1.default=Driver;for(var version$1={},lib=(Object.defineProperty(version$1,"__esModule",{value:!0}),version$1.default="5.28.2",{}),loadBalancing={},loadBalancingStrategy={},LoadBalancingStrategy=(Object.defineProperty(loadBalancingStrategy,"__esModule",{value:!0}),function(){function e(){}return e.prototype.selectReader=function(e){throw new Error("Abstract function")},e.prototype.selectWriter=function(e){throw new Error("Abstract function")},e}()),leastConnectedLoadBalancingStrategy=(loadBalancingStrategy.default=LoadBalancingStrategy,{}),roundRobinArrayIndex={},RoundRobinArrayIndex=(Object.defineProperty(roundRobinArrayIndex,"__esModule",{value:!0}),function(){function e(e){this._offset=e||0}return e.prototype.next=function(e){if(0===e)return-1;var t=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),t%e},e}()),__extends$v=(roundRobinArrayIndex.default=RoundRobinArrayIndex,commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__importDefault$P=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},round_robin_array_index_1=(Object.defineProperty(leastConnectedLoadBalancingStrategy,"__esModule",{value:!0}),__importDefault$P(roundRobinArrayIndex)),load_balancing_strategy_1$1=__importDefault$P(loadBalancingStrategy),LeastConnectedLoadBalancingStrategy=function(r){function e(e){var t=r.call(this)||this;return t._readersIndex=new round_robin_array_index_1.default,t._writersIndex=new round_robin_array_index_1.default,t._connectionPool=e,t}return __extends$v(e,r),e.prototype.selectReader=function(e){return this._select(e,this._readersIndex)},e.prototype.selectWriter=function(e){return this._select(e,this._writersIndex)},e.prototype._select=function(e,t){var r=e.length;if(0===r)return null;var n=t.next(r),o=n,i=null,a=Number.MAX_SAFE_INTEGER;do{var s=e[o],u=this._connectionPool.activeResourceCount(s)}while(u<a&&(i=s,a=u),o===r-1?o=0:o++,o!==n);return i},e}(load_balancing_strategy_1$1.default),__importDefault$O=(leastConnectedLoadBalancingStrategy.default=LeastConnectedLoadBalancingStrategy,commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}}),load_balancing_strategy_1=(Object.defineProperty(loadBalancing,"__esModule",{value:!0}),loadBalancing.LeastConnectedLoadBalancingStrategy=loadBalancing.LoadBalancingStrategy=void 0,__importDefault$O(loadBalancingStrategy)),least_connected_load_balancing_strategy_1=(loadBalancing.LoadBalancingStrategy=load_balancing_strategy_1.default,__importDefault$O(leastConnectedLoadBalancingStrategy)),bolt=(loadBalancing.LeastConnectedLoadBalancingStrategy=least_connected_load_balancing_strategy_1.default,loadBalancing.default=least_connected_load_balancing_strategy_1.default,{}),handshake$1={},channel={},browser={},browserChannel={},channelBuf={},buffer={},base64Js={},lookup=(base64Js.byteLength=byteLength,base64Js.toByteArray=toByteArray,base64Js.fromByteArray=fromByteArray,[]),revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("="),t=(e=-1===e?t:e)===t?0:4-e%4;return[e,t]}function byteLength(e){var e=getLens(e),t=e[0],e=e[1];return 3*(t+e)/4-e}function _byteLength(e,t,r){return 3*(t+r)/4-r}function toByteArray(e){for(var t,r=getLens(e),n=r[0],r=r[1],o=new Arr(_byteLength(e,n,r)),i=0,a=0<r?n-4:n,s=0;s<a;s+=4)t=revLookup[e.charCodeAt(s)]<<18|revLookup[e.charCodeAt(s+1)]<<12|revLookup[e.charCodeAt(s+2)]<<6|revLookup[e.charCodeAt(s+3)],o[i++]=t>>16&255,o[i++]=t>>8&255,o[i++]=255&t;return 2===r&&(t=revLookup[e.charCodeAt(s)]<<2|revLookup[e.charCodeAt(s+1)]>>4,o[i++]=255&t),1===r&&(t=revLookup[e.charCodeAt(s)]<<10|revLookup[e.charCodeAt(s+1)]<<4|revLookup[e.charCodeAt(s+2)]>>2,o[i++]=t>>8&255,o[i++]=255&t),o}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[63&e]}function encodeChunk(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(tripletToBase64(n));return o.join("")}function fromByteArray(e){for(var t,r=e.length,n=r%3,o=[],i=0,a=r-n;i<a;i+=16383)o.push(encodeChunk(e,i,a<i+16383?a:i+16383));return 1==n?(t=e[r-1],o.push(lookup[t>>2]+lookup[t<<4&63]+"==")):2==n&&(t=(e[r-2]<<8)+e[r-1],o.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")),o.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;var ieee754={read:function(e,t,r,n,o){var i,a,s=8*o-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?o-1:0,_=r?-1:1,o=e[t+f];for(f+=_,i=o&(1<<-l)-1,o>>=-l,l+=s;0<l;i=256*i+e[t+f],f+=_,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=n;0<l;a=256*a+e[t+f],f+=_,l-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(o?-1:1);a+=Math.pow(2,n),i-=c}return(o?-1:1)*a*Math.pow(2,i-n)},write:function(e,t,r,n,o,i){var a,s,u=8*i-o-1,c=(1<<u)-1,l=c>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:i-1,p=n?1:-1,i=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-a))<1&&(a--,n*=2),2<=(t+=1<=a+l?f/n:f*Math.pow(2,1-l))*n&&(a++,n/=2),c<=a+l?(s=0,a=c):1<=a+l?(s=(t*n-1)*Math.pow(2,o),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,o),a=0));8<=o;e[r+_]=255&s,_+=p,s/=256,o-=8);for(a=a<<o|s,u+=o;0<u;e[r+_]=255&a,_+=p,a/=256,u-=8);e[r+_-p]|=128*i}},buf=(!function(r){const m=base64Js,i=ieee754;var e="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=l,r.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},r.INSPECT_MAX_BYTES=50;const t=2147483647;function s(e){if(e>t)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return Object.setPrototypeOf(e,l.prototype),e}function l(e,t,r){if("number"!=typeof e)return n(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return a(e)}function n(t,r,e){if("string"==typeof t){var n=t;var o=r;"string"==typeof o&&""!==o||(o="utf8");if(!l.isEncoding(o))throw new TypeError("Unknown encoding: "+o);var i=0|_(n,o);let e=s(i);n=e.write(n,o);n!==i&&(e=e.slice(0,n));return e}if(ArrayBuffer.isView(t))return k(o=t,Uint8Array)?c((i=new Uint8Array(o)).buffer,i.byteOffset,i.byteLength):u(o);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(k(t,ArrayBuffer)||t&&k(t.buffer,ArrayBuffer))return c(t,r,e);if("undefined"!=typeof SharedArrayBuffer&&(k(t,SharedArrayBuffer)||t&&k(t.buffer,SharedArrayBuffer)))return c(t,r,e);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return l.from(n,r,e);var a=function(e){{var t,r;if(l.isBuffer(e))return t=0|f(e.length),0===(r=s(t)).length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||x(e.length)?s(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}(t);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return l.from(t[Symbol.toPrimitive]("string"),r,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(e){return o(e),s(e<0?0:0|f(e))}function u(t){var r=t.length<0?0:0|f(t.length);const n=s(r);for(let e=0;e<r;e+=1)n[e]=255&t[e];return n}function c(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,l.prototype),n}function f(e){if(e>=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function _(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||k(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return A(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(e).length;default:if(o)return n?-1:A(e).length;t=(""+t).toLowerCase(),o=!0}}function D(e,r,n){let t=!1;if((r=void 0===r||r<0?0:r)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(r>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":{var o=this;var i=r;var a=n;var s=o.length;(!i||i<0)&&(i=0);(!a||a<0||s<a)&&(a=s);let t="";for(let e=i;e<a;++e)t+=B[o[e]];return t;return}case"utf8":case"utf-8":return h(this,r,n);case"ascii":{var u=this;s=r;var c=n;let t="";c=Math.min(u.length,c);for(let e=s;e<c;++e)t+=String.fromCharCode(127&u[e]);return t;return}case"latin1":case"binary":{var l=this;i=r;var f=n;let t="";f=Math.min(l.length,f);for(let e=i;e<f;++e)t+=String.fromCharCode(l[e]);return t;return}case"base64":return p=this,b=n,0===(d=r)&&b===p.length?m.fromByteArray(p):m.fromByteArray(p.slice(d,b));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":{p=this;d=r;b=n;var _=p.slice(d,b);let t="";for(let e=0;e<_.length-1;e+=2)t+=String.fromCharCode(_[e]+256*_[e+1]);return t;return}default:if(t)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),t=!0}var p,d,b}function p(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function d(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=x(r=+r)?o?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):b(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function b(r,n,t,e,o){let i=1,a=r.length,s=n.length;if(void 0!==e&&("ucs2"===(e=String(e).toLowerCase())||"ucs-2"===e||"utf16le"===e||"utf-16le"===e)){if(r.length<2||n.length<2)return-1;i=2,a/=2,s/=2,t/=2}function u(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}let c;if(o){let e=-1;for(c=t;c<a;c++)if(u(r,c)===u(n,-1===e?0:c-e)){if(-1===e&&(e=c),c-e+1===s)return e*i}else-1!==e&&(c-=c-e),e=-1}else for(t+s>a&&(t=a-s),c=t;0<=c;c--){let t=!0;for(let e=0;e<s;e++)if(u(r,c+e)!==u(n,e)){t=!1;break}if(t)return c}return-1}function L(e,t,r,n){return I(function(t){const r=[];for(let e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}(t),e,r,n)}function M(e,t,r,n){return I(function(t,r){var n,o;const i=[];for(let e=0;e<t.length&&!((r-=2)<0);++e)o=t.charCodeAt(e),n=o>>8,o=o%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function h(a,e,t){t=Math.min(a.length,t);const r=[];let s=e;for(;s<t;){var u=a[s];let o=null,i=239<u?4:223<u?3:191<u?2:1;if(s+i<=t){let e,t,r,n;switch(i){case 1:u<128&&(o=u);break;case 2:128==(192&(e=a[s+1]))&&127<(n=(31&u)<<6|63&e)&&(o=n);break;case 3:e=a[s+1],t=a[s+2],128==(192&e)&&128==(192&t)&&2047<(n=(15&u)<<12|(63&e)<<6|63&t)&&(n<55296||57343<n)&&(o=n);break;case 4:e=a[s+1],t=a[s+2],r=a[s+3],128==(192&e)&&128==(192&t)&&128==(192&r)&&65535<(n=(15&u)<<18|(63&e)<<12|(63&t)<<6|63&r)&&n<1114112&&(o=n)}}null===o?(o=65533,i=1):65535<o&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),s+=i}{var n=r,o=n.length;if(o<=y)return String.fromCharCode.apply(String,n);let e="",t=0;for(;t<o;)e+=String.fromCharCode.apply(String,n.slice(t,t+=y));return e}}r.kMaxLength=t,(l.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1);var e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=n,Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,r){return t=t,r=r,o(e=e),!(e<=0)&&void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)},l.allocUnsafe=a,l.allocUnsafeSlow=a,l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(r,n){if(k(r,Uint8Array)&&(r=l.from(r,r.offset,r.byteLength)),k(n,Uint8Array)&&(n=l.from(n,n.offset,n.byteLength)),!l.isBuffer(r)||!l.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===n)return 0;let o=r.length,i=n.length;for(let e=0,t=Math.min(o,i);e<t;++e)if(r[e]!==n[e]){o=r[e],i=n[e];break}return o<i?-1:i<o?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=l.allocUnsafe(e);let o=0;for(r=0;r<t.length;++r){let e=t[r];if(k(e,Uint8Array))o+e.length>n.length?(e=l.isBuffer(e)?e:l.from(e)).copy(n,o):Uint8Array.prototype.set.call(n,e,o);else{if(!l.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,o)}o+=e.length}return n},l.byteLength=_,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)p(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},l.prototype.toLocaleString=l.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?h(this,0,e):D.apply(this,arguments)},l.prototype.equals=function(e){if(l.isBuffer(e))return this===e||0===l.compare(this,e);throw new TypeError("Argument must be a Buffer")},l.prototype.inspect=function(){let e="";var t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},e&&(l.prototype[e]=l.prototype.inspect),l.prototype.compare=function(e,t,r,n,o){if(k(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(o<=n&&r<=t)return 0;if(o<=n)return-1;if(r<=t)return 1;if(this===e)return 0;let i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0);var s=Math.min(i,a),u=this.slice(n,o),c=e.slice(t,r);for(let e=0;e<s;++e)if(u[e]!==c[e]){i=u[e],a=c[e];break}return i<a?-1:a<i?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return d(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return d(this,e,t,r,!1)},l.prototype.write=function(t,r,n,e){if(void 0===r)e="utf8",n=this.length,r=0;else if(void 0===n&&"string"==typeof r)e=r,n=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r>>>=0,isFinite(n)?(n>>>=0,void 0===e&&(e="utf8")):(e=n,n=void 0)}var o,i,a,s=this.length-r;if((void 0===n||s<n)&&(n=s),0<t.length&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");e=e||"utf8";let u=!1;for(;;)switch(e){case"hex":{var c=this;var l=t;var f=r;var _=n;f=Number(f)||0;var p=c.length-f;(!_||p<(_=Number(_)))&&(_=p),(p=l.length)/2<_&&(_=p/2);let e;for(e=0;e<_;++e){var d=parseInt(l.substr(2*e,2),16);if(x(d))return e;c[f+e]=d}return e;return}case"utf8":case"utf-8":return p=r,a=n,I(A(t,(i=this).length-p),i,p,a);case"ascii":case"latin1":case"binary":return L(this,t,r,n);case"base64":return i=this,a=r,o=n,I(G(t),i,a,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,r,n);default:if(u)throw new TypeError("Unknown encoding: "+e);e=(""+e).toLowerCase(),u=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const y=4096;function v(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function g(e,t,r,n,o,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function $(e,t,r,n,o){F(t,n,o,e,r,7);n=Number(t&BigInt(4294967295)),e[r++]=n,e[r++]=n>>=8,e[r++]=n>>=8,e[r++]=n>>=8,o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,e[r++]=o>>=8,e[r++]=o>>=8,e[r++]=o>>=8,r}function O(e,t,r,n,o){F(t,n,o,e,r,7);n=Number(t&BigInt(4294967295)),e[r+7]=n,e[r+6]=n>>=8,e[r+5]=n>>=8,e[r+4]=n>>=8,o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,e[r+2]=o>>=8,e[r+1]=o>>=8,e[r]=o>>=8,r+8}function E(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function T(e,t,r,n,o){return t=+t,r>>>=0,o||E(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function S(e,t,r,n,o){return t=+t,r>>>=0,o||E(e,0,r,8),i.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){var r=this.length,r=((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),this.subarray(e,t));return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);let n=this[e+--t],o=1;for(;0<t&&(o*=256);)n+=this[e+--t]*o;return n},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=N(function(e){C(e>>>=0,"offset");var t=this[e],r=this[e+7],t=(void 0!==t&&void 0!==r||R(e,this.length-8),t+256*this[++e]+65536*this[++e]+this[++e]*2**24),e=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(t)+(BigInt(e)<<BigInt(32))}),l.prototype.readBigUInt64BE=N(function(e){C(e>>>=0,"offset");var t=this[e],r=this[e+7],t=(void 0!==t&&void 0!==r||R(e,this.length-8),t*2**24+65536*this[++e]+256*this[++e]+this[++e]),e=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(t)<<BigInt(32))+BigInt(e)}),l.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);let n=t,o=1,i=this[e+--n];for(;0<n&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||v(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},l.prototype.readInt16BE=function(e,t){e>>>=0,t||v(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=N(function(e){C(e>>>=0,"offset");var t=this[e],r=this[e+7],r=(void 0!==t&&void 0!==r||R(e,this.length-8),this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24));return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),l.prototype.readBigInt64BE=N(function(e){C(e>>>=0,"offset");var t=this[e],r=this[e+7],t=(void 0!==t&&void 0!==r||R(e,this.length-8),(t<<24)+65536*this[++e]+256*this[++e]+this[++e]);return(BigInt(t)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)}),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||v(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||v(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||v(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||v(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||g(this,e,t,r,Math.pow(2,8*r)-1,0);let o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||g(this,e,t,r,Math.pow(2,8*r)-1,0);let o=r-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+r},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=N(function(e,t=0){return $(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=N(function(e,t=0){return O(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(e,t,r,n){e=+e,t>>>=0,n||g(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);let o=0,i=1,a=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/i>>0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){e=+e,t>>>=0,n||g(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);let o=r-1,i=1,a=0;for(this[t+o]=255&e;0<=--o&&(i*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/i>>0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||g(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=N(function(e,t=0){return $(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=N(function(e,t=0){return O(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeFloatLE=function(e,t,r){return T(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return T(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return S(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return S(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var o=(n=e.length-t<n-r?e.length-t+r:n)-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var o;1===e.length&&(o=e.charCodeAt(0),("utf8"===n&&o<128||"latin1"===n)&&(e=o))}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0;let i;if("number"==typeof(e=e||0))for(i=t;i<r;++i)this[i]=e;else{var a=l.isBuffer(e)?e:l.from(e,n),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=a[i%s]}return this};const w={};function P(e,t,r){w[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=this.name+` [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return this.name+` [${e}]: `+this.message}}}function j(e){let t="",r=e.length;for(var n="-"===e[0]?1:0;r>=4+n;r-=3)t="_"+e.slice(r-3,r)+t;return""+e.slice(0,r)+t}function F(t,r,n,e,o,i){if(n<t||t<r){var a="bigint"==typeof r?"n":"";let e;throw e=3<i?0===r||r===BigInt(0)?`>= 0${a} and < 2${a} ** `+8*(i+1)+a:`>= -(2${a} ** ${8*(i+1)-1}${a}) and < 2 ** `+(8*(i+1)-1)+a:`>= ${r}${a} and <= `+n+a,new w.ERR_OUT_OF_RANGE("value",e,t)}r=e,n=i,C(a=o,"offset"),void 0!==r[a]&&void 0!==r[a+n]||R(a,r.length-(n+1))}function C(e,t){if("number"!=typeof e)throw new w.ERR_INVALID_ARG_TYPE(t,"number",e)}function R(e,t,r){if(Math.floor(e)!==e)throw C(e,r),new w.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new w.ERR_BUFFER_OUT_OF_BOUNDS;throw new w.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= `+t,e)}P("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?e+" is outside of buffer bounds":"Attempt to access memory outside buffer bounds"},RangeError),P("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type `+typeof t},TypeError),P("ERR_OUT_OF_RANGE",function(e,t,r){e=`The value of "${e}" is out of range.`;let n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=j(String(r)):"bigint"==typeof r&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=j(n)),n+="n"),e+=` It must be ${t}. Received `+n},RangeError);const U=/[^+/0-9A-Za-z-_]/g;function A(t,r){r=r||1/0;let n;var o=t.length;let i=null;const a=[];for(let e=0;e<o;++e){if(55295<(n=t.charCodeAt(e))&&n<57344){if(!i){if(56319<n){-1<(r-=3)&&a.push(239,191,189);continue}if(e+1===o){-1<(r-=3)&&a.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(r-=3)&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(r-=3)&&a.push(239,191,189);if(i=null,n<128){if(--r<0)break;a.push(n)}else if(n<2048){if((r-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((r-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function G(e){return m.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function I(e,t,r,n){let o;for(o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function k(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function x(e){return e!=e}const B=function(){var r="0123456789abcdef";const n=new Array(256);for(let t=0;t<16;++t){var o=16*t;for(let e=0;e<16;++e)n[o+e]=r[t]+r[e]}return n}();function N(e){return"undefined"==typeof BigInt?V:e}function V(){throw new Error("BigInt not supported")}}(buffer),{}),baseBuf={},__extends$u=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),BaseBuffer=(Object.defineProperty(baseBuf,"__esModule",{value:!0}),function(){function e(e){this.position=0,this.length=e}return e.prototype.getUInt8=function(e){throw new Error("Not implemented")},e.prototype.getInt8=function(e){throw new Error("Not implemented")},e.prototype.getFloat64=function(e){throw new Error("Not implemented")},e.prototype.getVarInt=function(e){throw new Error("Not implemented")},e.prototype.putUInt8=function(e,t){throw new Error("Not implemented")},e.prototype.putInt8=function(e,t){throw new Error("Not implemented")},e.prototype.putFloat64=function(e,t){throw new Error("Not implemented")},e.prototype.getInt16=function(e){return this.getInt8(e)<<8|this.getUInt8(e+1)},e.prototype.getUInt16=function(e){return this.getUInt8(e)<<8|this.getUInt8(e+1)},e.prototype.getInt32=function(e){return this.getInt8(e)<<24|this.getUInt8(e+1)<<16|this.getUInt8(e+2)<<8|this.getUInt8(e+3)},e.prototype.getUInt32=function(e){return this.getUInt8(e)<<24|this.getUInt8(e+1)<<16|this.getUInt8(e+2)<<8|this.getUInt8(e+3)},e.prototype.getInt64=function(e){return this.getInt8(e)<<56|this.getUInt8(e+1)<<48|this.getUInt8(e+2)<<40|this.getUInt8(e+3)<<32|this.getUInt8(e+4)<<24|this.getUInt8(e+5)<<16|this.getUInt8(e+6)<<8|this.getUInt8(e+7)},e.prototype.getSlice=function(e,t){return new SliceBuffer(e,t,this)},e.prototype.putInt16=function(e,t){this.putInt8(e,t>>8),this.putUInt8(e+1,255&t)},e.prototype.putUInt16=function(e,t){this.putUInt8(e,t>>8&255),this.putUInt8(e+1,255&t)},e.prototype.putInt32=function(e,t){this.putInt8(e,t>>24),this.putUInt8(e+1,t>>16&255),this.putUInt8(e+2,t>>8&255),this.putUInt8(e+3,255&t)},e.prototype.putUInt32=function(e,t){this.putUInt8(e,t>>24&255),this.putUInt8(e+1,t>>16&255),this.putUInt8(e+2,t>>8&255),this.putUInt8(e+3,255&t)},e.prototype.putInt64=function(e,t){this.putInt8(e,t>>48),this.putUInt8(e+1,t>>42&255),this.putUInt8(e+2,t>>36&255),this.putUInt8(e+3,t>>30&255),this.putUInt8(e+4,t>>24&255),this.putUInt8(e+5,t>>16&255),this.putUInt8(e+6,t>>8&255),this.putUInt8(e+7,255&t)},e.prototype.putVarInt=function(e,t){for(var r=0;1<t;){var n=t%128;128<=t&&(n+=128),t/=128,this.putUInt8(e+r,n),r+=1}return r},e.prototype.putBytes=function(e,t){for(var r=0,n=t.remaining();r<n;r++)this.putUInt8(e+r,t.readUInt8())},e.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},e.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},e.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},e.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},e.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},e.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},e.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},e.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},e.prototype.readVarInt=function(){var e=this.getVarInt(this.position);return this._updatePos(e.length),e.value},e.prototype.writeUInt8=function(e){this.putUInt8(this._updatePos(1),e)},e.prototype.writeInt8=function(e){this.putInt8(this._updatePos(1),e)},e.prototype.writeInt16=function(e){this.putInt16(this._updatePos(2),e)},e.prototype.writeInt32=function(e){this.putInt32(this._updatePos(4),e)},e.prototype.writeUInt32=function(e){this.putUInt32(this._updatePos(4),e)},e.prototype.writeInt64=function(e){this.putInt64(this._updatePos(8),e)},e.prototype.writeFloat64=function(e){this.putFloat64(this._updatePos(8),e)},e.prototype.writeVarInt=function(e){e=this.putVarInt(this.position,e);this._updatePos(e)},e.prototype.writeBytes=function(e){this.putBytes(this._updatePos(e.remaining()),e)},e.prototype.readSlice=function(e){return this.getSlice(this._updatePos(e),e)},e.prototype._updatePos=function(e){var t=this.position;return this.position+=e,t},e.prototype.remaining=function(){return this.length-this.position},e.prototype.hasRemaining=function(){return 0<this.remaining()},e.prototype.reset=function(){this.position=0},e.prototype.toString=function(){return this.constructor.name+"( position="+this.position+" )\n  "+this.toHex()},e.prototype.toHex=function(){for(var e="",t=0;t<this.length;t++){var r=this.getUInt8(t).toString(16);e+=r=1===r.length?"0"+r:r,t!==this.length-1&&(e+=" ")}return e},e}()),SliceBuffer=function(n){function e(e,t,r){t=n.call(this,t)||this;return t._start=e,t._inner=r,t}return __extends$u(e,n),e.prototype.putUInt8=function(e,t){this._inner.putUInt8(this._start+e,t)},e.prototype.getUInt8=function(e){return this._inner.getUInt8(this._start+e)},e.prototype.putInt8=function(e,t){this._inner.putInt8(this._start+e,t)},e.prototype.putFloat64=function(e,t){this._inner.putFloat64(this._start+e,t)},e.prototype.getInt8=function(e){return this._inner.getInt8(this._start+e)},e.prototype.getFloat64=function(e){return this._inner.getFloat64(this._start+e)},e}(baseBuf.default=BaseBuffer),__importDefault$N=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},base_buf_1$1=(Object.defineProperty(buf,"__esModule",{value:!0}),buf.BaseBuffer=void 0,__importDefault$N(baseBuf)),__extends$t=(buf.BaseBuffer=base_buf_1$1.default,buf.default=base_buf_1$1.default,commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__importDefault$M=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},buffer_1$1=(Object.defineProperty(channelBuf,"__esModule",{value:!0}),channelBuf.alloc=void 0,__importDefault$M(buffer)),buf_1$1=__importDefault$M(buf),ChannelBuffer=function(n){function o(e){var t=this,e=newChannelJSBuffer(e);return(t=n.call(this,e.length)||this)._buffer=e,t}return __extends$t(o,n),o.prototype.getUInt8=function(e){return this._buffer.readUInt8(e)},o.prototype.getInt8=function(e){return this._buffer.readInt8(e)},o.prototype.getFloat64=function(e){return this._buffer.readDoubleBE(e)},o.prototype.getVarInt=function(e){for(var t=0,r=this._buffer.readInt8(e+t),n=r%128;1<=r/128;)n+=(r=this._buffer.readInt8(e+(t+=1)))%128;return{length:t+1,value:n}},o.prototype.putUInt8=function(e,t){this._buffer.writeUInt8(t,e)},o.prototype.putInt8=function(e,t){this._buffer.writeInt8(t,e)},o.prototype.putFloat64=function(e,t){this._buffer.writeDoubleBE(t,e)},o.prototype.putBytes=function(e,t){var r;t instanceof o?(r=Math.min(t.length-t.position,this.length-e),t._buffer.copy(this._buffer,e,t.position,t.position+r),t.position+=r):n.prototype.putBytes.call(this,e,t)},o.prototype.getSlice=function(e,t){return new o(this._buffer.slice(e,e+t))},o}(buf_1$1.default);function alloc(e){return new ChannelBuffer(e)}function newChannelJSBuffer(e){return e instanceof buffer_1$1.default.Buffer?e:"number"==typeof e&&"function"==typeof buffer_1$1.default.Buffer.alloc?buffer_1$1.default.Buffer.alloc(e):new buffer_1$1.default.Buffer(e)}channelBuf.default=ChannelBuffer,channelBuf.alloc=alloc;var __importDefault$L=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},channel_buf_1$3=(Object.defineProperty(browserChannel,"__esModule",{value:!0}),__importDefault$L(channelBuf)),neo4j_driver_core_1$I=lib$1,_a$e=neo4j_driver_core_1$I.internal.util,ENCRYPTION_OFF$1=_a$e.ENCRYPTION_OFF,ENCRYPTION_ON$1=_a$e.ENCRYPTION_ON,WS_OPEN=1,WS_CLOSED=3,WebSocketChannel=function(){function e(e,t,r){void 0===t&&(t=detectWebPageProtocol),void 0===r&&(r=function(e){return new WebSocket(e)});var n,o=this,t=(this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=e,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null,determineWebSocketScheme(e,t)),i=t.scheme,t=t.error;t?this._error=t:(this._ws=createWebSocket(i,e.address,r),this._ws.binaryType="arraybuffer",(n=this)._ws.onclose=function(e){e&&!e.wasClean&&n._handleConnectionError(),n._open=!1},this._ws.onopen=function(){n._clearConnectionTimeout();var e=n._pending;n._pending=null;for(var t=0;t<e.length;t++)n.write(e[t])},this._ws.onmessage=function(e){o._resetTimeout(),n.onmessage&&(e=new channel_buf_1$3.default(e.data),n.onmessage(e))},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout())}return e.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired)return this._error=(0,neo4j_driver_core_1$I.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),void(this.onerror&&this.onerror(this._error));this._open&&!this._timedout&&(this._error=(0,neo4j_driver_core_1$I.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},e.prototype.write=function(e){if(null!==this._pending)this._pending.push(e);else{if(!(e instanceof channel_buf_1$3.default))throw(0,neo4j_driver_core_1$I.newError)("Don't know how to send buffer: "+e);try{this._ws.send(e._buffer)}catch(e){if(this._ws.readyState===WS_OPEN)throw(0,neo4j_driver_core_1$I.newError)("unexpected failure to write.",void 0,e);this._handleConnectionError()}}},e.prototype.close=function(){var r=this;return null===this._closingPromise&&(this._closingPromise=new Promise(function(e,t){r._clearConnectionTimeout(),r._ws&&r._ws.readyState!==WS_CLOSED?(r._open=!1,r.stopReceiveTimeout(),r._ws.onclose=function(){e()},r._ws.close()):e()})),this._closingPromise},e.prototype.setupReceiveTimeout=function(e){this._receiveTimeout=e},e.prototype.stopReceiveTimeout=function(){null!==this._receiveTimeout&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,null!=this._receiveTimeoutId&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},e.prototype.startReceiveTimeout=function(){this._open&&null!==this._receiveTimeout&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},e.prototype._resetTimeout=function(){var e=this;this._receiveTimeoutStarted&&(null!==this._receiveTimeoutId&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){e._receiveTimeoutId=null,e._timedout=!0,e.stopReceiveTimeout(),e._error=(0,neo4j_driver_core_1$I.newError)("Connection lost. Server didn't respond in ".concat(e._receiveTimeout,"ms"),e._config.connectionErrorCode),e.close(),e.onerror&&e.onerror(e._error)},this._receiveTimeout))},e.prototype._setupConnectionTimeout=function(){var e,t=this,r=this._config.connectionTimeout;return r?(e=this._ws,setTimeout(function(){e.readyState!==WS_OPEN&&(t._connectionTimeoutFired=!0,e.close())},r)):null},e.prototype._clearConnectionTimeout=function(){var e=this._connectionTimeoutId;!e&&0!==e||(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(e))},e}();function createWebSocket(t,r,n){var e=t+"://"+r.asHostPort();try{return n(e)}catch(e){if(isIPv6AddressIssueOnWindows(e,r))return n(asWindowsFriendlyIPv6Address(t,r));throw e}}function isIPv6AddressIssueOnWindows(e,t){return"SyntaxError"===e.name&&isIPv6Address(t.asHostPort())}function isIPv6Address(e){return"["===e.charAt(0)&&-1!==e.indexOf("]")}function asWindowsFriendlyIPv6Address(e,t){var r=t.host().replace(/:/g,"-").replace("%","s")+".ipv6-literal.net";return"".concat(e,"://").concat(r,":").concat(t.port())}function determineWebSocketScheme(e,t){var r=isEncryptionExplicitlyTurnedOn(e),n=isEncryptionExplicitlyTurnedOff(e),e=e.trust,t=isProtocolSecure(t);return verifyEncryptionSettings(r,n,t),n?{scheme:"ws",error:null}:t?{scheme:"wss",error:null}:r?e&&"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"!==e?{scheme:null,error:(0,neo4j_driver_core_1$I.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+e+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+ENCRYPTION_OFF$1+'"` in the driver configuration.')}:{scheme:"wss",error:null}:{scheme:"ws",error:null}}function isEncryptionExplicitlyTurnedOn(e){return!0===e.encrypted||e.encrypted===ENCRYPTION_ON$1}function isEncryptionExplicitlyTurnedOff(e){return!1===e.encrypted||e.encrypted===ENCRYPTION_OFF$1}function isProtocolSecure(e){e="function"==typeof e?e():"";return e&&0<=e.toLowerCase().indexOf("https")}function verifyEncryptionSettings(e,t,r){null!==r&&(e&&!r?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):t&&r&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}function detectWebPageProtocol(){return"undefined"!=typeof window&&window.location?window.location.protocol:null}browserChannel.default=WebSocketChannel;var browserHostNameResolver={},__extends$s=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),neo4j_driver_core_1$H=(Object.defineProperty(browserHostNameResolver,"__esModule",{value:!0}),lib$1),BaseHostNameResolver=lib$1.internal.resolver.BaseHostNameResolver,BrowserHostNameResolver=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$s(t,e),t.prototype.resolve=function(e){return this._resolveToItself(e)},t}(BaseHostNameResolver),browserClientCertificatesLoader=(browserHostNameResolver.default=BrowserHostNameResolver,{}),__awaiter$7=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$7=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__importDefault$K=(Object.defineProperty(browserClientCertificatesLoader,"__esModule",{value:!0}),browserClientCertificatesLoader.default={load:function(t){return __awaiter$7(this,void 0,void 0,function(){return __generator$7(this,function(e){return[2,t]})})}},commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}}),browser_channel_1=(Object.defineProperty(browser,"__esModule",{value:!0}),browser.ClientCertificatesLoader=browser.HostNameResolver=browser.Channel=void 0,__importDefault$K(browserChannel)),browser_host_name_resolver_1=__importDefault$K(browserHostNameResolver),browser_client_certificates_loader_1=__importDefault$K(browserClientCertificatesLoader),chunking=(browser.Channel=browser_channel_1.default,browser.HostNameResolver=browser_host_name_resolver_1.default,browser.ClientCertificatesLoader=browser_client_certificates_loader_1.default,{}),combinedBuf={},__extends$r=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),buf_1=(Object.defineProperty(combinedBuf,"__esModule",{value:!0}),buf),channel_buf_1$2=channelBuf,CombinedBuffer=function(o){function e(e){for(var t=this,r=0,n=0;n<e.length;n++)r+=e[n].length;return(t=o.call(this,r)||this)._buffers=e,t}return __extends$r(e,o),e.prototype.getUInt8=function(e){for(var t=0;t<this._buffers.length;t++){var r=this._buffers[t];if(!(e>=r.length))return r.getUInt8(e);e-=r.length}},e.prototype.getInt8=function(e){for(var t=0;t<this._buffers.length;t++){var r=this._buffers[t];if(!(e>=r.length))return r.getInt8(e);e-=r.length}},e.prototype.getFloat64=function(e){for(var t=(0,channel_buf_1$2.alloc)(8),r=0;r<8;r++)t.putUInt8(r,this.getUInt8(e+r));return t.getFloat64(0)},e}(buf.BaseBuffer),__extends$q=(combinedBuf.default=CombinedBuffer,commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__importDefault$J=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},base_buf_1=(Object.defineProperty(chunking,"__esModule",{value:!0}),chunking.Dechunker=chunking.Chunker=void 0,__importDefault$J(baseBuf)),channel_buf_1$1=channelBuf,combined_buf_1=__importDefault$J(combinedBuf),_CHUNK_HEADER_SIZE=2,_MESSAGE_BOUNDARY=0,_DEFAULT_BUFFER_SIZE=1400,Chunker=function(n){function e(e,t){var r=n.call(this,0)||this;return r._bufferSize=t||_DEFAULT_BUFFER_SIZE,r._ch=e,r._buffer=(0,channel_buf_1$1.alloc)(r._bufferSize),r._currentChunkStart=0,r._chunkOpen=!1,r}return __extends$q(e,n),e.prototype.putUInt8=function(e,t){this._ensure(1),this._buffer.writeUInt8(t)},e.prototype.putInt8=function(e,t){this._ensure(1),this._buffer.writeInt8(t)},e.prototype.putFloat64=function(e,t){this._ensure(8),this._buffer.writeFloat64(t)},e.prototype.putBytes=function(e,t){for(;0<t.remaining();)this._ensure(1),this._buffer.remaining()>t.remaining()?this._buffer.writeBytes(t):this._buffer.writeBytes(t.readSlice(this._buffer.remaining()));return this},e.prototype.flush=function(){var e;return 0<this._buffer.position&&(this._closeChunkIfOpen(),e=this._buffer,this._buffer=null,this._ch.write(e.getSlice(0,e.position)),this._buffer=(0,channel_buf_1$1.alloc)(this._bufferSize),this._chunkOpen=!1),this},e.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<_CHUNK_HEADER_SIZE&&this.flush(),this._buffer.writeInt16(_MESSAGE_BOUNDARY)},e.prototype._ensure=function(e){e=this._chunkOpen?e:e+_CHUNK_HEADER_SIZE;this._buffer.remaining()<e&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+_CHUNK_HEADER_SIZE,this._chunkOpen=!0)},e.prototype._closeChunkIfOpen=function(){var e;this._chunkOpen&&(e=this._buffer.position-(this._currentChunkStart+_CHUNK_HEADER_SIZE),this._buffer.putUInt16(this._currentChunkStart,e),this._chunkOpen=!1)},e}(base_buf_1.default),Dechunker=(chunking.Chunker=Chunker,function(){function e(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return e.prototype.AWAITING_CHUNK=function(e){return 2<=e.remaining()?this._onHeader(e.readUInt16()):(this._partialChunkHeader=e.readUInt8()<<8,this.IN_HEADER)},e.prototype.IN_HEADER=function(e){return this._onHeader(65535&(this._partialChunkHeader|e.readUInt8()))},e.prototype.IN_CHUNK=function(e){return this._chunkSize<=e.remaining()?(this._currentMessage.push(e.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=e.remaining(),this._currentMessage.push(e.readSlice(e.remaining())),this.IN_CHUNK)},e.prototype.CLOSED=function(e){},e.prototype._onHeader=function(e){if(0!==e)return this._chunkSize=e,this.IN_CHUNK;var t=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:t=this._currentMessage[0];break;default:t=new combined_buf_1.default(this._currentMessage)}return this._currentMessage=[],this.onmessage(t),this.AWAITING_CHUNK},e.prototype.write=function(e){for(;e.hasRemaining();)this._state=this._state(e)},e}()),channelConfig=(chunking.Dechunker=Dechunker,{}),neo4j_driver_core_1$G=(Object.defineProperty(channelConfig,"__esModule",{value:!0}),lib$1),_a$d=neo4j_driver_core_1$G.internal.util,ENCRYPTION_OFF=_a$d.ENCRYPTION_OFF,ENCRYPTION_ON=_a$d.ENCRYPTION_ON,SERVICE_UNAVAILABLE$4=neo4j_driver_core_1$G.error.SERVICE_UNAVAILABLE,ALLOWED_VALUES_ENCRYPTED=[null,void 0,!0,!1,ENCRYPTION_ON,ENCRYPTION_OFF],ALLOWED_VALUES_TRUST=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"],ChannelConfig=function(e,t,r,n){this.address=e,this.encrypted=extractEncrypted(t),this.trust=extractTrust(t),this.trustedCertificates=extractTrustedCertificates(t),this.knownHostsPath=extractKnownHostsPath(t),this.connectionErrorCode=r||SERVICE_UNAVAILABLE$4,this.connectionTimeout=t.connectionTimeout,this.clientCertificate=n};function extractEncrypted(e){e=e.encrypted;if(-1===ALLOWED_VALUES_ENCRYPTED.indexOf(e))throw(0,neo4j_driver_core_1$G.newError)("Illegal value of the encrypted setting ".concat(e,". Expected one of ").concat(ALLOWED_VALUES_ENCRYPTED));return e}function extractTrust(e){e=e.trust;if(-1===ALLOWED_VALUES_TRUST.indexOf(e))throw(0,neo4j_driver_core_1$G.newError)("Illegal value of the trust setting ".concat(e,". Expected one of ").concat(ALLOWED_VALUES_TRUST));return e}function extractTrustedCertificates(e){return e.trustedCertificates||[]}function extractKnownHostsPath(e){return e.knownHosts||null}channelConfig.default=ChannelConfig;var utf8={},string_decoder={},safeBuffer={exports:{}},Buffer=(!function(e,t){var r=buffer,n=r.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function i(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=i),i.prototype=Object.create(n.prototype),o(n,i),i.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},i.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");e=n(e);return void 0!==t?"string"==typeof r?e.fill(t,r):e.fill(t):e.fill(0),e},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}(safeBuffer,safeBuffer.exports),safeBuffer.exports.Buffer),isEncoding=Buffer.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function normalizeEncoding(e){var t=_normalizeEncoding(e);if("string"==typeof t||Buffer.isEncoding!==isEncoding&&isEncoding(e))return t||e;throw new Error("Unknown encoding: "+e)}function StringDecoder(e){var t;switch(this.encoding=normalizeEncoding(e),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,t=4;break;case"utf8":this.fillLast=utf8FillLast,t=4;break;case"base64":this.text=base64Text,this.end=base64End,t=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(t)}function utf8CheckByte(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function utf8CheckIncomplete(e,t,r){var n=t.length-1;if(n<r)return 0;var o=utf8CheckByte(t[n]);return 0<=o?(0<o&&(e.lastNeed=o-1),o):--n<r||-2===o?0:0<=(o=utf8CheckByte(t[n]))?(0<o&&(e.lastNeed=o-2),o):!(--n<r||-2===o)&&0<=(o=utf8CheckByte(t[n]))?(0<o&&(2===o?o=0:e.lastNeed=o-3),o):0}function utf8CheckExtraBytes(e,t,r){return 128!=(192&t[0])?(e.lastNeed=0,""):1<e.lastNeed&&1<t.length?128!=(192&t[1])?(e.lastNeed=1,""):2<e.lastNeed&&2<t.length&&128!=(192&t[2])?(e.lastNeed=2,""):void 0:void 0}function utf8FillLast(e){var t=this.lastTotal-this.lastNeed,r=utf8CheckExtraBytes(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function utf8Text(e,t){var r=utf8CheckIncomplete(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;r=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function utf8End(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+"":e}function utf16Text(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);t=e.toString("utf16le",t);if(t){var r=t.charCodeAt(t.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}function utf16End(e){var t,e=e&&e.length?this.write(e):"";return this.lastNeed?(t=this.lastTotal-this.lastNeed,e+this.lastChar.toString("utf16le",0,t)):e}function base64Text(e,t){var r=(e.length-t)%3;return 0==r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function base64End(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function simpleWrite(e){return e.toString(this.encoding)}function simpleEnd(e){return e&&e.length?this.write(e):""}(string_decoder.StringDecoder=StringDecoder).prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},StringDecoder.prototype.end=utf8End,StringDecoder.prototype.text=utf8Text,StringDecoder.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};var __importDefault$I=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},channel_buf_1=(Object.defineProperty(utf8,"__esModule",{value:!0}),__importDefault$I(channelBuf)),neo4j_driver_core_1$F=lib$1,buffer_1=__importDefault$I(buffer),string_decoder_1=string_decoder,decoder=new string_decoder.StringDecoder("utf8");function encode(e){return new channel_buf_1.default(newBuffer(e))}function decode(e,t){if(Object.prototype.hasOwnProperty.call(e,"_buffer"))return decodeChannelBuffer(e,t);if(Object.prototype.hasOwnProperty.call(e,"_buffers"))return decodeCombinedBuffer(e,t);throw(0,neo4j_driver_core_1$F.newError)("Don't know how to decode strings from '".concat(e,"'"))}function decodeChannelBuffer(e,t){var r=e.position,t=r+t;return e.position=Math.min(t,e.length),e._buffer.toString("utf8",r,t)}function decodeCombinedBuffer(e,t){return streamDecodeCombinedBuffer(e,t,function(e){return decoder.write(e._buffer)},function(){return decoder.end()})}function streamDecodeCombinedBuffer(e,t,o,r){var i=t,a=e.position;return e._updatePos(Math.min(t,e.length-a)),e._buffers.reduce(function(e,t){var r,n;return i<=0?e:a>=t.length?(a-=t.length,""):(t._updatePos(a-t.position),r=Math.min(t.length-a,i),n=t.readSlice(r),t._updatePos(r),i=Math.max(i-n.length,0),a=0,e+o(n))},"")+r()}function newBuffer(e){return"function"==typeof buffer_1.default.Buffer.from?buffer_1.default.Buffer.from(e,"utf8"):new buffer_1.default.Buffer(e,"utf8")}utf8.default={encode:encode,decode:decode},function(e){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),t=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.alloc=e.ChannelConfig=void 0,t(browser,e),t(chunking,e),channelConfig),i=(Object.defineProperty(e,"ChannelConfig",{enumerable:!0,get:function(){return r(o).default}}),channelBuf),a=(Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return i.alloc}}),utf8);Object.defineProperty(e,"utf8",{enumerable:!0,get:function(){return r(a).default}})}(channel),Object.defineProperty(handshake$1,"__esModule",{value:!0});var channel_1$4=channel,neo4j_driver_core_1$E=lib$1,BOLT_MAGIC_PREAMBLE=1616949271,AVAILABLE_BOLT_PROTOCOLS=["5.8","5.7","5.6","5.4","5.3","5.2","5.1","5.0","4.4","4.3","4.2","3.0"],DESIRED_CAPABILITES=0;function version(e,t){return{major:e,minor:t}}function createHandshakeMessage(e){if(4<e.length)throw(0,neo4j_driver_core_1$E.newError)("It should not have more than 4 versions of the protocol");var o=(0,channel_1$4.alloc)(20);return o.writeInt32(BOLT_MAGIC_PREAMBLE),e.forEach(function(e){var t,r,n;e instanceof Array?(r=(n=e[0]).major,n=n.minor,t=e[1].minor,o.writeInt32(n-t<<16|n<<8|r)):(r=e.major,n=e.minor,o.writeInt32(n<<8|r))}),o.reset(),o}function parseNegotiatedResponse(e,t){e=[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()];if(72===e[0]&&84===e[1]&&84===e[2]&&80===e[3])throw t.error("Handshake failed since server responded with HTTP."),(0,neo4j_driver_core_1$E.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return Number(e[3]+"."+e[2])}function handshakeNegotiationV2(n,o,e){for(var t=o.readVarInt(),r=[],i=0;i<t;i++)var a=[o.readUInt8(),o.readUInt8(),o.readUInt8(),o.readUInt8()],r=r.concat(getVersions(a));o.readVarInt();var s=selectCapabilites(),u=0,c=0;r.sort(function(e,t){return Number(e.major)!==Number(t.major)?Number(t.major)-Number(e.major):Number(t.minor)-Number(e.minor)});for(i=0;i<r.length;i++){var l=r[i];if(AVAILABLE_BOLT_PROTOCOLS.includes(l.major+"."+l.minor)){u=l.major,c=l.minor;break}}return new Promise(function(e,t){try{var r=(0,channel_1$4.alloc)(5);r.writeInt32(c<<8|u),r.writeVarInt(s),n.write(r),e({protocolVersion:Number(u+"."+c),capabilites:s,consumeRemainingBuffer:function(e){o.hasRemaining()&&e(o.readSlice(o.remaining()))}})}catch(e){t(e)}})}function newHandshakeBuffer(){return createHandshakeMessage([version(255,1),[version(5,8),version(5,0)],[version(4,4),version(4,2)],version(3,0)])}function handshake(t,e){return initialHandshake(t,e).then(function(e){return 255.1===e.protocolVersion?handshakeNegotiationV2(t,e.buffer):e})}function initialHandshake(t,o){var i=this;return new Promise(function(r,n){function e(e){n(e)}t.onerror=e.bind(i),t._error&&e(t._error),t.onmessage=function(t){try{var e=parseNegotiatedResponse(t,o);r({protocolVersion:e,capabilites:0,buffer:t,consumeRemainingBuffer:function(e){t.hasRemaining()&&e(t.readSlice(t.remaining()))}})}catch(e){n(e)}},t.write(newHandshakeBuffer())})}function getVersions(e){for(var t=[],r=e[3],n=e[2],o=0;o<=e[1];o++)t.push({major:r,minor:n-o});return t}function selectCapabilites(e){return DESIRED_CAPABILITES}handshake$1.default=handshake;var create$1={},boltProtocolV1={},boltProtocolUtil={},streamObservers={},routingTableRaw={},__extends$p=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__importDefault$H=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},RawRoutingTable=(Object.defineProperty(routingTableRaw,"__esModule",{value:!0}),__importDefault$H(lib$1),function(){function t(){}return t.ofRecord=function(e){return null===e?t.ofNull():new RecordRawRoutingTable(e)},t.ofMessageResponse=function(e){return null===e?t.ofNull():new ResponseRawRoutingTable(e)},t.ofNull=function(){return new NullRawRoutingTable},Object.defineProperty(t.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),t}()),ResponseRawRoutingTable=function(r){function e(e){var t=r.call(this)||this;return t._response=e,t}return __extends$p(e,r),Object.defineProperty(e.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){return null===this._response},enumerable:!1,configurable:!0}),e}(routingTableRaw.default=RawRoutingTable),NullRawRoutingTable=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$p(t,e),Object.defineProperty(t.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),t}(RawRoutingTable),RecordRawRoutingTable=function(r){function e(e){var t=r.call(this)||this;return t._record=e,t}return __extends$p(e,r),Object.defineProperty(e.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){return null===this._record},enumerable:!1,configurable:!0}),e}(RawRoutingTable),lang={},functional={},neo4j_driver_core_1$D=(Object.defineProperty(functional,"__esModule",{value:!0}),functional.reuseOngoingRequest=functional.identity=void 0,lib$1);function identity(e){return e}function reuseOngoingRequest(o,i){void 0===i&&(i=null);var a=new Map;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=neo4j_driver_core_1$D.json.stringify(e);if(a.has(r))return a.get(r);var n=o.apply(i,e);return a.set(r,n),n.finally(function(){a.delete(r)})}}functional.identity=identity,functional.reuseOngoingRequest=reuseOngoingRequest;var object={},__values$1=commonjsGlobal&&commonjsGlobal.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function equals(e,t){var r,n;if(e===t)return!0;if(null===e||null===t)return!1;if("object"!=typeof e||"object"!=typeof t)return!1;var o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;try{for(var a=__values$1(o),s=a.next();!s.done;s=a.next()){var u=s.value;if(e[u]!==t[u])return!1}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return!0}Object.defineProperty(object,"__esModule",{value:!0}),object.equals=void 0,object.equals=equals;var __createBinding$4=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),__setModuleDefault$4=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$4=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$4(t,e,r);return __setModuleDefault$4(t,e),t},__extends$o=(Object.defineProperty(lang,"__esModule",{value:!0}),lang.object=lang.functional=void 0,lang.functional=__importStar$4(functional),lang.object=__importStar$4(object),commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__importDefault$G=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},neo4j_driver_core_1$C=(Object.defineProperty(streamObservers,"__esModule",{value:!0}),streamObservers.TelemetryObserver=streamObservers.ProcedureRouteObserver=streamObservers.RouteObserver=streamObservers.CompletedObserver=streamObservers.FailedObserver=streamObservers.ResetObserver=streamObservers.LogoffObserver=streamObservers.LoginObserver=streamObservers.ResultStreamObserver=streamObservers.StreamObserver=void 0,lib$1),routing_table_raw_1=__importDefault$G(routingTableRaw),lang_1$4=lang,FETCH_ALL$6=neo4j_driver_core_1$C.internal.constants.FETCH_ALL,PROTOCOL_ERROR$5=neo4j_driver_core_1$C.error.PROTOCOL_ERROR,StreamObserver=function(){function e(){}return e.prototype.onNext=function(e){},e.prototype.onError=function(e){},e.prototype.onCompleted=function(e){},e}(),ResultStreamObserver=function(m){function e(e){var e=void 0===e?{}:e,t=e.reactive,t=void 0!==t&&t,r=e.moreFunction,n=e.discardFunction,o=e.fetchSize,o=void 0===o?FETCH_ALL$6:o,i=e.beforeError,a=e.afterError,s=e.beforeKeys,u=e.afterKeys,c=e.beforeComplete,l=e.afterComplete,f=e.server,_=e.highRecordWatermark,_=void 0===_?Number.MAX_VALUE:_,p=e.lowRecordWatermark,p=void 0===p?Number.MAX_VALUE:p,d=e.enrichMetadata,e=e.onDb,b=m.call(this)||this;return b._fieldKeys=null,b._fieldLookup=null,b._head=null,b._queuedRecords=[],b._tail=null,b._error=null,b._observers=[],b._meta={},b._server=f,b._beforeError=i,b._afterError=a,b._beforeKeys=s,b._afterKeys=u,b._beforeComplete=c,b._afterComplete=l,b._enrichMetadata=d||lang_1$4.functional.identity,b._queryId=null,b._moreFunction=r,b._discardFunction=n,b._discard=!1,b._fetchSize=o,b._lowRecordWatermark=p,b._highRecordWatermark=_,b._setState(t?_states.READY:_states.READY_STREAMING),b._setupAutoPull(),b._paused=!1,b._pulled=!t,b._haveRecordStreamed=!1,b._onDb=e,b}return __extends$o(e,m),e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},e.prototype.onNext=function(e){this._haveRecordStreamed=!0;var t=new neo4j_driver_core_1$C.Record(this._fieldKeys,e,this._fieldLookup);this._observers.some(function(e){return e.onNext})?this._observers.forEach(function(e){e.onNext&&e.onNext(t)}):(this._queuedRecords.push(t),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},e.prototype.onCompleted=function(e){this._state.onSuccess(this,e)},e.prototype.onError=function(e){this._state.onError(this,e)},e.prototype.cancel=function(){this._discard=!0},e.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(_states.STREAMING)},e.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(_states.SUCCEEDED)},e.prototype.subscribe=function(e){if(this._head&&e.onKeys&&e.onKeys(this._head),0<this._queuedRecords.length&&e.onNext)for(var t=0;t<this._queuedRecords.length;t++)e.onNext(this._queuedRecords[t]),this._queuedRecords.length-t-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===_states.READY&&this._handleStreaming());this._tail&&e.onCompleted&&e.onCompleted(this._tail),this._error&&e.onError(this._error),this._observers.push(e),this._state===_states.READY&&this._handleStreaming()},e.prototype._handleHasMore=function(e){this._setState(_states.READY),this._handleStreaming(),delete e.has_more},e.prototype._handlePullSuccess=function(e){var t,r=this,n=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:0<this._fieldKeys.length}},e));[void 0,null,"r","w","rw","s"].includes(n.type)?(this._setState(_states.SUCCEEDED),e=null,t=function(){r._tail=n,r._observers.some(function(e){return e.onCompleted})&&r._observers.forEach(function(e){e.onCompleted&&e.onCompleted(n)}),r._afterComplete&&r._afterComplete(n)},(e=this._beforeComplete?this._beforeComplete(n):e)?Promise.resolve(e).then(t):t()):this.onError((0,neo4j_driver_core_1$C.newError)('Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got \''.concat(n.type,"'"),PROTOCOL_ERROR$5))},e.prototype._handleRunSuccess=function(e,t){var r=this;if(null===this._fieldKeys){if(this._fieldKeys=[],this._fieldLookup={},e.fields&&0<e.fields.length){this._fieldKeys=e.fields;for(var n=0;n<e.fields.length;n++)this._fieldLookup[e.fields[n]]=n}null!==e.db&&void 0!==this._onDb&&this._onDb(e.db),null!=e.fields&&delete e.fields,null!==e.qid&&void 0!==e.qid&&(this._queryId=e.qid,delete e.qid),this._storeMetadataForCompletion(e);function o(){r._head=r._fieldKeys,r._observers.some(function(e){return e.onKeys})&&r._observers.forEach(function(e){e.onKeys&&e.onKeys(r._fieldKeys)}),r._afterKeys&&r._afterKeys(r._fieldKeys),t()}var i=null;this._beforeKeys&&(i=this._beforeKeys(this._fieldKeys));i?Promise.resolve(i).then(o):o()}},e.prototype._handleError=function(t){function e(){r._observers.some(function(e){return e.onError})&&r._observers.forEach(function(e){e.onError&&e.onError(t)}),r._afterError&&r._afterError(t)}var r=this,n=(this._setState(_states.FAILED),this._error=t,null);this._beforeError&&(n=this._beforeError(t));n?Promise.resolve(n).then(e):e()},e.prototype._handleStreaming=function(){this._head&&this._observers.some(function(e){return e.onNext||e.onCompleted})&&(this._paused||!this._discard&&!this._autoPull||this._more())},e.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(_states.STREAMING)},e.prototype._storeMetadataForCompletion=function(e){for(var t,r=Object.keys(e),n=r.length;n--;)t=r[n],this._meta[t]=e[t]},e.prototype._setState=function(e){this._state=e},e.prototype._setupAutoPull=function(){this._autoPull=!0},e}(streamObservers.StreamObserver=StreamObserver),LoginObserver=(streamObservers.ResultStreamObserver=ResultStreamObserver,function(n){function e(e){var e=void 0===e?{}:e,t=e.onError,e=e.onCompleted,r=n.call(this)||this;return r._onError=t,r._onCompleted=e,r}return __extends$o(e,n),e.prototype.onNext=function(e){this.onError((0,neo4j_driver_core_1$C.newError)("Received RECORD when initializing "+neo4j_driver_core_1$C.json.stringify(e)))},e.prototype.onError=function(e){this._onError&&this._onError(e)},e.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(e)},e}(StreamObserver)),LogoffObserver=(streamObservers.LoginObserver=LoginObserver,function(n){function e(e){var e=void 0===e?{}:e,t=e.onError,e=e.onCompleted,r=n.call(this)||this;return r._onError=t,r._onCompleted=e,r}return __extends$o(e,n),e.prototype.onNext=function(e){this.onError((0,neo4j_driver_core_1$C.newError)("Received RECORD when logging off "+neo4j_driver_core_1$C.json.stringify(e)))},e.prototype.onError=function(e){this._onError&&this._onError(e)},e.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(e)},e}(StreamObserver)),ResetObserver=(streamObservers.LogoffObserver=LogoffObserver,function(o){function e(e){var e=void 0===e?{}:e,t=e.onProtocolError,r=e.onError,e=e.onComplete,n=o.call(this)||this;return n._onProtocolError=t,n._onError=r,n._onComplete=e,n}return __extends$o(e,o),e.prototype.onNext=function(e){this.onError((0,neo4j_driver_core_1$C.newError)("Received RECORD when resetting: received record is: "+neo4j_driver_core_1$C.json.stringify(e),PROTOCOL_ERROR$5))},e.prototype.onError=function(e){e.code===PROTOCOL_ERROR$5&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},e.prototype.onCompleted=function(e){this._onComplete&&this._onComplete(e)},e}(StreamObserver)),TelemetryObserver=(streamObservers.ResetObserver=ResetObserver,function(n){function e(e){var e=void 0===e?{}:e,t=e.onError,e=e.onCompleted,r=n.call(this)||this;return r._onError=t,r._onCompleted=e,r}return __extends$o(e,n),e.prototype.onNext=function(e){this.onError((0,neo4j_driver_core_1$C.newError)("Received RECORD when sending telemetry "+neo4j_driver_core_1$C.json.stringify(e),PROTOCOL_ERROR$5))},e.prototype.onError=function(e){this._onError&&this._onError(e)},e.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(e)},e}(ResultStreamObserver)),FailedObserver=(streamObservers.TelemetryObserver=TelemetryObserver,function(r){function e(e){var t=e.error,e=e.onError,e=r.call(this,{beforeError:e})||this;return e.onError(t),e}return __extends$o(e,r),e}(ResultStreamObserver)),CompletedObserver=(streamObservers.FailedObserver=FailedObserver,function(t){function e(){var e=t.call(this)||this;return t.prototype.markCompleted.call(e),e}return __extends$o(e,t),e}(ResultStreamObserver)),ProcedureRouteObserver=(streamObservers.CompletedObserver=CompletedObserver,function(i){function e(e){var t=e.resultObserver,r=e.onProtocolError,n=e.onError,e=e.onCompleted,o=i.call(this)||this;return o._resultObserver=t,o._onError=n,o._onCompleted=e,o._records=[],o._onProtocolError=r,t.subscribe(o),o}return __extends$o(e,i),e.prototype.onNext=function(e){this._records.push(e)},e.prototype.onError=function(e){e.code===PROTOCOL_ERROR$5&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},e.prototype.onCompleted=function(){null!==this._records&&1!==this._records.length?this.onError((0,neo4j_driver_core_1$C.newError)("Illegal response from router. Received "+this._records.length+" records but expected only one.\n"+neo4j_driver_core_1$C.json.stringify(this._records),PROTOCOL_ERROR$5)):this._onCompleted&&this._onCompleted(routing_table_raw_1.default.ofRecord(this._records[0]))},e}(StreamObserver)),RouteObserver=(streamObservers.ProcedureRouteObserver=ProcedureRouteObserver,function(o){function e(e){var e=void 0===e?{}:e,t=e.onProtocolError,r=e.onError,e=e.onCompleted,n=o.call(this)||this;return n._onProtocolError=t,n._onError=r,n._onCompleted=e,n}return __extends$o(e,o),e.prototype.onNext=function(e){this.onError((0,neo4j_driver_core_1$C.newError)("Received RECORD when resetting: received record is: "+neo4j_driver_core_1$C.json.stringify(e),PROTOCOL_ERROR$5))},e.prototype.onError=function(e){e.code===PROTOCOL_ERROR$5&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},e.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(routing_table_raw_1.default.ofMessageResponse(e))},e}(StreamObserver)),_states=(streamObservers.RouteObserver=RouteObserver,{READY_STREAMING:{onSuccess:function(e,t){e._handleRunSuccess(t,function(){e._setState(_states.STREAMING)})},onError:function(e,t){e._handleError(t)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(e,t){e._handleRunSuccess(t,function(){return e._handleStreaming()})},onError:function(e,t){e._handleError(t)},name:function(){return"READY"},pull:function(e){return e._more()}},STREAMING:{onSuccess:function(e,t){t.has_more?e._handleHasMore(t):e._handlePullSuccess(t)},onError:function(e,t){e._handleError(t)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(e){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}}),neo4j_driver_core_1$B=(Object.defineProperty(boltProtocolUtil,"__esModule",{value:!0}),boltProtocolUtil.assertNotificationFilterIsEmpty=boltProtocolUtil.assertImpersonatedUserIsEmpty=boltProtocolUtil.assertTxConfigIsEmpty=boltProtocolUtil.assertDatabaseIsEmpty=void 0,lib$1);function assertTxConfigIsEmpty(e,t,r){if(void 0===t&&(t=function(){}),e&&!e.isEmpty())throw t((e=(0,neo4j_driver_core_1$B.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality")).message),r.onError(e),e}function assertDatabaseIsEmpty(e,t,r){if(void 0===t&&(t=function(){}),e)throw t((e=(0,neo4j_driver_core_1$B.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality")).message),r.onError(e),e}function assertImpersonatedUserIsEmpty(e,t,r){if(void 0===t&&(t=function(){}),e)throw t((t=(0,neo4j_driver_core_1$B.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(e,"."))).message),r.onError(t),t}function assertNotificationFilterIsEmpty(e,t,r){if(void 0===t&&(t=function(){}),void 0!==e)throw t((t=(0,neo4j_driver_core_1$B.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(neo4j_driver_core_1$B.json.stringify(e),"."))).message),r.onError(t),t}boltProtocolUtil.assertTxConfigIsEmpty=assertTxConfigIsEmpty,boltProtocolUtil.assertDatabaseIsEmpty=assertDatabaseIsEmpty,boltProtocolUtil.assertImpersonatedUserIsEmpty=assertImpersonatedUserIsEmpty,boltProtocolUtil.assertNotificationFilterIsEmpty=assertNotificationFilterIsEmpty;var packstream={},packstreamV1={},structure$1={},neo4j_driver_core_1$A=(Object.defineProperty(structure$1,"__esModule",{value:!0}),structure$1.verifyStructSize=structure$1.Structure=void 0,lib$1),PROTOCOL_ERROR$4=neo4j_driver_core_1$A.error.PROTOCOL_ERROR,Structure=function(){function e(e,t){this.signature=e,this.fields=t}return Object.defineProperty(e.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),e.prototype.toString=function(){for(var e="",t=0;t<this.fields.length;t++)0<t&&(e+=", "),e+=this.fields[t];return"Structure("+this.signature+", ["+e+"])"},e}();function verifyStructSize(e,t,r){if(t!==r)throw(0,neo4j_driver_core_1$A.newError)("Wrong struct size for ".concat(e,", expected ").concat(t," but was ").concat(r),PROTOCOL_ERROR$4)}structure$1.Structure=Structure,structure$1.verifyStructSize=verifyStructSize,structure$1.default=Structure,Object.defineProperty(packstreamV1,"__esModule",{value:!0}),packstreamV1.Unpacker=packstreamV1.Packer=void 0;var channel_1$3=channel,lang_1$3=lang,structure_1=structure$1,neo4j_driver_core_1$z=lib$1,PROTOCOL_ERROR$3=neo4j_driver_core_1$z.error.PROTOCOL_ERROR,TINY_STRING=128,TINY_LIST=144,TINY_MAP=160,TINY_STRUCT=176,NULL=192,FLOAT_64=193,FALSE=194,TRUE=195,INT_8=200,INT_16=201,INT_32=202,INT_64=203,STRING_8=208,STRING_16=209,STRING_32=210,LIST_8=212,LIST_16=213,LIST_32=214,BYTES_8=204,BYTES_16=205,BYTES_32=206,MAP_8=216,MAP_16=217,MAP_32=218,STRUCT_8=220,STRUCT_16=221,Packer$1=function(){function e(e){this._ch=e,this._byteArraysSupported=!0}return e.prototype.packable=function(o,i){var a=this;void 0===i&&(i=lang_1$3.functional.identity);try{o=i(o)}catch(e){return function(){throw e}}if(null===o)return function(){return a._ch.writeUInt8(NULL)};if(!0===o)return function(){return a._ch.writeUInt8(TRUE)};if(!1===o)return function(){return a._ch.writeUInt8(FALSE)};if("number"==typeof o)return function(){return a.packFloat(o)};if("string"==typeof o)return function(){return a.packString(o)};if("bigint"==typeof o)return function(){return a.packInteger((0,neo4j_driver_core_1$z.int)(o))};if((0,neo4j_driver_core_1$z.isInt)(o))return function(){return a.packInteger(o)};if(o instanceof Int8Array)return function(){return a.packBytes(o)};if(o instanceof Array)return function(){a.packListHeader(o.length);for(var e=0;e<o.length;e++)a.packable(void 0===o[e]?null:o[e],i)()};if(isIterable(o))return this.packableIterable(o,i);if(o instanceof structure_1.Structure){for(var e=[],t=0;t<o.fields.length;t++)e[t]=this.packable(o.fields[t],i);return function(){return a.packStruct(o.signature,e)}}return"object"==typeof o?function(){for(var e=Object.keys(o),t=0,r=0;r<e.length;r++)void 0!==o[e[r]]&&t++;a.packMapHeader(t);for(r=0;r<e.length;r++){var n=e[r];void 0!==o[n]&&(a.packString(n),a.packable(o[n],i)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(o))},e.prototype.packableIterable=function(t,e){try{var r=Array.from(t);return this.packable(r,e)}catch(e){throw(0,neo4j_driver_core_1$z.newError)("Cannot pack given iterable, ".concat(e.message,": ").concat(t))}},e.prototype.packStruct=function(e,t){this.packStructHeader((t=t||[]).length,e);for(var r=0;r<t.length;r++)t[r]()},e.prototype.packInteger=function(e){var t=e.high,r=e.low;e.greaterThanOrEqual(-16)&&e.lessThan(128)?this._ch.writeInt8(r):e.greaterThanOrEqual(-128)&&e.lessThan(-16)?(this._ch.writeUInt8(INT_8),this._ch.writeInt8(r)):e.greaterThanOrEqual(-32768)&&e.lessThan(32768)?(this._ch.writeUInt8(INT_16),this._ch.writeInt16(r)):(e.greaterThanOrEqual(-2147483648)&&e.lessThan(2147483648)?this._ch.writeUInt8(INT_32):(this._ch.writeUInt8(INT_64),this._ch.writeInt32(t)),this._ch.writeInt32(r))},e.prototype.packFloat=function(e){this._ch.writeUInt8(FLOAT_64),this._ch.writeFloat64(e)},e.prototype.packString=function(e){var e=channel_1$3.utf8.encode(e),t=e.length;if(t<16)this._ch.writeUInt8(TINY_STRING|t),this._ch.writeBytes(e);else if(t<256)this._ch.writeUInt8(STRING_8),this._ch.writeUInt8(t),this._ch.writeBytes(e);else if(t<65536)this._ch.writeUInt8(STRING_16),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256),this._ch.writeBytes(e);else{if(!(t<4294967296))throw(0,neo4j_driver_core_1$z.newError)("UTF-8 strings of size "+t+" are not supported");this._ch.writeUInt8(STRING_32),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256),this._ch.writeBytes(e)}},e.prototype.packListHeader=function(e){if(e<16)this._ch.writeUInt8(TINY_LIST|e);else if(e<256)this._ch.writeUInt8(LIST_8),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(LIST_16),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256);else{if(!(e<4294967296))throw(0,neo4j_driver_core_1$z.newError)("Lists of size "+e+" are not supported");this._ch.writeUInt8(LIST_32),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256)}},e.prototype.packBytes=function(e){if(!this._byteArraysSupported)throw(0,neo4j_driver_core_1$z.newError)("Byte arrays are not supported by the database this driver is connected to");this.packBytesHeader(e.length);for(var t=0;t<e.length;t++)this._ch.writeInt8(e[t])},e.prototype.packBytesHeader=function(e){if(e<256)this._ch.writeUInt8(BYTES_8),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(BYTES_16),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256);else{if(!(e<4294967296))throw(0,neo4j_driver_core_1$z.newError)("Byte arrays of size "+e+" are not supported");this._ch.writeUInt8(BYTES_32),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256)}},e.prototype.packMapHeader=function(e){if(e<16)this._ch.writeUInt8(TINY_MAP|e);else if(e<256)this._ch.writeUInt8(MAP_8),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(MAP_16),this._ch.writeUInt8(e/256>>0),this._ch.writeUInt8(e%256);else{if(!(e<4294967296))throw(0,neo4j_driver_core_1$z.newError)("Maps of size "+e+" are not supported");this._ch.writeUInt8(MAP_32),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256)}},e.prototype.packStructHeader=function(e,t){if(e<16)this._ch.writeUInt8(TINY_STRUCT|e),this._ch.writeUInt8(t);else if(e<256)this._ch.writeUInt8(STRUCT_8),this._ch.writeUInt8(e),this._ch.writeUInt8(t);else{if(!(e<65536))throw(0,neo4j_driver_core_1$z.newError)("Structures of size "+e+" are not supported");this._ch.writeUInt8(STRUCT_16),this._ch.writeUInt8(e/256>>0),this._ch.writeUInt8(e%256)}},e.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},e.prototype._nonPackableValue=function(e){return function(){throw(0,neo4j_driver_core_1$z.newError)(e,PROTOCOL_ERROR$3)}},e}(),Unpacker$1=(packstreamV1.Packer=Packer$1,function(){function e(e,t){void 0===t&&(t=!1),this._disableLosslessIntegers=e=void 0===e?!1:e,this._useBigInt=t}return e.prototype.unpack=function(e,t){void 0===t&&(t=lang_1$3.functional.identity);var r=e.readUInt8(),n=240&r,o=15&r;if(r===NULL)return null;var i=this._unpackBoolean(r);if(null!==i)return i;i=this._unpackNumberOrInteger(r,e);if(null!==i){if((0,neo4j_driver_core_1$z.isInt)(i)){if(this._useBigInt)return i.toBigInt();if(this._disableLosslessIntegers)return i.toNumberOrInfinity()}return i}i=this._unpackString(r,n,o,e);if(null!==i)return i;i=this._unpackList(r,n,o,e,t);if(null!==i)return i;i=this._unpackByteArray(r,e);if(null!==i)return i;i=this._unpackMap(r,n,o,e,t);if(null!==i)return i;i=this._unpackStruct(r,n,o,e,t);if(null!==i)return i;throw(0,neo4j_driver_core_1$z.newError)("Unknown packed value with marker "+r.toString(16))},e.prototype.unpackInteger=function(e){var t=e.readUInt8(),e=this._unpackInteger(t,e);if(null==e)throw(0,neo4j_driver_core_1$z.newError)("Unable to unpack integer value with marker "+t.toString(16));return e},e.prototype._unpackBoolean=function(e){return e===TRUE||e!==FALSE&&null},e.prototype._unpackNumberOrInteger=function(e,t){return e===FLOAT_64?t.readFloat64():this._unpackInteger(e,t)},e.prototype._unpackInteger=function(e,t){var r;return 0<=e&&e<128?(0,neo4j_driver_core_1$z.int)(e):240<=e&&e<256?(0,neo4j_driver_core_1$z.int)(e-256):e===INT_8?(0,neo4j_driver_core_1$z.int)(t.readInt8()):e===INT_16?(0,neo4j_driver_core_1$z.int)(t.readInt16()):e===INT_32?(r=t.readInt32(),(0,neo4j_driver_core_1$z.int)(r)):e===INT_64?(r=t.readInt32(),e=t.readInt32(),new neo4j_driver_core_1$z.Integer(e,r)):null},e.prototype._unpackString=function(e,t,r,n){return t===TINY_STRING?channel_1$3.utf8.decode(n,r):e===STRING_8?channel_1$3.utf8.decode(n,n.readUInt8()):e===STRING_16?channel_1$3.utf8.decode(n,n.readUInt16()):e===STRING_32?channel_1$3.utf8.decode(n,n.readUInt32()):null},e.prototype._unpackList=function(e,t,r,n,o){return t===TINY_LIST?this._unpackListWithSize(r,n,o):e===LIST_8?this._unpackListWithSize(n.readUInt8(),n,o):e===LIST_16?this._unpackListWithSize(n.readUInt16(),n,o):e===LIST_32?this._unpackListWithSize(n.readUInt32(),n,o):null},e.prototype._unpackListWithSize=function(e,t,r){for(var n=[],o=0;o<e;o++)n.push(this.unpack(t,r));return n},e.prototype._unpackByteArray=function(e,t){return e===BYTES_8?this._unpackByteArrayWithSize(t.readUInt8(),t):e===BYTES_16?this._unpackByteArrayWithSize(t.readUInt16(),t):e===BYTES_32?this._unpackByteArrayWithSize(t.readUInt32(),t):null},e.prototype._unpackByteArrayWithSize=function(e,t){for(var r=new Int8Array(e),n=0;n<e;n++)r[n]=t.readInt8();return r},e.prototype._unpackMap=function(e,t,r,n,o){return t===TINY_MAP?this._unpackMapWithSize(r,n,o):e===MAP_8?this._unpackMapWithSize(n.readUInt8(),n,o):e===MAP_16?this._unpackMapWithSize(n.readUInt16(),n,o):e===MAP_32?this._unpackMapWithSize(n.readUInt32(),n,o):null},e.prototype._unpackMapWithSize=function(e,t,r){for(var n={},o=0;o<e;o++)n[this.unpack(t,r)]=this.unpack(t,r);return n},e.prototype._unpackStruct=function(e,t,r,n,o){return t===TINY_STRUCT?this._unpackStructWithSize(r,n,o):e===STRUCT_8?this._unpackStructWithSize(n.readUInt8(),n,o):e===STRUCT_16?this._unpackStructWithSize(n.readUInt16(),n,o):null},e.prototype._unpackStructWithSize=function(e,t,r){for(var n=t.readUInt8(),o=new structure_1.Structure(n,[]),i=0;i<e;i++)o.fields.push(this.unpack(t,r));return r(o)},e}());function isIterable(e){return null!=e&&"function"==typeof e[Symbol.iterator]}packstreamV1.Unpacker=Unpacker$1;var packstreamV2={},__extends$n=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__createBinding$3=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),__setModuleDefault$3=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$3=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$3(t,e,r);return __setModuleDefault$3(t,e),t},v1$1=(Object.defineProperty(packstreamV2,"__esModule",{value:!0}),packstreamV2.Unpacker=packstreamV2.Packer=void 0,__importStar$3(packstreamV1)),Packer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$n(t,e),t.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},t}(v1$1.Packer),Unpacker=(packstreamV2.Packer=Packer,function(r){function e(e,t){return r.call(this,e=void 0===e?!1:e,t=void 0===t?!1:t)||this}return __extends$n(e,r),e}(v1$1.Unpacker)),__createBinding$2=(packstreamV2.Unpacker=Unpacker,commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]})),__setModuleDefault$2=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$2=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$2(t,e,r);return __setModuleDefault$2(t,e),t},v1=(Object.defineProperty(packstream,"__esModule",{value:!0}),packstream.structure=packstream.v2=packstream.v1=void 0,__importStar$2(packstreamV1)),v2=(packstream.v1=v1,__importStar$2(packstreamV2)),structure=(packstream.v2=v2,__importStar$2(structure$1)),requestMessage=(packstream.structure=structure,packstream.default=v2,{}),neo4j_driver_core_1$y=(Object.defineProperty(requestMessage,"__esModule",{value:!0}),requestMessage.SIGNATURES=void 0,lib$1),_a$c=neo4j_driver_core_1$y.internal.constants,ACCESS_MODE_READ=_a$c.ACCESS_MODE_READ,FETCH_ALL$5=_a$c.FETCH_ALL,assertString=neo4j_driver_core_1$y.internal.util.assertString,INIT=1,RESET=15,RUN=16,PULL_ALL=63,HELLO=1,GOODBYE=2,BEGIN=17,COMMIT=18,ROLLBACK=19,TELEMETRY=84,ROUTE=102,LOGON=106,LOGOFF=107,DISCARD=47,PULL=63,READ_MODE="r",NO_STATEMENT_ID=-1,SIGNATURES=Object.freeze({INIT:INIT,RESET:RESET,RUN:RUN,PULL_ALL:PULL_ALL,HELLO:HELLO,GOODBYE:GOODBYE,BEGIN:BEGIN,COMMIT:COMMIT,ROLLBACK:ROLLBACK,TELEMETRY:TELEMETRY,ROUTE:ROUTE,LOGON:LOGON,LOGOFF:LOGOFF,DISCARD:DISCARD,PULL:PULL}),RequestMessage=(requestMessage.SIGNATURES=SIGNATURES,function(){function i(e,t,r){this.signature=e,this.fields=t,this.toString=r}return i.init=function(e,t){return new i(INIT,[e,t],function(){return"INIT ".concat(e," {...}")})},i.run=function(e,t){return new i(RUN,[e,t],function(){return"RUN ".concat(e," ").concat(neo4j_driver_core_1$y.json.stringify(t))})},i.pullAll=function(){return PULL_ALL_MESSAGE},i.reset=function(){return RESET_MESSAGE},i.hello=function(e,t,r,n){void 0===r&&(r=null),void 0===n&&(n=null);t=Object.assign({user_agent:e},t);return r&&(t.routing=r),n&&(t.patch_bolt=n),new i(HELLO,[t],function(){return"HELLO {user_agent: '".concat(e,"', ...}")})},i.hello5x1=function(e,t){var r={user_agent:e};return(t=void 0===t?null:t)&&(r.routing=t),new i(HELLO,[r],function(){return"HELLO {user_agent: '".concat(e,"', ...}")})},i.hello5x2=function(e,t,r){void 0===r&&(r=null);var n={user_agent:e};return appendLegacyNotificationFilterToMetadata(n,t=void 0===t?null:t),r&&(n.routing=r),new i(HELLO,[n],function(){return"HELLO ".concat(neo4j_driver_core_1$y.json.stringify(n))})},i.hello5x3=function(e,t,r,n){void 0===r&&(r=null),void 0===n&&(n=null);var o={};return e&&(o.user_agent=e),t&&(o.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),appendLegacyNotificationFilterToMetadata(o,r),n&&(o.routing=n),new i(HELLO,[o],function(){return"HELLO ".concat(neo4j_driver_core_1$y.json.stringify(o))})},i.hello5x5=function(e,t,r,n){void 0===r&&(r=null),void 0===n&&(n=null);var o={};return e&&(o.user_agent=e),t&&(o.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),appendGqlNotificationFilterToMetadata(o,r),n&&(o.routing=n),new i(HELLO,[o],function(){return"HELLO ".concat(neo4j_driver_core_1$y.json.stringify(o))})},i.logon=function(e){return new i(LOGON,[e],function(){return"LOGON { ... }"})},i.logoff=function(){return new i(LOGOFF,[],function(){return"LOGOFF"})},i.begin=function(e){var e=void 0===e?{}:e,t=buildTxMetadata(e.bookmarks,e.txConfig,e.database,e.mode,e.impersonatedUser,e.notificationFilter);return new i(BEGIN,[t],function(){return"BEGIN ".concat(neo4j_driver_core_1$y.json.stringify(t))})},i.begin5x5=function(e){var e=void 0===e?{}:e,t=buildTxMetadata(e.bookmarks,e.txConfig,e.database,e.mode,e.impersonatedUser,e.notificationFilter,{appendNotificationFilter:appendGqlNotificationFilterToMetadata});return new i(BEGIN,[t],function(){return"BEGIN ".concat(neo4j_driver_core_1$y.json.stringify(t))})},i.commit=function(){return COMMIT_MESSAGE},i.rollback=function(){return ROLLBACK_MESSAGE},i.runWithMetadata=function(e,t,r){var r=void 0===r?{}:r,n=buildTxMetadata(r.bookmarks,r.txConfig,r.database,r.mode,r.impersonatedUser,r.notificationFilter);return new i(RUN,[e,t,n],function(){return"RUN ".concat(e," ").concat(neo4j_driver_core_1$y.json.stringify(t)," ").concat(neo4j_driver_core_1$y.json.stringify(n))})},i.runWithMetadata5x5=function(e,t,r){var r=void 0===r?{}:r,n=buildTxMetadata(r.bookmarks,r.txConfig,r.database,r.mode,r.impersonatedUser,r.notificationFilter,{appendNotificationFilter:appendGqlNotificationFilterToMetadata});return new i(RUN,[e,t,n],function(){return"RUN ".concat(e," ").concat(neo4j_driver_core_1$y.json.stringify(t)," ").concat(neo4j_driver_core_1$y.json.stringify(n))})},i.goodbye=function(){return GOODBYE_MESSAGE},i.pull=function(e){var e=void 0===e?{}:e,t=e.stmtId,t=void 0===t?NO_STATEMENT_ID:t,e=e.n,r=buildStreamMetadata(null==t?NO_STATEMENT_ID:t,(void 0===e?FETCH_ALL$5:e)||FETCH_ALL$5);return new i(PULL,[r],function(){return"PULL ".concat(neo4j_driver_core_1$y.json.stringify(r))})},i.discard=function(e){var e=void 0===e?{}:e,t=e.stmtId,t=void 0===t?NO_STATEMENT_ID:t,e=e.n,r=buildStreamMetadata(null==t?NO_STATEMENT_ID:t,(void 0===e?FETCH_ALL$5:e)||FETCH_ALL$5);return new i(DISCARD,[r],function(){return"DISCARD ".concat(neo4j_driver_core_1$y.json.stringify(r))})},i.telemetry=function(e){var e=e.api,t=(0,neo4j_driver_core_1$y.int)(e);return new i(TELEMETRY,[t],function(){return"TELEMETRY ".concat(t.toString())})},i.route=function(e,t,r){return new i(ROUTE,[e=void 0===e?{}:e,t=void 0===t?[]:t,r=void 0===r?null:r],function(){return"ROUTE ".concat(neo4j_driver_core_1$y.json.stringify(e)," ").concat(neo4j_driver_core_1$y.json.stringify(t)," ").concat(r)})},i.routeV4x4=function(e,t,r){void 0===e&&(e={}),void 0===t&&(t=[]);var n={};return(r=void 0===r?{}:r).databaseName&&(n.db=r.databaseName),r.impersonatedUser&&(n.imp_user=r.impersonatedUser),new i(ROUTE,[e,t,n],function(){return"ROUTE ".concat(neo4j_driver_core_1$y.json.stringify(e)," ").concat(neo4j_driver_core_1$y.json.stringify(t)," ").concat(neo4j_driver_core_1$y.json.stringify(n))})},i}());function buildTxMetadata(e,t,r,n,o,i,a){void 0===a&&(a={});var s={};return e.isEmpty()||(s.bookmarks=e.values()),null!==t.timeout&&(s.tx_timeout=t.timeout),t.metadata&&(s.tx_metadata=t.metadata),r&&(s.db=assertString(r,"database")),o&&(s.imp_user=assertString(o,"impersonatedUser")),n===ACCESS_MODE_READ&&(s.mode=READ_MODE),(null!=(e=a.appendNotificationFilter)?e:appendLegacyNotificationFilterToMetadata)(s,i),s}function buildStreamMetadata(e,t){t={n:(0,neo4j_driver_core_1$y.int)(t)};return e!==NO_STATEMENT_ID&&(t.qid=(0,neo4j_driver_core_1$y.int)(e)),t}function appendLegacyNotificationFilterToMetadata(e,t){t&&(t.minimumSeverityLevel&&(e.notifications_minimum_severity=t.minimumSeverityLevel),t.disabledCategories&&(e.notifications_disabled_categories=t.disabledCategories),t.disabledClassifications&&(e.notifications_disabled_categories=t.disabledClassifications))}function appendGqlNotificationFilterToMetadata(e,t){t&&(t.minimumSeverityLevel&&(e.notifications_minimum_severity=t.minimumSeverityLevel),t.disabledCategories&&(e.notifications_disabled_classifications=t.disabledCategories),t.disabledClassifications&&(e.notifications_disabled_classifications=t.disabledClassifications))}var PULL_ALL_MESSAGE=new(requestMessage.default=RequestMessage)(PULL_ALL,[],function(){return"PULL_ALL"}),RESET_MESSAGE=new RequestMessage(RESET,[],function(){return"RESET"}),COMMIT_MESSAGE=new RequestMessage(COMMIT,[],function(){return"COMMIT"}),ROLLBACK_MESSAGE=new RequestMessage(ROLLBACK,[],function(){return"ROLLBACK"}),GOODBYE_MESSAGE=new RequestMessage(GOODBYE,[],function(){return"GOODBYE"}),boltProtocolV1_transformer={},transformer={},packstream_1$6=(Object.defineProperty(transformer,"__esModule",{value:!0}),transformer.TypeTransformer=void 0,packstream),neo4j_driver_core_1$x=lib$1,objectUtil=lib$1.internal.objectUtil,Transformer=function(){function e(e){this._transformers=e,this._transformersPerSignature=new Map(e.map(function(e){return[e.signature,e]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return e.prototype.fromStructure=function(e){try{return e instanceof packstream_1$6.structure.Structure&&this._transformersPerSignature.has(e.signature)?(0,this._transformersPerSignature.get(e.signature).fromStructure)(e):e}catch(e){return objectUtil.createBrokenObject(e)}},e.prototype.toStructure=function(t){var e=this._transformers.find(function(e){return(0,e.isTypeInstance)(t)});return void 0!==e?e.toStructure(t):t},e}(),TypeTransformer=(transformer.default=Transformer,function(){function o(e){var t=e.signature,r=e.fromStructure,n=e.toStructure,e=e.isTypeInstance;this.signature=t,this.isTypeInstance=e,this.fromStructure=r,this.toStructure=n,Object.freeze(this)}return o.prototype.extendsWith=function(e){var t=e.signature,r=e.fromStructure,n=e.toStructure,e=e.isTypeInstance;return new o({signature:t||this.signature,fromStructure:r||this.fromStructure,toStructure:n||this.toStructure,isTypeInstance:e||this.isTypeInstance})},o}()),__read$6=(transformer.TypeTransformer=TypeTransformer,commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}),neo4j_driver_core_1$w=(Object.defineProperty(boltProtocolV1_transformer,"__esModule",{value:!0}),lib$1),packstream_1$5=packstream,transformer_1$i=transformer,PROTOCOL_ERROR$2=neo4j_driver_core_1$w.error.PROTOCOL_ERROR,NODE=78,NODE_STRUCT_SIZE$1=3,RELATIONSHIP=82,RELATIONSHIP_STRUCT_SIZE$1=5,UNBOUND_RELATIONSHIP=114,UNBOUND_RELATIONSHIP_STRUCT_SIZE$1=3,PATH=80,PATH_STRUCT_SIZE=3;function createNodeTransformer$1(){return new transformer_1$i.TypeTransformer({signature:NODE,isTypeInstance:function(e){return e instanceof neo4j_driver_core_1$w.Node},toStructure:function(e){throw(0,neo4j_driver_core_1$w.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(e),PROTOCOL_ERROR$2)},fromStructure:function(e){packstream_1$5.structure.verifyStructSize("Node",NODE_STRUCT_SIZE$1,e.size);var e=__read$6(e.fields,3),t=e[0],r=e[1],e=e[2];return new neo4j_driver_core_1$w.Node(t,r,e)}})}function createRelationshipTransformer$1(){return new transformer_1$i.TypeTransformer({signature:RELATIONSHIP,isTypeInstance:function(e){return e instanceof neo4j_driver_core_1$w.Relationship},toStructure:function(e){throw(0,neo4j_driver_core_1$w.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(e),PROTOCOL_ERROR$2)},fromStructure:function(e){packstream_1$5.structure.verifyStructSize("Relationship",RELATIONSHIP_STRUCT_SIZE$1,e.size);var e=__read$6(e.fields,5),t=e[0],r=e[1],n=e[2],o=e[3],e=e[4];return new neo4j_driver_core_1$w.Relationship(t,r,n,o,e)}})}function createUnboundRelationshipTransformer$1(){return new transformer_1$i.TypeTransformer({signature:UNBOUND_RELATIONSHIP,isTypeInstance:function(e){return e instanceof neo4j_driver_core_1$w.UnboundRelationship},toStructure:function(e){throw(0,neo4j_driver_core_1$w.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(e),PROTOCOL_ERROR$2)},fromStructure:function(e){packstream_1$5.structure.verifyStructSize("UnboundRelationship",UNBOUND_RELATIONSHIP_STRUCT_SIZE$1,e.size);var e=__read$6(e.fields,3),t=e[0],r=e[1],e=e[2];return new neo4j_driver_core_1$w.UnboundRelationship(t,r,e)}})}function createPathTransformer(){return new transformer_1$i.TypeTransformer({signature:PATH,isTypeInstance:function(e){return e instanceof neo4j_driver_core_1$w.Path},toStructure:function(e){throw(0,neo4j_driver_core_1$w.newError)("It is not allowed to pass paths in query parameters, given: ".concat(e),PROTOCOL_ERROR$2)},fromStructure:function(e){packstream_1$5.structure.verifyStructSize("Path",PATH_STRUCT_SIZE,e.size);for(var e=__read$6(e.fields,3),t=e[0],r=e[1],n=e[2],o=[],i=t[0],a=0;a<n.length;a+=2){var s=t[n[a+1]],u=(0,neo4j_driver_core_1$w.toNumber)(n[a]),c=void 0;0<u?(c=r[u-1])instanceof neo4j_driver_core_1$w.UnboundRelationship&&(r[u-1]=c=c.bindTo(i,s)):(c=r[-u-1])instanceof neo4j_driver_core_1$w.UnboundRelationship&&(r[-u-1]=c=c.bindTo(s,i)),o.push(new neo4j_driver_core_1$w.PathSegment(i,c,s)),i=s}return new neo4j_driver_core_1$w.Path(t[0],t[t.length-1],o)}})}boltProtocolV1_transformer.default={createNodeTransformer:createNodeTransformer$1,createRelationshipTransformer:createRelationshipTransformer$1,createUnboundRelationshipTransformer:createUnboundRelationshipTransformer$1,createPathTransformer:createPathTransformer};var __assign$r=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding$1(t,e,r);return __setModuleDefault$1(t,e),t},__importDefault$F=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_util_1$7=(Object.defineProperty(boltProtocolV1,"__esModule",{value:!0}),boltProtocolUtil),packstream_1$4=packstream,request_message_1$c=__importStar$1(requestMessage),stream_observers_1$c=streamObservers,neo4j_driver_core_1$v=lib$1,bolt_protocol_v1_transformer_1$1=__importDefault$F(boltProtocolV1_transformer),transformer_1$h=__importDefault$F(transformer),Bookmarks$3=neo4j_driver_core_1$v.internal.bookmarks.Bookmarks,_a$b=neo4j_driver_core_1$v.internal.constants,ACCESS_MODE_WRITE=_a$b.ACCESS_MODE_WRITE,BOLT_PROTOCOL_V1=_a$b.BOLT_PROTOCOL_V1,TxConfig$2=(neo4j_driver_core_1$v.internal.logger.Logger,neo4j_driver_core_1$v.internal.txConfig.TxConfig),DEFAULT_DIAGNOSTIC_RECORD$3=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),BoltProtocol$g=function(){function e(e,t,r,n,o,i){var r=void 0===r?{}:r,a=r.disableLosslessIntegers,r=r.useBigInt;void 0===n&&(n=function(){return null}),this._server=e||{},this._chunker=t,this._packer=this._createPacker(t),this._unpacker=this._createUnpacker(a,r),this._responseHandler=n(this),this._log=o,this._onProtocolError=i,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:a,useBigInt:r}}return Object.defineProperty(e.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new transformer_1$h.default(Object.values(bolt_protocol_v1_transformer_1$1.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return BOLT_PROTOCOL_V1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),e.prototype.packer=function(){return this._packer},e.prototype.packable=function(e){return this._packer.packable(e,this.transformer.toStructure)},e.prototype.unpacker=function(){return this._unpacker},e.prototype.unpack=function(e){return this._unpacker.unpack(e,this.transformer.fromStructure)},e.prototype.transformMetadata=function(e){return e},e.prototype.enrichErrorMetadata=function(e){return __assign$r(__assign$r({},e),{diagnostic_record:null!==e.diagnostic_record?__assign$r(__assign$r({},DEFAULT_DIAGNOSTIC_RECORD$3),e.diagnostic_record):null})},e.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=(e.boltAgent,e.authToken),o=e.notificationFilter,i=e.onError,a=e.onComplete,e=new stream_observers_1$c.LoginObserver({onError:function(e){return t._onLoginError(e,i)},onCompleted:function(e){return t._onLoginCompleted(e,a)}});return(0,bolt_protocol_util_1$7.assertNotificationFilterIsEmpty)(o,this._onProtocolError,e),this.write(request_message_1$c.default.init(r,n),e,!0),e},e.prototype.logoff=function(e){var e=void 0===e?{}:e,t=e.onComplete,r=e.onError,e=(e.flush,new stream_observers_1$c.LogoffObserver({onCompleted:t,onError:r})),t=(0,neo4j_driver_core_1$v.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(t.message),e.onError(t),t},e.prototype.logon=function(e){var t=this,e=void 0===e?{}:e,r=e.authToken,n=e.onComplete,o=e.onError,e=(e.flush,new stream_observers_1$c.LoginObserver({onCompleted:function(){return t._onLoginCompleted({},r,n)},onError:function(e){return t._onLoginError(e,o)}})),i=(0,neo4j_driver_core_1$v.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(i.message),e.onError(i),i},e.prototype.prepareToClose=function(){},e.prototype.beginTransaction=function(e){var e=void 0===e?{}:e,t=e.bookmarks,r=e.txConfig,n=e.database,o=e.mode,i=e.impersonatedUser,a=e.notificationFilter,s=e.beforeError,u=e.afterError,c=e.beforeComplete,e=e.afterComplete;return this.run("BEGIN",t?t.asBeginTransactionParameters():{},{bookmarks:t,txConfig:r,database:n,mode:o,impersonatedUser:i,notificationFilter:a,beforeError:s,afterError:u,beforeComplete:c,afterComplete:e,flush:!1})},e.prototype.commitTransaction=function(e){var e=void 0===e?{}:e,t=e.beforeError,r=e.afterError,n=e.beforeComplete,e=e.afterComplete;return this.run("COMMIT",{},{bookmarks:Bookmarks$3.empty(),txConfig:TxConfig$2.empty(),mode:ACCESS_MODE_WRITE,beforeError:t,afterError:r,beforeComplete:n,afterComplete:e})},e.prototype.rollbackTransaction=function(e){var e=void 0===e?{}:e,t=e.beforeError,r=e.afterError,n=e.beforeComplete,e=e.afterComplete;return this.run("ROLLBACK",{},{bookmarks:Bookmarks$3.empty(),txConfig:TxConfig$2.empty(),mode:ACCESS_MODE_WRITE,beforeError:t,afterError:r,beforeComplete:n,afterComplete:e})},e.prototype.run=function(e,t,r){var r=void 0===r?{}:r,n=(r.bookmarks,r.txConfig),o=r.database,i=(r.mode,r.impersonatedUser),a=r.notificationFilter,s=r.beforeKeys,u=r.afterKeys,c=r.beforeError,l=r.afterError,f=r.beforeComplete,_=r.afterComplete,p=r.flush,p=void 0===p||p,d=r.highRecordWatermark,d=void 0===d?Number.MAX_VALUE:d,r=r.lowRecordWatermark,r=void 0===r?Number.MAX_VALUE:r,s=new stream_observers_1$c.ResultStreamObserver({server:this._server,beforeKeys:s,afterKeys:u,beforeError:c,afterError:l,beforeComplete:f,afterComplete:_,highRecordWatermark:d,lowRecordWatermark:r});return(0,bolt_protocol_util_1$7.assertTxConfigIsEmpty)(n,this._onProtocolError,s),(0,bolt_protocol_util_1$7.assertDatabaseIsEmpty)(o,this._onProtocolError,s),(0,bolt_protocol_util_1$7.assertImpersonatedUserIsEmpty)(i,this._onProtocolError,s),(0,bolt_protocol_util_1$7.assertNotificationFilterIsEmpty)(a,this._onProtocolError,s),this.write(request_message_1$c.default.run(e,t),s,!1),this.write(request_message_1$c.default.pullAll(),s,p),s},Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),e.prototype.reset=function(e){var e=void 0===e?{}:e,t=e.onError,e=e.onComplete,t=new stream_observers_1$c.ResetObserver({onProtocolError:this._onProtocolError,onError:t,onComplete:e});return this.write(request_message_1$c.default.reset(),t,!0),t},e.prototype.telemetry=function(e,t){e.api;e=void 0===t?{}:t,e.onError,t=e.onCompleted,e=new stream_observers_1$c.CompletedObserver;return t&&t(),e},e.prototype._createPacker=function(e){return new packstream_1$4.v1.Packer(e)},e.prototype._createUnpacker=function(e,t){return new packstream_1$4.v1.Unpacker(e,t)},e.prototype.write=function(e,t,r){this.queueObserverIfProtocolIsNotBroken(t)&&(this._log.isDebugEnabled()&&this._log.debug("C: ".concat(e)),this._lastMessageSignature=e.signature,t=new packstream_1$4.structure.Structure(e.signature,e.fields),this.packable(t)(),this._chunker.messageBoundary(),r&&this._chunker.flush())},e.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===request_message_1$c.SIGNATURES.HELLO||this._lastMessageSignature===request_message_1$c.SIGNATURES.LOGON},e.prototype.isLastMessageReset=function(){return this._lastMessageSignature===request_message_1$c.SIGNATURES.RESET},e.prototype.notifyFatalError=function(e){return this._fatalError=e,this._responseHandler._notifyErrorToObservers(e)},e.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},e.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},e.prototype.queueObserverIfProtocolIsNotBroken=function(e){return this.isBroken()?(this.notifyFatalErrorToObserver(e),!1):this._responseHandler._queueObserver(e)},e.prototype.isBroken=function(){return!!this._fatalError},e.prototype.notifyFatalErrorToObserver=function(e){e&&e.onError&&e.onError(this._fatalError)},e.prototype.resetFailure=function(){this._responseHandler._resetFailure()},e.prototype._onLoginCompleted=function(e,t,r){this._initialized=!0,this._authToken=t,e&&(t=e.server,this._server.version||(this._server.version=t)),r&&r(e)},e.prototype._onLoginError=function(e,t){this._onProtocolError(e.message),t&&t(e)},e}(),boltProtocolV2=(boltProtocolV1.default=BoltProtocol$g,{}),boltProtocolV2_transformer={},temporalFactory={},neo4j_driver_core_1$u=(Object.defineProperty(temporalFactory,"__esModule",{value:!0}),temporalFactory.epochSecondAndNanoToLocalDateTime=temporalFactory.nanoOfDayToLocalTime=temporalFactory.epochDayToDate=void 0,lib$1),_a$a=neo4j_driver_core_1$u.internal.temporalUtil,DAYS_0000_TO_1970=_a$a.DAYS_0000_TO_1970,DAYS_PER_400_YEAR_CYCLE=_a$a.DAYS_PER_400_YEAR_CYCLE,NANOS_PER_HOUR=_a$a.NANOS_PER_HOUR,NANOS_PER_MINUTE=_a$a.NANOS_PER_MINUTE,NANOS_PER_SECOND=_a$a.NANOS_PER_SECOND,SECONDS_PER_DAY=_a$a.SECONDS_PER_DAY,floorDiv=_a$a.floorDiv,floorMod=_a$a.floorMod;function epochDayToDate(e){var e=(e=(0,neo4j_driver_core_1$u.int)(e)).add(DAYS_0000_TO_1970).subtract(60),t=(0,neo4j_driver_core_1$u.int)(0),r=(e.lessThan(0)&&(t=(r=e.add(1).div(DAYS_PER_400_YEAR_CYCLE).subtract(1)).multiply(400),e=e.add(r.multiply(-DAYS_PER_400_YEAR_CYCLE))),e.multiply(400).add(591).div(DAYS_PER_400_YEAR_CYCLE)),n=e.subtract(r.multiply(365).add(r.div(4)).subtract(r.div(100)).add(r.div(400))),e=(n.lessThan(0)&&(r=r.subtract(1),n=e.subtract(r.multiply(365).add(r.div(4)).subtract(r.div(100)).add(r.div(400)))),r=r.add(t),n),t=e.multiply(5).add(2).div(153),n=t.add(2).modulo(12).add(1),e=e.subtract(t.multiply(306).add(5).div(10)).add(1),r=r.add(t.div(10));return new neo4j_driver_core_1$u.Date(r,n,e)}function nanoOfDayToLocalTime(e){var t=(e=(0,neo4j_driver_core_1$u.int)(e)).div(NANOS_PER_HOUR),r=(e=e.subtract(t.multiply(NANOS_PER_HOUR))).div(NANOS_PER_MINUTE),n=(e=e.subtract(r.multiply(NANOS_PER_MINUTE))).div(NANOS_PER_SECOND),e=e.subtract(n.multiply(NANOS_PER_SECOND));return new neo4j_driver_core_1$u.LocalTime(t,r,n,e)}function epochSecondAndNanoToLocalDateTime(e,t){var r=floorDiv(e,SECONDS_PER_DAY),e=floorMod(e,SECONDS_PER_DAY).multiply(NANOS_PER_SECOND).add(t),t=epochDayToDate(r),r=nanoOfDayToLocalTime(e);return new neo4j_driver_core_1$u.LocalDateTime(t.year,t.month,t.day,r.hour,r.minute,r.second,r.nanosecond)}temporalFactory.epochDayToDate=epochDayToDate,temporalFactory.nanoOfDayToLocalTime=nanoOfDayToLocalTime,temporalFactory.epochSecondAndNanoToLocalDateTime=epochSecondAndNanoToLocalDateTime;var __assign$q=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$q=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__read$5=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__importDefault$E=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},neo4j_driver_core_1$t=(Object.defineProperty(boltProtocolV2_transformer,"__esModule",{value:!0}),lib$1),packstream_1$3=packstream,transformer_1$g=transformer,temporal_factory_1$1=temporalFactory,bolt_protocol_v1_transformer_1=__importDefault$E(boltProtocolV1_transformer),_a$9=neo4j_driver_core_1$t.internal.temporalUtil,dateToEpochDay=_a$9.dateToEpochDay,localDateTimeToEpochSecond$1=_a$9.localDateTimeToEpochSecond,localTimeToNanoOfDay=_a$9.localTimeToNanoOfDay,POINT_2D=88,POINT_2D_STRUCT_SIZE=3,POINT_3D=89,POINT_3D_STRUCT_SIZE=4,DURATION=69,DURATION_STRUCT_SIZE=4,LOCAL_TIME=116,LOCAL_TIME_STRUCT_SIZE=1,TIME=84,TIME_STRUCT_SIZE=2,DATE=68,DATE_STRUCT_SIZE=1,LOCAL_DATE_TIME=100,LOCAL_DATE_TIME_STRUCT_SIZE=2,DATE_TIME_WITH_ZONE_OFFSET$1=70,DATE_TIME_WITH_ZONE_OFFSET_STRUCT_SIZE$1=3,DATE_TIME_WITH_ZONE_ID$1=102,DATE_TIME_WITH_ZONE_ID_STRUCT_SIZE$1=3;function createPoint2DTransformer(){return new transformer_1$g.TypeTransformer({signature:POINT_2D,isTypeInstance:function(e){return(0,neo4j_driver_core_1$t.isPoint)(e)&&(null===e.z||void 0===e.z)},toStructure:function(e){return new packstream_1$3.structure.Structure(POINT_2D,[(0,neo4j_driver_core_1$t.int)(e.srid),e.x,e.y])},fromStructure:function(e){packstream_1$3.structure.verifyStructSize("Point2D",POINT_2D_STRUCT_SIZE,e.size);var e=__read$5(e.fields,3),t=e[0],r=e[1],e=e[2];return new neo4j_driver_core_1$t.Point(t,r,e,void 0)}})}function createPoint3DTransformer(){return new transformer_1$g.TypeTransformer({signature:POINT_3D,isTypeInstance:function(e){return(0,neo4j_driver_core_1$t.isPoint)(e)&&null!==e.z&&void 0!==e.z},toStructure:function(e){return new packstream_1$3.structure.Structure(POINT_3D,[(0,neo4j_driver_core_1$t.int)(e.srid),e.x,e.y,e.z])},fromStructure:function(e){packstream_1$3.structure.verifyStructSize("Point3D",POINT_3D_STRUCT_SIZE,e.size);var e=__read$5(e.fields,4),t=e[0],r=e[1],n=e[2],e=e[3];return new neo4j_driver_core_1$t.Point(t,r,n,e)}})}function createDurationTransformer(){return new transformer_1$g.TypeTransformer({signature:DURATION,isTypeInstance:neo4j_driver_core_1$t.isDuration,toStructure:function(e){var t=(0,neo4j_driver_core_1$t.int)(e.months),r=(0,neo4j_driver_core_1$t.int)(e.days),n=(0,neo4j_driver_core_1$t.int)(e.seconds),e=(0,neo4j_driver_core_1$t.int)(e.nanoseconds);return new packstream_1$3.structure.Structure(DURATION,[t,r,n,e])},fromStructure:function(e){packstream_1$3.structure.verifyStructSize("Duration",DURATION_STRUCT_SIZE,e.size);var e=__read$5(e.fields,4),t=e[0],r=e[1],n=e[2],e=e[3];return new neo4j_driver_core_1$t.Duration(t,r,n,e)}})}function createLocalTimeTransformer(e){var t=e.disableLosslessIntegers,r=e.useBigInt;return new transformer_1$g.TypeTransformer({signature:LOCAL_TIME,isTypeInstance:neo4j_driver_core_1$t.isLocalTime,toStructure:function(e){e=localTimeToNanoOfDay(e.hour,e.minute,e.second,e.nanosecond);return new packstream_1$3.structure.Structure(LOCAL_TIME,[e])},fromStructure:function(e){packstream_1$3.structure.verifyStructSize("LocalTime",LOCAL_TIME_STRUCT_SIZE,e.size);e=__read$5(e.fields,1)[0];return convertIntegerPropsIfNeeded$1((0,temporal_factory_1$1.nanoOfDayToLocalTime)(e),t,r)}})}function createTimeTransformer(e){var r=e.disableLosslessIntegers,n=e.useBigInt;return new transformer_1$g.TypeTransformer({signature:TIME,isTypeInstance:neo4j_driver_core_1$t.isTime,toStructure:function(e){var t=localTimeToNanoOfDay(e.hour,e.minute,e.second,e.nanosecond),e=(0,neo4j_driver_core_1$t.int)(e.timeZoneOffsetSeconds);return new packstream_1$3.structure.Structure(TIME,[t,e])},fromStructure:function(e){packstream_1$3.structure.verifyStructSize("Time",TIME_STRUCT_SIZE,e.size);var e=__read$5(e.fields,2),t=e[0],e=e[1],t=(0,temporal_factory_1$1.nanoOfDayToLocalTime)(t);return convertIntegerPropsIfNeeded$1(new neo4j_driver_core_1$t.Time(t.hour,t.minute,t.second,t.nanosecond,e),r,n)}})}function createDateTransformer(e){var t=e.disableLosslessIntegers,r=e.useBigInt;return new transformer_1$g.TypeTransformer({signature:DATE,isTypeInstance:neo4j_driver_core_1$t.isDate,toStructure:function(e){e=dateToEpochDay(e.year,e.month,e.day);return new packstream_1$3.structure.Structure(DATE,[e])},fromStructure:function(e){packstream_1$3.structure.verifyStructSize("Date",DATE_STRUCT_SIZE,e.size);e=__read$5(e.fields,1)[0];return convertIntegerPropsIfNeeded$1((0,temporal_factory_1$1.epochDayToDate)(e),t,r)}})}function createLocalDateTimeTransformer(e){var r=e.disableLosslessIntegers,n=e.useBigInt;return new transformer_1$g.TypeTransformer({signature:LOCAL_DATE_TIME,isTypeInstance:neo4j_driver_core_1$t.isLocalDateTime,toStructure:function(e){var t=localDateTimeToEpochSecond$1(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),e=(0,neo4j_driver_core_1$t.int)(e.nanosecond);return new packstream_1$3.structure.Structure(LOCAL_DATE_TIME,[t,e])},fromStructure:function(e){packstream_1$3.structure.verifyStructSize("LocalDateTime",LOCAL_DATE_TIME_STRUCT_SIZE,e.size);var e=__read$5(e.fields,2),t=e[0],e=e[1];return convertIntegerPropsIfNeeded$1((0,temporal_factory_1$1.epochSecondAndNanoToLocalDateTime)(t,e),r,n)}})}function createDateTimeWithZoneIdTransformer$1(e){var n=e.disableLosslessIntegers,o=e.useBigInt;return new transformer_1$g.TypeTransformer({signature:DATE_TIME_WITH_ZONE_ID$1,isTypeInstance:function(e){return(0,neo4j_driver_core_1$t.isDateTime)(e)&&null!=e.timeZoneId},toStructure:function(e){var t=localDateTimeToEpochSecond$1(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),r=(0,neo4j_driver_core_1$t.int)(e.nanosecond),e=e.timeZoneId;return new packstream_1$3.structure.Structure(DATE_TIME_WITH_ZONE_ID$1,[t,r,e])},fromStructure:function(e){packstream_1$3.structure.verifyStructSize("DateTimeWithZoneId",DATE_TIME_WITH_ZONE_ID_STRUCT_SIZE$1,e.size);var e=__read$5(e.fields,3),t=e[0],r=e[1],e=e[2],t=(0,temporal_factory_1$1.epochSecondAndNanoToLocalDateTime)(t,r);return convertIntegerPropsIfNeeded$1(new neo4j_driver_core_1$t.DateTime(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond,null,e),n,o)}})}function createDateTimeWithOffsetTransformer$1(e){var n=e.disableLosslessIntegers,o=e.useBigInt;return new transformer_1$g.TypeTransformer({signature:DATE_TIME_WITH_ZONE_OFFSET$1,isTypeInstance:function(e){return(0,neo4j_driver_core_1$t.isDateTime)(e)&&null==e.timeZoneId},toStructure:function(e){var t=localDateTimeToEpochSecond$1(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),r=(0,neo4j_driver_core_1$t.int)(e.nanosecond),e=(0,neo4j_driver_core_1$t.int)(e.timeZoneOffsetSeconds);return new packstream_1$3.structure.Structure(DATE_TIME_WITH_ZONE_OFFSET$1,[t,r,e])},fromStructure:function(e){packstream_1$3.structure.verifyStructSize("DateTimeWithZoneOffset",DATE_TIME_WITH_ZONE_OFFSET_STRUCT_SIZE$1,e.size);var e=__read$5(e.fields,3),t=e[0],r=e[1],e=e[2],t=(0,temporal_factory_1$1.epochSecondAndNanoToLocalDateTime)(t,r);return convertIntegerPropsIfNeeded$1(new neo4j_driver_core_1$t.DateTime(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond,e,null),n,o)}})}function convertIntegerPropsIfNeeded$1(e,t,r){if(!t&&!r)return e;var n,o,i,a=Object.create(Object.getPrototypeOf(e));for(n in e)!0===Object.prototype.hasOwnProperty.call(e,n)&&(o=e[n],a[n]=(0,neo4j_driver_core_1$t.isInt)(o)?(i=o,r?i.toBigInt():i.toNumberOrInfinity()):o);return Object.freeze(a),a}boltProtocolV2_transformer.default=__assign$q(__assign$q({},bolt_protocol_v1_transformer_1.default),{createPoint2DTransformer:createPoint2DTransformer,createPoint3DTransformer:createPoint3DTransformer,createDurationTransformer:createDurationTransformer,createLocalTimeTransformer:createLocalTimeTransformer,createTimeTransformer:createTimeTransformer,createDateTransformer:createDateTransformer,createLocalDateTimeTransformer:createLocalDateTimeTransformer,createDateTimeWithZoneIdTransformer:createDateTimeWithZoneIdTransformer$1,createDateTimeWithOffsetTransformer:createDateTimeWithOffsetTransformer$1});var __extends$m=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__importDefault$D=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v1_1$1=(Object.defineProperty(boltProtocolV2,"__esModule",{value:!0}),__importDefault$D(boltProtocolV1)),packstream_1$2=__importDefault$D(packstream),neo4j_driver_core_1$s=lib$1,bolt_protocol_v2_transformer_1$1=__importDefault$D(boltProtocolV2_transformer),transformer_1$f=__importDefault$D(transformer),BOLT_PROTOCOL_V2=neo4j_driver_core_1$s.internal.constants.BOLT_PROTOCOL_V2,BoltProtocol$f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$m(t,e),t.prototype._createPacker=function(e){return new packstream_1$2.default.Packer(e)},t.prototype._createUnpacker=function(e,t){return new packstream_1$2.default.Unpacker(e,t)},Object.defineProperty(t.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new transformer_1$f.default(Object.values(bolt_protocol_v2_transformer_1$1.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return BOLT_PROTOCOL_V2},enumerable:!1,configurable:!0}),t}(bolt_protocol_v1_1$1.default),boltProtocolV3=(boltProtocolV2.default=BoltProtocol$f,{}),boltProtocolV3_transformer={},__assign$p=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$p=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$C=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v2_transformer_1=(Object.defineProperty(boltProtocolV3_transformer,"__esModule",{value:!0}),__importDefault$C(boltProtocolV2_transformer)),__extends$l=(boltProtocolV3_transformer.default=__assign$p({},bolt_protocol_v2_transformer_1.default),commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__assign$o=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$B=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v2_1$1=(Object.defineProperty(boltProtocolV3,"__esModule",{value:!0}),__importDefault$B(boltProtocolV2)),request_message_1$b=__importDefault$B(requestMessage),bolt_protocol_util_1$6=boltProtocolUtil,stream_observers_1$b=streamObservers,bolt_protocol_v3_transformer_1$1=__importDefault$B(boltProtocolV3_transformer),transformer_1$e=__importDefault$B(transformer),neo4j_driver_core_1$r=lib$1,BOLT_PROTOCOL_V3$2=(neo4j_driver_core_1$r.internal.bookmarks.Bookmarks,neo4j_driver_core_1$r.internal.constants.BOLT_PROTOCOL_V3),TxConfig$1=neo4j_driver_core_1$r.internal.txConfig.TxConfig,CONTEXT$1="context",CALL_GET_ROUTING_TABLE="CALL dbms.cluster.routing.getRoutingTable($".concat(CONTEXT$1,")"),noOpObserver=new stream_observers_1$b.StreamObserver,BoltProtocol$e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$l(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return BOLT_PROTOCOL_V3$2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new transformer_1$e.default(Object.values(bolt_protocol_v3_transformer_1$1.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.transformMetadata=function(e){return"t_first"in e&&(e.result_available_after=e.t_first,delete e.t_first),"t_last"in e&&(e.result_consumed_after=e.t_last,delete e.t_last),e},t.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=(e.boltAgent,e.authToken),o=e.notificationFilter,i=e.onError,a=e.onComplete,e=new stream_observers_1$b.LoginObserver({onError:function(e){return t._onLoginError(e,i)},onCompleted:function(e){return t._onLoginCompleted(e,n,a)}});return(0,bolt_protocol_util_1$6.assertNotificationFilterIsEmpty)(o,this._onProtocolError,e),this.write(request_message_1$b.default.hello(r,n),e,!0),e},t.prototype.prepareToClose=function(){this.write(request_message_1$b.default.goodbye(),noOpObserver,!0)},t.prototype.beginTransaction=function(e){var e=void 0===e?{}:e,t=e.bookmarks,r=e.txConfig,n=e.database,o=e.impersonatedUser,i=e.notificationFilter,a=e.mode,s=e.beforeError,u=e.afterError,c=e.beforeComplete,e=e.afterComplete,s=new stream_observers_1$b.ResultStreamObserver({server:this._server,beforeError:s,afterError:u,beforeComplete:c,afterComplete:e});return s.prepareToHandleSingleResponse(),(0,bolt_protocol_util_1$6.assertDatabaseIsEmpty)(n,this._onProtocolError,s),(0,bolt_protocol_util_1$6.assertImpersonatedUserIsEmpty)(o,this._onProtocolError,s),(0,bolt_protocol_util_1$6.assertNotificationFilterIsEmpty)(i,this._onProtocolError,s),this.write(request_message_1$b.default.begin({bookmarks:t,txConfig:r,mode:a}),s,!0),s},t.prototype.commitTransaction=function(e){var e=void 0===e?{}:e,t=e.beforeError,r=e.afterError,n=e.beforeComplete,e=e.afterComplete,t=new stream_observers_1$b.ResultStreamObserver({server:this._server,beforeError:t,afterError:r,beforeComplete:n,afterComplete:e});return t.prepareToHandleSingleResponse(),this.write(request_message_1$b.default.commit(),t,!0),t},t.prototype.rollbackTransaction=function(e){var e=void 0===e?{}:e,t=e.beforeError,r=e.afterError,n=e.beforeComplete,e=e.afterComplete,t=new stream_observers_1$b.ResultStreamObserver({server:this._server,beforeError:t,afterError:r,beforeComplete:n,afterComplete:e});return t.prepareToHandleSingleResponse(),this.write(request_message_1$b.default.rollback(),t,!0),t},t.prototype.run=function(e,t,r){var r=void 0===r?{}:r,n=r.bookmarks,o=r.txConfig,i=r.database,a=r.impersonatedUser,s=r.notificationFilter,u=r.mode,c=r.beforeKeys,l=r.afterKeys,f=r.beforeError,_=r.afterError,p=r.beforeComplete,d=r.afterComplete,b=r.flush,b=void 0===b||b,m=r.highRecordWatermark,m=void 0===m?Number.MAX_VALUE:m,r=r.lowRecordWatermark,r=void 0===r?Number.MAX_VALUE:r,c=new stream_observers_1$b.ResultStreamObserver({server:this._server,beforeKeys:c,afterKeys:l,beforeError:f,afterError:_,beforeComplete:p,afterComplete:d,highRecordWatermark:m,lowRecordWatermark:r});return(0,bolt_protocol_util_1$6.assertDatabaseIsEmpty)(i,this._onProtocolError,c),(0,bolt_protocol_util_1$6.assertImpersonatedUserIsEmpty)(a,this._onProtocolError,c),(0,bolt_protocol_util_1$6.assertNotificationFilterIsEmpty)(s,this._onProtocolError,c),this.write(request_message_1$b.default.runWithMetadata(e,t,{bookmarks:n,txConfig:o,mode:u}),c,!1),this.write(request_message_1$b.default.pullAll(),c,b),c},t.prototype.requestRoutingInformation=function(e){var t,r=e.routingContext,n=e.sessionContext,n=void 0===n?{}:n,o=e.onError,e=e.onCompleted,r=this.run(CALL_GET_ROUTING_TABLE,((t={})[CONTEXT$1]=void 0===r?{}:r,t),__assign$o(__assign$o({},n),{txConfig:TxConfig$1.empty()}));return new stream_observers_1$b.ProcedureRouteObserver({resultObserver:r,onProtocolError:this._onProtocolError,onError:o,onCompleted:e})},t}(bolt_protocol_v2_1$1.default),boltProtocolV4x0=(boltProtocolV3.default=BoltProtocol$e,{}),boltProtocolV4x0_transformer={},__assign$n=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$A=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v3_transformer_1=(Object.defineProperty(boltProtocolV4x0_transformer,"__esModule",{value:!0}),__importDefault$A(boltProtocolV3_transformer)),__extends$k=(boltProtocolV4x0_transformer.default=__assign$n({},bolt_protocol_v3_transformer_1.default),commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__assign$m=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$m=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$z=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v3_1$1=(Object.defineProperty(boltProtocolV4x0,"__esModule",{value:!0}),__importDefault$z(boltProtocolV3)),request_message_1$a=__importDefault$z(requestMessage),bolt_protocol_util_1$5=boltProtocolUtil,stream_observers_1$a=streamObservers,bolt_protocol_v4x0_transformer_1$1=__importDefault$z(boltProtocolV4x0_transformer),transformer_1$d=__importDefault$z(transformer),neo4j_driver_core_1$q=lib$1,_a$8=(neo4j_driver_core_1$q.internal.bookmarks.Bookmarks,neo4j_driver_core_1$q.internal.constants),BOLT_PROTOCOL_V4_0$2=_a$8.BOLT_PROTOCOL_V4_0,FETCH_ALL$4=_a$8.FETCH_ALL,TxConfig=neo4j_driver_core_1$q.internal.txConfig.TxConfig,CONTEXT="context",DATABASE="database",CALL_GET_ROUTING_TABLE_MULTI_DB="CALL dbms.routing.getRoutingTable($".concat(CONTEXT,", $").concat(DATABASE,")"),BoltProtocol$d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$k(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return BOLT_PROTOCOL_V4_0$2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new transformer_1$d.default(Object.values(bolt_protocol_v4x0_transformer_1$1.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.beginTransaction=function(e){var e=void 0===e?{}:e,t=e.bookmarks,r=e.txConfig,n=e.database,o=e.impersonatedUser,i=e.notificationFilter,a=e.mode,s=e.beforeError,u=e.afterError,c=e.beforeComplete,e=e.afterComplete,s=new stream_observers_1$a.ResultStreamObserver({server:this._server,beforeError:s,afterError:u,beforeComplete:c,afterComplete:e});return s.prepareToHandleSingleResponse(),(0,bolt_protocol_util_1$5.assertImpersonatedUserIsEmpty)(o,this._onProtocolError,s),(0,bolt_protocol_util_1$5.assertNotificationFilterIsEmpty)(i,this._onProtocolError,s),this.write(request_message_1$a.default.begin({bookmarks:t,txConfig:r,database:n,mode:a}),s,!0),s},t.prototype.run=function(e,t,r){var r=void 0===r?{}:r,n=r.bookmarks,o=r.txConfig,i=r.database,a=r.impersonatedUser,s=r.notificationFilter,u=r.mode,c=r.beforeKeys,l=r.afterKeys,f=r.beforeError,_=r.afterError,p=r.beforeComplete,d=r.afterComplete,b=r.flush,b=void 0===b||b,m=r.reactive,m=void 0!==m&&m,h=r.fetchSize,h=void 0===h?FETCH_ALL$4:h,y=r.highRecordWatermark,y=void 0===y?Number.MAX_VALUE:y,r=r.lowRecordWatermark,r=void 0===r?Number.MAX_VALUE:r,c=new stream_observers_1$a.ResultStreamObserver({server:this._server,reactive:m,fetchSize:h,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:c,afterKeys:l,beforeError:f,afterError:_,beforeComplete:p,afterComplete:d,highRecordWatermark:y,lowRecordWatermark:r}),l=((0,bolt_protocol_util_1$5.assertImpersonatedUserIsEmpty)(a,this._onProtocolError,c),(0,bolt_protocol_util_1$5.assertNotificationFilterIsEmpty)(s,this._onProtocolError,c),m);return this.write(request_message_1$a.default.runWithMetadata(e,t,{bookmarks:n,txConfig:o,database:i,mode:u}),c,l&&b),m||this.write(request_message_1$a.default.pull({n:h}),c,b),c},t.prototype._requestMore=function(e,t,r){this.write(request_message_1$a.default.pull({stmtId:e,n:t}),r,!0)},t.prototype._requestDiscard=function(e,t){this.write(request_message_1$a.default.discard({stmtId:e}),t,!0)},t.prototype._noOp=function(){},t.prototype.requestRoutingInformation=function(e){var t,r=e.routingContext,n=e.databaseName,n=void 0===n?null:n,o=e.sessionContext,o=void 0===o?{}:o,i=e.onError,e=e.onCompleted,r=this.run(CALL_GET_ROUTING_TABLE_MULTI_DB,((t={})[CONTEXT]=void 0===r?{}:r,t[DATABASE]=n,t),__assign$m(__assign$m({},o),{txConfig:TxConfig.empty()}));return new stream_observers_1$a.ProcedureRouteObserver({resultObserver:r,onProtocolError:this._onProtocolError,onError:i,onCompleted:e})},t}(bolt_protocol_v3_1$1.default),boltProtocolV4x1=(boltProtocolV4x0.default=BoltProtocol$d,{}),boltProtocolV4x1_transformer={},__assign$l=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$y=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v4x0_transformer_1=(Object.defineProperty(boltProtocolV4x1_transformer,"__esModule",{value:!0}),__importDefault$y(boltProtocolV4x0_transformer)),__extends$j=(boltProtocolV4x1_transformer.default=__assign$l({},bolt_protocol_v4x0_transformer_1.default),commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__importDefault$x=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v4x0_1$1=(Object.defineProperty(boltProtocolV4x1,"__esModule",{value:!0}),__importDefault$x(boltProtocolV4x0)),request_message_1$9=__importDefault$x(requestMessage),stream_observers_1$9=streamObservers,neo4j_driver_core_1$p=lib$1,bolt_protocol_util_1$4=boltProtocolUtil,bolt_protocol_v4x1_transformer_1$1=__importDefault$x(boltProtocolV4x1_transformer),transformer_1$c=__importDefault$x(transformer),BOLT_PROTOCOL_V4_1=neo4j_driver_core_1$p.internal.constants.BOLT_PROTOCOL_V4_1,BoltProtocol$c=function(s){function e(e,t,r,n,o,i,a){e=s.call(this,e,t,r,n=void 0===n?function(){return null}:n,o,i)||this;return e._serversideRouting=a,e}return __extends$j(e,s),Object.defineProperty(e.prototype,"version",{get:function(){return BOLT_PROTOCOL_V4_1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new transformer_1$c.default(Object.values(bolt_protocol_v4x1_transformer_1$1.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),e.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=(e.boltAgent,e.authToken),o=e.notificationFilter,i=e.onError,a=e.onComplete,e=new stream_observers_1$9.LoginObserver({onError:function(e){return t._onLoginError(e,i)},onCompleted:function(e){return t._onLoginCompleted(e,n,a)}});return(0,bolt_protocol_util_1$4.assertNotificationFilterIsEmpty)(o,this._onProtocolError,e),this.write(request_message_1$9.default.hello(r,n,this._serversideRouting),e,!0),e},e}(bolt_protocol_v4x0_1$1.default),boltProtocolV4x2=(boltProtocolV4x1.default=BoltProtocol$c,{}),boltProtocolV4x2_transformer={},__assign$k=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$k=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$w=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v4x1_transformer_1=(Object.defineProperty(boltProtocolV4x2_transformer,"__esModule",{value:!0}),__importDefault$w(boltProtocolV4x1_transformer)),__extends$i=(boltProtocolV4x2_transformer.default=__assign$k({},bolt_protocol_v4x1_transformer_1.default),commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__importDefault$v=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v4x1_1$1=(Object.defineProperty(boltProtocolV4x2,"__esModule",{value:!0}),__importDefault$v(boltProtocolV4x1)),neo4j_driver_core_1$o=lib$1,bolt_protocol_v4x2_transformer_1$1=__importDefault$v(boltProtocolV4x2_transformer),transformer_1$b=__importDefault$v(transformer),BOLT_PROTOCOL_V4_2=neo4j_driver_core_1$o.internal.constants.BOLT_PROTOCOL_V4_2,BoltProtocol$b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$i(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return BOLT_PROTOCOL_V4_2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new transformer_1$b.default(Object.values(bolt_protocol_v4x2_transformer_1$1.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),t}(bolt_protocol_v4x1_1$1.default),boltProtocolV4x3=(boltProtocolV4x2.default=BoltProtocol$b,{}),boltProtocolV4x3_transformer={},__assign$j=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$j=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$u=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v4x2_transformer_1=(Object.defineProperty(boltProtocolV4x3_transformer,"__esModule",{value:!0}),__importDefault$u(boltProtocolV4x2_transformer)),boltProtocolV5x0_utc_transformer=(boltProtocolV4x3_transformer.default=__assign$j({},bolt_protocol_v4x2_transformer_1.default),{}),boltProtocolV4x4_transformer={},__assign$i=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$t=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v4x3_transformer_1$1=(Object.defineProperty(boltProtocolV4x4_transformer,"__esModule",{value:!0}),__importDefault$t(boltProtocolV4x3_transformer)),__read$4=(boltProtocolV4x4_transformer.default=__assign$i({},bolt_protocol_v4x3_transformer_1$1.default),commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}),__importDefault$s=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},packstream_1$1=(Object.defineProperty(boltProtocolV5x0_utc_transformer,"__esModule",{value:!0}),packstream),neo4j_driver_core_1$n=lib$1,bolt_protocol_v4x4_transformer_1$2=__importDefault$s(boltProtocolV4x4_transformer),temporal_factory_1=temporalFactory,functional_1=functional,localDateTimeToEpochSecond=neo4j_driver_core_1$n.internal.temporalUtil.localDateTimeToEpochSecond,DATE_TIME_WITH_ZONE_OFFSET=73,DATE_TIME_WITH_ZONE_OFFSET_STRUCT_SIZE=3,DATE_TIME_WITH_ZONE_ID=105,DATE_TIME_WITH_ZONE_ID_STRUCT_SIZE=3;function createDateTimeWithZoneIdTransformer(e,n){var o=e.disableLosslessIntegers,i=e.useBigInt;return bolt_protocol_v4x4_transformer_1$2.default.createDateTimeWithZoneIdTransformer(e).extendsWith({signature:DATE_TIME_WITH_ZONE_ID,fromStructure:function(e){packstream_1$1.structure.verifyStructSize("DateTimeWithZoneId",DATE_TIME_WITH_ZONE_ID_STRUCT_SIZE,e.size);var e=__read$4(e.fields,3),t=e[0],r=e[1],e=e[2],t=getTimeInZoneId(e,t,r);return convertIntegerPropsIfNeeded(new neo4j_driver_core_1$n.DateTime(t.year,t.month,t.day,t.hour,t.minute,t.second,(0,neo4j_driver_core_1$n.int)(r),t.timeZoneOffsetSeconds,e),o,i)},toStructure:function(e){var t=localDateTimeToEpochSecond(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),r=null!=e.timeZoneOffsetSeconds?e.timeZoneOffsetSeconds:getOffsetFromZoneId(e.timeZoneId,t,e.nanosecond),t=(null==e.timeZoneOffsetSeconds&&n.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.'),t.subtract(r)),r=(0,neo4j_driver_core_1$n.int)(e.nanosecond),e=e.timeZoneId;return new packstream_1$1.structure.Structure(DATE_TIME_WITH_ZONE_ID,[t,r,e])}})}function getOffsetFromZoneId(e,t,r){var n=getTimeInZoneId(e,t,r),n=localDateTimeToEpochSecond(n.year,n.month,n.day,n.hour,n.minute,n.second,r).subtract(t),t=t.subtract(n),n=getTimeInZoneId(e,t,r);return localDateTimeToEpochSecond(n.year,n.month,n.day,n.hour,n.minute,n.second,r).subtract(t)}var dateTimeFormatCache=new Map;function getDateTimeFormatForZoneId(e){var t;return dateTimeFormatCache.has(e)||(t=new Intl.DateTimeFormat("en-US",{timeZone:e,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"}),dateTimeFormatCache.set(e,t)),dateTimeFormatCache.get(e)}function getTimeInZoneId(e,t,r){e=getDateTimeFormatForZoneId(e),r=(0,neo4j_driver_core_1$n.int)(t).multiply(1e3).add((0,neo4j_driver_core_1$n.int)(r).div(1e6)).toNumber(),e=e.formatToParts(r).reduce(function(e,t){return"era"===t.type?e.adjustEra="B"===t.value.toUpperCase()?function(e){return e.subtract(1).negate()}:functional_1.identity:"hour"===t.type?e.hour=(0,neo4j_driver_core_1$n.int)(t.value).modulo(24):"literal"!==t.type&&(e[t.type]=(0,neo4j_driver_core_1$n.int)(t.value)),e},{}),e.year=e.adjustEra(e.year),r=localDateTimeToEpochSecond(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond);return e.timeZoneOffsetSeconds=r.subtract(t),e.hour=e.hour.modulo(24),e}function createDateTimeWithOffsetTransformer(e){var n=e.disableLosslessIntegers,o=e.useBigInt;return bolt_protocol_v4x4_transformer_1$2.default.createDateTimeWithOffsetTransformer(e).extendsWith({signature:DATE_TIME_WITH_ZONE_OFFSET,toStructure:function(e){var t=localDateTimeToEpochSecond(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),r=(0,neo4j_driver_core_1$n.int)(e.nanosecond),e=(0,neo4j_driver_core_1$n.int)(e.timeZoneOffsetSeconds),t=t.subtract(e);return new packstream_1$1.structure.Structure(DATE_TIME_WITH_ZONE_OFFSET,[t,r,e])},fromStructure:function(e){packstream_1$1.structure.verifyStructSize("DateTimeWithZoneOffset",DATE_TIME_WITH_ZONE_OFFSET_STRUCT_SIZE,e.size);var e=__read$4(e.fields,3),t=e[0],r=e[1],e=e[2],t=(0,neo4j_driver_core_1$n.int)(t).add(e),t=(0,temporal_factory_1.epochSecondAndNanoToLocalDateTime)(t,r);return convertIntegerPropsIfNeeded(new neo4j_driver_core_1$n.DateTime(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond,e,null),n,o)}})}function convertIntegerPropsIfNeeded(e,t,r){if(!t&&!r)return e;var n,o,i,a=Object.create(Object.getPrototypeOf(e));for(n in e)!0===Object.prototype.hasOwnProperty.call(e,n)&&(o=e[n],a[n]=(0,neo4j_driver_core_1$n.isInt)(o)?(i=o,r?i.toBigInt():i.toNumberOrInfinity()):o);return Object.freeze(a),a}boltProtocolV5x0_utc_transformer.default={createDateTimeWithZoneIdTransformer:createDateTimeWithZoneIdTransformer,createDateTimeWithOffsetTransformer:createDateTimeWithOffsetTransformer};var __extends$h=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__assign$h=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v4x2_1$1=(Object.defineProperty(boltProtocolV4x3,"__esModule",{value:!0}),__importDefault$r(boltProtocolV4x2)),request_message_1$8=__importDefault$r(requestMessage),stream_observers_1$8=streamObservers,bolt_protocol_util_1$3=boltProtocolUtil,bolt_protocol_v4x3_transformer_1=__importDefault$r(boltProtocolV4x3_transformer),bolt_protocol_v5x0_utc_transformer_1$2=__importDefault$r(boltProtocolV5x0_utc_transformer),transformer_1$a=__importDefault$r(transformer),neo4j_driver_core_1$m=lib$1,Bookmarks$2=neo4j_driver_core_1$m.internal.bookmarks.Bookmarks,BOLT_PROTOCOL_V4_3=neo4j_driver_core_1$m.internal.constants.BOLT_PROTOCOL_V4_3,BoltProtocol$a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$h(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return BOLT_PROTOCOL_V4_3},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new transformer_1$a.default(Object.values(bolt_protocol_v4x3_transformer_1.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.requestRoutingInformation=function(e){var t=e.routingContext,t=void 0===t?{}:t,r=e.databaseName,r=void 0===r?null:r,n=e.sessionContext,n=void 0===n?{}:n,o=e.onError,e=e.onCompleted,o=new stream_observers_1$8.RouteObserver({onProtocolError:this._onProtocolError,onError:o,onCompleted:e}),e=n.bookmarks||Bookmarks$2.empty();return this.write(request_message_1$8.default.route(t,e.values(),r),o,!0),o},t.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=(e.boltAgent,e.authToken),o=e.notificationFilter,i=e.onError,a=e.onComplete,e=new stream_observers_1$8.LoginObserver({onError:function(e){return t._onLoginError(e,i)},onCompleted:function(e){return void 0!==e.patch_bolt&&t._applyPatches(e.patch_bolt),t._onLoginCompleted(e,n,a)}});return(0,bolt_protocol_util_1$3.assertNotificationFilterIsEmpty)(o,this._onProtocolError,e),this.write(request_message_1$8.default.hello(r,n,this._serversideRouting,["utc"]),e,!0),e},t.prototype._applyPatches=function(e){e.includes("utc")&&this._applyUtcPatch()},t.prototype._applyUtcPatch=function(){var t=this;this._transformer=new transformer_1$a.default(Object.values(__assign$h(__assign$h({},bolt_protocol_v4x3_transformer_1.default),bolt_protocol_v5x0_utc_transformer_1$2.default)).map(function(e){return e(t._config,t._log)}))},t}(bolt_protocol_v4x2_1$1.default),boltProtocolV4x4=(boltProtocolV4x3.default=BoltProtocol$a,{}),__extends$g=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__assign$g=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$g=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$q=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v4x3_1$1=(Object.defineProperty(boltProtocolV4x4,"__esModule",{value:!0}),__importDefault$q(boltProtocolV4x3)),neo4j_driver_core_1$l=lib$1,request_message_1$7=__importDefault$q(requestMessage),stream_observers_1$7=streamObservers,bolt_protocol_util_1$2=boltProtocolUtil,bolt_protocol_v4x4_transformer_1$1=__importDefault$q(boltProtocolV4x4_transformer),bolt_protocol_v5x0_utc_transformer_1$1=__importDefault$q(boltProtocolV5x0_utc_transformer),transformer_1$9=__importDefault$q(transformer),_a$7=neo4j_driver_core_1$l.internal.constants,BOLT_PROTOCOL_V4_4$2=_a$7.BOLT_PROTOCOL_V4_4,FETCH_ALL$3=_a$7.FETCH_ALL,Bookmarks$1=neo4j_driver_core_1$l.internal.bookmarks.Bookmarks,BoltProtocol$9=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$g(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return BOLT_PROTOCOL_V4_4$2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new transformer_1$9.default(Object.values(bolt_protocol_v4x4_transformer_1$1.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.requestRoutingInformation=function(e){var t=e.routingContext,t=void 0===t?{}:t,r=e.databaseName,r=void 0===r?null:r,n=e.impersonatedUser,n=void 0===n?null:n,o=e.sessionContext,o=void 0===o?{}:o,i=e.onError,e=e.onCompleted,i=new stream_observers_1$7.RouteObserver({onProtocolError:this._onProtocolError,onError:i,onCompleted:e}),e=o.bookmarks||Bookmarks$1.empty();return this.write(request_message_1$7.default.routeV4x4(t,e.values(),{databaseName:r,impersonatedUser:n}),i,!0),i},t.prototype.run=function(e,t,r){var r=void 0===r?{}:r,n=r.bookmarks,o=r.txConfig,i=r.database,a=r.mode,s=r.impersonatedUser,u=r.notificationFilter,c=r.beforeKeys,l=r.afterKeys,f=r.beforeError,_=r.afterError,p=r.beforeComplete,d=r.afterComplete,b=r.flush,b=void 0===b||b,m=r.reactive,m=void 0!==m&&m,h=r.fetchSize,h=void 0===h?FETCH_ALL$3:h,y=r.highRecordWatermark,y=void 0===y?Number.MAX_VALUE:y,r=r.lowRecordWatermark,r=void 0===r?Number.MAX_VALUE:r,c=new stream_observers_1$7.ResultStreamObserver({server:this._server,reactive:m,fetchSize:h,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:c,afterKeys:l,beforeError:f,afterError:_,beforeComplete:p,afterComplete:d,highRecordWatermark:y,lowRecordWatermark:r}),l=((0,bolt_protocol_util_1$2.assertNotificationFilterIsEmpty)(u,this._onProtocolError,c),m);return this.write(request_message_1$7.default.runWithMetadata(e,t,{bookmarks:n,txConfig:o,database:i,mode:a,impersonatedUser:s}),c,l&&b),m||this.write(request_message_1$7.default.pull({n:h}),c,b),c},t.prototype.beginTransaction=function(e){var e=void 0===e?{}:e,t=e.bookmarks,r=e.txConfig,n=e.database,o=e.mode,i=e.impersonatedUser,a=e.notificationFilter,s=e.beforeError,u=e.afterError,c=e.beforeComplete,e=e.afterComplete,s=new stream_observers_1$7.ResultStreamObserver({server:this._server,beforeError:s,afterError:u,beforeComplete:c,afterComplete:e});return s.prepareToHandleSingleResponse(),(0,bolt_protocol_util_1$2.assertNotificationFilterIsEmpty)(a,this._onProtocolError,s),this.write(request_message_1$7.default.begin({bookmarks:t,txConfig:r,database:n,mode:o,impersonatedUser:i}),s,!0),s},t.prototype._applyUtcPatch=function(){var t=this;this._transformer=new transformer_1$9.default(Object.values(__assign$g(__assign$g({},bolt_protocol_v4x4_transformer_1$1.default),bolt_protocol_v5x0_utc_transformer_1$1.default)).map(function(e){return e(t._config,t._log)}))},t}(bolt_protocol_v4x3_1$1.default),boltProtocolV5x0=(boltProtocolV4x4.default=BoltProtocol$9,{}),boltProtocolV5x0_transformer={},__assign$f=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$f=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__read$3=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__importDefault$p=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},packstream_1=(Object.defineProperty(boltProtocolV5x0_transformer,"__esModule",{value:!0}),packstream),neo4j_driver_core_1$k=lib$1,bolt_protocol_v4x4_transformer_1=__importDefault$p(boltProtocolV4x4_transformer),bolt_protocol_v5x0_utc_transformer_1=__importDefault$p(boltProtocolV5x0_utc_transformer),NODE_STRUCT_SIZE=4,RELATIONSHIP_STRUCT_SIZE=8,UNBOUND_RELATIONSHIP_STRUCT_SIZE=4;function createNodeTransformer(e){return bolt_protocol_v4x4_transformer_1.default.createNodeTransformer(e).extendsWith({fromStructure:function(e){packstream_1.structure.verifyStructSize("Node",NODE_STRUCT_SIZE,e.size);var e=__read$3(e.fields,4),t=e[0],r=e[1],n=e[2],e=e[3];return new neo4j_driver_core_1$k.Node(t,r,n,e)}})}function createRelationshipTransformer(e){return bolt_protocol_v4x4_transformer_1.default.createRelationshipTransformer(e).extendsWith({fromStructure:function(e){packstream_1.structure.verifyStructSize("Relationship",RELATIONSHIP_STRUCT_SIZE,e.size);var e=__read$3(e.fields,8),t=e[0],r=e[1],n=e[2],o=e[3],i=e[4],a=e[5],s=e[6],e=e[7];return new neo4j_driver_core_1$k.Relationship(t,r,n,o,i,a,s,e)}})}function createUnboundRelationshipTransformer(e){return bolt_protocol_v4x4_transformer_1.default.createUnboundRelationshipTransformer(e).extendsWith({fromStructure:function(e){packstream_1.structure.verifyStructSize("UnboundRelationship",UNBOUND_RELATIONSHIP_STRUCT_SIZE,e.size);var e=__read$3(e.fields,4),t=e[0],r=e[1],n=e[2],e=e[3];return new neo4j_driver_core_1$k.UnboundRelationship(t,r,n,e)}})}boltProtocolV5x0_transformer.default=__assign$f(__assign$f(__assign$f({},bolt_protocol_v4x4_transformer_1.default),bolt_protocol_v5x0_utc_transformer_1.default),{createNodeTransformer:createNodeTransformer,createRelationshipTransformer:createRelationshipTransformer,createUnboundRelationshipTransformer:createUnboundRelationshipTransformer});var __extends$f=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__importDefault$o=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v4x4_1$1=(Object.defineProperty(boltProtocolV5x0,"__esModule",{value:!0}),__importDefault$o(boltProtocolV4x4)),bolt_protocol_util_1$1=boltProtocolUtil,bolt_protocol_v5x0_transformer_1$1=__importDefault$o(boltProtocolV5x0_transformer),transformer_1$8=__importDefault$o(transformer),request_message_1$6=__importDefault$o(requestMessage),stream_observers_1$6=streamObservers,neo4j_driver_core_1$j=lib$1,BOLT_PROTOCOL_V5_0=lib$1.internal.constants.BOLT_PROTOCOL_V5_0,BoltProtocol$8=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$f(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return BOLT_PROTOCOL_V5_0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new transformer_1$8.default(Object.values(bolt_protocol_v5x0_transformer_1$1.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=(e.boltAgent,e.authToken),o=e.notificationFilter,i=e.onError,a=e.onComplete,e=new stream_observers_1$6.LoginObserver({onError:function(e){return t._onLoginError(e,i)},onCompleted:function(e){return t._onLoginCompleted(e,n,a)}});return(0,bolt_protocol_util_1$1.assertNotificationFilterIsEmpty)(o,this._onProtocolError,e),this.write(request_message_1$6.default.hello(r,n,this._serversideRouting),e,!0),e},t}(bolt_protocol_v4x4_1$1.default),boltProtocolV5x1=(boltProtocolV5x0.default=BoltProtocol$8,{}),boltProtocolV5x1_transformer={},__assign$e=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$n=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v5x0_transformer_1=(Object.defineProperty(boltProtocolV5x1_transformer,"__esModule",{value:!0}),__importDefault$n(boltProtocolV5x0_transformer)),__extends$e=(boltProtocolV5x1_transformer.default=__assign$e({},bolt_protocol_v5x0_transformer_1.default),commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__assign$d=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$m=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v5x0_1$1=(Object.defineProperty(boltProtocolV5x1,"__esModule",{value:!0}),__importDefault$m(boltProtocolV5x0)),bolt_protocol_util_1=boltProtocolUtil,bolt_protocol_v5x1_transformer_1$1=__importDefault$m(boltProtocolV5x1_transformer),transformer_1$7=__importDefault$m(transformer),request_message_1$5=__importDefault$m(requestMessage),stream_observers_1$5=streamObservers,neo4j_driver_core_1$i=lib$1,BOLT_PROTOCOL_V5_1$2=lib$1.internal.constants.BOLT_PROTOCOL_V5_1,BoltProtocol$7=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$e(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return BOLT_PROTOCOL_V5_1$2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new transformer_1$7.default(Object.values(bolt_protocol_v5x1_transformer_1$1.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=(e.boltAgent,e.authToken),o=e.notificationFilter,i=e.onError,a=e.onComplete,s={},e=new stream_observers_1$5.LoginObserver({onError:function(e){return t._onLoginError(e,i)},onCompleted:function(e){return s.metadata=e,t._onLoginCompleted(e)}});return(0,bolt_protocol_util_1.assertNotificationFilterIsEmpty)(o,this._onProtocolError,e),this.write(request_message_1$5.default.hello5x1(r,this._serversideRouting),e,!1),this.logon({authToken:n,onComplete:function(e){return a(__assign$d(__assign$d({},e),s.metadata))},onError:i,flush:!0})},t.prototype.logon=function(e){var t=this,e=void 0===e?{}:e,r=e.authToken,n=e.onComplete,o=e.onError,e=e.flush,i=new stream_observers_1$5.LoginObserver({onCompleted:function(){return t._onLoginCompleted(null,r,n)},onError:function(e){return t._onLoginError(e,o)}});return this.write(request_message_1$5.default.logon(r),i,e),i},t.prototype.logoff=function(e){var e=void 0===e?{}:e,t=e.onComplete,r=e.onError,e=e.flush,t=new stream_observers_1$5.LogoffObserver({onCompleted:t,onError:r});return this.write(request_message_1$5.default.logoff(),t,e),t},t}(bolt_protocol_v5x0_1$1.default),boltProtocolV5x2=(boltProtocolV5x1.default=BoltProtocol$7,{}),boltProtocolV5x2_transformer={},__assign$c=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$l=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v5x1_transformer_1=(Object.defineProperty(boltProtocolV5x2_transformer,"__esModule",{value:!0}),__importDefault$l(boltProtocolV5x1_transformer)),__extends$d=(boltProtocolV5x2_transformer.default=__assign$c({},bolt_protocol_v5x1_transformer_1.default),commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__assign$b=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$b=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$k=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v5x1_1$1=(Object.defineProperty(boltProtocolV5x2,"__esModule",{value:!0}),__importDefault$k(boltProtocolV5x1)),bolt_protocol_v5x2_transformer_1$1=__importDefault$k(boltProtocolV5x2_transformer),transformer_1$6=__importDefault$k(transformer),request_message_1$4=__importDefault$k(requestMessage),stream_observers_1$4=streamObservers,neo4j_driver_core_1$h=lib$1,_a$6=lib$1.internal.constants,BOLT_PROTOCOL_V5_2=_a$6.BOLT_PROTOCOL_V5_2,FETCH_ALL$2=_a$6.FETCH_ALL,BoltProtocol$6=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$d(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return BOLT_PROTOCOL_V5_2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new transformer_1$6.default(Object.values(bolt_protocol_v5x2_transformer_1$1.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=(e.boltAgent,e.authToken),o=e.notificationFilter,i=e.onError,a=e.onComplete,s={},e=new stream_observers_1$4.LoginObserver({onError:function(e){return t._onLoginError(e,i)},onCompleted:function(e){return s.metadata=e,t._onLoginCompleted(e)}});return this.write(request_message_1$4.default.hello5x2(r,o,this._serversideRouting),e,!1),this.logon({authToken:n,onComplete:function(e){return a(__assign$b(__assign$b({},e),s.metadata))},onError:i,flush:!0})},t.prototype.beginTransaction=function(e){var e=void 0===e?{}:e,t=e.bookmarks,r=e.txConfig,n=e.database,o=e.mode,i=e.impersonatedUser,a=e.notificationFilter,s=e.beforeError,u=e.afterError,c=e.beforeComplete,e=e.afterComplete,s=new stream_observers_1$4.ResultStreamObserver({server:this._server,beforeError:s,afterError:u,beforeComplete:c,afterComplete:e});return s.prepareToHandleSingleResponse(),this.write(request_message_1$4.default.begin({bookmarks:t,txConfig:r,database:n,mode:o,impersonatedUser:i,notificationFilter:a}),s,!0),s},t.prototype.run=function(e,t,r){var r=void 0===r?{}:r,n=r.bookmarks,o=r.txConfig,i=r.database,a=r.mode,s=r.impersonatedUser,u=r.notificationFilter,c=r.beforeKeys,l=r.afterKeys,f=r.beforeError,_=r.afterError,p=r.beforeComplete,d=r.afterComplete,b=r.flush,b=void 0===b||b,m=r.reactive,m=void 0!==m&&m,h=r.fetchSize,h=void 0===h?FETCH_ALL$2:h,y=r.highRecordWatermark,y=void 0===y?Number.MAX_VALUE:y,r=r.lowRecordWatermark,r=void 0===r?Number.MAX_VALUE:r,c=new stream_observers_1$4.ResultStreamObserver({server:this._server,reactive:m,fetchSize:h,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:c,afterKeys:l,beforeError:f,afterError:_,beforeComplete:p,afterComplete:d,highRecordWatermark:y,lowRecordWatermark:r}),l=m;return this.write(request_message_1$4.default.runWithMetadata(e,t,{bookmarks:n,txConfig:o,database:i,mode:a,impersonatedUser:s,notificationFilter:u}),c,l&&b),m||this.write(request_message_1$4.default.pull({n:h}),c,b),c},t}(bolt_protocol_v5x1_1$1.default),boltProtocolV5x3=(boltProtocolV5x2.default=BoltProtocol$6,{}),boltProtocolV5x3_transformer={},__assign$a=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$j=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v5x2_transformer_1=(Object.defineProperty(boltProtocolV5x3_transformer,"__esModule",{value:!0}),__importDefault$j(boltProtocolV5x2_transformer)),__extends$c=(boltProtocolV5x3_transformer.default=__assign$a({},bolt_protocol_v5x2_transformer_1.default),commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__assign$9=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$9=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$i=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v5x2_1$1=(Object.defineProperty(boltProtocolV5x3,"__esModule",{value:!0}),__importDefault$i(boltProtocolV5x2)),bolt_protocol_v5x3_transformer_1$1=__importDefault$i(boltProtocolV5x3_transformer),transformer_1$5=__importDefault$i(transformer),request_message_1$3=__importDefault$i(requestMessage),stream_observers_1$3=streamObservers,neo4j_driver_core_1$g=lib$1,BOLT_PROTOCOL_V5_3=lib$1.internal.constants.BOLT_PROTOCOL_V5_3,BoltProtocol$5=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$c(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return BOLT_PROTOCOL_V5_3},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new transformer_1$5.default(Object.values(bolt_protocol_v5x3_transformer_1$1.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=e.boltAgent,o=e.authToken,i=e.notificationFilter,a=e.onError,s=e.onComplete,u={},e=new stream_observers_1$3.LoginObserver({onError:function(e){return t._onLoginError(e,a)},onCompleted:function(e){return u.metadata=e,t._onLoginCompleted(e)}});return this.write(request_message_1$3.default.hello5x3(r,n,i,this._serversideRouting),e,!1),this.logon({authToken:o,onComplete:function(e){return s(__assign$9(__assign$9({},e),u.metadata))},onError:a,flush:!0})},t}(bolt_protocol_v5x2_1$1.default),boltProtocolV5x4=(boltProtocolV5x3.default=BoltProtocol$5,{}),boltProtocolV5x4_transformer={},__assign$8=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$8=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$h=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v5x3_transformer_1=(Object.defineProperty(boltProtocolV5x4_transformer,"__esModule",{value:!0}),__importDefault$h(boltProtocolV5x3_transformer)),__extends$b=(boltProtocolV5x4_transformer.default=__assign$8({},bolt_protocol_v5x3_transformer_1.default),commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__importDefault$g=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v5x3_1$1=(Object.defineProperty(boltProtocolV5x4,"__esModule",{value:!0}),__importDefault$g(boltProtocolV5x3)),bolt_protocol_v5x4_transformer_1$1=__importDefault$g(boltProtocolV5x4_transformer),request_message_1$2=__importDefault$g(requestMessage),stream_observers_1$2=streamObservers,transformer_1$4=__importDefault$g(transformer),neo4j_driver_core_1$f=lib$1,BOLT_PROTOCOL_V5_4=lib$1.internal.constants.BOLT_PROTOCOL_V5_4,BoltProtocol$4=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$b(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return BOLT_PROTOCOL_V5_4},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new transformer_1$4.default(Object.values(bolt_protocol_v5x4_transformer_1$1.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.telemetry=function(e,t){var e=e.api,t=void 0===t?{}:t,r=t.onError,t=t.onCompleted,t=new stream_observers_1$2.TelemetryObserver({onCompleted:t,onError:r});return this.write(request_message_1$2.default.telemetry({api:e}),t,!1),t},t}(bolt_protocol_v5x3_1$1.default),boltProtocolV5x5=(boltProtocolV5x4.default=BoltProtocol$4,{}),boltProtocolV5x5_transformer={},__assign$7=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$7=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$f=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v5x4_transformer_1=(Object.defineProperty(boltProtocolV5x5_transformer,"__esModule",{value:!0}),__importDefault$f(boltProtocolV5x4_transformer)),__extends$a=(boltProtocolV5x5_transformer.default=__assign$7({},bolt_protocol_v5x4_transformer_1.default),commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__assign$6=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$6=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$e=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v5x4_1$1=(Object.defineProperty(boltProtocolV5x5,"__esModule",{value:!0}),__importDefault$e(boltProtocolV5x4)),bolt_protocol_v5x5_transformer_1$1=__importDefault$e(boltProtocolV5x5_transformer),transformer_1$3=__importDefault$e(transformer),request_message_1$1=__importDefault$e(requestMessage),stream_observers_1$1=streamObservers,neo4j_driver_core_1$e=lib$1,_a$5=lib$1.internal.constants,BOLT_PROTOCOL_V5_5=_a$5.BOLT_PROTOCOL_V5_5,FETCH_ALL$1=_a$5.FETCH_ALL,DEFAULT_DIAGNOSTIC_RECORD$2=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),BoltProtocol$3=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$a(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return BOLT_PROTOCOL_V5_5},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new transformer_1$3.default(Object.values(bolt_protocol_v5x5_transformer_1$1.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=e.boltAgent,o=e.authToken,i=e.notificationFilter,a=e.onError,s=e.onComplete,u={},e=new stream_observers_1$1.LoginObserver({onError:function(e){return t._onLoginError(e,a)},onCompleted:function(e){return u.metadata=e,t._onLoginCompleted(e)}});return this.write(request_message_1$1.default.hello5x5(r,n,i,this._serversideRouting),e,!1),this.logon({authToken:o,onComplete:function(e){return s(__assign$6(__assign$6({},e),u.metadata))},onError:a,flush:!0})},t.prototype.beginTransaction=function(e){var e=void 0===e?{}:e,t=e.bookmarks,r=e.txConfig,n=e.database,o=e.mode,i=e.impersonatedUser,a=e.notificationFilter,s=e.beforeError,u=e.afterError,c=e.beforeComplete,e=e.afterComplete,s=new stream_observers_1$1.ResultStreamObserver({server:this._server,beforeError:s,afterError:u,beforeComplete:c,afterComplete:e});return s.prepareToHandleSingleResponse(),this.write(request_message_1$1.default.begin5x5({bookmarks:t,txConfig:r,database:n,mode:o,impersonatedUser:i,notificationFilter:a}),s,!0),s},t.prototype.run=function(e,t,r){var r=void 0===r?{}:r,n=r.bookmarks,o=r.txConfig,i=r.database,a=r.mode,s=r.impersonatedUser,u=r.notificationFilter,c=r.beforeKeys,l=r.afterKeys,f=r.beforeError,_=r.afterError,p=r.beforeComplete,d=r.afterComplete,b=r.flush,b=void 0===b||b,m=r.reactive,m=void 0!==m&&m,h=r.fetchSize,h=void 0===h?FETCH_ALL$1:h,y=r.highRecordWatermark,y=void 0===y?Number.MAX_VALUE:y,r=r.lowRecordWatermark,r=void 0===r?Number.MAX_VALUE:r,c=new stream_observers_1$1.ResultStreamObserver({server:this._server,reactive:m,fetchSize:h,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:c,afterKeys:l,beforeError:f,afterError:_,beforeComplete:p,afterComplete:d,highRecordWatermark:y,lowRecordWatermark:r,enrichMetadata:this._enrichMetadata}),l=m;return this.write(request_message_1$1.default.runWithMetadata5x5(e,t,{bookmarks:n,txConfig:o,database:i,mode:a,impersonatedUser:s,notificationFilter:u}),c,l&&b),m||this.write(request_message_1$1.default.pull({n:h}),c,b),c},t.prototype._enrichMetadata=function(e){return Array.isArray(e.statuses)&&(e.statuses=e.statuses.map(function(e){return __assign$6(__assign$6({},e),{description:null!=e.neo4j_code?e.status_description:e.description,diagnostic_record:null!==e.diagnostic_record?__assign$6(__assign$6({},DEFAULT_DIAGNOSTIC_RECORD$2),e.diagnostic_record):null})})),e},t}(bolt_protocol_v5x4_1$1.default),boltProtocolV5x6=(boltProtocolV5x5.default=BoltProtocol$3,{}),boltProtocolV5x6_transformer={},__assign$5=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$5=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$d=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v5x5_transformer_1=(Object.defineProperty(boltProtocolV5x6_transformer,"__esModule",{value:!0}),__importDefault$d(boltProtocolV5x5_transformer)),__extends$9=(boltProtocolV5x6_transformer.default=__assign$5({},bolt_protocol_v5x5_transformer_1.default),commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__assign$4=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$4=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$c=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v5x5_1$1=(Object.defineProperty(boltProtocolV5x6,"__esModule",{value:!0}),__importDefault$c(boltProtocolV5x5)),bolt_protocol_v5x6_transformer_1$1=__importDefault$c(boltProtocolV5x6_transformer),transformer_1$2=__importDefault$c(transformer),neo4j_driver_core_1$d=lib$1,BOLT_PROTOCOL_V5_6=lib$1.internal.constants.BOLT_PROTOCOL_V5_6,DEFAULT_DIAGNOSTIC_RECORD$1=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),BoltProtocol$2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$9(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return BOLT_PROTOCOL_V5_6},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new transformer_1$2.default(Object.values(bolt_protocol_v5x6_transformer_1$1.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype._enrichMetadata=function(e){return Array.isArray(e.statuses)&&(e.statuses=e.statuses.map(function(e){return __assign$4(__assign$4({},e),{diagnostic_record:null!==e.diagnostic_record?__assign$4(__assign$4({},DEFAULT_DIAGNOSTIC_RECORD$1),e.diagnostic_record):null})})),e},t}(bolt_protocol_v5x5_1$1.default),boltProtocolV5x7=(boltProtocolV5x6.default=BoltProtocol$2,{}),boltProtocolV5x7_transformer={},__assign$3=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$b=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v5x6_transformer_1=(Object.defineProperty(boltProtocolV5x7_transformer,"__esModule",{value:!0}),__importDefault$b(boltProtocolV5x6_transformer)),__extends$8=(boltProtocolV5x7_transformer.default=__assign$3({},bolt_protocol_v5x6_transformer_1.default),commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__assign$2=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$a=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v5x6_1$1=(Object.defineProperty(boltProtocolV5x7,"__esModule",{value:!0}),__importDefault$a(boltProtocolV5x6)),bolt_protocol_v5x7_transformer_1$1=__importDefault$a(boltProtocolV5x7_transformer),transformer_1$1=__importDefault$a(transformer),neo4j_driver_core_1$c=lib$1,BOLT_PROTOCOL_V5_7=lib$1.internal.constants.BOLT_PROTOCOL_V5_7,DEFAULT_DIAGNOSTIC_RECORD=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),BoltProtocol$1=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$8(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return BOLT_PROTOCOL_V5_7},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new transformer_1$1.default(Object.values(bolt_protocol_v5x7_transformer_1$1.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.enrichErrorMetadata=function(e){return __assign$2(__assign$2({},e),{cause:null!==e.cause&&void 0!==e.cause?this.enrichErrorMetadata(e.cause):null,code:e.neo4j_code,diagnostic_record:null!==e.diagnostic_record?__assign$2(__assign$2({},DEFAULT_DIAGNOSTIC_RECORD),e.diagnostic_record):null})},t}(bolt_protocol_v5x6_1$1.default),boltProtocolV5x8=(boltProtocolV5x7.default=BoltProtocol$1,{}),boltProtocolV5x8_transformer={},__assign$1=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign$1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault$9=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v5x7_transformer_1=(Object.defineProperty(boltProtocolV5x8_transformer,"__esModule",{value:!0}),__importDefault$9(boltProtocolV5x7_transformer)),__extends$7=(boltProtocolV5x8_transformer.default=__assign$1({},bolt_protocol_v5x7_transformer_1.default),commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__importDefault$8=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},bolt_protocol_v5x7_1$1=(Object.defineProperty(boltProtocolV5x8,"__esModule",{value:!0}),__importDefault$8(boltProtocolV5x7)),bolt_protocol_v5x8_transformer_1=__importDefault$8(boltProtocolV5x8_transformer),transformer_1=__importDefault$8(transformer),request_message_1=__importDefault$8(requestMessage),stream_observers_1=streamObservers,neo4j_driver_core_1$b=lib$1,_a$4=lib$1.internal.constants,BOLT_PROTOCOL_V5_8=_a$4.BOLT_PROTOCOL_V5_8,FETCH_ALL=_a$4.FETCH_ALL,BoltProtocol=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$7(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return BOLT_PROTOCOL_V5_8},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new transformer_1.default(Object.values(bolt_protocol_v5x8_transformer_1.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.run=function(e,t,r){var r=void 0===r?{}:r,n=r.bookmarks,o=r.txConfig,i=r.database,a=r.mode,s=r.impersonatedUser,u=r.notificationFilter,c=r.beforeKeys,l=r.afterKeys,f=r.beforeError,_=r.afterError,p=r.beforeComplete,d=r.afterComplete,b=r.flush,b=void 0===b||b,m=r.reactive,m=void 0!==m&&m,h=r.fetchSize,h=void 0===h?FETCH_ALL:h,y=r.highRecordWatermark,y=void 0===y?Number.MAX_VALUE:y,v=r.lowRecordWatermark,v=void 0===v?Number.MAX_VALUE:v,r=r.onDb,c=new stream_observers_1.ResultStreamObserver({server:this._server,reactive:m,fetchSize:h,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:c,afterKeys:l,beforeError:f,afterError:_,beforeComplete:p,afterComplete:d,highRecordWatermark:y,lowRecordWatermark:v,enrichMetadata:this._enrichMetadata,onDb:r}),l=m;return this.write(request_message_1.default.runWithMetadata5x5(e,t,{bookmarks:n,txConfig:o,database:i,mode:a,impersonatedUser:s,notificationFilter:u}),c,l&&b),m||this.write(request_message_1.default.pull({n:h}),c,b),c},t}(bolt_protocol_v5x7_1$1.default),responseHandler=(boltProtocolV5x8.default=BoltProtocol,{}),neo4j_driver_core_1$a=(Object.defineProperty(responseHandler,"__esModule",{value:!0}),lib$1),SUCCESS=112,RECORD=113,IGNORED=126,FAILURE=127;function NO_OP(){}function NO_OP_IDENTITY(e){return e}var NO_OP_OBSERVER={onNext:NO_OP,onCompleted:NO_OP,onError:NO_OP},ResponseHandler=function(){function e(e){var e=void 0===e?{}:e,t=e.transformMetadata,r=e.enrichErrorMetadata,n=e.log,e=e.observer;this._pendingObservers=[],this._log=n,this._transformMetadata=t||NO_OP_IDENTITY,this._enrichErrorMetadata=r||NO_OP_IDENTITY,this._observer=Object.assign({onObserversCountChange:NO_OP,onError:NO_OP,onFailure:NO_OP,onErrorApplyTransformation:NO_OP_IDENTITY},e)}return Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),e.prototype.handleResponse=function(e){var t=e.fields[0];switch(e.signature){case RECORD:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(neo4j_driver_core_1$a.json.stringify(e))),this._currentObserver.onNext(t);break;case SUCCESS:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(neo4j_driver_core_1$a.json.stringify(e)));try{var r=this._transformMetadata(t);this._currentObserver.onCompleted(r)}finally{this._updateCurrentObserver()}break;case FAILURE:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(neo4j_driver_core_1$a.json.stringify(e)));try{this._currentFailure=this._handleErrorPayload(this._enrichErrorMetadata(t)),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case IGNORED:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(neo4j_driver_core_1$a.json.stringify(e)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,neo4j_driver_core_1$a.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,neo4j_driver_core_1$a.newError)("Unknown Bolt protocol message: "+e))}},e.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(e.prototype,"_observersCount",{get:function(){return null==this._currentObserver?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),e.prototype._queueObserver=function(e){return(e=e||NO_OP_OBSERVER).onCompleted=e.onCompleted||NO_OP,e.onError=e.onError||NO_OP,e.onNext=e.onNext||NO_OP,void 0===this._currentObserver?this._currentObserver=e:this._pendingObservers.push(e),this._observer.onObserversCountChange(this._observersCount),!0},e.prototype._notifyErrorToObservers=function(e){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(e);0<this._pendingObservers.length;){var t=this._pendingObservers.shift();t&&t.onError&&t.onError(e)}},e.prototype.hasOngoingObservableRequests=function(){return null!=this._currentObserver||0<this._pendingObservers.length},e.prototype._resetFailure=function(){this._currentFailure=null},e.prototype._handleErrorPayload=function(e){var t=_standardizeCode(e.code),r=null!=e.cause?this._handleErrorCause(e.cause):void 0,t=(0,neo4j_driver_core_1$a.newError)(e.message,t,r,e.gql_status,e.description,e.diagnostic_record);return this._observer.onErrorApplyTransformation(t)},e.prototype._handleErrorCause=function(e){var t=null!=e.cause?this._handleErrorCause(e.cause):void 0,t=(0,neo4j_driver_core_1$a.newGQLError)(e.message,t,e.gql_status,e.description,e.diagnostic_record);return this._observer.onErrorApplyTransformation(t)},e}();function _standardizeCode(e){return"Neo.TransientError.Transaction.Terminated"===e?"Neo.ClientError.Transaction.Terminated":"Neo.TransientError.Transaction.LockClientStopped"===e?"Neo.ClientError.Transaction.LockClientStopped":e}responseHandler.default=ResponseHandler;var __importDefault$7=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},neo4j_driver_core_1$9=(Object.defineProperty(create$1,"__esModule",{value:!0}),lib$1),bolt_protocol_v1_1=__importDefault$7(boltProtocolV1),bolt_protocol_v2_1=__importDefault$7(boltProtocolV2),bolt_protocol_v3_1=__importDefault$7(boltProtocolV3),bolt_protocol_v4x0_1=__importDefault$7(boltProtocolV4x0),bolt_protocol_v4x1_1=__importDefault$7(boltProtocolV4x1),bolt_protocol_v4x2_1=__importDefault$7(boltProtocolV4x2),bolt_protocol_v4x3_1=__importDefault$7(boltProtocolV4x3),bolt_protocol_v4x4_1=__importDefault$7(boltProtocolV4x4),bolt_protocol_v5x0_1=__importDefault$7(boltProtocolV5x0),bolt_protocol_v5x1_1=__importDefault$7(boltProtocolV5x1),bolt_protocol_v5x2_1=__importDefault$7(boltProtocolV5x2),bolt_protocol_v5x3_1=__importDefault$7(boltProtocolV5x3),bolt_protocol_v5x4_1=__importDefault$7(boltProtocolV5x4),bolt_protocol_v5x5_1=__importDefault$7(boltProtocolV5x5),bolt_protocol_v5x6_1=__importDefault$7(boltProtocolV5x6),bolt_protocol_v5x7_1=__importDefault$7(boltProtocolV5x7),bolt_protocol_v5x8_1=__importDefault$7(boltProtocolV5x8),response_handler_1=__importDefault$7(responseHandler);function create(e){var e=void 0===e?{}:e,t=e.version,r=e.chunker,n=e.dechunker,o=e.channel,i=e.disableLosslessIntegers,a=e.useBigInt,s=e.serversideRouting,u=e.server,c=e.log,l=e.observer;return createProtocol(t,u,r,{disableLosslessIntegers:i,useBigInt:a},s,function(t){var r=new response_handler_1.default({transformMetadata:t.transformMetadata.bind(t),enrichErrorMetadata:t.enrichErrorMetadata.bind(t),log:c,observer:l});return o.onerror=l.onError.bind(l),o.onmessage=function(e){return n.write(e)},n.onmessage=function(e){try{r.handleResponse(t.unpack(e))}catch(e){return l.onError(e)}},r},l.onProtocolError.bind(l),c)}function createProtocol(e,t,r,n,o,i,a,s){switch(e){case 1:return new bolt_protocol_v1_1.default(t,r,n,i,s,a);case 2:return new bolt_protocol_v2_1.default(t,r,n,i,s,a);case 3:return new bolt_protocol_v3_1.default(t,r,n,i,s,a);case 4:return new bolt_protocol_v4x0_1.default(t,r,n,i,s,a);case 4.1:return new bolt_protocol_v4x1_1.default(t,r,n,i,s,a,o);case 4.2:return new bolt_protocol_v4x2_1.default(t,r,n,i,s,a,o);case 4.3:return new bolt_protocol_v4x3_1.default(t,r,n,i,s,a,o);case 4.4:return new bolt_protocol_v4x4_1.default(t,r,n,i,s,a,o);case 5:return new bolt_protocol_v5x0_1.default(t,r,n,i,s,a,o);case 5.1:return new bolt_protocol_v5x1_1.default(t,r,n,i,s,a,o);case 5.2:return new bolt_protocol_v5x2_1.default(t,r,n,i,s,a,o);case 5.3:return new bolt_protocol_v5x3_1.default(t,r,n,i,s,a,o);case 5.4:return new bolt_protocol_v5x4_1.default(t,r,n,i,s,a,o);case 5.5:return new bolt_protocol_v5x5_1.default(t,r,n,i,s,a,o);case 5.6:return new bolt_protocol_v5x6_1.default(t,r,n,i,s,a,o);case 5.7:return new bolt_protocol_v5x7_1.default(t,r,n,i,s,a,o);case 5.8:return new bolt_protocol_v5x8_1.default(t,r,n,i,s,a,o);default:throw(0,neo4j_driver_core_1$9.newError)("Unknown Bolt protocol version: "+e)}}create$1.default=create,function(e){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),t=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(e,"__esModule",{value:!0}),e.RawRoutingTable=e.BoltProtocol=void 0,r(handshake$1)),i=r(create$1),a=r(boltProtocolV4x3),r=r(routingTableRaw);t(streamObservers,e),e.BoltProtocol=a.default,e.RawRoutingTable=r.default,e.default={handshake:o.default,create:i.default}}(bolt);var connectionProvider={},connectionProviderSingle={},__extends$6=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),neo4j_driver_core_1$8=(Object.defineProperty(connectionProviderSingle,"__esModule",{value:!0}),lib$1),SingleConnectionProvider=function(r){function e(e){var t=r.call(this)||this;return t._connection=e,t}return __extends$6(e,r),e.prototype.acquireConnection=function(e){e=void 0===e?{}:e,e.accessMode,e.database,e.bookmarks,e=this._connection;return this._connection=null,Promise.resolve(e)},e}(lib$1.ConnectionProvider),connectionProviderPooled=(connectionProviderSingle.default=SingleConnectionProvider,{}),connection$1={},connection={},__extends$5=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),neo4j_driver_core_1$7=(Object.defineProperty(connection,"__esModule",{value:!0}),lib$1),Connection=function(r){function e(e){var t=r.call(this)||this;return t._errorHandler=e,t}return __extends$5(e,r),Object.defineProperty(e.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(e){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(e){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(e){throw new Error("not implemented")},enumerable:!1,configurable:!0}),e.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(e.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(e){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),e.prototype.connect=function(e,t,r,n){throw new Error("not implemented")},e.prototype.write=function(e,t,r){throw new Error("not implemented")},e.prototype.close=function(){throw new Error("not implemented")},e.prototype.handleAndTransformError=function(e,t){return this._errorHandler?this._errorHandler.handleAndTransformError(e,t,this):e},e}(lib$1.Connection),connectionChannel=(connection.default=Connection,{}),__extends$4=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__awaiter$6=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$6=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__importDefault$6=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},channel_1$2=(Object.defineProperty(connectionChannel,"__esModule",{value:!0}),connectionChannel.createChannelConnection=void 0,channel),neo4j_driver_core_1$6=lib$1,connection_1$4=__importDefault$6(connection),bolt_1=__importDefault$6(bolt),PROTOCOL_ERROR$1=neo4j_driver_core_1$6.error.PROTOCOL_ERROR,Logger=neo4j_driver_core_1$6.internal.logger.Logger,idGenerator=0;function createChannelConnection(i,a,s,u,e,c,l,t){void 0===c&&(c=null);var f=(t=void 0===t?function(e){return new channel_1$2.Channel(e)}:t)(new channel_1$2.ChannelConfig(i,a,s.errorCode(),e));return bolt_1.default.handshake(f,u).then(function(e){var r=e.protocolVersion,e=e.consumeRemainingBuffer,n=new channel_1$2.Chunker(f),o=new channel_1$2.Dechunker,t=new ChannelConnection(f,s,i,u,a.disableLosslessIntegers,c,n,a.notificationFilter,function(t){return bolt_1.default.create({version:r,channel:f,chunker:n,dechunker:o,disableLosslessIntegers:a.disableLosslessIntegers,useBigInt:a.useBigInt,serversideRouting:c,server:t.server,log:t.logger,observer:{onObserversCountChange:t._handleOngoingRequestsNumberChange.bind(t),onError:t._handleFatalError.bind(t),onFailure:t._resetOnFailure.bind(t),onProtocolError:t._handleProtocolError.bind(t),onErrorApplyTransformation:function(e){return t.handleAndTransformError(e,t._address)}}})},a.telemetryDisabled,l);return e(function(e){return o.write(e)}),t}).catch(function(e){return f.close().then(function(){throw e})})}connectionChannel.createChannelConnection=createChannelConnection;var ChannelConnection=function(f){function e(e,t,r,n,o,i,a,s,u,c,l){void 0===o&&(o=!1),void 0===i&&(i=null),void 0===l&&(l=function(e){});t=f.call(this,t)||this;return t._authToken=null,t._idle=!1,t._reseting=!1,t._resetObservers=[],t._id=idGenerator++,t._address=r,t._server={address:r.asHostPort()},t._creationTimestamp=Date.now(),t._disableLosslessIntegers=o,t._ch=e,t._chunker=a,t._log=createConnectionLogger(t,n),t._serversideRouting=i,t._notificationFilter=s,t._telemetryDisabledDriverConfig=!0===c,t._telemetryDisabledConnection=!0,t._ssrCallback=l,t._dbConnectionId=null,t._protocol=u(t),t._isBroken=!1,t._log.isDebugEnabled()&&t._log.debug("created towards ".concat(r)),t}return __extends$4(e,f),e.prototype.beginTransaction=function(e){return this._sendTelemetryIfEnabled(e),this._protocol.beginTransaction(e)},e.prototype.run=function(e,t,r){return this._sendTelemetryIfEnabled(r),this._protocol.run(e,t,r)},e.prototype._sendTelemetryIfEnabled=function(e){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||null==e||null==e.apiTelemetryConfig||this._protocol.telemetry({api:e.apiTelemetryConfig.api},{onCompleted:e.apiTelemetryConfig.onTelemetrySuccess,onError:e.beforeError})},e.prototype.commitTransaction=function(e){return this._protocol.commitTransaction(e)},e.prototype.rollbackTransaction=function(e){return this._protocol.rollbackTransaction(e)},e.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(e.prototype,"authToken",{get:function(){return this._authToken},set:function(e){this._authToken=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(e){this._dbConnectionId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(e){this._idleTimestamp=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),e.prototype.connect=function(t,n,o,i){return __awaiter$6(this,void 0,void 0,function(){var r=this;return __generator$6(this,function(e){switch(e.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,neo4j_driver_core_1$6.newError)("Connection does not support re-auth");return this._authToken=o,this._protocol.initialized?[3,2]:[4,this._initialize(t,n,o)];case 1:return[2,e.sent()];case 2:return i?[4,new Promise(function(e,t){r._protocol.logoff({onError:t}),r._protocol.logon({authToken:o,onError:t,onComplete:function(){return e(r)},flush:!0})})]:[3,4];case 3:return[2,e.sent()];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:o,flush:!0}),[2,this]}})})},e.prototype._initialize=function(e,n,o){var i=this,a=this;return new Promise(function(r,t){i._protocol.initialize({userAgent:e,boltAgent:n,authToken:o,notificationFilter:i._notificationFilter,onError:function(e){return t(e)},onComplete:function(e){var t;e&&(t=e.server,i.version&&!t||(i.version=t),t=e.connection_id,i.databaseId||(i.databaseId=t),e.hints&&(null!=(t=e.hints["connection.recv_timeout_seconds"])&&(t=(0,neo4j_driver_core_1$6.toNumber)(t),Number.isInteger(t)&&0<t?i._ch.setupReceiveTimeout(1e3*t):i._log.info("Server located at ".concat(i._address," supplied an invalid connection receive timeout value (").concat(t,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")),!0===e.hints["telemetry.enabled"]&&(i._telemetryDisabledConnection=!1),i.SSREnabledHint=e.hints["ssr.enabled"]),i._ssrCallback(null!=(t=i.SSREnabledHint)&&t,"OPEN")),r(a)}})})},e.prototype.protocol=function(){return this._protocol},Object.defineProperty(e.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._server.version},set:function(e){this._server.version=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),e.prototype._handleFatalError=function(e){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||e,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(neo4j_driver_core_1$6.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},e.prototype._setIdle=function(e){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(e)},e.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},e.prototype._queueObserver=function(e){return this._protocol.queueObserverIfProtocolIsNotBroken(e)},e.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},e.prototype.resetAndFlush=function(){var r=this;return new Promise(function(e,t){r._reset({onError:function(e){r._isBroken?t(e):(e=r._handleProtocolError("Received FAILURE as a response for RESET: ".concat(e)),t(e))},onComplete:function(){e()}})})},e.prototype._resetOnFailure=function(){var e=this;this.isOpen()&&this._reset({onError:function(){e._protocol.resetFailure()},onComplete:function(){e._protocol.resetFailure()}})},e.prototype._reset=function(t){var e,r=this;this._reseting?this._protocol.isLastMessageReset()?this._resetObservers.push(t):this._protocol.reset({onError:function(e){t.onError(e)},onComplete:function(){t.onComplete()}}):(this._resetObservers.push(t),this._reseting=!0,e=function(e){r._reseting=!1;var t=r._resetObservers;r._resetObservers=[],t.forEach(e)},this._protocol.reset({onError:function(t){e(function(e){return e.onError(t)})},onComplete:function(){e(function(e){return e.onComplete()})}}))},e.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},e.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},e.prototype._handleOngoingRequestsNumberChange=function(e){this._idle||(0===e?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},e.prototype.close=function(){var t;return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(e){switch(e.label){case 0:return this._ssrCallback(null!=(t=this.SSREnabledHint)&&t,"CLOSE"),this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return e.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},e.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},e.prototype._handleProtocolError=function(e){this._protocol.resetFailure(),this._updateCurrentObserver();e=(0,neo4j_driver_core_1$6.newError)(e,PROTOCOL_ERROR$1);return this._handleFatalError(e),e},e}(connection_1$4.default);function createConnectionLogger(r,n){return new Logger(n._level,function(e,t){return n._loggerFunction(e,"".concat(r," ").concat(t))})}connectionChannel.default=ChannelConnection;var connectionDelegate={},__extends$3=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},connection_1$3=(Object.defineProperty(connectionDelegate,"__esModule",{value:!0}),__importDefault$5(connection)),DelegateConnection=function(n){function e(e,t){var r=n.call(this,t)||this;return t&&(r._originalErrorHandler=e._errorHandler,e._errorHandler=r._errorHandler),r._delegate=e,r}return __extends$3(e,n),e.prototype.beginTransaction=function(e){return this._delegate.beginTransaction(e)},e.prototype.run=function(e,t,r){return this._delegate.run(e,t,r)},e.prototype.commitTransaction=function(e){return this._delegate.commitTransaction(e)},e.prototype.rollbackTransaction=function(e){return this._delegate.rollbackTransaction(e)},e.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(e){this._delegate.databaseId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(e){this._delegate.authToken=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._delegate.version},set:function(e){this._delegate.version=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(e){this._delegate.idleTimestamp=e},enumerable:!1,configurable:!0}),e.prototype.isOpen=function(){return this._delegate.isOpen()},e.prototype.protocol=function(){return this._delegate.protocol()},e.prototype.connect=function(e,t,r,n){return this._delegate.connect(e,t,r,n)},e.prototype.write=function(e,t,r){return this._delegate.write(e,t,r)},e.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},e.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},e.prototype.close=function(){return this._delegate.close()},e.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},e}(connection_1$3.default),connectionErrorHandler=(connectionDelegate.default=DelegateConnection,{}),neo4j_driver_core_1$5=(Object.defineProperty(connectionErrorHandler,"__esModule",{value:!0}),lib$1),SERVICE_UNAVAILABLE$3=neo4j_driver_core_1$5.error.SERVICE_UNAVAILABLE,SESSION_EXPIRED$1=neo4j_driver_core_1$5.error.SESSION_EXPIRED,ConnectionErrorHandler=function(){function t(e,t,r,n){this._errorCode=e,this._handleUnavailability=t||noOpHandler,this._handleWriteFailure=r||noOpHandler,this._handleSecurityError=n||noOpHandler}return t.create=function(e){return new t(e.errorCode,e.handleUnavailability,e.handleWriteFailure,e.handleSecurityError)},t.prototype.errorCode=function(){return this._errorCode},t.prototype.handleAndTransformError=function(e,t,r){return isSecurityError(e)?this._handleSecurityError(e,t,r):isAvailabilityError(e)?this._handleUnavailability(e,t,r):isFailureToWrite(e)?this._handleWriteFailure(e,t,r):e},t}();function isSecurityError(e){return null!=e&&null!=e.code&&e.code.startsWith("Neo.ClientError.Security.")}function isAvailabilityError(e){return!!e&&(e.code===SESSION_EXPIRED$1||e.code===SERVICE_UNAVAILABLE$3||"Neo.TransientError.General.DatabaseUnavailable"===e.code)}function isFailureToWrite(e){return!!e&&("Neo.ClientError.Cluster.NotALeader"===e.code||"Neo.ClientError.General.ForbiddenOnReadOnlyDatabase"===e.code)}function noOpHandler(e){return e}connectionErrorHandler.default=ConnectionErrorHandler,function(e){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),t=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=(Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=e.ConnectionErrorHandler=e.DelegateConnection=e.ChannelConnection=e.Connection=void 0,r(connection)),a=(e.Connection=i.default,t(connectionChannel)),t=(e.ChannelConnection=a.default,Object.defineProperty(e,"createChannelConnection",{enumerable:!0,get:function(){return a.createChannelConnection}}),r(connectionDelegate)),t=(e.DelegateConnection=t.default,r(connectionErrorHandler));e.ConnectionErrorHandler=t.default,e.default=i.default}(connection$1);var authenticationProvider={},__awaiter$5=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$5=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},neo4j_driver_core_1$4=(Object.defineProperty(authenticationProvider,"__esModule",{value:!0}),lib$1),lang_1$2=lang,AuthenticationProvider=function(){function e(e){var t=e.authTokenManager,r=e.userAgent,e=e.boltAgent;this._authTokenManager=t||(0,neo4j_driver_core_1$4.staticAuthTokenManager)({}),this._userAgent=r,this._boltAgent=e}return e.prototype.authenticate=function(e){var r=e.connection,n=e.auth,o=e.skipReAuth,i=e.waitReAuth,a=e.forceReAuth;return __awaiter$5(this,void 0,void 0,function(){var t;return __generator$5(this,function(e){switch(e.label){case 0:return null==n?[3,3]:(t=!0===r.supportsReAuth&&(!lang_1$2.object.equals(r.authToken,n)&&!0!==o||!0===a),null==r.authToken||t?[4,r.connect(this._userAgent,this._boltAgent,n,i||!1)]:[3,2]);case 1:return[2,e.sent()];case 2:return[2,r];case 3:return[4,this._authTokenManager.getToken()];case 4:return t=e.sent(),lang_1$2.object.equals(t,r.authToken)?[3,6]:[4,r.connect(this._userAgent,this._boltAgent,t,!1)];case 5:return[2,e.sent()];case 6:return[2,r]}})})},e.prototype.handleError=function(e){var t=e.connection,e=e.code;return!(!t||!e.startsWith("Neo.ClientError.Security."))&&this._authTokenManager.handleSecurityException(t.authToken,e)},e}(),livenessCheckProvider=(authenticationProvider.default=AuthenticationProvider,{}),__awaiter$4=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$4=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},LivenessCheckProvider=(Object.defineProperty(livenessCheckProvider,"__esModule",{value:!0}),function(){function e(e){e=e.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=e}return e.prototype.check=function(r){return __awaiter$4(this,void 0,void 0,function(){var t;return __generator$4(this,function(e){switch(e.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(r)?[2,!0]:(t=Date.now()-r.idleTimestamp,0===this._connectionLivenessCheckTimeout||t>this._connectionLivenessCheckTimeout?[4,r.resetAndFlush().then(function(){return!0})]:[3,2]);case 1:return[2,e.sent()];case 2:return[2,!0]}})})},Object.defineProperty(e.prototype,"_isCheckDisabled",{get:function(){return null==this._connectionLivenessCheckTimeout||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),e.prototype._isNewlyCreatedConnection=function(e){return null==e.authToken},e}()),clientCertificateHolder=(livenessCheckProvider.default=LivenessCheckProvider,{}),__awaiter$3=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$3=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},channel_1$1=(Object.defineProperty(clientCertificateHolder,"__esModule",{value:!0}),channel),ClientCertificateHolder=function(){function e(e){var t=e.clientCertificateProvider,e=e.loader;this._clientCertificateProvider=t,this._loader=e||channel_1$1.ClientCertificatesLoader,this._clientCertificate=null}return e.prototype.getClientCertificate=function(){return __awaiter$3(this,void 0,void 0,function(){var t,r,n=this;return __generator$3(this,function(e){switch(e.label){case 0:return(t=null!=this._clientCertificateProvider)?(r=null==this._clientCertificate)?[3,2]:[4,this._clientCertificateProvider.hasUpdate()]:[3,3];case 1:r=e.sent(),e.label=2;case 2:t=r,e.label=3;case 3:return t&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then(function(e){return n._clientCertificate=e,n._clientCertificate}).catch(function(e){throw n._clientCertificate=null,e})),[2,this._clientCertificate]}})})},e}(),__extends$2=(clientCertificateHolder.default=ClientCertificateHolder,commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__awaiter$2=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$2=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__read$2=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray$1=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},__importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},connection_1$2=(Object.defineProperty(connectionProviderPooled,"__esModule",{value:!0}),connection$1),neo4j_driver_core_1$3=lib$1,authentication_provider_1=__importDefault$4(authenticationProvider),lang_1$1=lang,liveness_check_provider_1=__importDefault$4(livenessCheckProvider),client_certificate_holder_1=__importDefault$4(clientCertificateHolder),SERVICE_UNAVAILABLE$2=neo4j_driver_core_1$3.error.SERVICE_UNAVAILABLE,AUTHENTICATION_ERRORS=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],_a$3=neo4j_driver_core_1$3.internal.pool,Pool=_a$3.Pool,PoolConfig=_a$3.PoolConfig,PooledConnectionProvider=function(c){function l(e,t){var r=e.id,n=e.config,o=e.log,i=e.userAgent,a=e.boltAgent,s=e.authTokenManager,e=e.newPool,e=void 0===e?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(Pool.bind.apply(Pool,__spreadArray$1([void 0],__read$2(e),!1)))}:e,u=(void 0===t&&(t=null),c.call(this)||this);return u._id=r,u._config=n,u._log=o,u._clientCertificateHolder=new client_certificate_holder_1.default({clientCertificateProvider:u._config.clientCertificate}),u._authenticationProvider=new authentication_provider_1.default({authTokenManager:s,userAgent:i,boltAgent:a}),u._livenessCheckProvider=new liveness_check_provider_1.default({connectionLivenessCheckTimeout:n.connectionLivenessCheckTimeout}),u._userAgent=i,u._boltAgent=a,u._createChannelConnection=t||function(n){return __awaiter$2(u,void 0,void 0,function(){var t,r;return __generator$2(this,function(e){switch(e.label){case 0:return t=connection_1$2.createChannelConnection,r=[n,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,t.apply(void 0,r.concat([e.sent()]))]}})})},u._connectionPool=e({create:u._createConnection.bind(u),destroy:u._destroyConnection.bind(u),validateOnAcquire:u._validateConnectionOnAcquire.bind(u),validateOnRelease:u._validateConnectionOnRelease.bind(u),installIdleObserver:l._installIdleObserverOnConnection.bind(u),removeIdleObserver:l._removeIdleObserverOnConnection.bind(u),config:PoolConfig.fromDriverConfig(n),log:u._log}),u._openConnections={},u}return __extends$2(l,c),l.prototype._createConnectionErrorHandler=function(){return new connection_1$2.ConnectionErrorHandler(SERVICE_UNAVAILABLE$2)},l.prototype._getClientCertificate=function(){return __awaiter$2(this,void 0,void 0,function(){return __generator$2(this,function(e){return[2,this._config.clientCertificate.getClientCertificate()]})})},l.prototype._createConnection=function(e,r,n){var o=this,i=e.auth;return this._createChannelConnection(r).then(function(t){return t.release=function(){return t.idleTimestamp=Date.now(),n(r,t)},o._openConnections[t.id]=t,o._authenticationProvider.authenticate({connection:t,auth:i}).catch(function(e){throw o._destroyConnection(t),e})})},l.prototype._validateConnectionOnAcquire=function(e,r){var n=e.auth,o=e.skipReAuth;return __awaiter$2(this,void 0,void 0,function(){var t;return __generator$2(this,function(e){switch(e.label){case 0:if(!this._validateConnection(r))return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(r)];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),this._log.debug("The connection ".concat(r.id," is not alive because of an error ").concat(t.code," '").concat(t.message,"'")),[2,!1];case 4:return e.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:r,auth:n,skipReAuth:o})];case 5:return e.sent(),[2,!0];case 6:return t=e.sent(),this._log.debug("The connection ".concat(r.id," is not valid because of an error ").concat(t.code," '").concat(t.message,"'")),[2,!1];case 7:return[2]}})})},l.prototype._validateConnectionOnRelease=function(e){return!0!==e._sticky&&this._validateConnection(e)},l.prototype._validateConnection=function(e){return!!e.isOpen()&&!(this._config.maxConnectionLifetime<Date.now()-e.creationTimestamp)},l.prototype._destroyConnection=function(e){return delete this._openConnections[e.id],e.close()},l.prototype._verifyConnectivityAndGetServerVersion=function(e){var n=e.address;return __awaiter$2(this,void 0,void 0,function(){var t,r;return __generator$2(this,function(e){switch(e.label){case 0:return[4,this._connectionPool.acquire({},n)];case 1:t=e.sent(),r=new neo4j_driver_core_1$3.ServerInfo(t.server,t.protocol().version),e.label=2;case 2:return e.trys.push([2,,5,7]),t.protocol().isLastMessageLogon()?[3,4]:[4,t.resetAndFlush()];case 3:e.sent(),e.label=4;case 4:return[3,7];case 5:return[4,t.release()];case 6:return e.sent(),[7];case 7:return[2,r]}})})},l.prototype._verifyAuthentication=function(e){var a=e.getAddress,s=e.auth;return __awaiter$2(this,void 0,void 0,function(){var t,r,n,o,i;return __generator$2(this,function(e){switch(e.label){case 0:t=[],e.label=1;case 1:return e.trys.push([1,8,9,11]),[4,a()];case 2:return r=e.sent(),[4,this._connectionPool.acquire({auth:s,skipReAuth:!0},r)];case 3:if(n=e.sent(),t.push(n),o=!n.protocol().isLastMessageLogon(),n.supportsReAuth)return o&&n.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:n,auth:s,waitReAuth:!0,forceReAuth:!0})]:[3,5];throw(0,neo4j_driver_core_1$3.newError)("Driver is connected to a database that does not support user switch.");case 4:return e.sent(),[3,7];case 5:return!o||n.supportsReAuth?[3,7]:[4,this._connectionPool.acquire({auth:s},r,{requireNew:!0})];case 6:(i=e.sent())._sticky=!0,t.push(i),e.label=7;case 7:return[2,!0];case 8:if(i=e.sent(),AUTHENTICATION_ERRORS.includes(i.code))return[2,!1];throw i;case 9:return[4,Promise.all(t.map(function(e){return e.release()}))];case 10:return e.sent(),[7];case 11:return[2]}})})},l.prototype._verifyStickyConnection=function(e){var n=e.auth,o=e.connection;return e.address,__awaiter$2(this,void 0,void 0,function(){var t,r;return __generator$2(this,function(e){switch(e.label){case 0:return(t=lang_1$1.object.equals(n,o.authToken),r=!t,o._sticky=t&&!o.supportsReAuth,r||o._sticky)?[4,o.release()]:[3,2];case 1:throw e.sent(),(0,neo4j_driver_core_1$3.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},l.prototype.close=function(){return __awaiter$2(this,void 0,void 0,function(){return __generator$2(this,function(e){switch(e.label){case 0:return[4,this._connectionPool.close()];case 1:return e.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(e){return e.close()}))];case 2:return e.sent(),[2]}})})},l._installIdleObserverOnConnection=function(e,t){e._setIdle(t)},l._removeIdleObserverOnConnection=function(e){e._unsetIdle()},l.prototype._handleSecurityError=function(e,t,r){return this._authenticationProvider.handleError({connection:r,code:e.code})&&(e.retriable=!0),"Neo.ClientError.Security.AuthorizationExpired"===e.code&&this._connectionPool.apply(t,function(e){e.authToken=null}),r&&r.close().catch(function(){}),e},l}(neo4j_driver_core_1$3.ConnectionProvider),connectionProviderDirect=(connectionProviderPooled.default=PooledConnectionProvider,{}),__extends$1=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__awaiter$1=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator$1=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},connection_provider_pooled_1$1=(Object.defineProperty(connectionProviderDirect,"__esModule",{value:!0}),__importDefault$3(connectionProviderPooled)),connection_1$1=connection$1,neo4j_driver_core_1$2=lib$1,_a$2=neo4j_driver_core_1$2.internal.constants,BOLT_PROTOCOL_V3$1=_a$2.BOLT_PROTOCOL_V3,BOLT_PROTOCOL_V4_0$1=_a$2.BOLT_PROTOCOL_V4_0,BOLT_PROTOCOL_V4_4$1=_a$2.BOLT_PROTOCOL_V4_4,BOLT_PROTOCOL_V5_1$1=_a$2.BOLT_PROTOCOL_V5_1,SERVICE_UNAVAILABLE$1=neo4j_driver_core_1$2.error.SERVICE_UNAVAILABLE,DirectConnectionProvider=function(u){function e(e){var t=e.id,r=e.config,n=e.log,o=e.address,i=e.userAgent,a=e.boltAgent,s=e.authTokenManager,e=e.newPool,t=u.call(this,{id:t,config:r,log:n,userAgent:i,boltAgent:a,authTokenManager:s,newPool:e})||this;return t._address=o,t}return __extends$1(e,u),e.prototype.acquireConnection=function(e){var e=void 0===e?{}:e,o=(e.accessMode,e.database),i=(e.bookmarks,e.auth),a=e.forceReAuth;return __awaiter$1(this,void 0,void 0,function(){var t,r,n=this;return __generator$1(this,function(e){switch(e.label){case 0:return t=connection_1$1.ConnectionErrorHandler.create({errorCode:SERVICE_UNAVAILABLE$1,handleSecurityError:function(e,t,r){return n._handleSecurityError(e,t,r,o)}}),[4,this._connectionPool.acquire({auth:i,forceReAuth:a},this._address)];case 1:return(r=e.sent(),i)?[4,this._verifyStickyConnection({auth:i,connection:r,address:this._address})]:[3,3];case 2:return e.sent(),[2,r];case 3:return[2,new connection_1$1.DelegateConnection(r,t)]}})})},e.prototype._handleSecurityError=function(e,t,r,n){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(t," for database '").concat(n,"' because of an error ").concat(e.code," '").concat(e.message,"'")),u.prototype._handleSecurityError.call(this,e,t,r)},e.prototype._hasProtocolVersion=function(n){return __awaiter$1(this,void 0,void 0,function(){var t,r;return __generator$1(this,function(e){switch(e.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return t=e.sent(),r=t.protocol()?t.protocol().version:null,[4,t.close()];case 2:return e.sent(),r?[2,n(r)]:[2,!1]}})})},e.prototype.supportsMultiDb=function(){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return BOLT_PROTOCOL_V4_0$1<=e})];case 1:return[2,e.sent()]}})})},e.prototype.getNegotiatedProtocolVersion=function(){var r=this;return new Promise(function(e,t){r._hasProtocolVersion(e).catch(t)})},e.prototype.supportsTransactionConfig=function(){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return BOLT_PROTOCOL_V3$1<=e})];case 1:return[2,e.sent()]}})})},e.prototype.supportsUserImpersonation=function(){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return BOLT_PROTOCOL_V4_4$1<=e})];case 1:return[2,e.sent()]}})})},e.prototype.supportsSessionAuth=function(){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return BOLT_PROTOCOL_V5_1$1<=e})];case 1:return[2,e.sent()]}})})},e.prototype.verifyAuthentication=function(e){var r=e.auth;return __awaiter$1(this,void 0,void 0,function(){var t=this;return __generator$1(this,function(e){return[2,this._verifyAuthentication({auth:r,getAddress:function(){return t._address}})]})})},e.prototype.verifyConnectivityAndGetServerInfo=function(){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(e){switch(e.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,e.sent()]}})})},e}(connection_provider_pooled_1$1.default),connectionProviderRouting=(connectionProviderDirect.default=DirectConnectionProvider,{}),rediscovery$1={},rediscovery={},routingTable={},__read$1=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},neo4j_driver_core_1$1=(Object.defineProperty(routingTable,"__esModule",{value:!0}),routingTable.createValidRoutingTable=void 0,lib$1),_a$1=neo4j_driver_core_1$1.internal.constants,WRITE$1=_a$1.ACCESS_MODE_WRITE,READ$1=_a$1.ACCESS_MODE_READ,ServerAddress=neo4j_driver_core_1$1.internal.serverAddress.ServerAddress,PROTOCOL_ERROR=neo4j_driver_core_1$1.error.PROTOCOL_ERROR,MIN_ROUTERS=1,RoutingTable=function(){function e(e){var e=void 0===e?{}:e,t=e.database,r=e.routers,n=e.readers,o=e.writers,i=e.expirationTime,e=e.ttl;this.database=t||null,this.databaseName=t||"default database",this.routers=r||[],this.readers=n||[],this.writers=o||[],this.expirationTime=i||(0,neo4j_driver_core_1$1.int)(0),this.ttl=e}return e.fromRawRoutingTable=function(e,t,r){return createValidRoutingTable(e,t,r)},e.prototype.forget=function(e){this.readers=removeFromArray(this.readers,e),this.writers=removeFromArray(this.writers,e)},e.prototype.forgetRouter=function(e){this.routers=removeFromArray(this.routers,e)},e.prototype.forgetWriter=function(e){this.writers=removeFromArray(this.writers,e)},e.prototype.isStaleFor=function(e){return this.expirationTime.lessThan(Date.now())||this.routers.length<MIN_ROUTERS||e===READ$1&&0===this.readers.length||e===WRITE$1&&0===this.writers.length},e.prototype.isExpiredFor=function(e){return this.expirationTime.add(e).lessThan(Date.now())},e.prototype.allServers=function(){return __spreadArray(__spreadArray(__spreadArray([],__read$1(this.routers),!1),__read$1(this.readers),!1),__read$1(this.writers),!1)},e.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},e}();function removeFromArray(e,t){return e.filter(function(e){return e.asKey()!==t.asKey()})}function createValidRoutingTable(e,t,r){var n=r.ttl,o=calculateExpirationTime(r,t),i=parseServers(r,t),a=i.routers,s=i.readers,i=i.writers;return assertNonEmpty(a,"routers",t),assertNonEmpty(s,"readers",t),new RoutingTable({database:e||r.db,routers:a,readers:s,writers:i,expirationTime:o,ttl:n})}function parseServers(t,r){try{var n=[],o=[],i=[];return t.servers.forEach(function(e){var t=e.role,e=e.addresses;"ROUTE"===t?n=parseArray(e).map(function(e){return ServerAddress.fromUrl(e)}):"WRITE"===t?i=parseArray(e).map(function(e){return ServerAddress.fromUrl(e)}):"READ"===t&&(o=parseArray(e).map(function(e){return ServerAddress.fromUrl(e)}))}),{routers:n,readers:o,writers:i}}catch(e){throw(0,neo4j_driver_core_1$1.newError)("Unable to parse servers entry from router ".concat(r," from addresses:\n").concat(neo4j_driver_core_1$1.json.stringify(t.servers),"\nError message: ").concat(e.message),PROTOCOL_ERROR)}}function calculateExpirationTime(t,r){try{var e=(0,neo4j_driver_core_1$1.int)(Date.now()),n=(0,neo4j_driver_core_1$1.int)(t.ttl).multiply(1e3).add(e);return n.lessThan(e)?neo4j_driver_core_1$1.Integer.MAX_VALUE:n}catch(e){throw(0,neo4j_driver_core_1$1.newError)("Unable to parse TTL entry from router ".concat(r," from raw routing table:\n").concat(neo4j_driver_core_1$1.json.stringify(t),"\nError message: ").concat(e.message),PROTOCOL_ERROR)}}function assertNonEmpty(e,t,r){if(0===e.length)throw(0,neo4j_driver_core_1$1.newError)("Received no "+t+" from router "+r,PROTOCOL_ERROR)}function parseArray(e){if(Array.isArray(e))return Array.from(e);throw new TypeError("Array expected but got: "+e)}routingTable.default=RoutingTable,routingTable.createValidRoutingTable=createValidRoutingTable;var __importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},routing_table_1$1=(Object.defineProperty(rediscovery,"__esModule",{value:!0}),__importDefault$2(routingTable)),Rediscovery=function(){function e(e){this._routingContext=e}return e.prototype.lookupRoutingTableOnRouter=function(t,r,n,o){var i=this;return t._acquireConnection(function(e){return i._requestRawRoutingTable(e,t,r,n,o).then(function(e){return e.isNull?null:routing_table_1$1.default.fromRawRoutingTable(r,n,e)})})},e.prototype._requestRawRoutingTable=function(r,n,o,e,i){var a=this;return new Promise(function(e,t){r.protocol().requestRoutingInformation({routingContext:a._routingContext,databaseName:o,impersonatedUser:i,sessionContext:{bookmarks:n._lastBookmarks,mode:n._mode,database:n._database,afterComplete:n._onComplete},onCompleted:e,onError:t})})},e}(),__importDefault$1=(rediscovery.default=Rediscovery,commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}}),rediscovery_1$1=(Object.defineProperty(rediscovery$1,"__esModule",{value:!0}),rediscovery$1.RoutingTable=rediscovery$1.Rediscovery=void 0,__importDefault$1(rediscovery)),routing_table_1=(rediscovery$1.Rediscovery=rediscovery_1$1.default,__importDefault$1(routingTable)),__extends=(rediscovery$1.RoutingTable=routing_table_1.default,rediscovery$1.default=rediscovery_1$1.default,commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),__assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t},__awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},__generator=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__values=commonjsGlobal&&commonjsGlobal.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=commonjsGlobal&&commonjsGlobal.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},neo4j_driver_core_1=(Object.defineProperty(connectionProviderRouting,"__esModule",{value:!0}),lib$1),rediscovery_1=__importStar(rediscovery$1),channel_1=channel,connection_provider_single_1=__importDefault(connectionProviderSingle),connection_provider_pooled_1=__importDefault(connectionProviderPooled),load_balancing_1=loadBalancing,connection_1=connection$1,lang_1=lang,SERVICE_UNAVAILABLE=neo4j_driver_core_1.error.SERVICE_UNAVAILABLE,SESSION_EXPIRED=neo4j_driver_core_1.error.SESSION_EXPIRED,Bookmarks=neo4j_driver_core_1.internal.bookmarks.Bookmarks,_a=neo4j_driver_core_1.internal.constants,READ=_a.ACCESS_MODE_READ,WRITE=_a.ACCESS_MODE_WRITE,BOLT_PROTOCOL_V3=_a.BOLT_PROTOCOL_V3,BOLT_PROTOCOL_V4_0=_a.BOLT_PROTOCOL_V4_0,BOLT_PROTOCOL_V4_4=_a.BOLT_PROTOCOL_V4_4,BOLT_PROTOCOL_V5_1=_a.BOLT_PROTOCOL_V5_1,PROCEDURE_NOT_FOUND_CODE="Neo.ClientError.Procedure.ProcedureNotFound",DATABASE_NOT_FOUND_CODE="Neo.ClientError.Database.DatabaseNotFound",INVALID_BOOKMARK_CODE="Neo.ClientError.Transaction.InvalidBookmark",INVALID_BOOKMARK_MIXTURE_CODE="Neo.ClientError.Transaction.InvalidBookmarkMixture",AUTHORIZATION_EXPIRED_CODE="Neo.ClientError.Security.AuthorizationExpired",INVALID_ARGUMENT_ERROR="Neo.ClientError.Statement.ArgumentError",INVALID_REQUEST_ERROR="Neo.ClientError.Request.Invalid",STATEMENT_TYPE_ERROR="Neo.ClientError.Statement.TypeError",NOT_AVAILABLE="N/A",SYSTEM_DB_NAME="system",DEFAULT_DB_NAME=null,DEFAULT_ROUTING_TABLE_PURGE_DELAY=(0,neo4j_driver_core_1.int)(3e4),RoutingConnectionProvider=function(_){function p(e){var t=e.id,r=e.address,n=e.routingContext,o=e.hostNameResolver,i=e.config,a=e.log,s=e.userAgent,u=e.boltAgent,c=e.authTokenManager,l=e.routingTablePurgeDelay,e=e.newPool,f=_.call(this,{id:t,config:i,log:a,userAgent:s,boltAgent:u,authTokenManager:c,newPool:e},function(n){return __awaiter(f,void 0,void 0,function(){var t,r;return __generator(this,function(e){switch(e.label){case 0:return t=connection_1.createChannelConnection,r=[n,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,t.apply(void 0,r.concat([e.sent(),this._routingContext,this._channelSsrCallback.bind(this)]))]}})})})||this;return f._routingContext=__assign(__assign({},n),{address:r.toString()}),f._seedRouter=r,f._rediscovery=new rediscovery_1.default(f._routingContext),f._loadBalancingStrategy=new load_balancing_1.LeastConnectedLoadBalancingStrategy(f._connectionPool),f._hostNameResolver=o,f._dnsResolver=new channel_1.HostNameResolver,f._log=a,f._useSeedRouter=!0,f._routingTableRegistry=new RoutingTableRegistry(l?(0,neo4j_driver_core_1.int)(l):DEFAULT_ROUTING_TABLE_PURGE_DELAY),f._refreshRoutingTable=lang_1.functional.reuseOngoingRequest(f._refreshRoutingTable,f),f._withSSR=0,f._withoutSSR=0,f}return __extends(p,_),p.prototype._createConnectionErrorHandler=function(){return new connection_1.ConnectionErrorHandler(SESSION_EXPIRED)},p.prototype._handleUnavailability=function(e,t,r){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(t," for database '").concat(r,"' because of an error ").concat(e.code," '").concat(e.message,"'")),this.forget(t,r||DEFAULT_DB_NAME),e},p.prototype._handleSecurityError=function(e,t,r,n){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(t," for database '").concat(n,"' because of an error ").concat(e.code," '").concat(e.message,"'")),_.prototype._handleSecurityError.call(this,e,t,r,n)},p.prototype._handleWriteFailure=function(e,t,r){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(t," for database '").concat(r,"' because of an error ").concat(e.code," '").concat(e.message,"'")),this.forgetWriter(t,r||DEFAULT_DB_NAME),(0,neo4j_driver_core_1.newError)("No longer possible to write to server at "+t,SESSION_EXPIRED,e)},p.prototype.acquireConnection=function(e){var e=void 0===e?{}:e,a=e.accessMode,s=e.database,u=e.bookmarks,c=e.impersonatedUser,l=e.onDatabaseNameResolved,f=e.auth,_=e.homeDb;return __awaiter(this,void 0,void 0,function(){var n,t,r,o,i=this;return __generator(this,function(e){switch(e.label){case 0:return(n={database:s||DEFAULT_DB_NAME},t=new connection_1.ConnectionErrorHandler(SESSION_EXPIRED,function(e,t){return i._handleUnavailability(e,t,n.database)},function(e,t){return i._handleWriteFailure(e,t,null!=_?_:n.database)},function(e,t,r){return i._handleSecurityError(e,t,r,n.database)}),this.SSREnabled()&&void 0!==_&&""===s)?!(r=this._routingTableRegistry.get(_,function(){return new rediscovery_1.RoutingTable({database:_})}))||r.isStaleFor(a)?[3,2]:[4,this.getConnectionFromRoutingTable(r,f,a,t)]:[3,2];case 1:if(r=e.sent(),this.SSREnabled())return[2,r];r.release(),e.label=2;case 2:return[4,this._freshRoutingTable({accessMode:a,database:n.database,bookmarks:u,impersonatedUser:c,auth:f,onDatabaseNameResolved:function(e){n.database=n.database||e,l&&l(e)}})];case 3:return o=e.sent(),[2,this.getConnectionFromRoutingTable(o,f,a,t)]}})})},p.prototype.getConnectionFromRoutingTable=function(i,a,s,u){return __awaiter(this,void 0,void 0,function(){var t,r,n,o;return __generator(this,function(e){switch(e.label){case 0:if(s===READ)r=this._loadBalancingStrategy.selectReader(i.readers),t="read";else{if(s!==WRITE)throw(0,neo4j_driver_core_1.newError)("Illegal mode "+s);r=this._loadBalancingStrategy.selectWriter(i.writers),t="write"}if(!r)throw(0,neo4j_driver_core_1.newError)("Failed to obtain connection towards ".concat(t," server. Known routing table is: ").concat(i),SESSION_EXPIRED);e.label=1;case 1:return e.trys.push([1,5,,6]),[4,this._connectionPool.acquire({auth:a},r)];case 2:return(n=e.sent(),a)?[4,this._verifyStickyConnection({auth:a,connection:n,address:r})]:[3,4];case 3:return e.sent(),[2,n];case 4:return[2,new connection_1.DelegateConnection(n,u)];case 5:throw o=e.sent(),u.handleAndTransformError(o,r);case 6:return[2]}})})},p.prototype._hasProtocolVersion=function(a){return __awaiter(this,void 0,void 0,function(){var t,r,n,o,i;return __generator(this,function(e){switch(e.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:t=e.sent(),n=0,e.label=2;case 2:if(!(n<t.length))return[3,8];e.label=3;case 3:return e.trys.push([3,6,,7]),[4,this._createChannelConnection(t[n])];case 4:return i=e.sent(),o=i.protocol()?i.protocol().version:null,[4,i.close()];case 5:return e.sent(),o?[2,a(o)]:[2,!1];case 6:return i=e.sent(),r=i,[3,7];case 7:return n++,[3,2];case 8:if(r)throw r;return[2,!1]}})})},p.prototype.supportsMultiDb=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return BOLT_PROTOCOL_V4_0<=e})];case 1:return[2,e.sent()]}})})},p.prototype.supportsTransactionConfig=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return BOLT_PROTOCOL_V3<=e})];case 1:return[2,e.sent()]}})})},p.prototype.supportsUserImpersonation=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return BOLT_PROTOCOL_V4_4<=e})];case 1:return[2,e.sent()]}})})},p.prototype.supportsSessionAuth=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return BOLT_PROTOCOL_V5_1<=e})];case 1:return[2,e.sent()]}})})},p.prototype.getNegotiatedProtocolVersion=function(){var r=this;return new Promise(function(e,t){r._hasProtocolVersion(e).catch(t)})},p.prototype.verifyAuthentication=function(e){var n=e.database,o=e.accessMode,i=e.auth;return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(e){return[2,this._verifyAuthentication({auth:i,getAddress:function(){return __awaiter(t,void 0,void 0,function(){var t,r;return __generator(this,function(e){switch(e.label){case 0:return t={database:n||DEFAULT_DB_NAME},[4,this._freshRoutingTable({accessMode:o,database:t.database,auth:i,onDatabaseNameResolved:function(e){t.database=t.database||e}})];case 1:if(r=e.sent(),0===(r=o===WRITE?r.writers:r.readers).length)throw(0,neo4j_driver_core_1.newError)("No servers available for database '".concat(t.database,"' with access mode '").concat(o,"'"),SERVICE_UNAVAILABLE);return[2,r[0]]}})})}})]})})},p.prototype.verifyConnectivityAndGetServerInfo=function(e){var l=e.database,f=e.accessMode;return __awaiter(this,void 0,void 0,function(){var t,r,n,o,i,a,s,u,c;return __generator(this,function(e){switch(e.label){case 0:return t={database:l||DEFAULT_DB_NAME},[4,this._freshRoutingTable({accessMode:f,database:t.database,onDatabaseNameResolved:function(e){t.database=t.database||e}})];case 1:r=e.sent(),r=f===WRITE?r.writers:r.readers,n=(0,neo4j_driver_core_1.newError)("No servers available for database '".concat(t.database,"' with access mode '").concat(f,"'"),SERVICE_UNAVAILABLE),e.label=2;case 2:e.trys.push([2,9,10,11]),o=__values(r),i=o.next(),e.label=3;case 3:if(i.done)return[3,8];a=i.value,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:a})];case 5:return[2,e.sent()];case 6:return s=e.sent(),n=s,[3,7];case 7:return i=o.next(),[3,3];case 8:return[3,11];case 9:return s=e.sent(),u={error:s},[3,11];case 10:try{i&&!i.done&&(c=o.return)&&c.call(o)}finally{if(u)throw u.error}return[7];case 11:throw n}})})},p.prototype.forget=function(t,e){this._routingTableRegistry.apply(e,{applyWhenExists:function(e){return e.forget(t)}}),this._connectionPool.purge(t).catch(function(){})},p.prototype.forgetWriter=function(t,e){this._routingTableRegistry.apply(e,{applyWhenExists:function(e){return e.forgetWriter(t)}})},p.prototype._freshRoutingTable=function(e){var e=void 0===e?{}:e,t=e.accessMode,r=e.database,n=e.bookmarks,o=e.impersonatedUser,i=e.onDatabaseNameResolved,e=e.auth,a=this._routingTableRegistry.get(r,function(){return new rediscovery_1.RoutingTable({database:r})});return a.isStaleFor(t)?(this._log.info('Routing table is stale for database: "'.concat(r,'" and access mode: "').concat(t,'": ').concat(a)),this._refreshRoutingTable(a,n,o,e).then(function(e){return i(e.database),e})):a},p.prototype._refreshRoutingTable=function(e,t,r,n){var o=e.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(o,e,t,r,n):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(o,e,t,r,n)},p.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(a,s,u,c,l){return __awaiter(this,void 0,void 0,function(){var t,r,n,o,i;return __generator(this,function(e){switch(e.label){case 0:return t=[],[4,this._fetchRoutingTableUsingSeedRouter(t,this._seedRouter,s,u,c,l)];case 1:return(t=__read.apply(void 0,[e.sent(),2]),r=t[0],n=t[1],r)?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(a,s,u,c,l)];case 3:i=__read.apply(void 0,[e.sent(),2]),o=i[0],i=i[1],r=o,n=i||n,e.label=4;case 4:return[4,this._applyRoutingTableIfPossible(s,r,n)];case 5:return[2,e.sent()]}})})},p.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(o,i,a,s,u){return __awaiter(this,void 0,void 0,function(){var t,r,n;return __generator(this,function(e){switch(e.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(o,i,a,s,u)];case 1:return r=__read.apply(void 0,[e.sent(),2]),t=r[0],r=r[1],t?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(o,this._seedRouter,i,a,s,u)];case 2:n=__read.apply(void 0,[e.sent(),2]),t=n[0],r=n[1],e.label=3;case 3:return[4,this._applyRoutingTableIfPossible(i,t,r)];case 4:return[2,e.sent()]}})})},p.prototype._fetchRoutingTableUsingKnownRouters=function(n,o,i,a,s){return __awaiter(this,void 0,void 0,function(){var t,r;return __generator(this,function(e){switch(e.label){case 0:return[4,this._fetchRoutingTable(n,o,i,a,s)];case 1:return(t=__read.apply(void 0,[e.sent(),2]),r=t[0],t=t[1],r)?[2,[r,null]]:(r=n.length-1,p._forgetRouter(o,n,r),[2,[null,t]])}})})},p.prototype._fetchRoutingTableUsingSeedRouter=function(r,n,o,i,a,s){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return t=e.sent(),t=t.filter(function(e){return r.indexOf(e)<0}),[4,this._fetchRoutingTable(t,o,i,a,s)];case 2:return[2,e.sent()]}})})},p.prototype._resolveSeedRouter=function(n){return __awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(e){switch(e.label){case 0:return[4,this._hostNameResolver.resolve(n)];case 1:return t=e.sent(),[4,Promise.all(t.map(function(e){return r._dnsResolver.resolve(e)}))];case 2:return t=e.sent(),[2,[].concat.apply([],t)]}})})},p.prototype._fetchRoutingTable=function(u,c,l,f,_){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(e){return[2,u.reduce(function(i,a,s){return __awaiter(t,void 0,void 0,function(){var t,r,n,o;return __generator(this,function(e){switch(e.label){case 0:return[4,i];case 1:return(t=__read.apply(void 0,[e.sent(),1]),t=t[0])?[2,[t,null]]:(p._forgetRouter(c,u,s-1),[4,this._createSessionForRediscovery(a,l,f,_)]);case 2:if(t=__read.apply(void 0,[e.sent(),2]),r=t[0],n=t[1],!r)return[3,8];e.label=3;case 3:return e.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(r,c.database,a,f)];case 4:return[2,[e.sent(),null]];case 5:return o=e.sent(),[2,this._handleRediscoveryError(o,a)];case 6:return r.close(),[7];case 7:return[3,9];case 8:return[2,[null,n]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},p.prototype._createSessionForRediscovery=function(o,i,a,s){return __awaiter(this,void 0,void 0,function(){var t,r,n=this;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:s},o)];case 1:return(t=e.sent(),s)?[4,this._verifyStickyConnection({auth:s,connection:t,address:o})]:[3,3];case 2:e.sent(),e.label=3;case 3:return r=connection_1.ConnectionErrorHandler.create({errorCode:SESSION_EXPIRED,handleSecurityError:function(e,t,r){return n._handleSecurityError(e,t,r)}}),r=t._sticky?new connection_1.DelegateConnection(t):new connection_1.DelegateConnection(t,r),r=new connection_provider_single_1.default(r),t.protocol().version<4?[2,[new neo4j_driver_core_1.Session({mode:WRITE,bookmarks:Bookmarks.empty(),connectionProvider:r}),null]]:[2,[new neo4j_driver_core_1.Session({mode:READ,database:SYSTEM_DB_NAME,bookmarks:i,connectionProvider:r,impersonatedUser:a}),null]];case 4:return r=e.sent(),[2,this._handleRediscoveryError(r,o)];case 5:return[2]}})})},p.prototype._handleRediscoveryError=function(e,t){if(_isFailFastError(e)||_isFailFastSecurityError(e))throw e;if(e.code===PROCEDURE_NOT_FOUND_CODE)throw(0,neo4j_driver_core_1.newError)("Server at ".concat(t.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),SERVICE_UNAVAILABLE,e);return this._log.warn("unable to fetch routing table because of an error ".concat(e)),[null,e]},p.prototype._applyRoutingTableIfPossible=function(t,r,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(r)return 0===r.writers.length&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(r)];throw(0,neo4j_driver_core_1.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(t),SERVICE_UNAVAILABLE,n);case 1:return e.sent(),[2,r]}})})},p.prototype._updateRoutingTable=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this._connectionPool.keepAll(t.allServers())];case 1:return e.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(t),this._log.info("Updated routing table ".concat(t)),[2]}})})},p._forgetRouter=function(e,t,r){t=t[r];e&&t&&e.forgetRouter(t)},p.prototype._channelSsrCallback=function(e,t){if("OPEN"===t)!0===e?this._withSSR=this._withSSR+1:this._withoutSSR=this._withoutSSR+1;else{if("CLOSE"!==t)throw(0,neo4j_driver_core_1.newError)("Channel SSR Callback invoked with action other than 'OPEN' or 'CLOSE'");!0===e?this._withSSR=this._withSSR-1:this._withoutSSR=this._withoutSSR-1}},p.prototype.SSREnabled=function(){return 0<this._withSSR&&0===this._withoutSSR},p}(connection_provider_pooled_1.default),RoutingTableRegistry=(connectionProviderRouting.default=RoutingConnectionProvider,function(){function e(e){this._tables=new Map,this._routingTablePurgeDelay=e}return e.prototype.register=function(e){return this._tables.set(e.database,e),this},e.prototype.apply=function(e,t){var t=void 0===t?{}:t,r=t.applyWhenExists,t=t.applyWhenDontExists,t=void 0===t?function(){}:t;return this._tables.has(e)?r(this._tables.get(e)):"string"==typeof e||null===e?t():this._forEach(r),this},e.prototype.get=function(e,t){return this._tables.has(e)?this._tables.get(e):"function"==typeof t?t():t},e.prototype.removeExpired=function(){var t=this;return this._removeIf(function(e){return e.isExpiredFor(t._routingTablePurgeDelay)})},e.prototype._forEach=function(e){var t,r;try{for(var n=__values(this._tables),o=n.next();!o.done;o=n.next())e(__read(o.value,2)[1])}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return this},e.prototype._remove=function(e){return this._tables.delete(e),this},e.prototype._removeIf=function(e){var t,r;try{for(var n=__values(this._tables),o=n.next();!o.done;o=n.next()){var i=__read(o.value,2),a=i[0];e(i[1])&&this._remove(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return this},e}());function _isFailFastError(e){return[DATABASE_NOT_FOUND_CODE,INVALID_BOOKMARK_CODE,INVALID_BOOKMARK_MIXTURE_CODE,INVALID_ARGUMENT_ERROR,INVALID_REQUEST_ERROR,STATEMENT_TYPE_ERROR,NOT_AVAILABLE].includes(e.code)}function _isFailFastSecurityError(e){var t;return(null==(t=e.code)?void 0:t.startsWith("Neo.ClientError.Security."))&&![AUTHORIZATION_EXPIRED_CODE].includes(e.code)}!function(e){var t=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=(Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingConnectionProvider=e.DirectConnectionProvider=e.PooledConnectionProvider=e.SingleConnectionProvider=void 0,connectionProviderSingle),n=(Object.defineProperty(e,"SingleConnectionProvider",{enumerable:!0,get:function(){return t(r).default}}),connectionProviderPooled),o=(Object.defineProperty(e,"PooledConnectionProvider",{enumerable:!0,get:function(){return t(n).default}}),connectionProviderDirect),i=(Object.defineProperty(e,"DirectConnectionProvider",{enumerable:!0,get:function(){return t(o).default}}),connectionProviderRouting);Object.defineProperty(e,"RoutingConnectionProvider",{enumerable:!0,get:function(){return t(i).default}})}(connectionProvider),function(e){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),t=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},r=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.packstream=e.channel=e.buf=e.bolt=e.loadBalancing=void 0,e.loadBalancing=t(loadBalancing),e.bolt=t(bolt),e.buf=t(buf),e.channel=t(channel),e.packstream=t(packstream),r(connectionProvider,e)}(lib),function(e){var t=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})},o=commonjsGlobal&&commonjsGlobal.__generator||function(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},c=(Object.defineProperty(e,"__esModule",{value:!0}),e.UnboundRelationship=e.Relationship=e.Node=e.Record=e.ServerInfo=e.GqlStatusObject=e.Notification=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ResultSummary=e.RxResult=e.RxManagedTransaction=e.RxTransaction=e.RxSession=e.EagerResult=e.Result=e.ManagedTransaction=e.Transaction=e.Session=e.Driver=e.temporal=e.spatial=e.graph=e.error=e.routing=e.session=e.types=e.logging=e.auth=e.isRetriableError=e.Neo4jError=e.integer=e.isUnboundRelationship=e.isRelationship=e.isPathSegment=e.isPath=e.isNode=e.isDateTime=e.isLocalDateTime=e.isDate=e.isTime=e.isLocalTime=e.isDuration=e.isPoint=e.isInt=e.int=e.hasReachableServer=e.driver=e.authTokenManagers=void 0,e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.bookmarkManager=e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=e.Integer=e.Point=e.PathSegment=e.Path=void 0,driver$1),l=(Object.defineProperty(e,"Driver",{enumerable:!0,get:function(){return c.Driver}}),r(version$1)),f=lib$1,_=(Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return f.authTokenManagers}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return f.Neo4jError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return f.isRetriableError}}),Object.defineProperty(e,"error",{enumerable:!0,get:function(){return f.error}}),Object.defineProperty(e,"Integer",{enumerable:!0,get:function(){return f.Integer}}),Object.defineProperty(e,"int",{enumerable:!0,get:function(){return f.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return f.isInt}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return f.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return f.Point}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return f.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return f.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return f.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return f.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return f.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return f.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return f.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return f.isLocalTime}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return f.isNode}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return f.isPath}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return f.isPathSegment}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return f.isRelationship}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return f.isTime}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return f.isUnboundRelationship}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return f.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return f.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return f.Time}}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return f.Node}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return f.Path}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return f.PathSegment}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return f.Relationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return f.UnboundRelationship}}),Object.defineProperty(e,"Record",{enumerable:!0,get:function(){return f.Record}}),Object.defineProperty(e,"ResultSummary",{enumerable:!0,get:function(){return f.ResultSummary}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return f.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return f.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return f.QueryStatistics}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return f.Notification}}),Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return f.GqlStatusObject}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return f.ServerInfo}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return f.Result}}),Object.defineProperty(e,"EagerResult",{enumerable:!0,get:function(){return f.EagerResult}}),Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return f.auth}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return f.Session}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return f.Transaction}}),Object.defineProperty(e,"ManagedTransaction",{enumerable:!0,get:function(){return f.ManagedTransaction}}),Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return f.bookmarkManager}}),Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return f.routing}}),Object.defineProperty(e,"resultTransformers",{enumerable:!0,get:function(){return f.resultTransformers}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return f.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return f.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return f.notificationSeverityLevel}}),Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return f.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return f.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return f.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return f.clientCertificateProviders}}),lib),n=r(sessionRx),i=(e.RxSession=n.default,r(transactionRx)),a=(e.RxTransaction=i.default,r(transactionManagedRx)),r=(e.RxManagedTransaction=a.default,r(resultRx)),s=(e.RxResult=r.default,f.internal.util),p=s.ENCRYPTION_ON,d=s.assertString,b=s.isEmptyObjectOrNull,m=f.internal.serverAddress.ServerAddress,h=f.internal.urlUtil,y="neo4j-javascript/"+l.default;function u(e,t,r){void 0===r&&(r={}),d(e,"Bolt URL");var n,o=h.parseDatabaseUrl(e),i=!1,a=!1;switch(o.scheme){case"bolt":break;case"bolt+s":a=!0,n="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":a=!0,n="TRUST_ALL_CERTIFICATES";break;case"neo4j":i=!0;break;case"neo4j+s":n="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",i=a=!0;break;case"neo4j+ssc":n="TRUST_ALL_CERTIFICATES",i=a=!0;break;default:throw new Error("Unknown scheme: ".concat(o.scheme))}if(a){if("encrypted"in r||"trust"in r)throw new Error("Encryption/trust can only be configured either through URL or config, not both");r.encrypted=p,r.trust=n,r.clientCertificate=(0,f.resolveCertificateProvider)(r.clientCertificate)}var s=function(e){if("object"==typeof(t=e)&&null!=t&&"getToken"in t&&"handleSecurityException"in t&&"function"==typeof t.getToken&&"function"==typeof t.handleSecurityException)return e;var t=e;return(t=t||{}).scheme=t.scheme||"none",(0,f.staticAuthTokenManager)({authToken:t})}(t),u=(r.userAgent=r.userAgent||y,r.boltAgent=f.internal.boltAgent.fromVersion(l.default),m.fromUrl(o.hostAndPort)),t={address:u,typename:i?"Routing":"Direct",routing:i};return new c.Driver(t,r,function(){{if(i)return function(e,t,r,n){return new _.RoutingConnectionProvider({id:e,config:t,log:r,hostNameResolver:n,authTokenManager:s,address:u,userAgent:t.userAgent,boltAgent:t.boltAgent,routingContext:o.query})};if(b(o.query))return function(e,t,r){return new _.DirectConnectionProvider({id:e,config:t,log:r,authTokenManager:s,address:u,userAgent:t.userAgent,boltAgent:t.boltAgent})};throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(e,"'"))}}())}function v(r,n){return t(this,void 0,void 0,function(){var t;return o(this,function(e){switch(e.label){case 0:t=u(r,{scheme:"none",principal:"",credentials:""},n),e.label=1;case 1:return e.trys.push([1,,3,5]),[4,t.getNegotiatedProtocolVersion()];case 2:return e.sent(),[2,!0];case 3:return[4,t.close()];case 4:return e.sent(),[7];case 5:return[2]}})})}e.driver=u,e.hasReachableServer=v;var s={console:function(e){return{level:e,logger:function(e,t){return console.log("".concat(commonjsGlobal.Date.now()," ").concat(e.toUpperCase()," ").concat(t))}}}},g=(e.logging=s,{Node:f.Node,Relationship:f.Relationship,UnboundRelationship:f.UnboundRelationship,PathSegment:f.PathSegment,Path:f.Path,Result:f.Result,EagerResult:f.EagerResult,ResultSummary:f.ResultSummary,Record:f.Record,Point:f.Point,Date:f.Date,DateTime:f.DateTime,Duration:f.Duration,LocalDateTime:f.LocalDateTime,LocalTime:f.LocalTime,Time:f.Time,Integer:f.Integer}),$=(e.types=g,{READ:c.READ,WRITE:c.WRITE}),O=(e.session=$,{toNumber:f.toNumber,toString:f.toString,inSafeRange:f.inSafeRange}),E=(e.integer=O,{isPoint:f.isPoint}),T=(e.spatial=E,{isDuration:f.isDuration,isLocalTime:f.isLocalTime,isTime:f.isTime,isDate:f.isDate,isLocalDateTime:f.isLocalDateTime,isDateTime:f.isDateTime}),S=(e.temporal=T,{isNode:f.isNode,isPath:f.isPath,isPathSegment:f.isPathSegment,isRelationship:f.isRelationship,isUnboundRelationship:f.isUnboundRelationship}),O=(e.graph=S,{authTokenManagers:f.authTokenManagers,driver:u,hasReachableServer:v,int:f.int,isInt:f.isInt,isPoint:f.isPoint,isDuration:f.isDuration,isLocalTime:f.isLocalTime,isTime:f.isTime,isDate:f.isDate,isLocalDateTime:f.isLocalDateTime,isDateTime:f.isDateTime,isNode:f.isNode,isPath:f.isPath,isPathSegment:f.isPathSegment,isRelationship:f.isRelationship,isUnboundRelationship:f.isUnboundRelationship,integer:O,Neo4jError:f.Neo4jError,isRetriableError:f.isRetriableError,auth:f.auth,logging:s,types:g,session:$,routing:f.routing,error:f.error,graph:S,spatial:E,temporal:T,Driver:c.Driver,Session:f.Session,Transaction:f.Transaction,ManagedTransaction:f.ManagedTransaction,Result:f.Result,EagerResult:f.EagerResult,RxSession:n.default,RxTransaction:i.default,RxManagedTransaction:a.default,RxResult:r.default,ResultSummary:f.ResultSummary,Plan:f.Plan,ProfiledPlan:f.ProfiledPlan,QueryStatistics:f.QueryStatistics,Notification:f.Notification,GqlStatusObject:f.GqlStatusObject,ServerInfo:f.ServerInfo,Record:f.Record,Node:f.Node,Relationship:f.Relationship,UnboundRelationship:f.UnboundRelationship,Path:f.Path,PathSegment:f.PathSegment,Point:f.Point,Integer:f.Integer,Duration:f.Duration,LocalTime:f.LocalTime,Time:f.Time,Date:f.Date,LocalDateTime:f.LocalDateTime,DateTime:f.DateTime,bookmarkManager:f.bookmarkManager,resultTransformers:f.resultTransformers,notificationCategory:f.notificationCategory,notificationSeverityLevel:f.notificationSeverityLevel,notificationFilterDisabledCategory:f.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:f.notificationFilterMinimumSeverityLevel,clientCertificateProviders:f.clientCertificateProviders});e.default=O}(lib$2);var index=getDefaultExportFromCjs(lib$2);export{index as default};